<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Cone for Reddit</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/main.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body id="body_pres">

    <div class="container">
        <!-- Main content -->
        <section class="row">
            <!--  Should not be visible-->
            <div class='wrapper'>
              <canvas hidden id="textureCanvas" width="256" height="64" style="border: 1px solid black" >
                Your browser doesn't appear to support the HTML5.</canvas>
            </div>

            <div class='col-sm-5' id='div_canvas'>
                <div class="canvas-wrapper">
                    <canvas id="glcanvas" width="666" height="1000"  tabindex="1">
                        Your browser doesn't appear to support the HTML5 <code>&lt;canvas&gt;</code> element.</canvas>
                </div>
            </div>

            <div class='col-sm-7'>
                <div class="title">
                    <h1>Cone for Reddit</h1>
                    <p class="lead">An interative 3D visualization of Reddit comments</p>
                </div>
                <div id="democontent">
                    <!-- Home -->
                    <p class="tutorial">
                        <span class="label label-default">
                            <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
                        </span>
                        &nbsp;
                        <span class="label label-default">
                            <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
                        </span>
                        &nbsp;
                        Use left and right arrow keys to <strong>turn the view</strong>.
                    <br />
                        <span class="label label-default">
                            <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                        </span>
                        &nbsp;
                        <span class="label label-default">
                            <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                        </span>
                        &nbsp;
                        Use up and down arrow keys to <strong>zoom into the view</strong>: From subreddits to posts and down into comments.
                    <br />
                        <span class="label label-default">
                            <span class="glyphicon glyphicon-hand-up" aria-hidden="true"></span>
                        </span>
                        &nbsp;
                        You can also use your mouse to click entries you want to navigate to.
                    </p>

                    <p>We have chosen to include our own selection of subreddits that we think are interesting to browse:</p>

                    <ul class="my_list">
                        <li><strong>AskReddit:</strong>
                            Questions that elicit thought-provoking discussions, as well as some lighter questions which will hopefully entertain.
                        </li>
                        <li><strong>AskHistorians:</strong>
                            Serious, academic-level answers to questions about history.
                        </li>
                        <li><strong>AskScience:</strong>
                            A forum for science questions and scientific answers.
                        </li>
                        <li><strong>DataIsBeautiful:</strong>
                            Data visualizations of all kinds.
                        </li>
                        <li><strong>lifeprotips:</strong>
                            Tips that improve your life in a meaningful way.
                        </li>
                        <li><strong>TrueReddit:</strong>
                            A subreddit for really great, insightful articles and intelligent discussion.
                        </li>
                        <li><strong>FoodForThought:</strong>
                            Intelligent and thought-provoking commentaries on life and culture.
                        </li>
                        <li><strong>IamA:</strong>
                            Interviews with interesting people that can be asked <em>anything</em> by the Reddit community.
                        </li>
                        <li><strong>InterestingAsFuck:</strong>
                            A place to share (almost) anything and everything interesting.
                        </li>
                    </ul>

                    <!-- Subreddit -->
                    <!-- <h4>George RR Martin: Game of Thrones characters die because 'it has to be done' - The Song of Ice and Fire writer has told an interviewer itâ€™s dishonest not to show how war kills heroes as easily as minor characters
                        <small>(theguardian.com)</small>
                    </h4> -->

                    <!-- Post -->

                    <!-- Thread -->
                </div>
            </div>
        </section>
        <div class="shape_deco">
            <img src="shape.png" />
        </div>


        <!-- About section -->
        <section class="row" id="about">
            <div class="col-sm-12">
                <h2>About this project</h2>
            </div>
            <div class="col-sm-4">
                <h3>Who made this?</h3>
                <p><a href="http://symbolian.net/">Symbolian</a> is a company from Berlin that builds tools for knowledge management. This app is a showcase for ConeCanvas, a 3D visualization and ordering-tool for any kind of hierarchical data that we developed.</p>
                <p>While the data from Reddit in this example is static, <a href="http://symbolian.net/product/">ConeCanvas</a> can also be used to edit and re-order datasets. </p>
            </div>
            <div class="col-sm-4">
                <h3>How did you do it?</h3>
                <p>Post and comment data is loaded into ConeCanvas from the <a href="https://www.reddit.com/dev/api">Reddit API</a> using the <a href="https://hackage.haskell.org/package/reddit-0.2.0.0">Haskell reddit package</a>. ConeCanvas renders the cone tree using Symbolian's <a href="https://github.com/jutaro/purescript-webgl"> Purescript bindings for WebGL</a>.</p>
            </div>
            <div class="col-sm-4">
                <h3>Contact</h3>
                <p>Feel free to get in contact if you are interested in using ConeCanvas yourself.</p>
                <p>
                <address>
                  <strong>Symbolian GmbH</strong><br>
                  <a href="mailto:info@symbolian.net">info@symbolian.net</a>
                </address>
                </p>
                <p>Please see the
                <a href="http://symbolian.net/privacy/">privacy policy</a> and
                <a href="http://symbolian.net/terms-and-conditions/">terms and conditions</a>
                for using this website.</p>
            </div>
        </section>


        <!-- About section -->
        <section class="row" id="footer">
            <div class="col-sm-4 col-sm-push-4">
                <img src="symbolian_logo.png" class="img-responsive" alt="Symbolian Logo">
            </div>
        </section>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>

    <script type="text/javascript" src="/html/js/Main.js"></script>
    <script type="text/javascript">
            // global variables, accessible from PS module
            var gl;
            var globDivCanvas;
            var coneAPI;

            var globCanvasHide = function() {
                if (! globDivCanvas.is(":hidden")) {
                    globDivCanvas.slideUp();
                }
            };
            var globCanvasExpose = function () {
                if (globDivCanvas.is(":hidden")) {
                    globDivCanvas.show("slow");
                }
            };
            var globSetURL = function (newUrl) {
                console.log("globSetURL: " + newUrl)
                if (newUrl)
                    $("#democontent").attr("src", newUrl);
            };

            var globSelectedPrim = function (entry) {
                console.log("globSelectedPrim: " + entry)
            };

            window.onload = function() {
            // $( document ).ready(function() {
                globDivCanvas = $('#div_canvas');

                // blur the iframe
                document.getElementById("democontent").blur();
                // set focus on #glcanvas
                document.getElementById("glcanvas").focus();
                // when iframe tries to focus, focus #glcanvas
                document.getElementById("glcanvas").onblur = function() {
                    this.focus();
                };

                var continuation = function (api){
                    return function () {
                        coneAPI = api;
                    };
                };
                PS["Main"].main(continuation)();
            };
    </script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>
