function cond_hide_tutorial(){"use strict";0===tutorial_counter?$(".tutorial").fadeOut():tutorial_counter-=1}function weird_double_parser(n){"use strict";var e=$.parseHTML(n);return e&&e.length>0&&(e=$.parseHTML(e[0].data)),e}function show_post(n,e,t){"use strict";console.log("Selected post '"+e),cond_hide_tutorial();var r,o,a,i,u,c=t.split(";-;"),l=c[1],s=c[2],f=c[3],d=c[4];$("#overview").slideUp(function(){$(".comment_content").fadeOut(function(){$(".post_content").fadeIn()})}),$(".img_content").hide(),$(".movie_content").hide(),$(".imgur").hide(),""!==f?(r="",r=f.indexOf("://")>-1?f.split("/")[2]:f.split("/")[0],$(".post_content .text_post").hide(),$(".post_content .link_post").show(),$(".post_content .content").hide(),$(".post_content .source").attr("href",f),$(".post_content .domain").html(r),o=f.substr(-3).toLowerCase(),a=f.substr(-4).toLowerCase(),$.inArray(o,["jpg","png","gif"])>=0||"jpeg"===a?($(".img_content").show(),$(".img_content").attr("src",f)):"gifv"===a?(i=f.slice(0,-4)+"webm",u=f.slice(0,-4)+"mp4",$(".movie_content").html("<video class='img-responsive' autoplay='' loop='' muted='' preload=''><source src='"+i+"' type='video/webm'><source src='"+u+"' type='video/mp4'></video>"),$(".movie_content").show()):r.indexOf("imgur")>-1&&show_imgur(f)):($(".post_content .text_post").show(),$(".post_content .link_post").hide(),""!==d?($(".post_content .content").show(),$(".post_content .content").html(""),$(".post_content .content").append(weird_double_parser(d))):$(".post_content .content").hide()),$(".post_content .title").html(e),$(".post_content .score").html(n),$(".post_content .permalink").attr("href",s),$(".post_content .author").html(l)}function show_imgur(n){"use strict";var e=n.match(/(a\/)?(\w+)/g),t=e[e.length-1];$(".imgur").html('<blockquote class="imgur-embed-pub" lang="en" data-id="'+t+'" data-context="false"><a href="//imgur.com/'+t+'">View post on imgur.com</a></blockquote><script async src="//s.imgur.com/min/embed.js" charset="utf-8"></script>').show()}function show_comment(n,e){"use strict";var t,r=e.split(";-;"),o=r[1],a=r[2],i=r[3];cond_hide_tutorial(),$("#overview").slideUp(function(){$(".post_content .content").slideUp(function(){$(".comment_content").fadeIn()})}),$(".comment_content .score").html(i),$(".comment_content .author").html(n),$(".comment_content .content").html(""),$(".comment_content .content").append(weird_double_parser(a)),t=$(".post_content .permalink").attr("href")+o,$(".comment_content .source").attr("href",t)}function show_subreddit(n){"use strict";console.log("Selected subreddit '"+n+"'"),$(".post_content").fadeOut(function(){$(".comment_content").fadeOut(function(){$("#overview").slideDown()})}),$(".subreddit_list li").removeClass("bg-primary"),$(".subreddit_list strong:contains('"+n+"')").parent().addClass("bg-primary")}!function(n,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?e(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return e(n)}:e(n)}("undefined"!=typeof window?window:this,function(n,e){function t(n){var e="length"in n&&n.length,t=on.type(n);return"function"===t||on.isWindow(n)?!1:1===n.nodeType&&e?!0:"array"===t||0===e||"number"==typeof e&&e>0&&e-1 in n}function r(n,e,t){if(on.isFunction(e))return on.grep(n,function(n,r){return!!e.call(n,r,n)!==t});if(e.nodeType)return on.grep(n,function(n){return n===e!==t});if("string"==typeof e){if(vn.test(e))return on.filter(e,n,t);e=on.filter(e,n)}return on.grep(n,function(n){return on.inArray(n,e)>=0!==t})}function o(n,e){do n=n[e];while(n&&1!==n.nodeType);return n}function a(n){var e=Cn[n]={};return on.each(n.match($n)||[],function(n,t){e[t]=!0}),e}function i(){hn.addEventListener?(hn.removeEventListener("DOMContentLoaded",u,!1),n.removeEventListener("load",u,!1)):(hn.detachEvent("onreadystatechange",u),n.detachEvent("onload",u))}function u(){(hn.addEventListener||"load"===event.type||"complete"===hn.readyState)&&(i(),on.ready())}function c(n,e,t){if(void 0===t&&1===n.nodeType){var r="data-"+e.replace(Tn,"-$1").toLowerCase();if(t=n.getAttribute(r),"string"==typeof t){try{t="true"===t?!0:"false"===t?!1:"null"===t?null:+t+""===t?+t:bn.test(t)?on.parseJSON(t):t}catch(o){}on.data(n,e,t)}else t=void 0}return t}function l(n){var e;for(e in n)if(("data"!==e||!on.isEmptyObject(n[e]))&&"toJSON"!==e)return!1;return!0}function s(n,e,t,r){if(on.acceptData(n)){var o,a,i=on.expando,u=n.nodeType,c=u?on.cache:n,l=u?n[i]:n[i]&&i;if(l&&c[l]&&(r||c[l].data)||void 0!==t||"string"!=typeof e)return l||(l=u?n[i]=V.pop()||on.guid++:i),c[l]||(c[l]=u?{}:{toJSON:on.noop}),("object"==typeof e||"function"==typeof e)&&(r?c[l]=on.extend(c[l],e):c[l].data=on.extend(c[l].data,e)),a=c[l],r||(a.data||(a.data={}),a=a.data),void 0!==t&&(a[on.camelCase(e)]=t),"string"==typeof e?(o=a[e],null==o&&(o=a[on.camelCase(e)])):o=a,o}}function f(n,e,t){if(on.acceptData(n)){var r,o,a=n.nodeType,i=a?on.cache:n,u=a?n[on.expando]:on.expando;if(i[u]){if(e&&(r=t?i[u]:i[u].data)){on.isArray(e)?e=e.concat(on.map(e,on.camelCase)):e in r?e=[e]:(e=on.camelCase(e),e=e in r?[e]:e.split(" ")),o=e.length;for(;o--;)delete r[e[o]];if(t?!l(r):!on.isEmptyObject(r))return}(t||(delete i[u].data,l(i[u])))&&(a?on.cleanData([n],!0):tn.deleteExpando||i!=i.window?delete i[u]:i[u]=null)}}}function d(){return!0}function v(){return!1}function m(){try{return hn.activeElement}catch(n){}}function h(n){var e=Rn.split("|"),t=n.createDocumentFragment();if(t.createElement)for(;e.length;)t.createElement(e.pop());return t}function p(n,e){var t,r,o=0,a=typeof n.getElementsByTagName!==yn?n.getElementsByTagName(e||"*"):typeof n.querySelectorAll!==yn?n.querySelectorAll(e||"*"):void 0;if(!a)for(a=[],t=n.childNodes||n;null!=(r=t[o]);o++)!e||on.nodeName(r,e)?a.push(r):on.merge(a,p(r,e));return void 0===e||e&&on.nodeName(n,e)?on.merge([n],a):a}function g(n){Nn.test(n.type)&&(n.defaultChecked=n.checked)}function w(n,e){return on.nodeName(n,"table")&&on.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function _(n){return n.type=(null!==on.find.attr(n,"type"))+"/"+n.type,n}function $(n){var e=Vn.exec(n.type);return e?n.type=e[1]:n.removeAttribute("type"),n}function C(n,e){for(var t,r=0;null!=(t=n[r]);r++)on._data(t,"globalEval",!e||on._data(e[r],"globalEval"))}function S(n,e){if(1===e.nodeType&&on.hasData(n)){var t,r,o,a=on._data(n),i=on._data(e,a),u=a.events;if(u){delete i.handle,i.events={};for(t in u)for(r=0,o=u[t].length;o>r;r++)on.event.add(e,t,u[t][r])}i.data&&(i.data=on.extend({},i.data))}}function P(n,e){var t,r,o;if(1===e.nodeType){if(t=e.nodeName.toLowerCase(),!tn.noCloneEvent&&e[on.expando]){o=on._data(e);for(r in o.events)on.removeEvent(e,r,o.handle);e.removeAttribute(on.expando)}"script"===t&&e.text!==n.text?(_(e).text=n.text,$(e)):"object"===t?(e.parentNode&&(e.outerHTML=n.outerHTML),tn.html5Clone&&n.innerHTML&&!on.trim(e.innerHTML)&&(e.innerHTML=n.innerHTML)):"input"===t&&Nn.test(n.type)?(e.defaultChecked=e.checked=n.checked,e.value!==n.value&&(e.value=n.value)):"option"===t?e.defaultSelected=e.selected=n.defaultSelected:("input"===t||"textarea"===t)&&(e.defaultValue=n.defaultValue)}}function y(e,t){var r,o=on(t.createElement(e)).appendTo(t.body),a=n.getDefaultComputedStyle&&(r=n.getDefaultComputedStyle(o[0]))?r.display:on.css(o[0],"display");return o.detach(),a}function b(n){var e=hn,t=ne[n];return t||(t=y(n,e),"none"!==t&&t||(Qn=(Qn||on("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Qn[0].contentWindow||Qn[0].contentDocument).document,e.write(),e.close(),t=y(n,e),Qn.detach()),ne[n]=t),t}function T(n,e){return{get:function(){var t=n();if(null!=t)return t?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(n,e){if(e in n)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),r=e,o=ve.length;o--;)if(e=ve[o]+t,e in n)return e;return r}function F(n,e){for(var t,r,o,a=[],i=0,u=n.length;u>i;i++)r=n[i],r.style&&(a[i]=on._data(r,"olddisplay"),t=r.style.display,e?(a[i]||"none"!==t||(r.style.display=""),""===r.style.display&&xn(r)&&(a[i]=on._data(r,"olddisplay",b(r.nodeName)))):(o=xn(r),(t&&"none"!==t||!o)&&on._data(r,"olddisplay",o?t:on.css(r,"display"))));for(i=0;u>i;i++)r=n[i],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?a[i]||"":"none"));return n}function x(n,e,t){var r=le.exec(e);return r?Math.max(0,r[1]-(t||0))+(r[2]||"px"):e}function A(n,e,t,r,o){for(var a=t===(r?"border":"content")?4:"width"===e?1:0,i=0;4>a;a+=2)"margin"===t&&(i+=on.css(n,t+Fn[a],!0,o)),r?("content"===t&&(i-=on.css(n,"padding"+Fn[a],!0,o)),"margin"!==t&&(i-=on.css(n,"border"+Fn[a]+"Width",!0,o))):(i+=on.css(n,"padding"+Fn[a],!0,o),"padding"!==t&&(i+=on.css(n,"border"+Fn[a]+"Width",!0,o)));return i}function N(n,e,t){var r=!0,o="width"===e?n.offsetWidth:n.offsetHeight,a=ee(n),i=tn.boxSizing&&"border-box"===on.css(n,"boxSizing",!1,a);if(0>=o||null==o){if(o=te(n,e,a),(0>o||null==o)&&(o=n.style[e]),oe.test(o))return o;r=i&&(tn.boxSizingReliable()||o===n.style[e]),o=parseFloat(o)||0}return o+A(n,e,t||(i?"border":"content"),r,a)+"px"}function D(n,e,t,r,o){return new D.prototype.init(n,e,t,r,o)}function M(){return setTimeout(function(){me=void 0}),me=on.now()}function L(n,e){var t,r={height:n},o=0;for(e=e?1:0;4>o;o+=2-e)t=Fn[o],r["margin"+t]=r["padding"+t]=n;return e&&(r.opacity=r.width=n),r}function O(n,e,t){for(var r,o=($e[e]||[]).concat($e["*"]),a=0,i=o.length;i>a;a++)if(r=o[a].call(t,e,n))return r}function I(n,e,t){var r,o,a,i,u,c,l,s,f=this,d={},v=n.style,m=n.nodeType&&xn(n),h=on._data(n,"fxshow");t.queue||(u=on._queueHooks(n,"fx"),null==u.unqueued&&(u.unqueued=0,c=u.empty.fire,u.empty.fire=function(){u.unqueued||c()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,on.queue(n,"fx").length||u.empty.fire()})})),1===n.nodeType&&("height"in e||"width"in e)&&(t.overflow=[v.overflow,v.overflowX,v.overflowY],l=on.css(n,"display"),s="none"===l?on._data(n,"olddisplay")||b(n.nodeName):l,"inline"===s&&"none"===on.css(n,"float")&&(tn.inlineBlockNeedsLayout&&"inline"!==b(n.nodeName)?v.zoom=1:v.display="inline-block")),t.overflow&&(v.overflow="hidden",tn.shrinkWrapBlocks()||f.always(function(){v.overflow=t.overflow[0],v.overflowX=t.overflow[1],v.overflowY=t.overflow[2]}));for(r in e)if(o=e[r],pe.exec(o)){if(delete e[r],a=a||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!h||void 0===h[r])continue;m=!0}d[r]=h&&h[r]||on.style(n,r)}else l=void 0;if(on.isEmptyObject(d))"inline"===("none"===l?b(n.nodeName):l)&&(v.display=l);else{h?"hidden"in h&&(m=h.hidden):h=on._data(n,"fxshow",{}),a&&(h.hidden=!m),m?on(n).show():f.done(function(){on(n).hide()}),f.done(function(){var e;on._removeData(n,"fxshow");for(e in d)on.style(n,e,d[e])});for(r in d)i=O(m?h[r]:0,r,f),r in h||(h[r]=i.start,m&&(i.end=i.start,i.start="width"===r||"height"===r?1:0))}}function R(n,e){var t,r,o,a,i;for(t in n)if(r=on.camelCase(t),o=e[r],a=n[t],on.isArray(a)&&(o=a[1],a=n[t]=a[0]),t!==r&&(n[r]=a,delete n[t]),i=on.cssHooks[r],i&&"expand"in i){a=i.expand(a),delete n[r];for(t in a)t in n||(n[t]=a[t],e[t]=o)}else e[r]=o}function k(n,e,t){var r,o,a=0,i=_e.length,u=on.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var e=me||M(),t=Math.max(0,l.startTime+l.duration-e),r=t/l.duration||0,a=1-r,i=0,c=l.tweens.length;c>i;i++)l.tweens[i].run(a);return u.notifyWith(n,[l,a,t]),1>a&&c?t:(u.resolveWith(n,[l]),!1)},l=u.promise({elem:n,props:on.extend({},e),opts:on.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:me||M(),duration:t.duration,tweens:[],createTween:function(e,t){var r=on.Tween(n,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var t=0,r=e?l.tweens.length:0;if(o)return this;for(o=!0;r>t;t++)l.tweens[t].run(1);return e?u.resolveWith(n,[l,e]):u.rejectWith(n,[l,e]),this}}),s=l.props;for(R(s,l.opts.specialEasing);i>a;a++)if(r=_e[a].call(l,n,s,l.opts))return r;return on.map(s,O,l),on.isFunction(l.opts.start)&&l.opts.start.call(n,l),on.fx.timer(on.extend(c,{elem:n,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function U(n){return function(e,t){"string"!=typeof e&&(t=e,e="*");var r,o=0,a=e.toLowerCase().match($n)||[];if(on.isFunction(t))for(;r=a[o++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(n[r]=n[r]||[]).unshift(t)):(n[r]=n[r]||[]).push(t)}}function G(n,e,t,r){function o(u){var c;return a[u]=!0,on.each(n[u]||[],function(n,u){var l=u(e,t,r);return"string"!=typeof l||i||a[l]?i?!(c=l):void 0:(e.dataTypes.unshift(l),o(l),!1)}),c}var a={},i=n===He;return o(e.dataTypes[0])||!a["*"]&&o("*")}function B(n,e){var t,r,o=on.ajaxSettings.flatOptions||{};for(r in e)void 0!==e[r]&&((o[r]?n:t||(t={}))[r]=e[r]);return t&&on.extend(!0,n,t),n}function J(n,e,t){for(var r,o,a,i,u=n.contents,c=n.dataTypes;"*"===c[0];)c.shift(),void 0===o&&(o=n.mimeType||e.getResponseHeader("Content-Type"));if(o)for(i in u)if(u[i]&&u[i].test(o)){c.unshift(i);break}if(c[0]in t)a=c[0];else{for(i in t){if(!c[0]||n.converters[i+" "+c[0]]){a=i;break}r||(r=i)}a=a||r}return a?(a!==c[0]&&c.unshift(a),t[a]):void 0}function z(n,e,t,r){var o,a,i,u,c,l={},s=n.dataTypes.slice();if(s[1])for(i in n.converters)l[i.toLowerCase()]=n.converters[i];for(a=s.shift();a;)if(n.responseFields[a]&&(t[n.responseFields[a]]=e),!c&&r&&n.dataFilter&&(e=n.dataFilter(e,n.dataType)),c=a,a=s.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(i=l[c+" "+a]||l["* "+a],!i)for(o in l)if(u=o.split(" "),u[1]===a&&(i=l[c+" "+u[0]]||l["* "+u[0]])){i===!0?i=l[o]:l[o]!==!0&&(a=u[0],s.unshift(u[1]));break}if(i!==!0)if(i&&n["throws"])e=i(e);else try{e=i(e)}catch(f){return{state:"parsererror",error:i?f:"No conversion from "+c+" to "+a}}}return{state:"success",data:e}}function H(n,e,t,r){var o;if(on.isArray(e))on.each(e,function(e,o){t||Ve.test(n)?r(n,o):H(n+"["+("object"==typeof o?e:"")+"]",o,t,r)});else if(t||"object"!==on.type(e))r(n,e);else for(o in e)H(n+"["+o+"]",e[o],t,r)}function W(){try{return new n.XMLHttpRequest}catch(e){}}function j(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function q(n){return on.isWindow(n)?n:9===n.nodeType?n.defaultView||n.parentWindow:!1}var V=[],Z=V.slice,X=V.concat,K=V.push,Y=V.indexOf,Q={},nn=Q.toString,en=Q.hasOwnProperty,tn={},rn="1.11.3",on=function(n,e){return new on.fn.init(n,e)},an=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,un=/^-ms-/,cn=/-([\da-z])/gi,ln=function(n,e){return e.toUpperCase()};on.fn=on.prototype={jquery:rn,constructor:on,selector:"",length:0,toArray:function(){return Z.call(this)},get:function(n){return null!=n?0>n?this[n+this.length]:this[n]:Z.call(this)},pushStack:function(n){var e=on.merge(this.constructor(),n);return e.prevObject=this,e.context=this.context,e},each:function(n,e){return on.each(this,n,e)},map:function(n){return this.pushStack(on.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var e=this.length,t=+n+(0>n?e:0);return this.pushStack(t>=0&&e>t?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:V.sort,splice:V.splice},on.extend=on.fn.extend=function(){var n,e,t,r,o,a,i=arguments[0]||{},u=1,c=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[u]||{},u++),"object"==typeof i||on.isFunction(i)||(i={}),u===c&&(i=this,u--);c>u;u++)if(null!=(o=arguments[u]))for(r in o)n=i[r],t=o[r],i!==t&&(l&&t&&(on.isPlainObject(t)||(e=on.isArray(t)))?(e?(e=!1,a=n&&on.isArray(n)?n:[]):a=n&&on.isPlainObject(n)?n:{},i[r]=on.extend(l,a,t)):void 0!==t&&(i[r]=t));return i},on.extend({expando:"jQuery"+(rn+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n)},noop:function(){},isFunction:function(n){return"function"===on.type(n)},isArray:Array.isArray||function(n){return"array"===on.type(n)},isWindow:function(n){return null!=n&&n==n.window},isNumeric:function(n){return!on.isArray(n)&&n-parseFloat(n)+1>=0},isEmptyObject:function(n){var e;for(e in n)return!1;return!0},isPlainObject:function(n){var e;if(!n||"object"!==on.type(n)||n.nodeType||on.isWindow(n))return!1;try{if(n.constructor&&!en.call(n,"constructor")&&!en.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(tn.ownLast)for(e in n)return en.call(n,e);for(e in n);return void 0===e||en.call(n,e)},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?Q[nn.call(n)]||"object":typeof n},globalEval:function(e){e&&on.trim(e)&&(n.execScript||function(e){n.eval.call(n,e)})(e)},camelCase:function(n){return n.replace(un,"ms-").replace(cn,ln)},nodeName:function(n,e){return n.nodeName&&n.nodeName.toLowerCase()===e.toLowerCase()},each:function(n,e,r){var o,a=0,i=n.length,u=t(n);if(r){if(u)for(;i>a&&(o=e.apply(n[a],r),o!==!1);a++);else for(a in n)if(o=e.apply(n[a],r),o===!1)break}else if(u)for(;i>a&&(o=e.call(n[a],a,n[a]),o!==!1);a++);else for(a in n)if(o=e.call(n[a],a,n[a]),o===!1)break;return n},trim:function(n){return null==n?"":(n+"").replace(an,"")},makeArray:function(n,e){var r=e||[];return null!=n&&(t(Object(n))?on.merge(r,"string"==typeof n?[n]:n):K.call(r,n)),r},inArray:function(n,e,t){var r;if(e){if(Y)return Y.call(e,n,t);for(r=e.length,t=t?0>t?Math.max(0,r+t):t:0;r>t;t++)if(t in e&&e[t]===n)return t}return-1},merge:function(n,e){for(var t=+e.length,r=0,o=n.length;t>r;)n[o++]=e[r++];if(t!==t)for(;void 0!==e[r];)n[o++]=e[r++];return n.length=o,n},grep:function(n,e,t){for(var r,o=[],a=0,i=n.length,u=!t;i>a;a++)r=!e(n[a],a),r!==u&&o.push(n[a]);return o},map:function(n,e,r){var o,a=0,i=n.length,u=t(n),c=[];if(u)for(;i>a;a++)o=e(n[a],a,r),null!=o&&c.push(o);else for(a in n)o=e(n[a],a,r),null!=o&&c.push(o);return X.apply([],c)},guid:1,proxy:function(n,e){var t,r,o;return"string"==typeof e&&(o=n[e],e=n,n=o),on.isFunction(n)?(t=Z.call(arguments,2),r=function(){return n.apply(e||this,t.concat(Z.call(arguments)))},r.guid=n.guid=n.guid||on.guid++,r):void 0},now:function(){return+new Date},support:tn}),on.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,e){Q["[object "+e+"]"]=e.toLowerCase()});var sn=function(n){function e(n,e,t,r){var o,a,i,u,c,l,f,v,m,h;if((e?e.ownerDocument||e:G)!==D&&N(e),e=e||D,t=t||[],u=e.nodeType,"string"!=typeof n||!n||1!==u&&9!==u&&11!==u)return t;if(!r&&L){if(11!==u&&(o=_n.exec(n)))if(i=o[1]){if(9===u){if(a=e.getElementById(i),!a||!a.parentNode)return t;if(a.id===i)return t.push(a),t}else if(e.ownerDocument&&(a=e.ownerDocument.getElementById(i))&&k(e,a)&&a.id===i)return t.push(a),t}else{if(o[2])return Y.apply(t,e.getElementsByTagName(n)),t;if((i=o[3])&&C.getElementsByClassName)return Y.apply(t,e.getElementsByClassName(i)),t}if(C.qsa&&(!O||!O.test(n))){if(v=f=U,m=e,h=1!==u&&n,1===u&&"object"!==e.nodeName.toLowerCase()){for(l=b(n),(f=e.getAttribute("id"))?v=f.replace(Cn,"\\$&"):e.setAttribute("id",v),v="[id='"+v+"'] ",c=l.length;c--;)l[c]=v+d(l[c]);m=$n.test(n)&&s(e.parentNode)||e,h=l.join(",")}if(h)try{return Y.apply(t,m.querySelectorAll(h)),t}catch(p){}finally{f||e.removeAttribute("id")}}}return E(n.replace(ln,"$1"),e,t,r)}function t(){function n(t,r){return e.push(t+" ")>S.cacheLength&&delete n[e.shift()],n[t+" "]=r}var e=[];return n}function r(n){return n[U]=!0,n}function o(n){var e=D.createElement("div");try{return!!n(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(n,e){for(var t=n.split("|"),r=n.length;r--;)S.attrHandle[t[r]]=e}function i(n,e){var t=e&&n,r=t&&1===n.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~n.sourceIndex||q);if(r)return r;if(t)for(;t=t.nextSibling;)if(t===e)return-1;return n?1:-1}function u(n){return function(e){var t=e.nodeName.toLowerCase();return"input"===t&&e.type===n}}function c(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function l(n){return r(function(e){return e=+e,r(function(t,r){for(var o,a=n([],t.length,e),i=a.length;i--;)t[o=a[i]]&&(t[o]=!(r[o]=t[o]))})})}function s(n){return n&&"undefined"!=typeof n.getElementsByTagName&&n}function f(){}function d(n){for(var e=0,t=n.length,r="";t>e;e++)r+=n[e].value;return r}function v(n,e,t){var r=e.dir,o=t&&"parentNode"===r,a=J++;return e.first?function(e,t,a){for(;e=e[r];)if(1===e.nodeType||o)return n(e,t,a)}:function(e,t,i){var u,c,l=[B,a];if(i){for(;e=e[r];)if((1===e.nodeType||o)&&n(e,t,i))return!0}else for(;e=e[r];)if(1===e.nodeType||o){if(c=e[U]||(e[U]={}),(u=c[r])&&u[0]===B&&u[1]===a)return l[2]=u[2];if(c[r]=l,l[2]=n(e,t,i))return!0}}}function m(n){return n.length>1?function(e,t,r){for(var o=n.length;o--;)if(!n[o](e,t,r))return!1;return!0}:n[0]}function h(n,t,r){for(var o=0,a=t.length;a>o;o++)e(n,t[o],r);return r}function p(n,e,t,r,o){for(var a,i=[],u=0,c=n.length,l=null!=e;c>u;u++)(a=n[u])&&(!t||t(a,r,o))&&(i.push(a),l&&e.push(u));return i}function g(n,e,t,o,a,i){return o&&!o[U]&&(o=g(o)),a&&!a[U]&&(a=g(a,i)),r(function(r,i,u,c){var l,s,f,d=[],v=[],m=i.length,g=r||h(e||"*",u.nodeType?[u]:u,[]),w=!n||!r&&e?g:p(g,d,n,u,c),_=t?a||(r?n:m||o)?[]:i:w;if(t&&t(w,_,u,c),o)for(l=p(_,v),o(l,[],u,c),s=l.length;s--;)(f=l[s])&&(_[v[s]]=!(w[v[s]]=f));if(r){if(a||n){if(a){for(l=[],s=_.length;s--;)(f=_[s])&&l.push(w[s]=f);a(null,_=[],l,c)}for(s=_.length;s--;)(f=_[s])&&(l=a?nn(r,f):d[s])>-1&&(r[l]=!(i[l]=f))}}else _=p(_===i?_.splice(m,_.length):_),a?a(null,i,_,c):Y.apply(i,_)})}function w(n){for(var e,t,r,o=n.length,a=S.relative[n[0].type],i=a||S.relative[" "],u=a?1:0,c=v(function(n){return n===e},i,!0),l=v(function(n){return nn(e,n)>-1},i,!0),s=[function(n,t,r){var o=!a&&(r||t!==F)||((e=t).nodeType?c(n,t,r):l(n,t,r));return e=null,o}];o>u;u++)if(t=S.relative[n[u].type])s=[v(m(s),t)];else{if(t=S.filter[n[u].type].apply(null,n[u].matches),t[U]){for(r=++u;o>r&&!S.relative[n[r].type];r++);return g(u>1&&m(s),u>1&&d(n.slice(0,u-1).concat({value:" "===n[u-2].type?"*":""})).replace(ln,"$1"),t,r>u&&w(n.slice(u,r)),o>r&&w(n=n.slice(r)),o>r&&d(n))}s.push(t)}return m(s)}function _(n,t){var o=t.length>0,a=n.length>0,i=function(r,i,u,c,l){var s,f,d,v=0,m="0",h=r&&[],g=[],w=F,_=r||a&&S.find.TAG("*",l),$=B+=null==w?1:Math.random()||.1,C=_.length;for(l&&(F=i!==D&&i);m!==C&&null!=(s=_[m]);m++){if(a&&s){for(f=0;d=n[f++];)if(d(s,i,u)){c.push(s);break}l&&(B=$)}o&&((s=!d&&s)&&v--,r&&h.push(s))}if(v+=m,o&&m!==v){for(f=0;d=t[f++];)d(h,g,i,u);if(r){if(v>0)for(;m--;)h[m]||g[m]||(g[m]=X.call(c));g=p(g)}Y.apply(c,g),l&&!r&&g.length>0&&v+t.length>1&&e.uniqueSort(c)}return l&&(B=$,F=w),h};return o?r(i):i}var $,C,S,P,y,b,T,E,F,x,A,N,D,M,L,O,I,R,k,U="sizzle"+1*new Date,G=n.document,B=0,J=0,z=t(),H=t(),W=t(),j=function(n,e){return n===e&&(A=!0),0},q=1<<31,V={}.hasOwnProperty,Z=[],X=Z.pop,K=Z.push,Y=Z.push,Q=Z.slice,nn=function(n,e){for(var t=0,r=n.length;r>t;t++)if(n[t]===e)return t;return-1},en="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tn="[\\x20\\t\\r\\n\\f]",rn="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",on=rn.replace("w","w#"),an="\\["+tn+"*("+rn+")(?:"+tn+"*([*^$|!~]?=)"+tn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+on+"))|)"+tn+"*\\]",un=":("+rn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+an+")*)|.*)\\)|)",cn=new RegExp(tn+"+","g"),ln=new RegExp("^"+tn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tn+"+$","g"),sn=new RegExp("^"+tn+"*,"+tn+"*"),fn=new RegExp("^"+tn+"*([>+~]|"+tn+")"+tn+"*"),dn=new RegExp("="+tn+"*([^\\]'\"]*?)"+tn+"*\\]","g"),vn=new RegExp(un),mn=new RegExp("^"+on+"$"),hn={ID:new RegExp("^#("+rn+")"),CLASS:new RegExp("^\\.("+rn+")"),TAG:new RegExp("^("+rn.replace("w","w*")+")"),ATTR:new RegExp("^"+an),PSEUDO:new RegExp("^"+un),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tn+"*(even|odd|(([+-]|)(\\d*)n|)"+tn+"*(?:([+-]|)"+tn+"*(\\d+)|))"+tn+"*\\)|)","i"),bool:new RegExp("^(?:"+en+")$","i"),needsContext:new RegExp("^"+tn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tn+"*((?:-\\d)?\\d*)"+tn+"*\\)|)(?=[^-]|$)","i")},pn=/^(?:input|select|textarea|button)$/i,gn=/^h\d$/i,wn=/^[^{]+\{\s*\[native \w/,_n=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$n=/[+~]/,Cn=/'|\\/g,Sn=new RegExp("\\\\([\\da-f]{1,6}"+tn+"?|("+tn+")|.)","ig"),Pn=function(n,e,t){var r="0x"+e-65536;return r!==r||t?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},yn=function(){N()};try{Y.apply(Z=Q.call(G.childNodes),G.childNodes),Z[G.childNodes.length].nodeType}catch(bn){Y={apply:Z.length?function(n,e){K.apply(n,Q.call(e))}:function(n,e){for(var t=n.length,r=0;n[t++]=e[r++];);n.length=t-1}}}C=e.support={},y=e.isXML=function(n){var e=n&&(n.ownerDocument||n).documentElement;return e?"HTML"!==e.nodeName:!1},N=e.setDocument=function(n){var e,t,r=n?n.ownerDocument||n:G;return r!==D&&9===r.nodeType&&r.documentElement?(D=r,M=r.documentElement,t=r.defaultView,t&&t!==t.top&&(t.addEventListener?t.addEventListener("unload",yn,!1):t.attachEvent&&t.attachEvent("onunload",yn)),L=!y(r),C.attributes=o(function(n){return n.className="i",!n.getAttribute("className")}),C.getElementsByTagName=o(function(n){return n.appendChild(r.createComment("")),!n.getElementsByTagName("*").length}),C.getElementsByClassName=wn.test(r.getElementsByClassName),C.getById=o(function(n){return M.appendChild(n).id=U,!r.getElementsByName||!r.getElementsByName(U).length}),C.getById?(S.find.ID=function(n,e){if("undefined"!=typeof e.getElementById&&L){var t=e.getElementById(n);return t&&t.parentNode?[t]:[]}},S.filter.ID=function(n){var e=n.replace(Sn,Pn);return function(n){return n.getAttribute("id")===e}}):(delete S.find.ID,S.filter.ID=function(n){var e=n.replace(Sn,Pn);return function(n){var t="undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id");return t&&t.value===e}}),S.find.TAG=C.getElementsByTagName?function(n,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(n):C.qsa?e.querySelectorAll(n):void 0}:function(n,e){var t,r=[],o=0,a=e.getElementsByTagName(n);if("*"===n){for(;t=a[o++];)1===t.nodeType&&r.push(t);return r}return a},S.find.CLASS=C.getElementsByClassName&&function(n,e){return L?e.getElementsByClassName(n):void 0},I=[],O=[],(C.qsa=wn.test(r.querySelectorAll))&&(o(function(n){M.appendChild(n).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",n.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+tn+"*(?:''|\"\")"),n.querySelectorAll("[selected]").length||O.push("\\["+tn+"*(?:value|"+en+")"),n.querySelectorAll("[id~="+U+"-]").length||O.push("~="),n.querySelectorAll(":checked").length||O.push(":checked"),n.querySelectorAll("a#"+U+"+*").length||O.push(".#.+[+~]")}),o(function(n){var e=r.createElement("input");e.setAttribute("type","hidden"),n.appendChild(e).setAttribute("name","D"),n.querySelectorAll("[name=d]").length&&O.push("name"+tn+"*[*^$|!~]?="),n.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),n.querySelectorAll("*,:x"),O.push(",.*:")})),(C.matchesSelector=wn.test(R=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(n){C.disconnectedMatch=R.call(n,"div"),R.call(n,"[s!='']:x"),I.push("!=",un)}),O=O.length&&new RegExp(O.join("|")),I=I.length&&new RegExp(I.join("|")),e=wn.test(M.compareDocumentPosition),k=e||wn.test(M.contains)?function(n,e){var t=9===n.nodeType?n.documentElement:n,r=e&&e.parentNode;return n===r||!(!r||1!==r.nodeType||!(t.contains?t.contains(r):n.compareDocumentPosition&&16&n.compareDocumentPosition(r)))}:function(n,e){if(e)for(;e=e.parentNode;)if(e===n)return!0;return!1},j=e?function(n,e){if(n===e)return A=!0,0;var t=!n.compareDocumentPosition-!e.compareDocumentPosition;return t?t:(t=(n.ownerDocument||n)===(e.ownerDocument||e)?n.compareDocumentPosition(e):1,1&t||!C.sortDetached&&e.compareDocumentPosition(n)===t?n===r||n.ownerDocument===G&&k(G,n)?-1:e===r||e.ownerDocument===G&&k(G,e)?1:x?nn(x,n)-nn(x,e):0:4&t?-1:1)}:function(n,e){if(n===e)return A=!0,0;var t,o=0,a=n.parentNode,u=e.parentNode,c=[n],l=[e];if(!a||!u)return n===r?-1:e===r?1:a?-1:u?1:x?nn(x,n)-nn(x,e):0;if(a===u)return i(n,e);for(t=n;t=t.parentNode;)c.unshift(t);for(t=e;t=t.parentNode;)l.unshift(t);for(;c[o]===l[o];)o++;return o?i(c[o],l[o]):c[o]===G?-1:l[o]===G?1:0},r):D},e.matches=function(n,t){return e(n,null,null,t)},e.matchesSelector=function(n,t){if((n.ownerDocument||n)!==D&&N(n),t=t.replace(dn,"='$1']"),C.matchesSelector&&L&&(!I||!I.test(t))&&(!O||!O.test(t)))try{var r=R.call(n,t);if(r||C.disconnectedMatch||n.document&&11!==n.document.nodeType)return r}catch(o){}return e(t,D,null,[n]).length>0},e.contains=function(n,e){return(n.ownerDocument||n)!==D&&N(n),k(n,e)},e.attr=function(n,e){(n.ownerDocument||n)!==D&&N(n);var t=S.attrHandle[e.toLowerCase()],r=t&&V.call(S.attrHandle,e.toLowerCase())?t(n,e,!L):void 0;return void 0!==r?r:C.attributes||!L?n.getAttribute(e):(r=n.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n)},e.uniqueSort=function(n){var e,t=[],r=0,o=0;if(A=!C.detectDuplicates,x=!C.sortStable&&n.slice(0),n.sort(j),A){for(;e=n[o++];)e===n[o]&&(r=t.push(o));for(;r--;)n.splice(t[r],1)}return x=null,n},P=e.getText=function(n){var e,t="",r=0,o=n.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)t+=P(n)}else if(3===o||4===o)return n.nodeValue}else for(;e=n[r++];)t+=P(e);return t},S=e.selectors={cacheLength:50,createPseudo:r,match:hn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(Sn,Pn),n[3]=(n[3]||n[4]||n[5]||"").replace(Sn,Pn),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||e.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&e.error(n[0]),n},PSEUDO:function(n){var e,t=!n[6]&&n[2];return hn.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&vn.test(t)&&(e=b(t,!0))&&(e=t.indexOf(")",t.length-e)-t.length)&&(n[0]=n[0].slice(0,e),n[2]=t.slice(0,e)),n.slice(0,3))}},filter:{TAG:function(n){var e=n.replace(Sn,Pn).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===e}},CLASS:function(n){var e=z[n+" "];return e||(e=new RegExp("(^|"+tn+")"+n+"("+tn+"|$)"))&&z(n,function(n){return e.test("string"==typeof n.className&&n.className||"undefined"!=typeof n.getAttribute&&n.getAttribute("class")||"")})},ATTR:function(n,t,r){return function(o){var a=e.attr(o,n);return null==a?"!="===t:t?(a+="","="===t?a===r:"!="===t?a!==r:"^="===t?r&&0===a.indexOf(r):"*="===t?r&&a.indexOf(r)>-1:"$="===t?r&&a.slice(-r.length)===r:"~="===t?(" "+a.replace(cn," ")+" ").indexOf(r)>-1:"|="===t?a===r||a.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(n,e,t,r,o){var a="nth"!==n.slice(0,3),i="last"!==n.slice(-4),u="of-type"===e;return 1===r&&0===o?function(n){return!!n.parentNode}:function(e,t,c){var l,s,f,d,v,m,h=a!==i?"nextSibling":"previousSibling",p=e.parentNode,g=u&&e.nodeName.toLowerCase(),w=!c&&!u;if(p){if(a){for(;h;){for(f=e;f=f[h];)if(u?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;m=h="only"===n&&!m&&"nextSibling"}return!0}if(m=[i?p.firstChild:p.lastChild],i&&w){for(s=p[U]||(p[U]={}),l=s[n]||[],v=l[0]===B&&l[1],d=l[0]===B&&l[2],f=v&&p.childNodes[v];f=++v&&f&&f[h]||(d=v=0)||m.pop();)if(1===f.nodeType&&++d&&f===e){s[n]=[B,v,d];break}}else if(w&&(l=(e[U]||(e[U]={}))[n])&&l[0]===B)d=l[1];else for(;(f=++v&&f&&f[h]||(d=v=0)||m.pop())&&((u?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++d||(w&&((f[U]||(f[U]={}))[n]=[B,d]),f!==e)););return d-=o,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(n,t){var o,a=S.pseudos[n]||S.setFilters[n.toLowerCase()]||e.error("unsupported pseudo: "+n);
return a[U]?a(t):a.length>1?(o=[n,n,"",t],S.setFilters.hasOwnProperty(n.toLowerCase())?r(function(n,e){for(var r,o=a(n,t),i=o.length;i--;)r=nn(n,o[i]),n[r]=!(e[r]=o[i])}):function(n){return a(n,0,o)}):a}},pseudos:{not:r(function(n){var e=[],t=[],o=T(n.replace(ln,"$1"));return o[U]?r(function(n,e,t,r){for(var a,i=o(n,null,r,[]),u=n.length;u--;)(a=i[u])&&(n[u]=!(e[u]=a))}):function(n,r,a){return e[0]=n,o(e,null,a,t),e[0]=null,!t.pop()}}),has:r(function(n){return function(t){return e(n,t).length>0}}),contains:r(function(n){return n=n.replace(Sn,Pn),function(e){return(e.textContent||e.innerText||P(e)).indexOf(n)>-1}}),lang:r(function(n){return mn.test(n||"")||e.error("unsupported lang: "+n),n=n.replace(Sn,Pn).toLowerCase(),function(e){var t;do if(t=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return t=t.toLowerCase(),t===n||0===t.indexOf(n+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(n){return n===M},focus:function(n){return n===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var e=n.nodeName.toLowerCase();return"input"===e&&!!n.checked||"option"===e&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!S.pseudos.empty(n)},header:function(n){return gn.test(n.nodeName)},input:function(n){return pn.test(n.nodeName)},button:function(n){var e=n.nodeName.toLowerCase();return"input"===e&&"button"===n.type||"button"===e},text:function(n){var e;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(e=n.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(n,e){return[e-1]}),eq:l(function(n,e,t){return[0>t?t+e:t]}),even:l(function(n,e){for(var t=0;e>t;t+=2)n.push(t);return n}),odd:l(function(n,e){for(var t=1;e>t;t+=2)n.push(t);return n}),lt:l(function(n,e,t){for(var r=0>t?t+e:t;--r>=0;)n.push(r);return n}),gt:l(function(n,e,t){for(var r=0>t?t+e:t;++r<e;)n.push(r);return n})}},S.pseudos.nth=S.pseudos.eq;for($ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[$]=u($);for($ in{submit:!0,reset:!0})S.pseudos[$]=c($);return f.prototype=S.filters=S.pseudos,S.setFilters=new f,b=e.tokenize=function(n,t){var r,o,a,i,u,c,l,s=H[n+" "];if(s)return t?0:s.slice(0);for(u=n,c=[],l=S.preFilter;u;){(!r||(o=sn.exec(u)))&&(o&&(u=u.slice(o[0].length)||u),c.push(a=[])),r=!1,(o=fn.exec(u))&&(r=o.shift(),a.push({value:r,type:o[0].replace(ln," ")}),u=u.slice(r.length));for(i in S.filter)!(o=hn[i].exec(u))||l[i]&&!(o=l[i](o))||(r=o.shift(),a.push({value:r,type:i,matches:o}),u=u.slice(r.length));if(!r)break}return t?u.length:u?e.error(n):H(n,c).slice(0)},T=e.compile=function(n,e){var t,r=[],o=[],a=W[n+" "];if(!a){for(e||(e=b(n)),t=e.length;t--;)a=w(e[t]),a[U]?r.push(a):o.push(a);a=W(n,_(o,r)),a.selector=n}return a},E=e.select=function(n,e,t,r){var o,a,i,u,c,l="function"==typeof n&&n,f=!r&&b(n=l.selector||n);if(t=t||[],1===f.length){if(a=f[0]=f[0].slice(0),a.length>2&&"ID"===(i=a[0]).type&&C.getById&&9===e.nodeType&&L&&S.relative[a[1].type]){if(e=(S.find.ID(i.matches[0].replace(Sn,Pn),e)||[])[0],!e)return t;l&&(e=e.parentNode),n=n.slice(a.shift().value.length)}for(o=hn.needsContext.test(n)?0:a.length;o--&&(i=a[o],!S.relative[u=i.type]);)if((c=S.find[u])&&(r=c(i.matches[0].replace(Sn,Pn),$n.test(a[0].type)&&s(e.parentNode)||e))){if(a.splice(o,1),n=r.length&&d(a),!n)return Y.apply(t,r),t;break}}return(l||T(n,f))(r,e,!L,t,$n.test(n)&&s(e.parentNode)||e),t},C.sortStable=U.split("").sort(j).join("")===U,C.detectDuplicates=!!A,N(),C.sortDetached=o(function(n){return 1&n.compareDocumentPosition(D.createElement("div"))}),o(function(n){return n.innerHTML="<a href='#'></a>","#"===n.firstChild.getAttribute("href")})||a("type|href|height|width",function(n,e,t){return t?void 0:n.getAttribute(e,"type"===e.toLowerCase()?1:2)}),C.attributes&&o(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||a("value",function(n,e,t){return t||"input"!==n.nodeName.toLowerCase()?void 0:n.defaultValue}),o(function(n){return null==n.getAttribute("disabled")})||a(en,function(n,e,t){var r;return t?void 0:n[e]===!0?e.toLowerCase():(r=n.getAttributeNode(e))&&r.specified?r.value:null}),e}(n);on.find=sn,on.expr=sn.selectors,on.expr[":"]=on.expr.pseudos,on.unique=sn.uniqueSort,on.text=sn.getText,on.isXMLDoc=sn.isXML,on.contains=sn.contains;var fn=on.expr.match.needsContext,dn=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,vn=/^.[^:#\[\.,]*$/;on.filter=function(n,e,t){var r=e[0];return t&&(n=":not("+n+")"),1===e.length&&1===r.nodeType?on.find.matchesSelector(r,n)?[r]:[]:on.find.matches(n,on.grep(e,function(n){return 1===n.nodeType}))},on.fn.extend({find:function(n){var e,t=[],r=this,o=r.length;if("string"!=typeof n)return this.pushStack(on(n).filter(function(){for(e=0;o>e;e++)if(on.contains(r[e],this))return!0}));for(e=0;o>e;e++)on.find(n,r[e],t);return t=this.pushStack(o>1?on.unique(t):t),t.selector=this.selector?this.selector+" "+n:n,t},filter:function(n){return this.pushStack(r(this,n||[],!1))},not:function(n){return this.pushStack(r(this,n||[],!0))},is:function(n){return!!r(this,"string"==typeof n&&fn.test(n)?on(n):n||[],!1).length}});var mn,hn=n.document,pn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gn=on.fn.init=function(n,e){var t,r;if(!n)return this;if("string"==typeof n){if(t="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:pn.exec(n),!t||!t[1]&&e)return!e||e.jquery?(e||mn).find(n):this.constructor(e).find(n);if(t[1]){if(e=e instanceof on?e[0]:e,on.merge(this,on.parseHTML(t[1],e&&e.nodeType?e.ownerDocument||e:hn,!0)),dn.test(t[1])&&on.isPlainObject(e))for(t in e)on.isFunction(this[t])?this[t](e[t]):this.attr(t,e[t]);return this}if(r=hn.getElementById(t[2]),r&&r.parentNode){if(r.id!==t[2])return mn.find(n);this.length=1,this[0]=r}return this.context=hn,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):on.isFunction(n)?"undefined"!=typeof mn.ready?mn.ready(n):n(on):(void 0!==n.selector&&(this.selector=n.selector,this.context=n.context),on.makeArray(n,this))};gn.prototype=on.fn,mn=on(hn);var wn=/^(?:parents|prev(?:Until|All))/,_n={children:!0,contents:!0,next:!0,prev:!0};on.extend({dir:function(n,e,t){for(var r=[],o=n[e];o&&9!==o.nodeType&&(void 0===t||1!==o.nodeType||!on(o).is(t));)1===o.nodeType&&r.push(o),o=o[e];return r},sibling:function(n,e){for(var t=[];n;n=n.nextSibling)1===n.nodeType&&n!==e&&t.push(n);return t}}),on.fn.extend({has:function(n){var e,t=on(n,this),r=t.length;return this.filter(function(){for(e=0;r>e;e++)if(on.contains(this,t[e]))return!0})},closest:function(n,e){for(var t,r=0,o=this.length,a=[],i=fn.test(n)||"string"!=typeof n?on(n,e||this.context):0;o>r;r++)for(t=this[r];t&&t!==e;t=t.parentNode)if(t.nodeType<11&&(i?i.index(t)>-1:1===t.nodeType&&on.find.matchesSelector(t,n))){a.push(t);break}return this.pushStack(a.length>1?on.unique(a):a)},index:function(n){return n?"string"==typeof n?on.inArray(this[0],on(n)):on.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,e){return this.pushStack(on.unique(on.merge(this.get(),on(n,e))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}}),on.each({parent:function(n){var e=n.parentNode;return e&&11!==e.nodeType?e:null},parents:function(n){return on.dir(n,"parentNode")},parentsUntil:function(n,e,t){return on.dir(n,"parentNode",t)},next:function(n){return o(n,"nextSibling")},prev:function(n){return o(n,"previousSibling")},nextAll:function(n){return on.dir(n,"nextSibling")},prevAll:function(n){return on.dir(n,"previousSibling")},nextUntil:function(n,e,t){return on.dir(n,"nextSibling",t)},prevUntil:function(n,e,t){return on.dir(n,"previousSibling",t)},siblings:function(n){return on.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return on.sibling(n.firstChild)},contents:function(n){return on.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:on.merge([],n.childNodes)}},function(n,e){on.fn[n]=function(t,r){var o=on.map(this,e,t);return"Until"!==n.slice(-5)&&(r=t),r&&"string"==typeof r&&(o=on.filter(r,o)),this.length>1&&(_n[n]||(o=on.unique(o)),wn.test(n)&&(o=o.reverse())),this.pushStack(o)}});var $n=/\S+/g,Cn={};on.Callbacks=function(n){n="string"==typeof n?Cn[n]||a(n):on.extend({},n);var e,t,r,o,i,u,c=[],l=!n.once&&[],s=function(a){for(t=n.memory&&a,r=!0,i=u||0,u=0,o=c.length,e=!0;c&&o>i;i++)if(c[i].apply(a[0],a[1])===!1&&n.stopOnFalse){t=!1;break}e=!1,c&&(l?l.length&&s(l.shift()):t?c=[]:f.disable())},f={add:function(){if(c){var r=c.length;!function a(e){on.each(e,function(e,t){var r=on.type(t);"function"===r?n.unique&&f.has(t)||c.push(t):t&&t.length&&"string"!==r&&a(t)})}(arguments),e?o=c.length:t&&(u=r,s(t))}return this},remove:function(){return c&&on.each(arguments,function(n,t){for(var r;(r=on.inArray(t,c,r))>-1;)c.splice(r,1),e&&(o>=r&&o--,i>=r&&i--)}),this},has:function(n){return n?on.inArray(n,c)>-1:!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=l=t=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(n,t){return!c||r&&!l||(t=t||[],t=[n,t.slice?t.slice():t],e?l.push(t):s(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},on.extend({Deferred:function(n){var e=[["resolve","done",on.Callbacks("once memory"),"resolved"],["reject","fail",on.Callbacks("once memory"),"rejected"],["notify","progress",on.Callbacks("memory")]],t="pending",r={state:function(){return t},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var n=arguments;return on.Deferred(function(t){on.each(e,function(e,a){var i=on.isFunction(n[e])&&n[e];o[a[1]](function(){var n=i&&i.apply(this,arguments);n&&on.isFunction(n.promise)?n.promise().done(t.resolve).fail(t.reject).progress(t.notify):t[a[0]+"With"](this===r?t.promise():this,i?[n]:arguments)})}),n=null}).promise()},promise:function(n){return null!=n?on.extend(n,r):r}},o={};return r.pipe=r.then,on.each(e,function(n,a){var i=a[2],u=a[3];r[a[1]]=i.add,u&&i.add(function(){t=u},e[1^n][2].disable,e[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?r:this,arguments),this},o[a[0]+"With"]=i.fireWith}),r.promise(o),n&&n.call(o,o),o},when:function(n){var e,t,r,o=0,a=Z.call(arguments),i=a.length,u=1!==i||n&&on.isFunction(n.promise)?i:0,c=1===u?n:on.Deferred(),l=function(n,t,r){return function(o){t[n]=this,r[n]=arguments.length>1?Z.call(arguments):o,r===e?c.notifyWith(t,r):--u||c.resolveWith(t,r)}};if(i>1)for(e=new Array(i),t=new Array(i),r=new Array(i);i>o;o++)a[o]&&on.isFunction(a[o].promise)?a[o].promise().done(l(o,r,a)).fail(c.reject).progress(l(o,t,e)):--u;return u||c.resolveWith(r,a),c.promise()}});var Sn;on.fn.ready=function(n){return on.ready.promise().done(n),this},on.extend({isReady:!1,readyWait:1,holdReady:function(n){n?on.readyWait++:on.ready(!0)},ready:function(n){if(n===!0?!--on.readyWait:!on.isReady){if(!hn.body)return setTimeout(on.ready);on.isReady=!0,n!==!0&&--on.readyWait>0||(Sn.resolveWith(hn,[on]),on.fn.triggerHandler&&(on(hn).triggerHandler("ready"),on(hn).off("ready")))}}}),on.ready.promise=function(e){if(!Sn)if(Sn=on.Deferred(),"complete"===hn.readyState)setTimeout(on.ready);else if(hn.addEventListener)hn.addEventListener("DOMContentLoaded",u,!1),n.addEventListener("load",u,!1);else{hn.attachEvent("onreadystatechange",u),n.attachEvent("onload",u);var t=!1;try{t=null==n.frameElement&&hn.documentElement}catch(r){}t&&t.doScroll&&!function o(){if(!on.isReady){try{t.doScroll("left")}catch(n){return setTimeout(o,50)}i(),on.ready()}}()}return Sn.promise(e)};var Pn,yn="undefined";for(Pn in on(tn))break;tn.ownLast="0"!==Pn,tn.inlineBlockNeedsLayout=!1,on(function(){var n,e,t,r;t=hn.getElementsByTagName("body")[0],t&&t.style&&(e=hn.createElement("div"),r=hn.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(r).appendChild(e),typeof e.style.zoom!==yn&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",tn.inlineBlockNeedsLayout=n=3===e.offsetWidth,n&&(t.style.zoom=1)),t.removeChild(r))}),function(){var n=hn.createElement("div");if(null==tn.deleteExpando){tn.deleteExpando=!0;try{delete n.test}catch(e){tn.deleteExpando=!1}}n=null}(),on.acceptData=function(n){var e=on.noData[(n.nodeName+" ").toLowerCase()],t=+n.nodeType||1;return 1!==t&&9!==t?!1:!e||e!==!0&&n.getAttribute("classid")===e};var bn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Tn=/([A-Z])/g;on.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(n){return n=n.nodeType?on.cache[n[on.expando]]:n[on.expando],!!n&&!l(n)},data:function(n,e,t){return s(n,e,t)},removeData:function(n,e){return f(n,e)},_data:function(n,e,t){return s(n,e,t,!0)},_removeData:function(n,e){return f(n,e,!0)}}),on.fn.extend({data:function(n,e){var t,r,o,a=this[0],i=a&&a.attributes;if(void 0===n){if(this.length&&(o=on.data(a),1===a.nodeType&&!on._data(a,"parsedAttrs"))){for(t=i.length;t--;)i[t]&&(r=i[t].name,0===r.indexOf("data-")&&(r=on.camelCase(r.slice(5)),c(a,r,o[r])));on._data(a,"parsedAttrs",!0)}return o}return"object"==typeof n?this.each(function(){on.data(this,n)}):arguments.length>1?this.each(function(){on.data(this,n,e)}):a?c(a,n,on.data(a,n)):void 0},removeData:function(n){return this.each(function(){on.removeData(this,n)})}}),on.extend({queue:function(n,e,t){var r;return n?(e=(e||"fx")+"queue",r=on._data(n,e),t&&(!r||on.isArray(t)?r=on._data(n,e,on.makeArray(t)):r.push(t)),r||[]):void 0},dequeue:function(n,e){e=e||"fx";var t=on.queue(n,e),r=t.length,o=t.shift(),a=on._queueHooks(n,e),i=function(){on.dequeue(n,e)};"inprogress"===o&&(o=t.shift(),r--),o&&("fx"===e&&t.unshift("inprogress"),delete a.stop,o.call(n,i,a)),!r&&a&&a.empty.fire()},_queueHooks:function(n,e){var t=e+"queueHooks";return on._data(n,t)||on._data(n,t,{empty:on.Callbacks("once memory").add(function(){on._removeData(n,e+"queue"),on._removeData(n,t)})})}}),on.fn.extend({queue:function(n,e){var t=2;return"string"!=typeof n&&(e=n,n="fx",t--),arguments.length<t?on.queue(this[0],n):void 0===e?this:this.each(function(){var t=on.queue(this,n,e);on._queueHooks(this,n),"fx"===n&&"inprogress"!==t[0]&&on.dequeue(this,n)})},dequeue:function(n){return this.each(function(){on.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,e){var t,r=1,o=on.Deferred(),a=this,i=this.length,u=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof n&&(e=n,n=void 0),n=n||"fx";i--;)t=on._data(a[i],n+"queueHooks"),t&&t.empty&&(r++,t.empty.add(u));return u(),o.promise(e)}});var En=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Fn=["Top","Right","Bottom","Left"],xn=function(n,e){return n=e||n,"none"===on.css(n,"display")||!on.contains(n.ownerDocument,n)},An=on.access=function(n,e,t,r,o,a,i){var u=0,c=n.length,l=null==t;if("object"===on.type(t)){o=!0;for(u in t)on.access(n,e,u,t[u],!0,a,i)}else if(void 0!==r&&(o=!0,on.isFunction(r)||(i=!0),l&&(i?(e.call(n,r),e=null):(l=e,e=function(n,e,t){return l.call(on(n),t)})),e))for(;c>u;u++)e(n[u],t,i?r:r.call(n[u],u,e(n[u],t)));return o?n:l?e.call(n):c?e(n[0],t):a},Nn=/^(?:checkbox|radio)$/i;!function(){var n=hn.createElement("input"),e=hn.createElement("div"),t=hn.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",tn.leadingWhitespace=3===e.firstChild.nodeType,tn.tbody=!e.getElementsByTagName("tbody").length,tn.htmlSerialize=!!e.getElementsByTagName("link").length,tn.html5Clone="<:nav></:nav>"!==hn.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),tn.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",tn.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",tn.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,tn.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){tn.noCloneEvent=!1}),e.cloneNode(!0).click()),null==tn.deleteExpando){tn.deleteExpando=!0;try{delete e.test}catch(r){tn.deleteExpando=!1}}}(),function(){var e,t,r=hn.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(tn[e+"Bubbles"]=t in n)||(r.setAttribute(t,"t"),tn[e+"Bubbles"]=r.attributes[t].expando===!1);r=null}();var Dn=/^(?:input|select|textarea)$/i,Mn=/^key/,Ln=/^(?:mouse|pointer|contextmenu)|click/,On=/^(?:focusinfocus|focusoutblur)$/,In=/^([^.]*)(?:\.(.+)|)$/;on.event={global:{},add:function(n,e,t,r,o){var a,i,u,c,l,s,f,d,v,m,h,p=on._data(n);if(p){for(t.handler&&(c=t,t=c.handler,o=c.selector),t.guid||(t.guid=on.guid++),(i=p.events)||(i=p.events={}),(s=p.handle)||(s=p.handle=function(n){return typeof on===yn||n&&on.event.triggered===n.type?void 0:on.event.dispatch.apply(s.elem,arguments)},s.elem=n),e=(e||"").match($n)||[""],u=e.length;u--;)a=In.exec(e[u])||[],v=h=a[1],m=(a[2]||"").split(".").sort(),v&&(l=on.event.special[v]||{},v=(o?l.delegateType:l.bindType)||v,l=on.event.special[v]||{},f=on.extend({type:v,origType:h,data:r,handler:t,guid:t.guid,selector:o,needsContext:o&&on.expr.match.needsContext.test(o),namespace:m.join(".")},c),(d=i[v])||(d=i[v]=[],d.delegateCount=0,l.setup&&l.setup.call(n,r,m,s)!==!1||(n.addEventListener?n.addEventListener(v,s,!1):n.attachEvent&&n.attachEvent("on"+v,s))),l.add&&(l.add.call(n,f),f.handler.guid||(f.handler.guid=t.guid)),o?d.splice(d.delegateCount++,0,f):d.push(f),on.event.global[v]=!0);n=null}},remove:function(n,e,t,r,o){var a,i,u,c,l,s,f,d,v,m,h,p=on.hasData(n)&&on._data(n);if(p&&(s=p.events)){for(e=(e||"").match($n)||[""],l=e.length;l--;)if(u=In.exec(e[l])||[],v=h=u[1],m=(u[2]||"").split(".").sort(),v){for(f=on.event.special[v]||{},v=(r?f.delegateType:f.bindType)||v,d=s[v]||[],u=u[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=a=d.length;a--;)i=d[a],!o&&h!==i.origType||t&&t.guid!==i.guid||u&&!u.test(i.namespace)||r&&r!==i.selector&&("**"!==r||!i.selector)||(d.splice(a,1),i.selector&&d.delegateCount--,f.remove&&f.remove.call(n,i));c&&!d.length&&(f.teardown&&f.teardown.call(n,m,p.handle)!==!1||on.removeEvent(n,v,p.handle),delete s[v])}else for(v in s)on.event.remove(n,v+e[l],t,r,!0);on.isEmptyObject(s)&&(delete p.handle,on._removeData(n,"events"))}},trigger:function(e,t,r,o){var a,i,u,c,l,s,f,d=[r||hn],v=en.call(e,"type")?e.type:e,m=en.call(e,"namespace")?e.namespace.split("."):[];if(u=s=r=r||hn,3!==r.nodeType&&8!==r.nodeType&&!On.test(v+on.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),i=v.indexOf(":")<0&&"on"+v,e=e[on.expando]?e:new on.Event(v,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:on.makeArray(t,[e]),l=on.event.special[v]||{},o||!l.trigger||l.trigger.apply(r,t)!==!1)){if(!o&&!l.noBubble&&!on.isWindow(r)){for(c=l.delegateType||v,On.test(c+v)||(u=u.parentNode);u;u=u.parentNode)d.push(u),s=u;s===(r.ownerDocument||hn)&&d.push(s.defaultView||s.parentWindow||n)}for(f=0;(u=d[f++])&&!e.isPropagationStopped();)e.type=f>1?c:l.bindType||v,a=(on._data(u,"events")||{})[e.type]&&on._data(u,"handle"),a&&a.apply(u,t),a=i&&u[i],a&&a.apply&&on.acceptData(u)&&(e.result=a.apply(u,t),e.result===!1&&e.preventDefault());if(e.type=v,!o&&!e.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),t)===!1)&&on.acceptData(r)&&i&&r[v]&&!on.isWindow(r)){s=r[i],s&&(r[i]=null),on.event.triggered=v;try{r[v]()}catch(h){}on.event.triggered=void 0,s&&(r[i]=s)}return e.result}},dispatch:function(n){n=on.event.fix(n);var e,t,r,o,a,i=[],u=Z.call(arguments),c=(on._data(this,"events")||{})[n.type]||[],l=on.event.special[n.type]||{};if(u[0]=n,n.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,n)!==!1){for(i=on.event.handlers.call(this,n,c),e=0;(o=i[e++])&&!n.isPropagationStopped();)for(n.currentTarget=o.elem,a=0;(r=o.handlers[a++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(r.namespace))&&(n.handleObj=r,n.data=r.data,t=((on.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,u),void 0!==t&&(n.result=t)===!1&&(n.preventDefault(),n.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,n),n.result}},handlers:function(n,e){var t,r,o,a,i=[],u=e.delegateCount,c=n.target;if(u&&c.nodeType&&(!n.button||"click"!==n.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==n.type)){for(o=[],a=0;u>a;a++)r=e[a],t=r.selector+" ",void 0===o[t]&&(o[t]=r.needsContext?on(t,this).index(c)>=0:on.find(t,this,null,[c]).length),o[t]&&o.push(r);o.length&&i.push({elem:c,handlers:o})}return u<e.length&&i.push({elem:this,handlers:e.slice(u)}),i},fix:function(n){if(n[on.expando])return n;var e,t,r,o=n.type,a=n,i=this.fixHooks[o];for(i||(this.fixHooks[o]=i=Ln.test(o)?this.mouseHooks:Mn.test(o)?this.keyHooks:{}),r=i.props?this.props.concat(i.props):this.props,n=new on.Event(a),e=r.length;e--;)t=r[e],n[t]=a[t];return n.target||(n.target=a.srcElement||hn),3===n.target.nodeType&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,i.filter?i.filter(n,a):n},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,e){return null==n.which&&(n.which=null!=e.charCode?e.charCode:e.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,e){var t,r,o,a=e.button,i=e.fromElement;return null==n.pageX&&null!=e.clientX&&(r=n.target.ownerDocument||hn,o=r.documentElement,t=r.body,n.pageX=e.clientX+(o&&o.scrollLeft||t&&t.scrollLeft||0)-(o&&o.clientLeft||t&&t.clientLeft||0),n.pageY=e.clientY+(o&&o.scrollTop||t&&t.scrollTop||0)-(o&&o.clientTop||t&&t.clientTop||0)),!n.relatedTarget&&i&&(n.relatedTarget=i===n.target?e.toElement:i),n.which||void 0===a||(n.which=1&a?1:2&a?3:4&a?2:0),n}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)try{return this.focus(),!1}catch(n){}},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return on.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(n){return on.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){void 0!==n.result&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,e,t,r){var o=on.extend(new on.Event,t,{type:n,isSimulated:!0,originalEvent:{}});r?on.event.trigger(o,null,e):on.event.dispatch.call(e,o),o.isDefaultPrevented()&&t.preventDefault()}},on.removeEvent=hn.removeEventListener?function(n,e,t){n.removeEventListener&&n.removeEventListener(e,t,!1)}:function(n,e,t){var r="on"+e;n.detachEvent&&(typeof n[r]===yn&&(n[r]=null),n.detachEvent(r,t))},on.Event=function(n,e){return this instanceof on.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&n.returnValue===!1?d:v):this.type=n,e&&on.extend(this,e),this.timeStamp=n&&n.timeStamp||on.now(),void(this[on.expando]=!0)):new on.Event(n,e)},on.Event.prototype={isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=d,n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=d,n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=d,n&&n.stopImmediatePropagation&&n.stopImmediatePropagation(),this.stopPropagation()}},on.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,e){on.event.special[n]={delegateType:e,bindType:e,handle:function(n){var t,r=this,o=n.relatedTarget,a=n.handleObj;return(!o||o!==r&&!on.contains(r,o))&&(n.type=a.origType,t=a.handler.apply(this,arguments),n.type=e),t}}}),tn.submitBubbles||(on.event.special.submit={setup:function(){return on.nodeName(this,"form")?!1:void on.event.add(this,"click._submit keypress._submit",function(n){var e=n.target,t=on.nodeName(e,"input")||on.nodeName(e,"button")?e.form:void 0;t&&!on._data(t,"submitBubbles")&&(on.event.add(t,"submit._submit",function(n){n._submit_bubble=!0}),on._data(t,"submitBubbles",!0))})},postDispatch:function(n){n._submit_bubble&&(delete n._submit_bubble,this.parentNode&&!n.isTrigger&&on.event.simulate("submit",this.parentNode,n,!0))},teardown:function(){return on.nodeName(this,"form")?!1:void on.event.remove(this,"._submit")}}),tn.changeBubbles||(on.event.special.change={setup:function(){return Dn.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(on.event.add(this,"propertychange._change",function(n){"checked"===n.originalEvent.propertyName&&(this._just_changed=!0)}),on.event.add(this,"click._change",function(n){this._just_changed&&!n.isTrigger&&(this._just_changed=!1),on.event.simulate("change",this,n,!0)})),!1):void on.event.add(this,"beforeactivate._change",function(n){var e=n.target;Dn.test(e.nodeName)&&!on._data(e,"changeBubbles")&&(on.event.add(e,"change._change",function(n){!this.parentNode||n.isSimulated||n.isTrigger||on.event.simulate("change",this.parentNode,n,!0)}),on._data(e,"changeBubbles",!0))})},handle:function(n){var e=n.target;return this!==e||n.isSimulated||n.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?n.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return on.event.remove(this,"._change"),!Dn.test(this.nodeName)}}),tn.focusinBubbles||on.each({focus:"focusin",blur:"focusout"},function(n,e){var t=function(n){on.event.simulate(e,n.target,on.event.fix(n),!0)};on.event.special[e]={setup:function(){var r=this.ownerDocument||this,o=on._data(r,e);o||r.addEventListener(n,t,!0),on._data(r,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=on._data(r,e)-1;o?on._data(r,e,o):(r.removeEventListener(n,t,!0),on._removeData(r,e))}}}),on.fn.extend({on:function(n,e,t,r,o){var a,i;if("object"==typeof n){"string"!=typeof e&&(t=t||e,e=void 0);for(a in n)this.on(a,e,t,n[a],o);return this}if(null==t&&null==r?(r=e,t=e=void 0):null==r&&("string"==typeof e?(r=t,t=void 0):(r=t,t=e,e=void 0)),r===!1)r=v;else if(!r)return this;return 1===o&&(i=r,r=function(n){return on().off(n),i.apply(this,arguments)},r.guid=i.guid||(i.guid=on.guid++)),this.each(function(){on.event.add(this,n,r,t,e)})},one:function(n,e,t,r){return this.on(n,e,t,r,1)},off:function(n,e,t){var r,o;if(n&&n.preventDefault&&n.handleObj)return r=n.handleObj,on(n.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof n){for(o in n)this.off(o,e,n[o]);return this}return(e===!1||"function"==typeof e)&&(t=e,e=void 0),t===!1&&(t=v),this.each(function(){on.event.remove(this,n,t,e)})},trigger:function(n,e){return this.each(function(){on.event.trigger(n,e,this)})},triggerHandler:function(n,e){var t=this[0];return t?on.event.trigger(n,e,t,!0):void 0}});var Rn="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",kn=/ jQuery\d+="(?:null|\d+)"/g,Un=new RegExp("<(?:"+Rn+")[\\s/>]","i"),Gn=/^\s+/,Bn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Jn=/<([\w:]+)/,zn=/<tbody/i,Hn=/<|&#?\w+;/,Wn=/<(?:script|style|link)/i,jn=/checked\s*(?:[^=]|=\s*.checked.)/i,qn=/^$|\/(?:java|ecma)script/i,Vn=/^true\/(.*)/,Zn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xn={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:tn.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Kn=h(hn),Yn=Kn.appendChild(hn.createElement("div"));Xn.optgroup=Xn.option,Xn.tbody=Xn.tfoot=Xn.colgroup=Xn.caption=Xn.thead,Xn.th=Xn.td,on.extend({clone:function(n,e,t){var r,o,a,i,u,c=on.contains(n.ownerDocument,n);if(tn.html5Clone||on.isXMLDoc(n)||!Un.test("<"+n.nodeName+">")?a=n.cloneNode(!0):(Yn.innerHTML=n.outerHTML,Yn.removeChild(a=Yn.firstChild)),!(tn.noCloneEvent&&tn.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||on.isXMLDoc(n)))for(r=p(a),u=p(n),i=0;null!=(o=u[i]);++i)r[i]&&P(o,r[i]);if(e)if(t)for(u=u||p(n),r=r||p(a),i=0;null!=(o=u[i]);i++)S(o,r[i]);else S(n,a);return r=p(a,"script"),r.length>0&&C(r,!c&&p(n,"script")),r=u=o=null,a},buildFragment:function(n,e,t,r){for(var o,a,i,u,c,l,s,f=n.length,d=h(e),v=[],m=0;f>m;m++)if(a=n[m],a||0===a)if("object"===on.type(a))on.merge(v,a.nodeType?[a]:a);else if(Hn.test(a)){for(u=u||d.appendChild(e.createElement("div")),c=(Jn.exec(a)||["",""])[1].toLowerCase(),s=Xn[c]||Xn._default,u.innerHTML=s[1]+a.replace(Bn,"<$1></$2>")+s[2],o=s[0];o--;)u=u.lastChild;if(!tn.leadingWhitespace&&Gn.test(a)&&v.push(e.createTextNode(Gn.exec(a)[0])),!tn.tbody)for(a="table"!==c||zn.test(a)?"<table>"!==s[1]||zn.test(a)?0:u:u.firstChild,o=a&&a.childNodes.length;o--;)on.nodeName(l=a.childNodes[o],"tbody")&&!l.childNodes.length&&a.removeChild(l);for(on.merge(v,u.childNodes),u.textContent="";u.firstChild;)u.removeChild(u.firstChild);u=d.lastChild}else v.push(e.createTextNode(a));for(u&&d.removeChild(u),tn.appendChecked||on.grep(p(v,"input"),g),m=0;a=v[m++];)if((!r||-1===on.inArray(a,r))&&(i=on.contains(a.ownerDocument,a),u=p(d.appendChild(a),"script"),i&&C(u),t))for(o=0;a=u[o++];)qn.test(a.type||"")&&t.push(a);return u=null,d},cleanData:function(n,e){for(var t,r,o,a,i=0,u=on.expando,c=on.cache,l=tn.deleteExpando,s=on.event.special;null!=(t=n[i]);i++)if((e||on.acceptData(t))&&(o=t[u],a=o&&c[o])){if(a.events)for(r in a.events)s[r]?on.event.remove(t,r):on.removeEvent(t,r,a.handle);c[o]&&(delete c[o],l?delete t[u]:typeof t.removeAttribute!==yn?t.removeAttribute(u):t[u]=null,V.push(o))}}}),on.fn.extend({text:function(n){return An(this,function(n){return void 0===n?on.text(this):this.empty().append((this[0]&&this[0].ownerDocument||hn).createTextNode(n))},null,n,arguments.length)},append:function(){return this.domManip(arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=w(this,n);e.appendChild(n)}})},prepend:function(){return this.domManip(arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=w(this,n);e.insertBefore(n,e.firstChild)}})},before:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,e){for(var t,r=n?on.filter(n,this):this,o=0;null!=(t=r[o]);o++)e||1!==t.nodeType||on.cleanData(p(t)),t.parentNode&&(e&&on.contains(t.ownerDocument,t)&&C(p(t,"script")),t.parentNode.removeChild(t));return this},empty:function(){for(var n,e=0;null!=(n=this[e]);e++){for(1===n.nodeType&&on.cleanData(p(n,!1));n.firstChild;)n.removeChild(n.firstChild);n.options&&on.nodeName(n,"select")&&(n.options.length=0)}return this},clone:function(n,e){return n=null==n?!1:n,e=null==e?n:e,this.map(function(){return on.clone(this,n,e)})},html:function(n){return An(this,function(n){
var e=this[0]||{},t=0,r=this.length;if(void 0===n)return 1===e.nodeType?e.innerHTML.replace(kn,""):void 0;if("string"==typeof n&&!Wn.test(n)&&(tn.htmlSerialize||!Un.test(n))&&(tn.leadingWhitespace||!Gn.test(n))&&!Xn[(Jn.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(Bn,"<$1></$2>");try{for(;r>t;t++)e=this[t]||{},1===e.nodeType&&(on.cleanData(p(e,!1)),e.innerHTML=n);e=0}catch(o){}}e&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=arguments[0];return this.domManip(arguments,function(e){n=this.parentNode,on.cleanData(p(this)),n&&n.replaceChild(e,this)}),n&&(n.length||n.nodeType)?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,e){n=X.apply([],n);var t,r,o,a,i,u,c=0,l=this.length,s=this,f=l-1,d=n[0],v=on.isFunction(d);if(v||l>1&&"string"==typeof d&&!tn.checkClone&&jn.test(d))return this.each(function(t){var r=s.eq(t);v&&(n[0]=d.call(this,t,r.html())),r.domManip(n,e)});if(l&&(u=on.buildFragment(n,this[0].ownerDocument,!1,this),t=u.firstChild,1===u.childNodes.length&&(u=t),t)){for(a=on.map(p(u,"script"),_),o=a.length;l>c;c++)r=u,c!==f&&(r=on.clone(r,!0,!0),o&&on.merge(a,p(r,"script"))),e.call(this[c],r,c);if(o)for(i=a[a.length-1].ownerDocument,on.map(a,$),c=0;o>c;c++)r=a[c],qn.test(r.type||"")&&!on._data(r,"globalEval")&&on.contains(i,r)&&(r.src?on._evalUrl&&on._evalUrl(r.src):on.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Zn,"")));u=t=null}return this}}),on.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,e){on.fn[n]=function(n){for(var t,r=0,o=[],a=on(n),i=a.length-1;i>=r;r++)t=r===i?this:this.clone(!0),on(a[r])[e](t),K.apply(o,t.get());return this.pushStack(o)}});var Qn,ne={};!function(){var n;tn.shrinkWrapBlocks=function(){if(null!=n)return n;n=!1;var e,t,r;return t=hn.getElementsByTagName("body")[0],t&&t.style?(e=hn.createElement("div"),r=hn.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(r).appendChild(e),typeof e.style.zoom!==yn&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(hn.createElement("div")).style.width="5px",n=3!==e.offsetWidth),t.removeChild(r),n):void 0}}();var ee,te,re=/^margin/,oe=new RegExp("^("+En+")(?!px)[a-z%]+$","i"),ae=/^(top|right|bottom|left)$/;n.getComputedStyle?(ee=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):n.getComputedStyle(e,null)},te=function(n,e,t){var r,o,a,i,u=n.style;return t=t||ee(n),i=t?t.getPropertyValue(e)||t[e]:void 0,t&&(""!==i||on.contains(n.ownerDocument,n)||(i=on.style(n,e)),oe.test(i)&&re.test(e)&&(r=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=i,i=t.width,u.width=r,u.minWidth=o,u.maxWidth=a)),void 0===i?i:i+""}):hn.documentElement.currentStyle&&(ee=function(n){return n.currentStyle},te=function(n,e,t){var r,o,a,i,u=n.style;return t=t||ee(n),i=t?t[e]:void 0,null==i&&u&&u[e]&&(i=u[e]),oe.test(i)&&!ae.test(e)&&(r=u.left,o=n.runtimeStyle,a=o&&o.left,a&&(o.left=n.currentStyle.left),u.left="fontSize"===e?"1em":i,i=u.pixelLeft+"px",u.left=r,a&&(o.left=a)),void 0===i?i:i+""||"auto"}),function(){function e(){var e,t,r,o;t=hn.getElementsByTagName("body")[0],t&&t.style&&(e=hn.createElement("div"),r=hn.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(r).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a=i=!1,c=!0,n.getComputedStyle&&(a="1%"!==(n.getComputedStyle(e,null)||{}).top,i="4px"===(n.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(hn.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",c=!parseFloat((n.getComputedStyle(o,null)||{}).marginRight),e.removeChild(o)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",u=0===o[0].offsetHeight,u&&(o[0].style.display="",o[1].style.display="none",u=0===o[0].offsetHeight),t.removeChild(r))}var t,r,o,a,i,u,c;t=hn.createElement("div"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=t.getElementsByTagName("a")[0],r=o&&o.style,r&&(r.cssText="float:left;opacity:.5",tn.opacity="0.5"===r.opacity,tn.cssFloat=!!r.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",tn.clearCloneStyle="content-box"===t.style.backgroundClip,tn.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,on.extend(tn,{reliableHiddenOffsets:function(){return null==u&&e(),u},boxSizingReliable:function(){return null==i&&e(),i},pixelPosition:function(){return null==a&&e(),a},reliableMarginRight:function(){return null==c&&e(),c}}))}(),on.swap=function(n,e,t,r){var o,a,i={};for(a in e)i[a]=n.style[a],n.style[a]=e[a];o=t.apply(n,r||[]);for(a in e)n.style[a]=i[a];return o};var ie=/alpha\([^)]*\)/i,ue=/opacity\s*=\s*([^)]*)/,ce=/^(none|table(?!-c[ea]).+)/,le=new RegExp("^("+En+")(.*)$","i"),se=new RegExp("^([+-])=("+En+")","i"),fe={position:"absolute",visibility:"hidden",display:"block"},de={letterSpacing:"0",fontWeight:"400"},ve=["Webkit","O","Moz","ms"];on.extend({cssHooks:{opacity:{get:function(n,e){if(e){var t=te(n,"opacity");return""===t?"1":t}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":tn.cssFloat?"cssFloat":"styleFloat"},style:function(n,e,t,r){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var o,a,i,u=on.camelCase(e),c=n.style;if(e=on.cssProps[u]||(on.cssProps[u]=E(c,u)),i=on.cssHooks[e]||on.cssHooks[u],void 0===t)return i&&"get"in i&&void 0!==(o=i.get(n,!1,r))?o:c[e];if(a=typeof t,"string"===a&&(o=se.exec(t))&&(t=(o[1]+1)*o[2]+parseFloat(on.css(n,e)),a="number"),null!=t&&t===t&&("number"!==a||on.cssNumber[u]||(t+="px"),tn.clearCloneStyle||""!==t||0!==e.indexOf("background")||(c[e]="inherit"),!(i&&"set"in i&&void 0===(t=i.set(n,t,r)))))try{c[e]=t}catch(l){}}},css:function(n,e,t,r){var o,a,i,u=on.camelCase(e);return e=on.cssProps[u]||(on.cssProps[u]=E(n.style,u)),i=on.cssHooks[e]||on.cssHooks[u],i&&"get"in i&&(a=i.get(n,!0,t)),void 0===a&&(a=te(n,e,r)),"normal"===a&&e in de&&(a=de[e]),""===t||t?(o=parseFloat(a),t===!0||on.isNumeric(o)?o||0:a):a}}),on.each(["height","width"],function(n,e){on.cssHooks[e]={get:function(n,t,r){return t?ce.test(on.css(n,"display"))&&0===n.offsetWidth?on.swap(n,fe,function(){return N(n,e,r)}):N(n,e,r):void 0},set:function(n,t,r){var o=r&&ee(n);return x(n,t,r?A(n,e,r,tn.boxSizing&&"border-box"===on.css(n,"boxSizing",!1,o),o):0)}}}),tn.opacity||(on.cssHooks.opacity={get:function(n,e){return ue.test((e&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(n,e){var t=n.style,r=n.currentStyle,o=on.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=r&&r.filter||t.filter||"";t.zoom=1,(e>=1||""===e)&&""===on.trim(a.replace(ie,""))&&t.removeAttribute&&(t.removeAttribute("filter"),""===e||r&&!r.filter)||(t.filter=ie.test(a)?a.replace(ie,o):a+" "+o)}}),on.cssHooks.marginRight=T(tn.reliableMarginRight,function(n,e){return e?on.swap(n,{display:"inline-block"},te,[n,"marginRight"]):void 0}),on.each({margin:"",padding:"",border:"Width"},function(n,e){on.cssHooks[n+e]={expand:function(t){for(var r=0,o={},a="string"==typeof t?t.split(" "):[t];4>r;r++)o[n+Fn[r]+e]=a[r]||a[r-2]||a[0];return o}},re.test(n)||(on.cssHooks[n+e].set=x)}),on.fn.extend({css:function(n,e){return An(this,function(n,e,t){var r,o,a={},i=0;if(on.isArray(e)){for(r=ee(n),o=e.length;o>i;i++)a[e[i]]=on.css(n,e[i],!1,r);return a}return void 0!==t?on.style(n,e,t):on.css(n,e)},n,e,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){xn(this)?on(this).show():on(this).hide()})}}),on.Tween=D,D.prototype={constructor:D,init:function(n,e,t,r,o,a){this.elem=n,this.prop=t,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=a||(on.cssNumber[t]?"":"px")},cur:function(){var n=D.propHooks[this.prop];return n&&n.get?n.get(this):D.propHooks._default.get(this)},run:function(n){var e,t=D.propHooks[this.prop];return this.options.duration?this.pos=e=on.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):this.pos=e=n,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(n){var e;return null==n.elem[n.prop]||n.elem.style&&null!=n.elem.style[n.prop]?(e=on.css(n.elem,n.prop,""),e&&"auto"!==e?e:0):n.elem[n.prop]},set:function(n){on.fx.step[n.prop]?on.fx.step[n.prop](n):n.elem.style&&(null!=n.elem.style[on.cssProps[n.prop]]||on.cssHooks[n.prop])?on.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}},on.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}},on.fx=D.prototype.init,on.fx.step={};var me,he,pe=/^(?:toggle|show|hide)$/,ge=new RegExp("^(?:([+-])=|)("+En+")([a-z%]*)$","i"),we=/queueHooks$/,_e=[I],$e={"*":[function(n,e){var t=this.createTween(n,e),r=t.cur(),o=ge.exec(e),a=o&&o[3]||(on.cssNumber[n]?"":"px"),i=(on.cssNumber[n]||"px"!==a&&+r)&&ge.exec(on.css(t.elem,n)),u=1,c=20;if(i&&i[3]!==a){a=a||i[3],o=o||[],i=+r||1;do u=u||".5",i/=u,on.style(t.elem,n,i+a);while(u!==(u=t.cur()/r)&&1!==u&&--c)}return o&&(i=t.start=+i||+r||0,t.unit=a,t.end=o[1]?i+(o[1]+1)*o[2]:+o[2]),t}]};on.Animation=on.extend(k,{tweener:function(n,e){on.isFunction(n)?(e=n,n=["*"]):n=n.split(" ");for(var t,r=0,o=n.length;o>r;r++)t=n[r],$e[t]=$e[t]||[],$e[t].unshift(e)},prefilter:function(n,e){e?_e.unshift(n):_e.push(n)}}),on.speed=function(n,e,t){var r=n&&"object"==typeof n?on.extend({},n):{complete:t||!t&&e||on.isFunction(n)&&n,duration:n,easing:t&&e||e&&!on.isFunction(e)&&e};return r.duration=on.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in on.fx.speeds?on.fx.speeds[r.duration]:on.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){on.isFunction(r.old)&&r.old.call(this),r.queue&&on.dequeue(this,r.queue)},r},on.fn.extend({fadeTo:function(n,e,t,r){return this.filter(xn).css("opacity",0).show().end().animate({opacity:e},n,t,r)},animate:function(n,e,t,r){var o=on.isEmptyObject(n),a=on.speed(e,t,r),i=function(){var e=k(this,on.extend({},n),a);(o||on._data(this,"finish"))&&e.stop(!0)};return i.finish=i,o||a.queue===!1?this.each(i):this.queue(a.queue,i)},stop:function(n,e,t){var r=function(n){var e=n.stop;delete n.stop,e(t)};return"string"!=typeof n&&(t=e,e=n,n=void 0),e&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var e=!0,o=null!=n&&n+"queueHooks",a=on.timers,i=on._data(this);if(o)i[o]&&i[o].stop&&r(i[o]);else for(o in i)i[o]&&i[o].stop&&we.test(o)&&r(i[o]);for(o=a.length;o--;)a[o].elem!==this||null!=n&&a[o].queue!==n||(a[o].anim.stop(t),e=!1,a.splice(o,1));(e||!t)&&on.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var e,t=on._data(this),r=t[n+"queue"],o=t[n+"queueHooks"],a=on.timers,i=r?r.length:0;for(t.finish=!0,on.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===n&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;i>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete t.finish})}}),on.each(["toggle","show","hide"],function(n,e){var t=on.fn[e];on.fn[e]=function(n,r,o){return null==n||"boolean"==typeof n?t.apply(this,arguments):this.animate(L(e,!0),n,r,o)}}),on.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,e){on.fn[n]=function(n,t,r){return this.animate(e,n,t,r)}}),on.timers=[],on.fx.tick=function(){var n,e=on.timers,t=0;for(me=on.now();t<e.length;t++)n=e[t],n()||e[t]!==n||e.splice(t--,1);e.length||on.fx.stop(),me=void 0},on.fx.timer=function(n){on.timers.push(n),n()?on.fx.start():on.timers.pop()},on.fx.interval=13,on.fx.start=function(){he||(he=setInterval(on.fx.tick,on.fx.interval))},on.fx.stop=function(){clearInterval(he),he=null},on.fx.speeds={slow:600,fast:200,_default:400},on.fn.delay=function(n,e){return n=on.fx?on.fx.speeds[n]||n:n,e=e||"fx",this.queue(e,function(e,t){var r=setTimeout(e,n);t.stop=function(){clearTimeout(r)}})},function(){var n,e,t,r,o;e=hn.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=e.getElementsByTagName("a")[0],t=hn.createElement("select"),o=t.appendChild(hn.createElement("option")),n=e.getElementsByTagName("input")[0],r.style.cssText="top:1px",tn.getSetAttribute="t"!==e.className,tn.style=/top/.test(r.getAttribute("style")),tn.hrefNormalized="/a"===r.getAttribute("href"),tn.checkOn=!!n.value,tn.optSelected=o.selected,tn.enctype=!!hn.createElement("form").enctype,t.disabled=!0,tn.optDisabled=!o.disabled,n=hn.createElement("input"),n.setAttribute("value",""),tn.input=""===n.getAttribute("value"),n.value="t",n.setAttribute("type","radio"),tn.radioValue="t"===n.value}();var Ce=/\r/g;on.fn.extend({val:function(n){var e,t,r,o=this[0];{if(arguments.length)return r=on.isFunction(n),this.each(function(t){var o;1===this.nodeType&&(o=r?n.call(this,t,on(this).val()):n,null==o?o="":"number"==typeof o?o+="":on.isArray(o)&&(o=on.map(o,function(n){return null==n?"":n+""})),e=on.valHooks[this.type]||on.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=on.valHooks[o.type]||on.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(t=e.get(o,"value"))?t:(t=o.value,"string"==typeof t?t.replace(Ce,""):null==t?"":t)}}}),on.extend({valHooks:{option:{get:function(n){var e=on.find.attr(n,"value");return null!=e?e:on.trim(on.text(n))}},select:{get:function(n){for(var e,t,r=n.options,o=n.selectedIndex,a="select-one"===n.type||0>o,i=a?null:[],u=a?o+1:r.length,c=0>o?u:a?o:0;u>c;c++)if(t=r[c],(t.selected||c===o)&&(tn.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!on.nodeName(t.parentNode,"optgroup"))){if(e=on(t).val(),a)return e;i.push(e)}return i},set:function(n,e){for(var t,r,o=n.options,a=on.makeArray(e),i=o.length;i--;)if(r=o[i],on.inArray(on.valHooks.option.get(r),a)>=0)try{r.selected=t=!0}catch(u){r.scrollHeight}else r.selected=!1;return t||(n.selectedIndex=-1),o}}}}),on.each(["radio","checkbox"],function(){on.valHooks[this]={set:function(n,e){return on.isArray(e)?n.checked=on.inArray(on(n).val(),e)>=0:void 0}},tn.checkOn||(on.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});var Se,Pe,ye=on.expr.attrHandle,be=/^(?:checked|selected)$/i,Te=tn.getSetAttribute,Ee=tn.input;on.fn.extend({attr:function(n,e){return An(this,on.attr,n,e,arguments.length>1)},removeAttr:function(n){return this.each(function(){on.removeAttr(this,n)})}}),on.extend({attr:function(n,e,t){var r,o,a=n.nodeType;if(n&&3!==a&&8!==a&&2!==a)return typeof n.getAttribute===yn?on.prop(n,e,t):(1===a&&on.isXMLDoc(n)||(e=e.toLowerCase(),r=on.attrHooks[e]||(on.expr.match.bool.test(e)?Pe:Se)),void 0===t?r&&"get"in r&&null!==(o=r.get(n,e))?o:(o=on.find.attr(n,e),null==o?void 0:o):null!==t?r&&"set"in r&&void 0!==(o=r.set(n,t,e))?o:(n.setAttribute(e,t+""),t):void on.removeAttr(n,e))},removeAttr:function(n,e){var t,r,o=0,a=e&&e.match($n);if(a&&1===n.nodeType)for(;t=a[o++];)r=on.propFix[t]||t,on.expr.match.bool.test(t)?Ee&&Te||!be.test(t)?n[r]=!1:n[on.camelCase("default-"+t)]=n[r]=!1:on.attr(n,t,""),n.removeAttribute(Te?t:r)},attrHooks:{type:{set:function(n,e){if(!tn.radioValue&&"radio"===e&&on.nodeName(n,"input")){var t=n.value;return n.setAttribute("type",e),t&&(n.value=t),e}}}}}),Pe={set:function(n,e,t){return e===!1?on.removeAttr(n,t):Ee&&Te||!be.test(t)?n.setAttribute(!Te&&on.propFix[t]||t,t):n[on.camelCase("default-"+t)]=n[t]=!0,t}},on.each(on.expr.match.bool.source.match(/\w+/g),function(n,e){var t=ye[e]||on.find.attr;ye[e]=Ee&&Te||!be.test(e)?function(n,e,r){var o,a;return r||(a=ye[e],ye[e]=o,o=null!=t(n,e,r)?e.toLowerCase():null,ye[e]=a),o}:function(n,e,t){return t?void 0:n[on.camelCase("default-"+e)]?e.toLowerCase():null}}),Ee&&Te||(on.attrHooks.value={set:function(n,e,t){return on.nodeName(n,"input")?void(n.defaultValue=e):Se&&Se.set(n,e,t)}}),Te||(Se={set:function(n,e,t){var r=n.getAttributeNode(t);return r||n.setAttributeNode(r=n.ownerDocument.createAttribute(t)),r.value=e+="","value"===t||e===n.getAttribute(t)?e:void 0}},ye.id=ye.name=ye.coords=function(n,e,t){var r;return t?void 0:(r=n.getAttributeNode(e))&&""!==r.value?r.value:null},on.valHooks.button={get:function(n,e){var t=n.getAttributeNode(e);return t&&t.specified?t.value:void 0},set:Se.set},on.attrHooks.contenteditable={set:function(n,e,t){Se.set(n,""===e?!1:e,t)}},on.each(["width","height"],function(n,e){on.attrHooks[e]={set:function(n,t){return""===t?(n.setAttribute(e,"auto"),t):void 0}}})),tn.style||(on.attrHooks.style={get:function(n){return n.style.cssText||void 0},set:function(n,e){return n.style.cssText=e+""}});var Fe=/^(?:input|select|textarea|button|object)$/i,xe=/^(?:a|area)$/i;on.fn.extend({prop:function(n,e){return An(this,on.prop,n,e,arguments.length>1)},removeProp:function(n){return n=on.propFix[n]||n,this.each(function(){try{this[n]=void 0,delete this[n]}catch(e){}})}}),on.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(n,e,t){var r,o,a,i=n.nodeType;if(n&&3!==i&&8!==i&&2!==i)return a=1!==i||!on.isXMLDoc(n),a&&(e=on.propFix[e]||e,o=on.propHooks[e]),void 0!==t?o&&"set"in o&&void 0!==(r=o.set(n,t,e))?r:n[e]=t:o&&"get"in o&&null!==(r=o.get(n,e))?r:n[e]},propHooks:{tabIndex:{get:function(n){var e=on.find.attr(n,"tabindex");return e?parseInt(e,10):Fe.test(n.nodeName)||xe.test(n.nodeName)&&n.href?0:-1}}}}),tn.hrefNormalized||on.each(["href","src"],function(n,e){on.propHooks[e]={get:function(n){return n.getAttribute(e,4)}}}),tn.optSelected||(on.propHooks.selected={get:function(n){var e=n.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),on.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){on.propFix[this.toLowerCase()]=this}),tn.enctype||(on.propFix.enctype="encoding");var Ae=/[\t\r\n\f]/g;on.fn.extend({addClass:function(n){var e,t,r,o,a,i,u=0,c=this.length,l="string"==typeof n&&n;if(on.isFunction(n))return this.each(function(e){on(this).addClass(n.call(this,e,this.className))});if(l)for(e=(n||"").match($n)||[];c>u;u++)if(t=this[u],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(Ae," "):" ")){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i=on.trim(r),t.className!==i&&(t.className=i)}return this},removeClass:function(n){var e,t,r,o,a,i,u=0,c=this.length,l=0===arguments.length||"string"==typeof n&&n;if(on.isFunction(n))return this.each(function(e){on(this).removeClass(n.call(this,e,this.className))});if(l)for(e=(n||"").match($n)||[];c>u;u++)if(t=this[u],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(Ae," "):"")){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>=0;)r=r.replace(" "+o+" "," ");i=n?on.trim(r):"",t.className!==i&&(t.className=i)}return this},toggleClass:function(n,e){var t=typeof n;return"boolean"==typeof e&&"string"===t?e?this.addClass(n):this.removeClass(n):on.isFunction(n)?this.each(function(t){on(this).toggleClass(n.call(this,t,this.className,e),e)}):this.each(function(){if("string"===t)for(var e,r=0,o=on(this),a=n.match($n)||[];e=a[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(t===yn||"boolean"===t)&&(this.className&&on._data(this,"__className__",this.className),this.className=this.className||n===!1?"":on._data(this,"__className__")||"")})},hasClass:function(n){for(var e=" "+n+" ",t=0,r=this.length;r>t;t++)if(1===this[t].nodeType&&(" "+this[t].className+" ").replace(Ae," ").indexOf(e)>=0)return!0;return!1}}),on.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,e){on.fn[e]=function(n,t){return arguments.length>0?this.on(e,null,n,t):this.trigger(e)}}),on.fn.extend({hover:function(n,e){return this.mouseenter(n).mouseleave(e||n)},bind:function(n,e,t){return this.on(n,null,e,t)},unbind:function(n,e){return this.off(n,null,e)},delegate:function(n,e,t,r){return this.on(e,n,t,r)},undelegate:function(n,e,t){return 1===arguments.length?this.off(n,"**"):this.off(e,n||"**",t)}});var Ne=on.now(),De=/\?/,Me=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;on.parseJSON=function(e){if(n.JSON&&n.JSON.parse)return n.JSON.parse(e+"");var t,r=null,o=on.trim(e+"");return o&&!on.trim(o.replace(Me,function(n,e,o,a){return t&&e&&(r=0),0===r?n:(t=o||e,r+=!a-!o,"")}))?Function("return "+o)():on.error("Invalid JSON: "+e)},on.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{n.DOMParser?(r=new DOMParser,t=r.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(o){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||on.error("Invalid XML: "+e),t};var Le,Oe,Ie=/#.*$/,Re=/([?&])_=[^&]*/,ke=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ue=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ge=/^(?:GET|HEAD)$/,Be=/^\/\//,Je=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ze={},He={},We="*/".concat("*");try{Oe=location.href}catch(je){Oe=hn.createElement("a"),Oe.href="",Oe=Oe.href}Le=Je.exec(Oe.toLowerCase())||[],on.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Oe,type:"GET",isLocal:Ue.test(Le[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":on.parseJSON,"text xml":on.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,e){return e?B(B(n,on.ajaxSettings),e):B(on.ajaxSettings,n)},ajaxPrefilter:U(ze),ajaxTransport:U(He),ajax:function(n,e){function t(n,e,t,r){var o,s,g,w,$,S=e;2!==_&&(_=2,u&&clearTimeout(u),l=void 0,i=r||"",C.readyState=n>0?4:0,o=n>=200&&300>n||304===n,t&&(w=J(f,C,t)),w=z(f,w,C,o),o?(f.ifModified&&($=C.getResponseHeader("Last-Modified"),$&&(on.lastModified[a]=$),$=C.getResponseHeader("etag"),$&&(on.etag[a]=$)),204===n||"HEAD"===f.type?S="nocontent":304===n?S="notmodified":(S=w.state,s=w.data,g=w.error,o=!g)):(g=S,(n||!S)&&(S="error",0>n&&(n=0))),C.status=n,C.statusText=(e||S)+"",o?m.resolveWith(d,[s,S,C]):m.rejectWith(d,[C,S,g]),C.statusCode(p),p=void 0,c&&v.trigger(o?"ajaxSuccess":"ajaxError",[C,f,o?s:g]),h.fireWith(d,[C,S]),c&&(v.trigger("ajaxComplete",[C,f]),--on.active||on.event.trigger("ajaxStop")))}"object"==typeof n&&(e=n,n=void 0),e=e||{};var r,o,a,i,u,c,l,s,f=on.ajaxSetup({},e),d=f.context||f,v=f.context&&(d.nodeType||d.jquery)?on(d):on.event,m=on.Deferred(),h=on.Callbacks("once memory"),p=f.statusCode||{},g={},w={},_=0,$="canceled",C={readyState:0,getResponseHeader:function(n){var e;if(2===_){if(!s)for(s={};e=ke.exec(i);)s[e[1].toLowerCase()]=e[2];e=s[n.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?i:null},setRequestHeader:function(n,e){var t=n.toLowerCase();return _||(n=w[t]=w[t]||n,g[n]=e),this},overrideMimeType:function(n){return _||(f.mimeType=n),this},statusCode:function(n){var e;if(n)if(2>_)for(e in n)p[e]=[p[e],n[e]];else C.always(n[C.status]);return this},abort:function(n){var e=n||$;return l&&l.abort(e),t(0,e),this}};if(m.promise(C).complete=h.add,C.success=C.done,C.error=C.fail,f.url=((n||f.url||Oe)+"").replace(Ie,"").replace(Be,Le[1]+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=on.trim(f.dataType||"*").toLowerCase().match($n)||[""],null==f.crossDomain&&(r=Je.exec(f.url.toLowerCase()),f.crossDomain=!(!r||r[1]===Le[1]&&r[2]===Le[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Le[3]||("http:"===Le[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=on.param(f.data,f.traditional)),G(ze,f,e,C),2===_)return C;c=on.event&&f.global,c&&0===on.active++&&on.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ge.test(f.type),a=f.url,f.hasContent||(f.data&&(a=f.url+=(De.test(a)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=Re.test(a)?a.replace(Re,"$1_="+Ne++):a+(De.test(a)?"&":"?")+"_="+Ne++)),f.ifModified&&(on.lastModified[a]&&C.setRequestHeader("If-Modified-Since",on.lastModified[a]),on.etag[a]&&C.setRequestHeader("If-None-Match",on.etag[a])),(f.data&&f.hasContent&&f.contentType!==!1||e.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+We+"; q=0.01":""):f.accepts["*"]);for(o in f.headers)C.setRequestHeader(o,f.headers[o]);if(f.beforeSend&&(f.beforeSend.call(d,C,f)===!1||2===_))return C.abort();$="abort";for(o in{success:1,error:1,complete:1})C[o](f[o]);if(l=G(He,f,e,C)){C.readyState=1,c&&v.trigger("ajaxSend",[C,f]),f.async&&f.timeout>0&&(u=setTimeout(function(){C.abort("timeout")},f.timeout));try{_=1,l.send(g,t)}catch(S){if(!(2>_))throw S;t(-1,S)}}else t(-1,"No Transport");return C},getJSON:function(n,e,t){return on.get(n,e,t,"json")},getScript:function(n,e){return on.get(n,void 0,e,"script")}}),on.each(["get","post"],function(n,e){on[e]=function(n,t,r,o){return on.isFunction(t)&&(o=o||r,r=t,t=void 0),on.ajax({url:n,type:e,dataType:o,data:t,success:r})}}),on._evalUrl=function(n){return on.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},on.fn.extend({wrapAll:function(n){if(on.isFunction(n))return this.each(function(e){on(this).wrapAll(n.call(this,e))});if(this[0]){var e=on(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var n=this;n.firstChild&&1===n.firstChild.nodeType;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return on.isFunction(n)?this.each(function(e){on(this).wrapInner(n.call(this,e))}):this.each(function(){var e=on(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(n){var e=on.isFunction(n);return this.each(function(t){on(this).wrapAll(e?n.call(this,t):n)})},unwrap:function(){return this.parent().each(function(){on.nodeName(this,"body")||on(this).replaceWith(this.childNodes)}).end()}}),on.expr.filters.hidden=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0||!tn.reliableHiddenOffsets()&&"none"===(n.style&&n.style.display||on.css(n,"display"))},on.expr.filters.visible=function(n){return!on.expr.filters.hidden(n)};var qe=/%20/g,Ve=/\[\]$/,Ze=/\r?\n/g,Xe=/^(?:submit|button|image|reset|file)$/i,Ke=/^(?:input|select|textarea|keygen)/i;on.param=function(n,e){var t,r=[],o=function(n,e){e=on.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(n)+"="+encodeURIComponent(e)};if(void 0===e&&(e=on.ajaxSettings&&on.ajaxSettings.traditional),on.isArray(n)||n.jquery&&!on.isPlainObject(n))on.each(n,function(){o(this.name,this.value)});else for(t in n)H(t,n[t],e,o);return r.join("&").replace(qe,"+")},on.fn.extend({serialize:function(){return on.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=on.prop(this,"elements");return n?on.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!on(this).is(":disabled")&&Ke.test(this.nodeName)&&!Xe.test(n)&&(this.checked||!Nn.test(n))}).map(function(n,e){var t=on(this).val();return null==t?null:on.isArray(t)?on.map(t,function(n){return{name:e.name,value:n.replace(Ze,"\r\n")}}):{name:e.name,value:t.replace(Ze,"\r\n")}}).get()}}),on.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||j()}:W;var Ye=0,Qe={},nt=on.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var n in Qe)Qe[n](void 0,!0)}),tn.cors=!!nt&&"withCredentials"in nt,nt=tn.ajax=!!nt,nt&&on.ajaxTransport(function(n){if(!n.crossDomain||tn.cors){var e;return{send:function(t,r){var o,a=n.xhr(),i=++Ye;if(a.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(o in n.xhrFields)a[o]=n.xhrFields[o];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest");for(o in t)void 0!==t[o]&&a.setRequestHeader(o,t[o]+"");a.send(n.hasContent&&n.data||null),e=function(t,o){var u,c,l;if(e&&(o||4===a.readyState))if(delete Qe[i],e=void 0,a.onreadystatechange=on.noop,o)4!==a.readyState&&a.abort();else{l={},u=a.status,"string"==typeof a.responseText&&(l.text=a.responseText);try{c=a.statusText}catch(s){c=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=l.text?200:404}l&&r(u,c,l,a.getAllResponseHeaders())},n.async?4===a.readyState?setTimeout(e):a.onreadystatechange=Qe[i]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),on.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return on.globalEval(n),n}}}),on.ajaxPrefilter("script",function(n){void 0===n.cache&&(n.cache=!1),n.crossDomain&&(n.type="GET",n.global=!1)}),on.ajaxTransport("script",function(n){if(n.crossDomain){var e,t=hn.head||on("head")[0]||hn.documentElement;return{send:function(r,o){e=hn.createElement("script"),e.async=!0,n.scriptCharset&&(e.charset=n.scriptCharset),e.src=n.url,e.onload=e.onreadystatechange=function(n,t){(t||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,t||o(200,"success"))},t.insertBefore(e,t.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var et=[],tt=/(=)\?(?=&|$)|\?\?/;on.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=et.pop()||on.expando+"_"+Ne++;return this[n]=!0,n}}),on.ajaxPrefilter("json jsonp",function(e,t,r){var o,a,i,u=e.jsonp!==!1&&(tt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&tt.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=on.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(tt,"$1"+o):e.jsonp!==!1&&(e.url+=(De.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return i||on.error(o+" was not called"),i[0]},e.dataTypes[0]="json",a=n[o],n[o]=function(){i=arguments},r.always(function(){n[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,et.push(o)),i&&on.isFunction(a)&&a(i[0]),i=a=void 0}),"script"):void 0}),on.parseHTML=function(n,e,t){if(!n||"string"!=typeof n)return null;"boolean"==typeof e&&(t=e,e=!1),e=e||hn;var r=dn.exec(n),o=!t&&[];return r?[e.createElement(r[1])]:(r=on.buildFragment([n],e,o),o&&o.length&&on(o).remove(),on.merge([],r.childNodes))};var rt=on.fn.load;on.fn.load=function(n,e,t){if("string"!=typeof n&&rt)return rt.apply(this,arguments);var r,o,a,i=this,u=n.indexOf(" ");
return u>=0&&(r=on.trim(n.slice(u,n.length)),n=n.slice(0,u)),on.isFunction(e)?(t=e,e=void 0):e&&"object"==typeof e&&(a="POST"),i.length>0&&on.ajax({url:n,type:a,dataType:"html",data:e}).done(function(n){o=arguments,i.html(r?on("<div>").append(on.parseHTML(n)).find(r):n)}).complete(t&&function(n,e){i.each(t,o||[n.responseText,e,n])}),this},on.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,e){on.fn[e]=function(n){return this.on(e,n)}}),on.expr.filters.animated=function(n){return on.grep(on.timers,function(e){return n===e.elem}).length};var ot=n.document.documentElement;on.offset={setOffset:function(n,e,t){var r,o,a,i,u,c,l,s=on.css(n,"position"),f=on(n),d={};"static"===s&&(n.style.position="relative"),u=f.offset(),a=on.css(n,"top"),c=on.css(n,"left"),l=("absolute"===s||"fixed"===s)&&on.inArray("auto",[a,c])>-1,l?(r=f.position(),i=r.top,o=r.left):(i=parseFloat(a)||0,o=parseFloat(c)||0),on.isFunction(e)&&(e=e.call(n,t,u)),null!=e.top&&(d.top=e.top-u.top+i),null!=e.left&&(d.left=e.left-u.left+o),"using"in e?e.using.call(n,d):f.css(d)}},on.fn.extend({offset:function(n){if(arguments.length)return void 0===n?this:this.each(function(e){on.offset.setOffset(this,n,e)});var e,t,r={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return e=a.documentElement,on.contains(e,o)?(typeof o.getBoundingClientRect!==yn&&(r=o.getBoundingClientRect()),t=q(a),{top:r.top+(t.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(t.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):r},position:function(){if(this[0]){var n,e,t={top:0,left:0},r=this[0];return"fixed"===on.css(r,"position")?e=r.getBoundingClientRect():(n=this.offsetParent(),e=this.offset(),on.nodeName(n[0],"html")||(t=n.offset()),t.top+=on.css(n[0],"borderTopWidth",!0),t.left+=on.css(n[0],"borderLeftWidth",!0)),{top:e.top-t.top-on.css(r,"marginTop",!0),left:e.left-t.left-on.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||ot;n&&!on.nodeName(n,"html")&&"static"===on.css(n,"position");)n=n.offsetParent;return n||ot})}}),on.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,e){var t=/Y/.test(e);on.fn[n]=function(r){return An(this,function(n,r,o){var a=q(n);return void 0===o?a?e in a?a[e]:a.document.documentElement[r]:n[r]:void(a?a.scrollTo(t?on(a).scrollLeft():o,t?o:on(a).scrollTop()):n[r]=o)},n,r,arguments.length,null)}}),on.each(["top","left"],function(n,e){on.cssHooks[e]=T(tn.pixelPosition,function(n,t){return t?(t=te(n,e),oe.test(t)?on(n).position()[e]+"px":t):void 0})}),on.each({Height:"height",Width:"width"},function(n,e){on.each({padding:"inner"+n,content:e,"":"outer"+n},function(t,r){on.fn[r]=function(r,o){var a=arguments.length&&(t||"boolean"!=typeof r),i=t||(r===!0||o===!0?"margin":"border");return An(this,function(e,t,r){var o;return on.isWindow(e)?e.document.documentElement["client"+n]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+n],o["scroll"+n],e.body["offset"+n],o["offset"+n],o["client"+n])):void 0===r?on.css(e,t,i):on.style(e,t,r,i)},e,a?r:void 0,a,null)}})}),on.fn.size=function(){return this.length},on.fn.andSelf=on.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return on});var at=n.jQuery,it=n.$;return on.noConflict=function(e){return n.$===on&&(n.$=it),e&&n.jQuery===on&&(n.jQuery=at),on},typeof e===yn&&(n.jQuery=n.$=on),on});var PS={};!function(n){"use strict";n.arrayMap=function(n){return function(e){for(var t=e.length,r=new Array(t),o=0;t>o;o++)r[o]=n(e[o]);return r}},n.arrayBind=function(n){return function(e){for(var t=[],r=0,o=n.length;o>r;r++)Array.prototype.push.apply(t,e(n[r]));return t}},n.concatArray=function(n){return function(e){return n.concat(e)}},n.intAdd=function(n){return function(e){return n+e|0}},n.intMul=function(n){return function(e){return n*e|0}},n.numAdd=function(n){return function(e){return n+e}},n.numMul=function(n){return function(e){return n*e}},n.intDiv=function(n){return function(e){return n/e|0}},n.intMod=function(n){return function(e){return n%e}},n.numDiv=function(n){return function(e){return n/e}},n.numSub=function(n){return function(e){return n-e}},n.refEq=function(n){return function(e){return n===e}},n.unsafeCompareImpl=function(n){return function(e){return function(t){return function(r){return function(o){return o>r?n:r>o?t:e}}}}},n.topInt=2147483647,n.bottomInt=-2147483648,n.boolOr=function(n){return function(e){return n||e}},n.boolAnd=function(n){return function(e){return n&&e}},n.boolNot=function(n){return!n},n.showIntImpl=function(n){return n.toString()},n.showNumberImpl=function(n){return n===(0|n)?n+".0":n.toString()},n.showStringImpl=function(n){var e=n.length;return'"'+n.replace(/[\0-\x1F\x7F"\\]/g,function(t,r){switch(t){case'"':case"\\":return"\\"+t;case"":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\x0B":return"\\v"}var o=r+1,a=e>o&&n[o]>="0"&&n[o]<="9"?"\\&":"";return"\\"+t.charCodeAt(0).toString(10)+a})+'"'},n.showArrayImpl=function(n){return function(e){for(var t=[],r=0,o=e.length;o>r;r++)t[r]=n(e[r]);return"["+t.join(",")+"]"}}}(PS.Prelude=PS.Prelude||{}),function(n){"use strict";var e=PS.Prelude,t=function(){function n(){}return n.value=new n,n}(),r=function(){function n(){}return n.value=new n,n}(),o=function(){function n(){}return n.value=new n,n}(),a=function(n){this.compose=n},i=function(n,e){this["__superclass_Prelude.Semigroupoid_0"]=n,this.id=e},u=function(n){this.map=n},c=function(n,e){this["__superclass_Prelude.Functor_0"]=n,this.apply=e},l=function(n,e){this["__superclass_Prelude.Apply_0"]=n,this.pure=e},s=function(n,e){this["__superclass_Prelude.Apply_0"]=n,this.bind=e},f=function(n,e){this["__superclass_Prelude.Applicative_0"]=n,this["__superclass_Prelude.Bind_1"]=e},d=function(n){this.append=n},v=function(n,e,t,r){this.add=n,this.mul=e,this.one=t,this.zero=r},m=function(n,e){this["__superclass_Prelude.Semiring_0"]=n,this.sub=e},h=function(n,e,t){this["__superclass_Prelude.Semiring_0"]=n,this.div=e,this.mod=t},p=function(n,e){this["__superclass_Prelude.ModuloSemiring_1"]=n,this["__superclass_Prelude.Ring_0"]=e},g=function(n){this["__superclass_Prelude.DivisionRing_0"]=n},w=function(n){this.eq=n},_=function(n,e){this["__superclass_Prelude.Eq_0"]=n,this.compare=e},$=function(n,e){this.bottom=n,this.top=e},C=function(n,e,t,r){this["__superclass_Prelude.Bounded_0"]=n,this.conj=e,this.disj=t,this.not=r},S=function(n){this.show=n},P=function(n){return n.zero},y=e.unsafeCompareImpl(t.value)(o.value)(r.value),b={},T=function(n){return n.top},E=function(n){return n.sub},F=function(n){return E(n)},x=new S(e.showStringImpl),A=new S(e.showNumberImpl),N=new S(e.showIntImpl),D=function(n){return n.show},M=function(n){return new S(e.showArrayImpl(D(n)))},L=new v(e.numAdd,e.numMul,1,0),O=new v(e.intAdd,e.intMul,1,0),I=new a(function(n){return function(e){return function(t){return n(e(t))}}}),R=new d(e.concatArray),k=new m(function(){return L},e.numSub),U=function(n){return n.pure},G=function(n){return U(n)},B=!0,J=function(n){return n.one},z=function(n){return n.not},H=function(n){return n.mul},W=function(n){return H(n)},j=new h(function(){return L},e.numDiv,function(n){return function(n){return 0}}),q=new h(function(){return O},e.intDiv,e.intMod),V=function(n){return n.mod},Z=function(n){return n.map},X=function(n){return Z(n)},K=function(n){return n.id},Y=new u(e.arrayMap),Q=function(n){return function(e){return function(t){return n(t)(e)}}},nn=new w(e.refEq),en=new _(function(){return nn},y),tn=new w(e.refEq),rn=new _(function(){return tn},y),on=function(n){return n.eq},an=function(n){return on(n)},un=new p(function(){return j},function(){return k}),cn=new g(function(){return un}),ln=function(n){return n.div},sn=function(n){return n.disj},fn=function(n){return function(e){return n}},dn=function(n){return n.conj},vn=function(n){return n.compose},mn=function(n){return n.compare},hn=function(n){return function(e){return function(r){var o=mn(n)(e)(r);return o instanceof t?!0:!1}}},pn=new i(function(){return I},function(n){return n}),gn=new $(e.bottomInt,e.topInt),wn=new $(!1,!0),_n=function(n){return n.bottom},$n=new C(function(){return wn},e.boolAnd,e.boolOr,e.boolNot),Cn=function(n){return function(e){return function(t){return z($n)(an(n)(e)(t))}}},Sn=function(n){return n.bind},Pn=function(n,e,t){return Sn(n["__superclass_Prelude.Bind_1"]())(t)(function(t){return G(n["__superclass_Prelude.Applicative_0"]())(e(t))})},yn=function(n){return Sn(n)},bn=function(n){return n.apply},Tn=function(n){return bn(n)},En=function(n){return function(e){return function(t){return Tn(n["__superclass_Prelude.Apply_0"]())(U(n)(e))(t)}}},Fn=function(n){return n.append},xn=function(n){return Fn(n)},An=function(n){return Fn(n)},Nn=function(n){return function(e){return function(t){return Sn(n["__superclass_Prelude.Bind_1"]())(e)(function(e){return Sn(n["__superclass_Prelude.Bind_1"]())(t)(function(t){return G(n["__superclass_Prelude.Applicative_0"]())(e(t))})})}}},Dn=new f(function(){return On},function(){return Mn}),Mn=new s(function(){return Ln},e.arrayBind),Ln=new c(function(){return Y},Nn(Dn)),On=new l(function(){return Ln},function(n){return[n]}),In=function(n){return n.add},Rn=function(n){return In(n)};n.LT=t,n.GT=r,n.EQ=o,n.Show=S,n.BooleanAlgebra=C,n.Bounded=$,n.Ord=_,n.Eq=w,n.DivisionRing=p,n.Num=g,n.Ring=m,n.ModuloSemiring=h,n.Semiring=v,n.Semigroup=d,n.Monad=f,n.Bind=s,n.Applicative=l,n.Apply=c,n.Functor=u,n.Category=i,n.Semigroupoid=a,n.show=D,n.not=z,n.disj=sn,n.conj=dn,n.bottom=_n,n.top=T,n.unsafeCompare=y,n["<"]=hn,n.compare=mn,n["/="]=Cn,n["=="]=an,n.eq=on,n["-"]=F,n.sub=E,n.mod=V,n.div=ln,n["*"]=W,n["+"]=Rn,n.one=J,n.mul=H,n.zero=P,n.add=In,n["++"]=xn,n["<>"]=An,n.append=Fn,n.ap=Nn,n.liftM1$_$_$=Pn,n["return"]=G,n[">>="]=yn,n.bind=Sn,n.liftA1=En,n.pure=U,n["<*>"]=Tn,n.apply=bn,n["<$>"]=X,n.map=Z,n.id=K,n.compose=vn,n.otherwise=B,n["const"]=fn,n.flip=Q,n.unit=b,n.semigroupoidFn=I,n.categoryFn=pn,n.functorArray=Y,n.applyArray=Ln,n.applicativeArray=On,n.bindArray=Mn,n.monadArray=Dn,n.semigroupArray=R,n.semiringInt=O,n.semiringNumber=L,n.ringNumber=k,n.moduloSemiringInt=q,n.moduloSemiringNumber=j,n.divisionRingNumber=un,n.numNumber=cn,n.eqInt=tn,n.eqNumber=nn,n.ordInt=rn,n.ordNumber=en,n.boundedBoolean=wn,n.boundedInt=gn,n.booleanAlgebraBoolean=$n,n.showInt=N,n.showNumber=A,n.showString=x,n.showArray=M}(PS.Prelude=PS.Prelude||{}),function(n){"use strict";var e=(PS.Prelude,function(n,e){this["__superclass_Prelude.Semigroup_0"]=n,this.mempty=e}),t=function(n){return n.mempty};n.Monoid=e,n.mempty=t}(PS["Data.Monoid"]=PS["Data.Monoid"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Control.Alt"],PS["Control.Alternative"],PS["Control.Extend"],PS["Control.MonadPlus"],PS["Control.Plus"],PS["Data.Functor.Invariant"],PS["Data.Monoid"],function(){function n(){}return n.value=new n,n}()),r=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),o=function(n){return new e.Show(function(o){if(o instanceof r)return"Just ("+(e.show(n)(o.value0)+")");if(o instanceof t)return"Nothing";throw new Error("Failed pattern match at Data.Maybe line 290, column 3 - line 291, column 3: "+[o.constructor.name])})},a=function(n){return function(e){return function(o){if(o instanceof t)return n;if(o instanceof r)return e(o.value0);throw new Error("Failed pattern match at Data.Maybe line 27, column 1 - line 28, column 1: "+[n.constructor.name,e.constructor.name,o.constructor.name])}}},i=function(n,e,o){if(o instanceof t)return n;if(o instanceof r)return e(o.value0);throw new Error("Failed pattern match at Data.Maybe line 27, column 1 - line 28, column 1: "+[n.constructor.name,e.constructor.name,o.constructor.name])},u=a(!1)(e["const"](!0)),c=new e.Functor(function(n){return function(e){return e instanceof r?new r(n(e.value0)):t.value}}),l=function(n){return a(n)(e.id(e.categoryFn))};n.Nothing=t,n.Just=r,n.isJust=u,n.fromMaybe=l,n.maybe=a,n.maybe$_$_$=i,n.functorMaybe=c,n.showMaybe=o}(PS["Data.Maybe"]=PS["Data.Maybe"]||{}),function(n){"use strict";n.fail=function(n){throw new Error(n)},n.undef=function(){throw new Error("Encountered undefined")},n.unsafeCoerce=function(n){return n},n.mapE$_$_$=function(n,e){return function(){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=n(e[r])();return t}},n.mapE_$_$_$=function(n,e){return function(){for(var t=0;t<e.length;t++)n(e[t])()}},n.mapEBreak_$_$_$=function(n,e,t){return function(){for(var r=0;r<t.length;r++){n(t[r])();var o=e(r)();if(o)break}}},n.alert=function(n){return function(){return window.alert(n),{}}}}(PS.Extensions=PS.Extensions||{}),function(n){"use strict";n.traverseArrayImpl=function(){function n(n){this.fn=n}function e(n){return function(e){return new o(n,e)}}function t(n){for(var e=[];n!==r;)e.push(n.head),n=n.tail;return e}var r={},o=function(n,e){this.head=n,this.tail=e};return function(o){return function(a){return function(i){return function(u){var c=function(n,t){return o(a(e)(u(n)))(t)},l=function(e,t,r){if(0===t)return e;var o=r[t-1];return new n(function(){return l(c(o,e),t-1,r)})};return function(e){for(var o=l(i(r),e.length,e);o instanceof n;)o=o.fn();return a(t)(o)}}}}}}()}(PS["Data.Traversable"]=PS["Data.Traversable"]||{}),function(n){"use strict";n.foldrArray=function(n){return function(e){return function(t){for(var r=e,o=t.length,a=o-1;a>=0;a--)r=n(t[a])(r);return r}}},n.foldlArray=function(n){return function(e){return function(t){for(var r=e,o=t.length,a=0;o>a;a++)r=n(r)(t[a]);return r}}}}(PS["Data.Foldable"]=PS["Data.Foldable"]||{}),function(n){"use strict";var e=PS.Prelude,t=function(n){return function(t){return function(r){return e["<*>"](n)(e["<$>"](n["__superclass_Prelude.Functor_0"]())(e["const"](e.id(e.categoryFn)))(t))(r)}}},r=function(n){return function(t){return function(r){return function(o){return e["<*>"](n)(e["<$>"](n["__superclass_Prelude.Functor_0"]())(t)(r))(o)}}}};n.lift2=r,n["*>"]=t}(PS["Control.Apply"]=PS["Control.Apply"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Control.Comonad"],PS["Control.Extend"],PS["Data.Monoid"]),r=function(n){return n},o=function(n){return new e.Semigroup(function(t){return function(r){return e.disj(n)(t)(r)}})},a=function(n){return n},i=function(n){return new t.Monoid(function(){return o(n)},e.bottom(n["__superclass_Prelude.Bounded_0"]()))};n.Disj=r,n.runDisj=a,n.semigroupDisj=o,n.monoidDisj=i}(PS["Data.Monoid.Disj"]=PS["Data.Monoid.Disj"]||{}),function(n){"use strict";var e=PS["Data.Foldable"],t=PS.Prelude,r=(PS["Control.Apply"],PS["Data.Maybe"],PS["Data.Maybe.First"],PS["Data.Maybe.Last"],PS["Data.Monoid"]),o=(PS["Data.Monoid.Additive"],PS["Data.Monoid.Conj"],PS["Data.Monoid.Disj"]),a=(PS["Data.Monoid.Dual"],PS["Data.Monoid.Endo"],PS["Data.Monoid.Multiplicative"],function(n,e,t){this.foldMap=n,this.foldl=e,this.foldr=t}),i=function(n){return n.foldr},u=function(n){return n.foldl},c=function(n,e){return u(n)(t["+"](e))(t.zero(e))},l=function(n){return function(e){return function(o){return function(a){return i(n)(function(n){return function(r){return t["<>"](e["__superclass_Prelude.Semigroup_0"]())(o(n))(r)}})(r.mempty(e))(a)}}}},s=new a(function(n){return l(s)(n)},e.foldlArray,e.foldrArray),f=function(n){return n.foldMap},d=function(n){return function(e){return function(t){return function(r){return o.runDisj(f(n)(o.monoidDisj(e))(function(n){return o.Disj(t(n))})(r))}}}},v=function(n,e,r){return d(n)(t.booleanAlgebraBoolean)(t["=="](e)(r))};n.Foldable=a,n.elem$_$_$=v,n.sum$_$_$=c,n.any=d,n.foldMapDefaultR=l,n.foldMap=f,n.foldl=u,n.foldr=i,n.foldableArray=s}(PS["Data.Foldable"]=PS["Data.Foldable"]||{}),function(n){"use strict";var e=PS["Data.Traversable"],t=PS.Prelude,r=PS["Data.Foldable"],o=(PS["Data.Maybe"],PS["Data.Maybe.First"],PS["Data.Maybe.Last"],PS["Data.Monoid.Additive"],PS["Data.Monoid.Conj"],PS["Data.Monoid.Disj"],PS["Data.Monoid.Dual"],PS["Data.Monoid.Multiplicative"],function(n,e,t,r){this["__superclass_Data.Foldable.Foldable_1"]=n,this["__superclass_Prelude.Functor_0"]=e,this.sequence=t,this.traverse=r}),a=function(n){return n.traverse},i=function(n){return function(e){return function(r){return a(n)(e)(t.id(t.categoryFn))(r)}}},u=new o(function(){return r.foldableArray},function(){return t.functorArray},function(n){return i(u)(n)},function(n){return e.traverseArrayImpl(t.apply(n["__superclass_Prelude.Apply_0"]()))(t.map(n["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]()))(t.pure(n))}),c=function(n){return n.sequence};n.Traversable=o,n.sequenceDefault=i,n.sequence=c,n.traverse=a,n.traversableArray=u}(PS["Data.Traversable"]=PS["Data.Traversable"]||{}),function(n){"use strict";n.returnE=function(n){return function(){return n}},n.bindE=function(n){return function(e){return function(){return e(n())()}}},n.runPure=function(n){return n()}}(PS["Control.Monad.Eff"]=PS["Control.Monad.Eff"]||{}),function(n){"use strict";var e=PS["Control.Monad.Eff"],t=PS.Prelude,r=new t.Monad(function(){return i},function(){return o}),o=new t.Bind(function(){return a},e.bindE),a=new t.Apply(function(){return u},t.ap(r)),i=new t.Applicative(function(){return a},e.returnE),u=new t.Functor(t.liftA1(i));n.functorEff=u,n.applyEff=a,n.applicativeEff=i,n.bindEff=o,n.monadEff=r,n.runPure=e.runPure}(PS["Control.Monad.Eff"]=PS["Control.Monad.Eff"]||{}),function(n){"use strict";n.range=function(n){return function(e){for(var t=n>e?-1:1,r=[],o=n,a=0;o!==e;o+=t)r[a++]=o;return r[a]=o,r}},n.range$_$_$=function(n,e){for(var t=n>e?-1:1,r=[],o=n,a=0;o!==e;o+=t)r[a++]=o;return r[a]=o,r},n.replicate$_$_$=function(n,e){if(1>n)return[];for(var t=new Array(n),r=0;n>r;r++)t[r]=e;return t},n.length=function(n){return n.length},n.cons=function(n){return function(e){return[n].concat(e)}},n["uncons'"]=function(n){return function(e){return function(t){return 0===t.length?n({}):e(t[0])(t.slice(1))}}},n.concat=function(n){for(var e=[],t=0,r=n.length;r>t;t++)for(var o=n[t],a=0,i=o.length;i>a;a++)e.push(o[a]);return e},n.filter=function(n){return function(e){return e.filter(n)}},n.filter$_$_$=function(n,e){return e.filter(n)},n.sortImpl$_$_$=function(n,e){return e.slice().sort(function(e,t){return n(e)(t)})},n.slice=function(n){return function(e){return function(t){return t.slice(n,e)}}},n.slice$_$_$=function(n,e,t){return t.slice(n,e)},n.zipWith$_$_$=function(n,e,t){for(var r=e.length<t.length?e.length:t.length,o=new Array(r),a=0;r>a;a++)o[a]=n(e[a])(t[a]);return o}}(PS["Data.Array"]=PS["Data.Array"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Control.Biapplicative"],PS["Control.Biapply"],PS["Control.Comonad"],PS["Control.Extend"],PS["Control.Lazy"],PS["Data.Bifoldable"],PS["Data.Bifunctor"],PS["Data.Bitraversable"],PS["Data.Foldable"]),r=(PS["Data.Functor.Invariant"],PS["Data.Maybe"],PS["Data.Maybe.First"],PS["Data.Monoid"],PS["Data.Traversable"]),o=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),a=function(n){return function(e){return n(e.value0)(e.value1)}},i=new e.Functor(function(n){return function(e){return new o(e.value0,n(e.value1))}}),u=new t.Foldable(function(n){return function(n){return function(e){return n(e.value1)}}},function(n){return function(e){return function(t){return n(e)(t.value1)}}},function(n){return function(e){return function(t){return n(t.value1)(e)}}}),c=new r.Traversable(function(){return u},function(){return i},function(n){return function(t){return e["<$>"](n["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(o.create(t.value0))(t.value1)}},function(n){return function(t){return function(r){return e["<$>"](n["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(o.create(r.value0))(t(r.value1))}}});n.Tuple=o,n.uncurry=a,n.functorTuple=i,n.foldableTuple=u,n.traversableTuple=c}(PS["Data.Tuple"]=PS["Data.Tuple"]||{}),function(n){"use strict";n.unsafeThrow=function(n){throw new Error(n)}}(PS["Data.Maybe.Unsafe"]=PS["Data.Maybe.Unsafe"]||{}),function(n){"use strict";var e=PS["Data.Maybe.Unsafe"],t=(PS.Prelude,PS["Data.Maybe"]),r=function(n){if(n instanceof t.Just)return n.value0;if(n instanceof t.Nothing)return e.unsafeThrow("Data.Maybe.Unsafe.fromJust called on Nothing");throw new Error("Failed pattern match at Data.Maybe.Unsafe line 11, column 1 - line 12, column 1: "+[n.constructor.name])};n.fromJust=r,n.unsafeThrow=e.unsafeThrow}(PS["Data.Maybe.Unsafe"]=PS["Data.Maybe.Unsafe"]||{}),function(n){"use strict";var e=PS["Data.Array"],t=PS.Prelude,r=(PS["Control.Alt"],PS["Control.Alternative"],PS["Control.Lazy"],PS["Control.MonadPlus"],PS["Control.Plus"],PS["Data.Foldable"],PS["Data.Functor.Invariant"],PS["Data.Maybe"]),o=(PS["Data.Monoid"],PS["Data.Traversable"],PS["Data.Tuple"],PS["Data.Maybe.Unsafe"],e.cons),a=e.range,i=e["uncons'"](t["const"](r.Nothing.value))(function(n){return function(e){return new r.Just({head:n,tail:e})}}),u=function(n,r){var o=function(e){return function(r){var o=n(e)(r);if(o instanceof t.GT)return 1;if(o instanceof t.EQ)return 0;if(o instanceof t.LT)return-1;throw new Error("Failed pattern match at Data.Array line 417, column 15 - line 422, column 1: "+[o.constructor.name])}};return e.sortImpl$_$_$(o,r)},c=function(n){return[n]},l=function(n){return 0===e.length(n)},s=function(n,r,o){return e["uncons'"](function(e){return t["return"](n["__superclass_Prelude.Applicative_0"]())(o)})(function(e){return function(a){return t[">>="](n["__superclass_Prelude.Bind_1"]())(r(o)(e))(function(e){return s(n,r,e)(a)})}})},f=t.flip(t.bind(t.bindArray)),d=function(n){return f(function(e){return r.maybe$_$_$([],c,n(e))})};n.foldM$_$_$=s,n.sortBy$_$_$=u,n.mapMaybe=d,n.concatMap=f,n.uncons=i,n[":"]=o,n["null"]=l,n[".."]=a,n.singleton=c,n.zipWith$_$_$=e.zipWith$_$_$,n.slice$_$_$=e.slice$_$_$,n.filter$_$_$=e.filter$_$_$,n.concat=e.concat,n.length=e.length,n.replicate$_$_$=e.replicate$_$_$,n.range$_$_$=e.range$_$_$}(PS["Data.Array"]=PS["Data.Array"]||{}),function(n){"use strict";n.abs=Math.abs,n.atan2=function(n){return function(e){return Math.atan2(n,e)}},n.atan2$_$_$=function(n,e){return Math.atan2(n,e)},n.cos=Math.cos,n.floor=Math.floor,n.max=function(n){return function(e){return Math.max(n,e)}},n.max$_$_$=function(n,e){return Math.max(n,e)},n.min=function(n){return function(e){return Math.min(n,e)}},n.min$_$_$=function(n,e){return Math.min(n,e)},n.round=Math.round,n.sin=Math.sin,n.sqrt=Math.sqrt,n.pi=Math.PI}(PS.Math=PS.Math||{}),function(n){"use strict";var e=PS.Math;n.pi=e.pi,n.sqrt=e.sqrt,n.sin=e.sin,n.round=e.round,n.min$_$_$=e.min$_$_$,n.max$_$_$=e.max$_$_$,n.floor=e.floor,n.cos=e.cos,n.atan2$_$_$=e.atan2$_$_$,n.abs=e.abs}(PS.Math=PS.Math||{}),function(n){"use strict";var e=PS.Extensions,t=PS.Prelude,r=PS["Data.Traversable"],o=(PS["Control.Monad.Eff"],PS["Data.Array"]),a=PS.Math,i=function(n){if(n>0)return 1;if(0>n)return-1;if(t.otherwise)return 0;throw new Error("Failed pattern match at Extensions line 35, column 1 - line 36, column 1: "+[n.constructor.name])},u=function(n,e){var t=n%e,r=i(t)===-i(e);if(r)return t+e|0;if(!r)return t;throw new Error("Failed pattern match at Extensions line 31, column 18 - line 32, column 21: "+[r.constructor.name])},c=function(n,e){return n-a.floor(n/e)*e},l=function(n,e,o){return r.sequence(r.traversableArray)(n["__superclass_Prelude.Applicative_0"]())(t.map(t.functorArray)(e)(o))},s=function(n,e){var t=n>e;if(t)return[];if(!t)return o.range$_$_$(n,e);throw new Error("Failed pattern match at Extensions line 27, column 14 - line 30, column 1: "+[t.constructor.name])},f=function(n,e,r){return t[">>="](n)(e)(t["const"](r))};n.mapM$_$_$=l,n.modFloat$_$_$=c,n.signum=i,n.modInt$_$_$=u,n.hRange$_$_$=s,n.bindConst$_$_$=f,n.alert=e.alert,n.mapEBreak_$_$_$=e.mapEBreak_$_$_$,n.mapE_$_$_$=e.mapE_$_$_$,n.mapE$_$_$=e.mapE$_$_$,n.unsafeCoerce=e.unsafeCoerce,n.undef=e.undef,n.fail=e.fail}(PS.Extensions=PS.Extensions||{}),function(n){"use strict";n.parseJSONImpl=function(n,e,t){try{return e(JSON.parse(t))}catch(r){return n(r.toString())}},n.unsafeFromForeign=function(n){return n},n.typeOf=function(n){return typeof n},n.tagOf=function(n){return Object.prototype.toString.call(n).slice(8,-1)},n.isNull=function(n){return null===n},n.isUndefined=function(n){return void 0===n},n.isArray=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)}}(PS["Data.Foreign"]=PS["Data.Foreign"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Control.Alt"],PS["Control.Extend"],PS["Data.Bifoldable"],PS["Data.Bifunctor"],PS["Data.Bitraversable"],PS["Data.Foldable"],PS["Data.Monoid"],PS["Data.Traversable"],function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}()),r=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),o=new e.Functor(function(n){return function(e){if(e instanceof t)return new t(e.value0);if(e instanceof r)return new r(n(e.value0));throw new Error("Failed pattern match at Data.Either line 53, column 3 - line 54, column 3: "+[n.constructor.name,e.constructor.name])}}),a=function(n){return function(e){return function(o){if(o instanceof t)return n(o.value0);if(o instanceof r)return e(o.value0);throw new Error("Failed pattern match at Data.Either line 29, column 1 - line 30, column 1: "+[n.constructor.name,e.constructor.name,o.constructor.name])}}},i=function(n,e,o){if(o instanceof t)return n(o.value0);if(o instanceof r)return e(o.value0);throw new Error("Failed pattern match at Data.Either line 29, column 1 - line 30, column 1: "+[n.constructor.name,e.constructor.name,o.constructor.name])},u=new e.Apply(function(){return o},function(n){return function(a){if(n instanceof t)return new t(n.value0);if(n instanceof r)return e["<$>"](o)(n.value0)(a);throw new Error("Failed pattern match at Data.Either line 93, column 3 - line 94, column 3: "+[n.constructor.name,a.constructor.name])}}),c=new e.Bind(function(){return u},a(function(n){return function(e){return new t(n)}})(function(n){return function(e){return e(n)}})),l=new e.Applicative(function(){return u},r.create),s=new e.Monad(function(){return l},function(){return c});n.Left=t,n.Right=r,n.either=a,n.either$_$_$=i,n.functorEither=o,n.applyEither=u,n.applicativeEither=l,n.bindEither=c,n.monadEither=s}(PS["Data.Either"]=PS["Data.Either"]||{}),function(n){"use strict";n.runFn1=function(n){return function(e){return n(e)}},n.runFn2=function(n){return function(e){return function(t){return n(e,t)}}},n.runFn4=function(n){return function(e){return function(t){return function(r){return function(o){return n(e,t,r,o)}}}}}}(PS["Data.Function"]=PS["Data.Function"]||{}),function(n){"use strict";var e=PS["Data.Function"];PS.Prelude;n.runFn4=e.runFn4,n.runFn2=e.runFn2,n.runFn1=e.runFn1}(PS["Data.Function"]=PS["Data.Function"]||{}),function(n){"use strict";n.fromNumberImpl=function(n){return function(e){return function(t){return(0|t)===t?n(t):e}}},n.toNumber=function(n){return n}}(PS["Data.Int"]=PS["Data.Int"]||{}),function(n){"use strict";n.orImpl=function(n){return function(e){return n|e}}}(PS["Data.Int.Bits"]=PS["Data.Int.Bits"]||{}),function(n){"use strict";var e=PS["Data.Int.Bits"],t=e.orImpl;n[".|."]=t}(PS["Data.Int.Bits"]=PS["Data.Int.Bits"]||{}),function(n){"use strict";var e=PS["Data.Int"],t=PS.Prelude,r=(PS["Data.Int.Bits"],PS["Data.Maybe"]),o=PS["Data.Maybe.Unsafe"],a=PS.Math,i=e.fromNumberImpl(r.Just.create)(r.Nothing.value),u=function(n){if(n>=e.toNumber(t.top(t.boundedInt)))return t.top(t.boundedInt);if(n<=e.toNumber(t.bottom(t.boundedInt)))return t.bottom(t.boundedInt);if(t.otherwise)return o.fromJust(i(n));throw new Error("Failed pattern match at Data.Int line 49, column 1 - line 56, column 1: "+[n.constructor.name])},c=function(n){return u(a.round(n))},l=function(n){return u(a.floor(n))};n.round=c,n.floor=l,n.fromNumber=i,n.toNumber=e.toNumber}(PS["Data.Int"]=PS["Data.Int"]||{}),function(n){"use strict";n._indexOf=function(n){return function(e){return function(t){return function(r){var o=r.indexOf(t);return-1===o?e:n(o)}}}},n.length=function(n){return n.length},n.take$_$_$=function(n,e){return e.substr(0,n)},n.trim=function(n){return n.trim()}}(PS["Data.String"]=PS["Data.String"]||{}),function(n){"use strict";var e=PS["Data.String"],t=(PS.Prelude,PS["Data.Char"],PS["Data.Maybe"]),r=(PS["Data.Monoid"],PS["Data.String.Unsafe"],function(n){return 0===e.length(n)}),o=e._indexOf(t.Just.create)(t.Nothing.value),a=function(n,e){return t.isJust(o(n)(e))};n["null"]=r,n.indexOf=o,n.contains$_$_$=a,n.trim=e.trim,n.take$_$_$=e.take$_$_$,n.length=e.length}(PS["Data.String"]=PS["Data.String"]||{}),function(n){"use strict";var e=PS["Data.Foreign"],t=PS.Prelude,r=PS["Data.Either"],o=PS["Data.Maybe"],a=(PS["Data.Function"],PS["Data.Int"]),a=PS["Data.Int"],i=(PS["Data.String"],function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}()),u=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),c=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),l=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),s=function(n){return function(o){return e.tagOf(o)===n?t.pure(r.applicativeEither)(e.unsafeFromForeign(o)):new r.Left(new i(n,e.tagOf(o)))}},f=new t.Show(function(n){if(n instanceof i)return"Type mismatch: expected "+(n.value0+(", found "+n.value1));if(n instanceof u)return"Error at array index "+(t.show(t.showInt)(n.value0)+(": "+t.show(f)(n.value1)));if(n instanceof c)return"Error at property "+(t.show(t.showString)(n.value0)+(": "+t.show(f)(n.value1)));if(n instanceof l)return"JSON error: "+n.value0;throw new Error("Failed pattern match at Data.Foreign line 54, column 3 - line 55, column 3: "+[n.constructor.name])}),d=s("String"),v=s("Number"),m=function(n){var u=r.Left.create(new i("Int",e.tagOf(n))),c=function(n){return o.maybe$_$_$(u,t.pure(r.applicativeEither),a.fromNumber(n))};return r.either$_$_$(t["const"](u),c,v(n))},h=s("Boolean"),p=function(n){return e.isArray(n)?t.pure(r.applicativeEither)(e.unsafeFromForeign(n)):new r.Left(new i("array",e.tagOf(n)))},g=function(n){return e.parseJSONImpl(function(n){return r.Left.create(l.create(n))},r.Right.create,n)};n.TypeMismatch=i,n.ErrorAtIndex=u,n.ErrorAtProperty=c,n.JSONError=l,n.readArray=p,n.readInt=m,n.readNumber=v,n.readBoolean=h,n.readString=d,n.unsafeReadTagged=s,n.parseJSON=g,n.showForeignError=f,n.isUndefined=e.isUndefined,n.isNull=e.isNull,n.tagOf=e.tagOf,n.typeOf=e.typeOf}(PS["Data.Foreign"]=PS["Data.Foreign"]||{}),function(n){"use strict";n.unsafeReadPropImpl=function(n,e,t,r){return null==r?n:e(r[t])},n.unsafeHasOwnProperty=function(n,e){return Object.prototype.hasOwnProperty.call(e,n)},n.unsafeHasProperty=function(n,e){return n in e}}(PS["Data.Foreign.Index"]=PS["Data.Foreign.Index"]||{}),function(n){"use strict";var e=PS["Data.Foreign.Index"],t=PS.Prelude,r=PS["Data.Either"],o=PS["Data.Foreign"],a=(PS["Data.Function"],PS["Data.Int"],function(n,e,t,r){this.errorAt=n,this.hasOwnProperty=e,this.hasProperty=t,this.ix=r}),i=function(n){return function(a){return e.unsafeReadPropImpl(new r.Left(new o.TypeMismatch("object",o.typeOf(a))),t.pure(r.applicativeEither),n,a)}},u=i,c=function(n){return n.ix},l=function(n){return c(n)},s=function(n){return function(t){return o.isNull(t)?!1:o.isUndefined(t)?!1:"object"===o.typeOf(t)||"function"===o.typeOf(t)?e.unsafeHasProperty(n,t):!1}},f=function(n){return n.hasProperty},d=function(n){return function(t){return o.isNull(t)?!1:o.isUndefined(t)?!1:"object"===o.typeOf(t)||"function"===o.typeOf(t)?e.unsafeHasOwnProperty(n,t):!1}},v=new a(o.ErrorAtProperty.create,d,s,t.flip(u)),m=function(n){return n.hasOwnProperty},h=function(n){return n.errorAt};n.Index=a,n.errorAt=h,n.hasOwnProperty=m,n.hasProperty=f,n["!"]=l,n.ix=c,n.prop=u,n.indexString=v}(PS["Data.Foreign.Index"]=PS["Data.Foreign.Index"]||{}),function(n){
"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Foreign"],o=PS["Data.Either"],a=function(n){return n},i=function(n){return n},u=function(n){return function(i){return r.isNull(i)||r.isUndefined(i)?e.pure(o.applicativeEither)(t.Nothing.value):e["<$>"](o.functorEither)(function(n){return a(t.Just.create(n))})(n(i))}};n.NullOrUndefined=a,n.readNullOrUndefined=u,n.runNullOrUndefined=i}(PS["Data.Foreign.NullOrUndefined"]=PS["Data.Foreign.NullOrUndefined"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Array"],r=PS["Data.Either"],o=PS["Data.Foreign"],a=PS["Data.Foreign.Index"],i=(PS["Data.Foreign.Null"],PS["Data.Foreign.NullOrUndefined"]),u=(PS["Data.Foreign.Undefined"],PS["Data.Int"],PS["Data.Traversable"]),c=function(n){this.read=n},l=new c(o.readString),s=function(n){return n.read},f=function(n,t){return e[">>="](r.bindEither)(o.parseJSON(t))(s(n))},d=function(n){return function(e){return function(t){return r.either$_$_$(function(n){return r.Left.create(e(n))},r.Right.create,s(n)(t))}}},v=function(n,e,t){return r.either$_$_$(function(n){return r.Left.create(e(n))},r.Right.create,s(n)(t))},m=function(n,t,o,i){return e[">>="](r.bindEither)(a["!"](t)(i)(o))(d(n)(a.errorAt(t)(o)))},h=new c(o.readNumber),p=function(n){return new c(i.readNullOrUndefined(s(n)))},g=new c(o.readInt),w=new c(function(n){return e["return"](r.applicativeEither)(n)}),_=new c(o.readBoolean),$=function(n){return new c(function(a){var i=function(e){return function(t){return v(n,o.ErrorAtIndex.create(e),t)}},c=function(n){return u.sequence(u.traversableArray)(r.applicativeEither)(t.zipWith$_$_$(i,t.range$_$_$(0,t.length(n)),n))};return e[">>="](r.bindEither)(o.readArray(a))(c)})};n.IsForeign=c,n.readProp$_$_$=m,n.readWith=d,n.readWith$_$_$=v,n.readJSON$_$_$=f,n.read=s,n.foreignIsForeign=w,n.stringIsForeign=l,n.booleanIsForeign=_,n.numberIsForeign=h,n.intIsForeign=g,n.arrayIsForeign=$,n.nullOrUndefinedIsForeign=p}(PS["Data.Foreign.Class"]=PS["Data.Foreign.Class"]||{}),function(n){"use strict";n.readInt$_$_$=function(n,e){return parseInt(e,n)}}(PS.Global=PS.Global||{}),function(n){"use strict";var e=PS.Global;n.readInt$_$_$=e.readInt$_$_$}(PS.Global=PS.Global||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS.Extensions,o=PS["Data.Foreign"],a=PS["Data.Foreign.Class"],i=PS["Data.Either"],u=(PS["Data.Int.Bits"],PS["Data.Int"]),c=(PS["Data.Maybe.Unsafe"],PS.Math,PS.Global),l=PS["Data.Foreign.Index"],s=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(o){return new n(e,t,r,o)}}}},n}(),f=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(o){return new n(e,t,r,o)}}}},n}(),d=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),v=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),m=function(n){var r=i.Left.create(new o.TypeMismatch("Color3I",o.tagOf(n))),a=function(n){var o=c.readInt$_$_$(16,n),a=u.fromNumber(o);if(a instanceof t.Nothing)return r;if(a instanceof t.Just){var l=new d(a.value0>>16&255,a.value0>>8&255,255&a.value0);return e["return"](i.applicativeEither)(l)}throw new Error("Failed pattern match at ConeCanvas.Color line 53, column 8 - line 57, column 3: "+[a.constructor.name])};return i.either$_$_$(e["const"](r),a,o.readString(n))},h=function(n){return[n.value0,n.value1,n.value2,n.value3]},p=function(n){if(4===n.length){var e=u.toNumber(n[3])/255;return new s(n[0],n[1],n[2],e)}return r.fail("ConeModel>>color4IfromArray: Wrong array size")},g=function(n){return"rgba("+(e.show(e.showInt)(n.value0)+(", "+(e.show(e.showInt)(n.value1)+(", "+(e.show(e.showInt)(n.value2)+(", "+(e.show(e.showNumber)(n.value3)+")")))))))},w=function(n){var e=function(n){return function(n){return n/255}(u.toNumber(n))};return new f(e(n.value0),e(n.value1),e(n.value2),n.value3)},_=function(n){return 3===n.length?new v(n[0],n[1],n[2]):r.fail("ConeModel>>color3fromArray: Wrong array size")},$=new a.IsForeign(m),C=function(n){i.Left.create(new o.TypeMismatch("Color4I",o.tagOf(n)));return e.bind(i.bindEither)(a.readProp$_$_$($,l.indexString,"rgb",n))(function(t){return e.bind(i.bindEither)(a.readProp$_$_$(a.numberIsForeign,l.indexString,"ambiance",n))(function(n){return e["return"](i.applicativeEither)(new s(t.value0,t.value1,t.value2,n))})})},S=new a.IsForeign(C),P=new a.IsForeign(function(n){return e["<$>"](i.functorEither)(w)(C(n))});n.Color4=f,n.Color4I=s,n.Color3=v,n.Color3I=d,n.color4IToColor4=w,n.color4toArray=h,n.color4IasFillStyle=g,n.readColor4I=C,n.color4IfromArray=p,n.color3fromArray=_,n.readColor3I=m,n.color3IIsForeign=$,n.color4IIsForeign=S,n.color4IsForeign=P}(PS["ConeCanvas.Color"]=PS["ConeCanvas.Color"]||{}),function(n){"use strict";n.newSTRef=function(n){return function(){return{value:n}}},n.readSTRef=function(n){return function(){return n.value}},n.modifySTRef$_$_$=function(n,e){return function(){return n.value=e(n.value)}},n.writeSTRef$_$_$=function(n,e){return function(){return n.value=e}}}(PS["Control.Monad.ST"]=PS["Control.Monad.ST"]||{}),function(n){"use strict";var e=PS["Control.Monad.ST"];PS.Prelude,PS["Control.Monad.Eff"];n.writeSTRef$_$_$=e.writeSTRef$_$_$,n.modifySTRef$_$_$=e.modifySTRef$_$_$,n.readSTRef=e.readSTRef,n.newSTRef=e.newSTRef}(PS["Control.Monad.ST"]=PS["Control.Monad.ST"]||{}),function(n){"use strict";n.error=function(n){return new Error(n)},n.throwException=function(n){return function(){throw n}}}(PS["Control.Monad.Eff.Exception"]=PS["Control.Monad.Eff.Exception"]||{}),function(n){"use strict";var e=PS["Control.Monad.Eff.Exception"];PS.Prelude,PS["Data.Maybe"],PS["Control.Monad.Eff"];n.throwException=e.throwException,n.error=e.error}(PS["Control.Monad.Eff.Exception"]=PS["Control.Monad.Eff.Exception"]||{}),function(n){"use strict";n.random=Math.random}(PS["Control.Monad.Eff.Random"]=PS["Control.Monad.Eff.Random"]||{}),function(n){"use strict";var e=PS["Control.Monad.Eff.Random"],t=(PS.Prelude,PS["Control.Monad.Eff"],PS["Data.Int"]),r=function(n,r){return function(){var o=e.random(),a=(t.toNumber(r)-t.toNumber(n)+1)*o+t.toNumber(n);return t.floor(a)}};n.randomInt$_$_$=r}(PS["Control.Monad.Eff.Random"]=PS["Control.Monad.Eff.Random"]||{}),function(n){"use strict";n.nowImpl=function(n){return function(){return n(new Date)}},n.jsDateMethod=function(n,e){return e[n]()}}(PS["Data.Date"]=PS["Data.Date"]||{}),function(n){"use strict";var e=PS["Data.Date"],t=(PS.Prelude,PS["Control.Monad.Eff"],PS["Data.Enum"],PS["Data.Function"],PS["Data.Maybe"],PS["Data.Time"],PS.Global,function(n){return n}),r=function(n){return e.jsDateMethod("getTime",n)},o=e.nowImpl(t);n.now=o,n.toEpochMilliseconds=r}(PS["Data.Date"]=PS["Data.Date"]||{}),function(n){"use strict";n.unsafeIndex$_$_$=function(n,e){return n[e]}}(PS["Data.Array.Unsafe"]=PS["Data.Array.Unsafe"]||{}),function(n){"use strict";var e=PS["Data.Array.Unsafe"],t=(PS.Prelude,PS["Data.Array"]),r=function(n){return t.slice$_$_$(1,t.length(n),n)},o=function(n){return e.unsafeIndex$_$_$(n,0)};n.tail=r,n.head=o}(PS["Data.Array.Unsafe"]=PS["Data.Array.Unsafe"]||{}),function(n){"use strict";n.runSTArray=function(n){return n},n.emptySTArray=function(){return[]},n.pushAllSTArray$_$_$=function(n,e){return function(){return n.push.apply(n,e)}}}(PS["Data.Array.ST"]=PS["Data.Array.ST"]||{}),function(n){"use strict";var e=PS["Data.Array.ST"],t=(PS.Prelude,PS["Control.Monad.Eff"],PS["Control.Monad.ST"],PS["Data.Maybe"],function(n,t){return e.pushAllSTArray$_$_$(n,[t])});n.pushSTArray$_$_$=t,n.emptySTArray=e.emptySTArray,n.runSTArray=e.runSTArray}(PS["Data.Array.ST"]=PS["Data.Array.ST"]||{}),function(n){"use strict";var e=(PS.Prelude,PS["Data.Maybe"]),t=(PS["Data.Tuple"],PS["Data.Array.ST"]),r=(PS["Data.Traversable"],PS["Control.Monad.Eff"]),o=PS["Control.Monad.ST"],a=function(n){this.unfoldr=n},i=function(n){return n.unfoldr},u=new a(function(n){return function(a){return r.runPure(t.runSTArray(function(){var r=t.emptySTArray(),i=o.newSTRef(a)();return function(){for(;!function(){var a=o.readSTRef(i)(),u=n(a);if(u instanceof e.Nothing)return!0;if(u instanceof e.Just)return t.pushSTArray$_$_$(r,u.value0.value0)(),o.writeSTRef$_$_$(i,u.value0.value1)(),!1;throw new Error("Failed pattern match at Data.Unfoldable line 35, column 7 - line 41, column 5: "+[u.constructor.name])}(););return{}}(),r}))}});n.Unfoldable=a,n.unfoldr=i,n.unfoldableArray=u}(PS["Data.Unfoldable"]=PS["Data.Unfoldable"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Control.Alt"],PS["Control.Alternative"],PS["Control.Lazy"],PS["Control.MonadPlus"],PS["Control.Plus"],PS["Data.Foldable"]),r=PS["Data.Maybe"],o=PS["Data.Monoid"],a=PS["Data.Traversable"],i=PS["Data.Tuple"],u=PS["Data.Unfoldable"],c=function(){function n(){}return n.value=new n,n}(),l=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),s=l.create,f=function(n){if(n instanceof c)return r.Nothing.value;if(n instanceof l)return new r.Just({head:n.value0,tail:n.value1});throw new Error("Failed pattern match at Data.List line 273, column 1 - line 274, column 1: "+[n.constructor.name])},d=function(n){return u.unfoldr(n)(function(n){return e["<$>"](r.functorMaybe)(function(n){return new i.Tuple(n.head,n.tail)})(f(n))})},v=function(n){if(n instanceof c)return r.Nothing.value;if(n instanceof l)return new r.Just(n.value1);throw new Error("Failed pattern match at Data.List line 254, column 1 - line 255, column 1: "+[n.constructor.name])},m=function(n){return new l(n,c.value)},h=function(n){return new e.Show(function(t){if(t instanceof c)return"Nil";if(t instanceof l)return"Cons ("+(e.show(n)(t.value0)+(") ("+(e.show(h(n))(t.value1)+")")));throw new Error("Failed pattern match at Data.List line 727, column 3 - line 728, column 3: "+[t.constructor.name])})},p=new e.Semigroup(function(n){return function(t){if(n instanceof c)return t;if(n instanceof l)return new l(n.value0,e["<>"](p)(n.value1)(t));throw new Error("Failed pattern match at Data.List line 751, column 3 - line 752, column 3: "+[n.constructor.name,t.constructor.name])}}),g=function(){var n=function(n){return function(e){for(var t=n,r=e;;){if(r instanceof c)return t;{if(!(r instanceof l))throw new Error("Failed pattern match at Data.List line 371, column 1 - line 379, column 1: "+[t.constructor.name,r.constructor.name]);var o=new l(r.value0,t),a=r.value1;t=o,r=a}}}};return n(c.value)}(),w=function(){var n=function(n){return function(e){return function(t){for(var r=n,o=e,a=t;;){if(0===o)return g(r);if(a instanceof c)return g(r);{if(!(a instanceof l))throw new Error("Failed pattern match at Data.List line 493, column 1 - line 502, column 1: "+[r.constructor.name,o.constructor.name,a.constructor.name]);var i=new l(a.value0,r),u=o-1,s=a.value1;r=i,o=u,a=s}}}}};return n(c.value)}(),_=function(n,t){var r=function(n){return function(r){for(var o=n,a=r;;){if(0>=o)return a;{if(!e.otherwise)throw new Error("Failed pattern match at Data.List line 151, column 1 - line 157, column 1: "+[o.constructor.name,a.constructor.name]);var i=o-1,u=new l(t,a);o=i,a=u}}}};return r(n)(c.value)},$=function(n){return n instanceof c?!0:!1},C=function(n){for(var e=n;;){if(e instanceof l&&e.value1 instanceof c)return new r.Just(e.value0);{if(!(e instanceof l))return r.Nothing.value;var t=e.value1;e=t}}},S=function(n){return function(e){for(var t=n,o=e;;){if(t instanceof c)return r.Nothing.value;if(t instanceof l&&0===o)return new r.Just(t.value0);{if(!(t instanceof l))throw new Error("Failed pattern match at Data.List line 284, column 1 - line 285, column 1: "+[t.constructor.name,o.constructor.name]);var a=t.value1,i=o-1;t=a,o=i}}}},P=S,y=function(n){if(n instanceof c)return r.Nothing.value;if(n instanceof l)return new r.Just(n.value0);throw new Error("Failed pattern match at Data.List line 239, column 1 - line 240, column 1: "+[n.constructor.name])},b=new e.Functor(function(n){return function(e){var t=function(e){return function(t){for(var r=e,o=t;;){if(r instanceof c)return o;{if(!(r instanceof l))throw new Error("Failed pattern match at Data.List line 758, column 3 - line 764, column 1: "+[r.constructor.name,o.constructor.name]);var a=r.value1,i=new l(n(r.value0),o);r=a,o=i}}}};return g(t(e)(c.value))}}),T=function(n){return d(n)},E=function(n){return t.foldr(n)(l.create)(c.value)},F=function(n){return E(n)},x=new t.Foldable(function(n){return function(r){return t.foldl(x)(function(t){return function(o){return e.append(n["__superclass_Prelude.Semigroup_0"]())(t)(r(o))}})(o.mempty(n))}},function(){var n=function(n){return function(e){return function(t){for(var r=n,o=e,a=t;;){if(a instanceof c)return o;{if(!(a instanceof l))throw new Error("Failed pattern match at Data.List line 767, column 3 - line 771, column 3: "+[r.constructor.name,o.constructor.name,a.constructor.name]);var i=r,u=r(o)(a.value0),s=a.value1;r=i,o=u,a=s}}}}};return n}(),function(n){return function(e){return function(r){if(r instanceof c)return e;if(r instanceof l)return n(r.value0)(t.foldr(x)(n)(e)(r.value1));throw new Error("Failed pattern match at Data.List line 765, column 3 - line 766, column 3: "+[n.constructor.name,e.constructor.name,r.constructor.name])}}}),A=t.foldl(x)(function(n){return function(e){return n+1|0}})(0),N=new a.Traversable(function(){return x},function(){return b},function(n){return function(t){if(t instanceof c)return e.pure(n)(c.value);if(t instanceof l)return e["<*>"](n["__superclass_Prelude.Apply_0"]())(e["<$>"](n["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(l.create)(t.value0))(a.sequence(N)(n)(t.value1));throw new Error("Failed pattern match at Data.List line 784, column 3 - line 785, column 3: "+[t.constructor.name])}},function(n){return function(t){return function(r){if(r instanceof c)return e.pure(n)(c.value);if(r instanceof l)return e["<*>"](n["__superclass_Prelude.Apply_0"]())(e["<$>"](n["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(l.create)(t(r.value0)))(a.traverse(N)(n)(t)(r.value1));throw new Error("Failed pattern match at Data.List line 782, column 3 - line 783, column 3: "+[t.constructor.name,r.constructor.name])}}}),D=function(n){return new e.Eq(function(t){return function(r){var o=function(t){return function(r){return function(o){for(var a=t,i=r,u=o;;){if(!u)return!1;if(a instanceof c&&i instanceof c)return u;{if(!(a instanceof l&&i instanceof l))return!1;var s=a.value1,f=i.value1,d=u&&e["=="](n)(i.value0)(a.value0);a=s,i=f,u=d}}}}};return o(t)(r)(!0)}})},M=function(n,e){for(var t=n,r=e;;){if(0===t)return r;if(r instanceof c)return c.value;{if(!(r instanceof l))throw new Error("Failed pattern match at Data.List line 512, column 1 - line 513, column 1: "+[t.constructor.name,r.constructor.name]);var o=t-1,a=r.value1;t=o,r=a}}},L=function(n){return function(t){if(t instanceof c)return c.value;if(t instanceof l)return e["<>"](p)(n(t.value0))(O(n,t.value1));throw new Error("Failed pattern match at Data.List line 387, column 1 - line 388, column 1: "+[n.constructor.name,t.constructor.name])}},O=function(n,t){if(t instanceof c)return c.value;if(t instanceof l)return e["<>"](p)(n(t.value0))(O(n,t.value1));throw new Error("Failed pattern match at Data.List line 387, column 1 - line 388, column 1: "+[n.constructor.name,t.constructor.name])},I=new e.Apply(function(){return b},function(n){return function(t){if(n instanceof c)return c.value;if(n instanceof l)return e["<>"](p)(e["<$>"](b)(n.value0)(t))(e["<*>"](I)(n.value1)(t));throw new Error("Failed pattern match at Data.List line 788, column 3 - line 789, column 3: "+[n.constructor.name,t.constructor.name])}}),R=new e.Bind(function(){return I},e.flip(L)),k=function(n){return e[">>="](R)(n)(e.id(e.categoryFn))},U=new e.Applicative(function(){return I},function(n){return new l(n,c.value)});n.Nil=c,n.Cons=l,n.fromList=T,n.toList=F,n.drop$_$_$=M,n.take=w,n.concatMap=L,n.concatMap$_$_$=O,n.concat=k,n.reverse=g,n.index=S,n["!!"]=P,n.uncons=f,n.tail=v,n.last=C,n.head=y,n[":"]=s,n.length=A,n["null"]=$,n.replicate$_$_$=_,n.singleton=m,n.fromFoldable=E,n.toUnfoldable=d,n.showList=h,n.eqList=D,n.semigroupList=p,n.functorList=b,n.foldableList=x,n.traversableList=N,n.applyList=I,n.applicativeList=U,n.bindList=R}(PS["Data.List"]=PS["Data.List"]||{}),function(n){"use strict";var e="undefined"==typeof module?void 0:module.require,t=void 0===e?void 0:e("util");n.traceAny=function(n){return function(e){return void 0!==t?console.log(t.inspect(n,{depth:null,colors:!0})):console.log(n),e({})}},n.traceAny$_$_$=function(n,e){return void 0!==t?console.log(t.inspect(n,{depth:null,colors:!0})):console.log(n),e({})}}(PS["Debug.Trace"]=PS["Debug.Trace"]||{}),function(n){"use strict";var e=PS["Debug.Trace"],t=PS.Prelude,r=function(n){return function(r){return e.traceAny$_$_$(r,function(e){return t.pure(n)(t.unit)})}},o=function(n){return r(n)},a=e.traceAny;n.traceA=o,n.traceAnyA=r,n.trace=a}(PS["Debug.Trace"]=PS["Debug.Trace"]||{}),function(n){"use strict";n.getCanvasElementByIdImpl=function(n,e,t){return function(){var r=document.getElementById(n);return r&&r instanceof HTMLCanvasElement?e(r):t}},n.getContext2D=function(n){return function(){return n.getContext("2d")}},n.getCanvasWidth=function(n){return function(){return n.width}},n.getCanvasHeight=function(n){return function(){return n.height}},n.setFillStyle$_$_$=function(n,e){return function(){return e.fillStyle=n,e}},n.clearRect=function(n){return function(e){return function(){return n.clearRect(e.x,e.y,e.w,e.h),n}}},n.clearRect$_$_$=function(n,e){return function(){return n.clearRect(e.x,e.y,e.w,e.h),n}},n.setTextAlignImpl$_$_$=function(n,e){return function(){return n.textAlign=e,n}},n.font=function(n){return function(){return n.font}},n.setFont$_$_$=function(n,e){return function(){return e.font=n,e}},n.drawImage=function(n){return function(e){return function(t){return function(r){return function(){return n.drawImage(e,t,r),n}}}}},n.drawImageScale$_$_$=function(n,e,t,r,o,a){return function(){return n.drawImage(e,t,r,o,a),n}}}(PS["Graphics.Canvas"]=PS["Graphics.Canvas"]||{}),function(n){"use strict";var e=PS["Graphics.Canvas"],t=PS.Prelude,r=(PS["Data.ArrayBuffer.Types"],PS["Data.Function"],PS["Data.Maybe"]),o=(PS["Control.Monad.Eff"],PS["Control.Monad.Eff.Exception.Unsafe"],function(){function n(){}return n.value=new n,n}()),a=function(){function n(){}return n.value=new n,n}(),i=function(){function n(){}return n.value=new n,n}(),u=function(){function n(){}return n.value=new n,n}(),c=function(){function n(){}return n.value=new n,n}(),l=new t.Show(function(n){if(n instanceof o)return"left";if(n instanceof a)return"right";if(n instanceof i)return"center";if(n instanceof u)return"start";if(n instanceof c)return"end";throw new Error("Failed pattern match at Graphics.Canvas line 383, column 3 - line 384, column 3: "+[n.constructor.name])}),s=function(n,r){return e.setTextAlignImpl$_$_$(n,t.show(l)(r))},f=function(n){return e.getCanvasElementByIdImpl(n,r.Just.create,r.Nothing.value)};n.AlignLeft=o,n.AlignRight=a,n.AlignCenter=i,n.AlignStart=u,n.AlignEnd=c,n.setTextAlign$_$_$=s,n.getCanvasElementById=f,n.showTextAlign=l,n.drawImageScale$_$_$=e.drawImageScale$_$_$,n.setFont$_$_$=e.setFont$_$_$,n.clearRect$_$_$=e.clearRect$_$_$,n.setFillStyle$_$_$=e.setFillStyle$_$_$,n.getCanvasHeight=e.getCanvasHeight,n.getCanvasWidth=e.getCanvasWidth,n.getContext2D=e.getContext2D}(PS["Graphics.Canvas"]=PS["Graphics.Canvas"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Either"],o=(PS["Data.ArrayBuffer.Types"],PS["Control.Monad.Eff"]),a=(PS["Control.Monad.Eff.Exception"],PS["Control.Monad.Eff.Random"],PS["Control.Monad.ST"],PS["Data.Date"],PS["Data.List"]),i=(PS["Data.Foreign"],PS["Data.Foreign.Class"]),u=PS["Data.Foreign.NullOrUndefined"],c=(PS.DOM,PS["ConeCanvas.Color"],PS["Graphics.Canvas"],PS["Data.Foreign.Index"]),l=PS["Data.Foldable"],s=function(){function n(){}return n.value=new n,n}(),f=function(){function n(){}return n.value=new n,n}(),d=function(){function n(){}return n.value=new n,n}(),v=function(){function n(){}return n.value=new n,n}(),m=function(){function n(){}return n.value=new n,n}(),h=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),p=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),g=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),w=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),_=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),$=function(){function n(){}return n.value=new n,n}(),C=function(){function n(){}return n.value=new n,n}(),S=function(){function n(){}return n.value=new n,n}(),P=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),y=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),b=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),T=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),E=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),F=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),x=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),A=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),N=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),D=function(){function n(){}return n.value=new n,n}(),M=function(){function n(){}return n.value=new n,n}(),L=function(){function n(){}return n.value=new n,n}(),O=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),I=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),R=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),k=function(){function n(){}return n.value=new n,n}(),U=function(){function n(){}return n.value=new n,n}(),G=function(n,e,t,r,o,a,i,u,c,l,s,f,d,v,m,h,p){this["__superclass_Data.Foreign.Class.IsForeign_2"]=n,this["__superclass_Prelude.Eq_0"]=e,this["__superclass_Prelude.Show_1"]=t,this.actions=r,this.color=o,this.comment=a,this.entryId=i,this.hidden=u,this.iconName=c,this.isLeaf=l,this.label=s,this.makeHiddenLeaf=f,this.makeHiddenNode=d,this.parentActions=v,this.primaryLink=m,this.stlName=h,this.targetUri=p},B=function(n){return n.targetUri},J=function(n){return n.stlName},z=function(n,e){return e},H=function(n,e){return e.value0},W=function(n){return n.primaryLink},j=function(n){return n.parentActions},q=function(n){return n.makeHiddenNode},V=function(n){return n.makeHiddenLeaf},Z=function(n){return n.label},X=function(n){return n.isLeaf},K=function(n,e){return X(n)(e.value0.entry)},Y=function(n,t){if(K(n,t))return e["return"](o.applicativeEff)(a.Nil.value);if(t.value0.children instanceof r.Right)return e["return"](o.applicativeEff)(t.value0.children.value0);if(t.value0.children instanceof r.Left)return t.value0.children.value0(t.value0.nodeId);throw new Error("Failed pattern match at ConeCanvas.ConeModel line 207, column 55 - line 212, column 1: "+[t.value0.children.constructor.name])},Q=function(n){return new i.IsForeign(function(s){return e.bind(r.bindEither)(i.read(n["__superclass_Data.Foreign.Class.IsForeign_2"]())(s))(function(f){return e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.intIsForeign),c.indexString,"nodeId",s)))(function(d){return e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.intIsForeign),c.indexString,"firstInd",s)))(function(v){return e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.arrayIsForeign(Q(n))),c.indexString,"children",s)))(function(n){var i=function(){if(n instanceof t.Nothing)return new r.Left(function(n){return e["return"](o.applicativeEff)(a.toList(l.foldableArray)([]))});if(n instanceof t.Just)return new r.Right(a.toList(l.foldableArray)(n.value0));throw new Error("Failed pattern match at ConeCanvas.ConeModel line 219, column 17 - line 221, column 48: "+[n.constructor.name])}();return e["return"](r.applicativeEither)(new h({entry:f,nodeId:function(){if(d instanceof t.Nothing)return 0;if(d instanceof t.Just)return d.value0;throw new Error("Failed pattern match at ConeCanvas.ConeModel line 225, column 27 - line 228, column 13: "+[d.constructor.name])}(),firstInd:function(){if(v instanceof t.Nothing)return 0;if(v instanceof t.Just)return v.value0;throw new Error("Failed pattern match at ConeCanvas.ConeModel line 228, column 27 - line 231, column 13: "+[v.constructor.name])}(),children:i}))})})})})})},nn=function(n){return n.iconName},en=function(n){return n.hidden},tn=function(n){return new e.Eq(function(t){return function(r){return e["=="](n)(t.content)(r.content)}})},rn=function(n){return new e.Eq(function(t){return function(r){var o=0!==t.value0.nodeId||0!==r.value0.nodeId;if(o)return t.value0.nodeId===r.value0.nodeId;if(!o)return e["=="](n)(t.value0.entry)(r.value0.entry);throw new Error("Failed pattern match at ConeCanvas.ConeModel line 236, column 9 - line 240, column 1: "+[o.constructor.name])}})},on=function(n){return n.entryId},an=function(n){return n.comment},un=function(n){return n.color},cn=function(n){return n.actions};n.TDClockwise=s,n.TDAntiClockwise=f,n.TDShortest=d,n.AnimMoveLeft=w,n.AnimMoveRight=_,n.AnimTurnToFirst=$,n.AnimMoveUp=C,n.AnimMoveDown=S,n.AnimClockwork=P,n.AnimTransformLeft=y,n.AnimTransformRight=b,n.AnimTransformUp=T,n.AnimTransformDown=E,n.AnimTransformIntro=F,n.AnimTransformExtro=x,n.AnimTransformShiftToZero=A,n.AnimTransformReplace=N,n.AnimCut=D,n.AnimCopy=M,n.AnimPaste=L,n.AnimGlobalView=O,n.AnimZoom=I,n.AnimPause=R,n.AnimNull=k,n.OSCurrent=p,n.OSParent=g,n.ConeNode=h,n.PrimaryLinkAction=U,n.OuterLabel=v,n.Browser=m,n.ConeEntry=G,n.runConeZip$_$_$=z,n.nodeGetChildren$_$_$=Y,n.nodeIsLeaf$_$_$=K,n.runConeNode$_$_$=H,n.makeHiddenNode=q,n.makeHiddenLeaf=V,n.hidden=en,n.parentActions=j,n.actions=cn,n.isLeaf=X,n.primaryLink=W,n.color=un,n.stlName=J,n.iconName=nn,n.comment=an,n.targetUri=B,n.label=Z,n.entryId=on,n.isForeignConeNode=Q,n.eqConeNode=rn,n.eqConeZip=tn}(PS["ConeCanvas.ConeModel"]=PS["ConeCanvas.ConeModel"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Either"],o=PS["Data.List"],a=(PS["Data.Traversable"],PS["Data.Foldable"]),i=PS["Data.Array"],u=PS["ConeCanvas.ConeModel"],c=PS.Extensions,l=PS["Control.Monad.Eff"],s=function(n,e){return u.runConeNode$_$_$(n,e.content)},f=function(n){return n.content},d=function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.content=new u.ConeNode(function(){var e={};for(var t in n.content.value0)n.content.value0.hasOwnProperty(t)&&(e[t]=n.content.value0[t]);return e.children=function(){if(n.content.value0.children instanceof r.Left)return new r.Right(o.Nil.value);if(n.content.value0.children instanceof r.Right)return new r.Right(o.Nil.value);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 502, column 40 - line 504, column 65: "+[n.content.value0.children.constructor.name])}(),e}()),e},v=function(n){var e=o.tail(n);return e instanceof t.Just?e.value0:o.Nil.value},m=function(n,e){if(e instanceof u.OSCurrent)return e.value0;if(e instanceof u.OSParent)return e.value0;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 593, column 1 - line 594, column 1: "+[e.constructor.name])},h=function(n,t){if(0>n)return n+t|0;if(n>=t)return n-t;if(e.otherwise)return n;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 675, column 1 - line 678, column 27: "+[n.constructor.name,t.constructor.name])},p=function(n){return n.value0.entry},g=function(n){return p(f(n))},w=function(n){if(n instanceof u.OSCurrent)return g(n.value0);if(n instanceof u.OSParent)return g(n.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 626, column 1 - line 627, column 1: "+[n.constructor.name])},_=function(n,e){return{content:e,before:o.Nil.value,after:o.Nil.value,parents:o.Nil.value}},$=function(n){var e=o.uncons(n);return e instanceof t.Just?new o.Cons(e.value0.head,o.Nil.value):o.Nil.value},C=function(n){var t=o["null"](n.before);if(t)return n;if(!t){var r={};for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);return r.before=o.Nil.value,r.after=e["++"](o.semigroupList)(n.after)(o.reverse(n.before)),r}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 160, column 3 - line 165, column 1: "+[t.constructor.name])},S=function(n){if(n instanceof u.OSCurrent)return new u.OSCurrent(C(n.value0));if(n instanceof u.OSParent)return new u.OSParent(C(n.value0));throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 605, column 1 - line 606, column 1: "+[n.constructor.name])},P=function(n,r){var a=e["++"](o.semigroupList)(o.reverse(n.before))(e["++"](o.semigroupList)(new o.Cons(n.content,o.Nil.value))(n.after)),i=r>=0&&o.length(a)>r;if(i){var u=o.length(n.before)===r;if(u)return new t.Just(n);if(!u){var c=o["!!"](a)(r);if(c instanceof t.Nothing)return t.Nothing.value;if(c instanceof t.Just)return new t.Just(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.content=c.value0,e.before=o.reverse(o.take(r)(a)),e.after=o.take(o.length(a)-(r+1|0))(o.drop$_$_$(r+1|0,a)),e}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 208, column 22 - line 213, column 104: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 206, column 15 - line 213, column 104: "+[u.constructor.name])}if(!i)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 205, column 5 - line 215, column 3: "+[i.constructor.name])},y=function(n,e){if(n instanceof u.OSCurrent){var r=P(n.value0,e);if(r instanceof t.Just)return new t.Just(new u.OSCurrent(r.value0));if(r instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 598, column 38 - line 601, column 1: "+[r.constructor.name])}return t.Nothing.value},b=function(n){return(o.length(n.before)+1|0)+o.length(n.after)|0},T=function(n){if(0===b(n))return new u.OSParent(n);if(e.otherwise)return new u.OSCurrent(n);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 578, column 1 - line 582, column 1: "+[n.constructor.name])},E=function(n){return n instanceof u.OSCurrent?b(n.value0):0},F=function(n){var e=o.uncons(n.after);return e instanceof t.Just?t.Just.create(function(){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.content=e.value0.head,t.before=o[":"](n.content)(n.before),t.after=e.value0.tail,t}()):t.Nothing.value},x=function(n){if(b(n)<=2)return t.Nothing.value;var r=o.reverse(n.before),a=e["++"](o.semigroupList)(n.after)($(r)),i=o.uncons(a);return i instanceof t.Just?t.Just.create(function(){var t=o["null"](n.before);if(t){var u={};for(var c in n)n.hasOwnProperty(c)&&(u[c]=n[c]);return u.before=o.Nil.value,u.after=e["++"](o.semigroupList)(i.value0.tail)($(a)),u}if(!t){var l={};for(var s in n)n.hasOwnProperty(s)&&(l[s]=n[s]);return l.before=o[":"](i.value0.head)(o.reverse(v(r))),l.after=i.value0.tail,l}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 454, column 44 - line 458, column 53: "+[t.constructor.name])}()):t.Nothing.value},A=function(n){return o["null"](n.parents);
},N=function(n){if(A(n)||b(n)<=2)return t.Nothing.value;var r=o.reverse(n.after),a=e["++"](o.semigroupList)(n.before)($(r)),i=o.uncons(a);return i instanceof t.Just?new t.Just(function(){var t=o["null"](n.after);if(t){var u={};for(var c in n)n.hasOwnProperty(c)&&(u[c]=n[c]);return u.before=e["++"](o.semigroupList)(i.value0.tail)($(a)),u.after=o.Nil.value,u}if(!t){var l={};for(var s in n)n.hasOwnProperty(s)&&(l[s]=n[s]);return l.before=i.value0.tail,l.after=o[":"](i.value0.head)(o.reverse(v(r))),l}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 439, column 42 - line 443, column 90: "+[t.constructor.name])}()):t.Nothing.value},D=function(n,e){return u.nodeIsLeaf$_$_$(n,e.content)},M=function(n,e,r){return D(n,r)?t.Nothing.value:t.Just.create({content:e,before:o.Nil.value,after:o.Nil.value,parents:o[":"]({left:r.before,center:p(r.content),centerNodeId:u.runConeNode$_$_$(n,r.content).nodeId,right:r.after})(r.parents)})},L=function(n,e){return A(e)?t.Nothing.value:e.before instanceof o.Nil?t.Just.create(function(){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.content=n,t.before=o.reverse(o[":"](e.content)(e.after)),t.after=o.Nil.value,t}()):t.Just.create(function(){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.content=n,t.before=e.before,t.after=o[":"](e.content)(e.after),t}())},O=function(n,e){return A(e)?t.Nothing.value:t.Just.create(function(){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.content=n,t.before=o[":"](e.content)(e.before),t.after=e.after,t}())},I=function(n){return o.length(n.before)},R=function(n){var a=o.uncons(n.parents);if(a instanceof t.Just){var i=e["++"](o.semigroupList)(o.reverse(n.before))(e["++"](o.semigroupList)(new o.Cons(n.content,o.Nil.value))(n.after));return t.Just.create({content:new u.ConeNode({entry:a.value0.head.center,nodeId:a.value0.head.centerNodeId,firstInd:I(n),children:new r.Right(i)}),before:a.value0.head.left,after:a.value0.head.right,parents:a.value0.tail})}return t.Nothing.value},k=function(n){return t.maybe$_$_$(n,k,R(n))},U=function(n,t){var i=function(t){return function(t){return 1+function(){if(t.value0.children instanceof r.Left)return 0;if(t.value0.children instanceof r.Right)return a.sum$_$_$(o.foldableList,e.semiringInt)(e["<$>"](o.functorList)(i(n))(t.value0.children.value0));throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 100, column 9 - line 105, column 1: "+[t.value0.children.constructor.name])}()|0}},c=k(t);return i(n)(u.runConeZip$_$_$(n,c).content)},G=function(n){if(n instanceof u.OSCurrent){var e=R(n.value0);if(e instanceof t.Just)return new t.Just(new u.OSCurrent(e.value0));if(e instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 611, column 28 - line 614, column 1: "+[e.constructor.name])}if(n instanceof u.OSParent)return new t.Just(new u.OSCurrent(n.value0));throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 611, column 1 - line 614, column 1: "+[n.constructor.name])},B=function(n){return n instanceof u.OSCurrent?I(n.value0):0},J=function(n){var r=function(n){var a=o.length(n.before);return t.maybe$_$_$(new o.Cons(a,o.Nil.value),function(n){return e["++"](o.semigroupList)(r(n))(o.singleton(a))},R(n))},a=o.tail(r(n));if(a instanceof t.Just)return a.value0;if(a instanceof t.Nothing)return o.Nil.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 524, column 29 - line 527, column 3: "+[a.constructor.name])},z=function(n){if(n instanceof u.OSCurrent)return J(n.value0);if(n instanceof u.OSParent)return J(n.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 670, column 1 - line 671, column 1: "+[n.constructor.name])},H=function(n){return n.content.value0.firstInd},W=function(n){var r=e["++"](o.semigroupList)(o.reverse(n.before))(e["++"](o.semigroupList)(new o.Cons(n.content,o.Nil.value))(n.after)),a=o.uncons(r);if(a instanceof t.Just){var i={};for(var u in n)n.hasOwnProperty(u)&&(i[u]=n[u]);return i.content=a.value0.head,i.before=o.Nil.value,i.after=a.value0.tail,i}return n},j=function(n){return t.fromMaybe(W(n))(F(n))},q=function(n,e){var r=b(e),o=function(n){return function(e){var r=i.uncons(n);return r instanceof t.Just?i[":"](j(r.value0.head))(n):n}};return a.foldl(a.foldableArray)(o)([e])(c.hRange$_$_$(0,r-2))},V=function(n,e){var r=function(r){return function(a){if(r>=0&&o.length(a)>r){var i=o["!!"](a)(r);if(i instanceof t.Just)return t.Just.create({content:i.value0,before:o.reverse(o.take(r)(a)),after:o.take(o.length(a)-(r+1|0))(o.drop$_$_$(r+1|0,a)),parents:o[":"]({left:e.before,center:g(e),centerNodeId:u.runConeNode$_$_$(n,e.content).nodeId,right:e.after})(e.parents)});if(i instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 251, column 9 - line 262, column 7: "+[i.constructor.name])}return t.Nothing.value}};return function(){var t=u.nodeGetChildren$_$_$(n,e.content)(),o=s(n,e).firstInd;return r(o)(t)}},Z=function(n,r,a){if(a instanceof o.Nil)return e["return"](l.applicativeEff)(new t.Just(k(r)));var i=function(r){return function(a){if(r instanceof t.Nothing)return e["return"](l.applicativeEff)(t.Nothing.value);if(r instanceof t.Just){var u=o.uncons(a);if(u instanceof t.Just&&u.value0.tail instanceof o.Nil)return e["return"](l.applicativeEff)(P(r.value0,u.value0.head));if(u instanceof t.Just){var c=P(r.value0,u.value0.head);if(c instanceof t.Nothing)return e["return"](l.applicativeEff)(t.Nothing.value);if(c instanceof t.Just)return function(){var e=V(n,c.value0)();return i(e)(u.value0.tail)()};throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 548, column 17 - line 553, column 13: "+[c.constructor.name])}if(u instanceof t.Nothing)return e["return"](l.applicativeEff)(t.Nothing.value);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 544, column 9 - line 555, column 1: "+[u.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 537, column 1 - line 538, column 1: "+[r.constructor.name,a.constructor.name])}};return function(){var e=V(n,k(r))();return i(e)(a)()}},X=function(n,o,a){var u=function(o){return function(a){if(0>a)return e["return"](l.applicativeEff)(new r.Right(a));if(0===a)return e["return"](l.applicativeEff)(new r.Left(o));if(e.otherwise){var c=function(n){return function(t){if(n instanceof r.Left)return e["return"](l.applicativeEff)(new r.Left(n.value0));if(n instanceof r.Right){if(0===n.value0)return e["return"](l.applicativeEff)(new r.Left(t));if(e.otherwise)return u(t)(n.value0)}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 125, column 13 - line 126, column 13: "+[n.constructor.name,t.constructor.name])}};return function(){var e=V(n,o)(),u=function(){if(e instanceof t.Nothing)return[];if(e instanceof t.Just)return q(n,e.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 120, column 24 - line 123, column 9: "+[e.constructor.name])}();return i.foldM$_$_$(l.monadEff,c,new r.Right(a-1))(u)()}}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 106, column 1 - line 129, column 1: "+[o.constructor.name,a.constructor.name])}},c=k(o);return function(){var n=u(c)(a-1)();if(n instanceof r.Right)return t.Nothing.value;if(n instanceof r.Left)return new t.Just(n.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 110, column 7 - line 113, column 3: "+[n.constructor.name])}},K=function(n,r){return r instanceof u.OSCurrent?function(){var e=V(n,r.value0)();if(e instanceof t.Just)return new t.Just(new u.OSCurrent(e.value0));if(e instanceof t.Nothing){var o=D(n,r.value0);if(o)return t.Nothing.value;if(!o)return new t.Just(new u.OSParent(r.value0));throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 622, column 52 - line 622, column 113: "+[o.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 620, column 29 - line 623, column 1: "+[e.constructor.name])}:e["return"](l.applicativeEff)(t.Nothing.value)},Y=function(n){var r=e["++"](o.semigroupList)(o.reverse(n.before))(n.after),a=h(I(n),o.length(r)),i=!o["null"](r);if(i){var u=a>=0;if(u){var c=o["!!"](r)(a);if(c instanceof t.Nothing)return t.Nothing.value;if(c instanceof t.Just)return t.Just.create(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.content=c.value0,e.before=o.reverse(o.take(a)(r)),e.after=o.take(o.length(r)-(a+1|0))(o.drop$_$_$(a+1|0,r)),e}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 378, column 22 - line 385, column 17: "+[c.constructor.name])}if(!u){var l=o["!!"](r)(o.length(r)-1);if(l instanceof t.Nothing)return t.Nothing.value;if(l instanceof t.Just)return t.Just.create(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.content=l.value0,e.before=o.reverse(o.take(o.length(r)-1)(r)),e.after=o.Nil.value,e}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 385, column 22 - line 392, column 9: "+[l.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 377, column 13 - line 392, column 9: "+[u.constructor.name])}if(!i)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 375, column 5 - line 393, column 3: "+[i.constructor.name])},Q=function(n){if(n instanceof u.OSCurrent){var e=Y(n.value0);if(e instanceof t.Just)return new t.Just(new u.OSCurrent(e.value0));if(e instanceof t.Nothing){var r=R(n.value0);if(r instanceof t.Just)return new t.Just(new u.OSParent(d(r.value0)));if(r instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 663, column 21 - line 666, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 660, column 5 - line 666, column 1: "+[e.constructor.name])}if(n instanceof u.OSParent)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 659, column 1 - line 666, column 1: "+[n.constructor.name])},nn=function(n){var r=e["++"](o.semigroupList)(o.reverse(n.before))(n.after),a=I(n),i=a-1,u=!o["null"](r);if(u){var c=i>=0;if(c){var l=o["!!"](r)(i);if(l instanceof t.Nothing)return t.Nothing.value;if(l instanceof t.Just)return t.Just.create(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.content=l.value0,e.before=o.reverse(o.take(i)(r)),e.after=o.take(o.length(r)-(i+1|0))(o.drop$_$_$(i+1|0,r)),e}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 350, column 22 - line 357, column 17: "+[l.constructor.name])}if(!c){var s=o["!!"](r)(o.length(r)-1);if(s instanceof t.Nothing)return t.Nothing.value;if(s instanceof t.Just)return t.Just.create(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.content=s.value0,e.before=o.reverse(o.take(o.length(r)-1)(r)),e.after=o.Nil.value,e}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 357, column 22 - line 364, column 9: "+[s.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 349, column 13 - line 364, column 9: "+[c.constructor.name])}if(!u)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 347, column 5 - line 365, column 3: "+[u.constructor.name])},en=function(n,r){var a=b(r)<2||u.nodeIsLeaf$_$_$(n,f(j(r)));if(a)return e["return"](l.applicativeEff)(t.Nothing.value);if(!a){var i=f(r),c=nn(r);if(c instanceof t.Nothing)return e["return"](l.applicativeEff)(t.Nothing.value);if(c instanceof t.Just){var s=j(c.value0);return function(){var e=u.nodeGetChildren$_$_$(n,f(s))(),r=o["null"](e);if(r)return M(n,i,s);if(!r){var a=V(n,s)();if(a instanceof t.Nothing)return t.Nothing.value;if(a instanceof t.Just)return O(i,a.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 477, column 29 - line 483, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 473, column 21 - line 483, column 1: "+[r.constructor.name])}}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 468, column 17 - line 483, column 1: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 465, column 5 - line 483, column 1: "+[a.constructor.name])},tn=function(n){var e=R(n);if(e instanceof t.Nothing)return t.Nothing.value;if(e instanceof t.Just){var r=A(e.value0);if(r)return t.Nothing.value;if(!r){var o=f(n),a=nn(n);if(a instanceof t.Nothing)return L(o,d(e.value0));if(a instanceof t.Just){var i=R(a.value0);if(i instanceof t.Nothing)return t.Nothing.value;if(i instanceof t.Just)return L(o,i.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 494, column 37 - line 498, column 1: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 492, column 20 - line 498, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 488, column 11 - line 498, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 485, column 5 - line 498, column 1: "+[e.constructor.name])},rn=function(n){if(n instanceof u.OSCurrent){var e=nn(n.value0);if(e instanceof t.Just)return new t.Just(new u.OSCurrent(e.value0));if(e instanceof t.Nothing){var r=R(n.value0);if(r instanceof t.Just)return new t.Just(new u.OSParent(d(r.value0)));if(r instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 653, column 25 - line 656, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 650, column 5 - line 656, column 1: "+[e.constructor.name])}if(n instanceof u.OSParent)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 649, column 1 - line 656, column 1: "+[n.constructor.name])};n.normalizePos$_$_$=h,n.selGetPath=z,n.selDeleteFillFromRight=Q,n.selDeleteFillFromLeft=rn,n.selGetEntry=w,n.selDown$_$_$=K,n.selUp=G,n.selShiftToZero=S,n.selSetSel$_$_$=y,n.selGetPos$_$_$=m,n.selGetPosition=B,n.selNumLevel=E,n.selFromPos=T,n.coneSetPath$_$_$=Z,n.coneGetPath=J,n.tailList=v,n.headList=$,n.withEmptyChildren=d,n.coneMoveUp=tn,n.coneMoveDown$_$_$=en,n.coneMoveRight=x,n.coneMoveLeft=N,n.coneDeleteFillFromRight=Y,n.coneDeleteFillFromLeft=nn,n.coneInsertBelow$_$_$=M,n.coneInsertBefore$_$_$=L,n.coneInsertAfter$_$_$=O,n.coneNumLevel=b,n.coneIsLeaf$_$_$=D,n.coneGetFirstBelow=H,n.coneIsRoot=A,n.coneDown$_$_$=V,n.coneRoot=k,n.coneUp=R,n.coneSetPos$_$_$=P,n.coneGetPosition=I,n.coneRight=j,n.coneFirst=W,n.coneShiftToZero=C,n.coneNext=F,n.getAllInLevel$_$_$=q,n.getZipFromIndex$_$_$=X,n.countLoadedNodes$_$_$=U,n.nodeGetEntry=p,n.zipGetEntry=g,n.zipGetNodeRec$_$_$=s,n.zipGetNode=f,n.makeZipper$_$_$=_}(PS["ConeCanvas.ConeZipper"]=PS["ConeCanvas.ConeZipper"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.Function"],PS["Data.Monoid"],function(n,t,r){var o=e.compare(n)(t)(r);if(o instanceof e.LT)return t;if(o instanceof e.EQ)return t;if(o instanceof e.GT)return r;throw new Error("Failed pattern match at Data.Ord line 60, column 3 - line 67, column 1: "+[o.constructor.name])});n.min$_$_$=t}(PS["Data.Ord"]=PS["Data.Ord"]||{}),function(n){"use strict";var e=function(){function n(){}return n.value=new n,n}();n.Proxy=e}(PS["Type.Proxy"]=PS["Type.Proxy"]||{}),function(n){"use strict";var e=(PS["Type.Proxy"],function(n){this.sized=n}),t=function(n){return n.sized},r=new e(function(n){return 4});n.Sized=e,n.sized=t,n.s4=r}(PS["Data.TypeNat"]=PS["Data.TypeNat"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Array"],r=PS["Data.Monoid"],o=PS["Data.Foldable"],a=(PS["Data.TypeNat"],PS["Control.Apply"]),i=PS.Math,u=(PS["Type.Proxy"],PS.Extensions,function(n){return n}),c=new e.Functor(function(n){return function(t){return e.map(e.functorArray)(n)(t)}}),l=new o.Foldable(function(n){return function(t){return function(a){return o.foldr(l)(function(r){return function(o){return e["<>"](n["__superclass_Prelude.Semigroup_0"]())(t(r))(o)}})(r.mempty(n))(a)}}},function(n){return function(e){return function(t){return o.foldl(o.foldableArray)(n)(e)(t)}}},function(n){return function(e){return function(t){return o.foldr(o.foldableArray)(n)(e)(t)}}}),s=function(n){return o.foldl(l)(e["+"](e.semiringNumber))(0)(e["<$>"](c)(function(n){return n*n})(n))},f=function(n){return i.sqrt(s(n))},d=function(n){var t=1/f(n);return e["<$>"](c)(function(n){return n*t})(n)},v=new e.Apply(function(){return c},function(n){return function(e){return t.zipWith$_$_$(function(n){return function(e){return n(e)}},n,e)}}),m=function(n){return a.lift2(v)(e["-"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.Ring_0"]()))},h=function(n,t){return d(m(e.numNumber)(n)(t))};n.normalize=d,n.vlength=f,n.vlengthSquared=s,n.direction$_$_$=h,n.vSub=m,n.toArray=u,n.functorVec=c,n.applyVec=v,n.foldableVector=l}(PS["Data.Vector"]=PS["Data.Vector"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.Vector"],PS["Data.TypeNat"],PS["Data.Array"]),r=(PS["Data.Array.Unsafe"],PS["Data.Maybe.Unsafe"],PS.Extensions),o=function(n){if(3===t.length(n))return n;if(e.otherwise)return r.fail("Vector3>>vec3': wrong array length!");throw new Error("Failed pattern match at Data.Vector3 line 31, column 1 - line 34, column 1: "+[n.constructor.name])},a=function(n,e,t){return[n,e,t]},i=function(n){return n[2]},u=function(n){return n[1]},c=function(n){return n[0]},l=function(n,t,o){return 3===t.length&&3===o.length?[e["-"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.Ring_0"]())(e["*"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[1])(o[2]))(e["*"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[2])(o[1])),e["-"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.Ring_0"]())(e["*"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[2])(o[0]))(e["*"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[0])(o[2])),e["-"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.Ring_0"]())(e["*"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[0])(o[1]))(e["*"](n["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[1])(o[0]))]:r.fail("Vector3>>cross: impossible!")};n.cross$_$_$=l,n.get3Z=i,n.get3Y=u,n.get3X=c,n["vec3'"]=o,n.vec3$_$_$=a}(PS["Data.Vector3"]=PS["Data.Vector3"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.Foreign"],PS["Data.Foreign.Class"]),r=PS["Data.Foreign.Index"],o=PS["Data.Array"],a=(PS["Data.Vector"],PS["Data.Vector3"]),i=(PS["Data.TypeNat"],PS["ConeCanvas.ConeModel"],PS["ConeCanvas.Color"]),u=PS["Data.Either"],c={prefsName:"standardPrefs",backColor:new i.Color4(1,1,1,1),textColor:new i.Color4I(0,0,0,1),textureFrameColor:new i.Color4(0,0,0,.3),fontStyle:"40px Arial, sans-serif",massiveColor:new i.Color4(.9,.9,1,1),rectColor:new i.Color4(.9,.9,1,1),labelTextBackground:!0,alwaysGreyTextBack:!1,labelIconBackground:!1,lightDirection:[-.5,-1,-.3],lightAmbient:new i.Color4(.2,.2,.2,1),lightDiffuse:new i.Color4(.5,.7,.7,1),lightDiffuseEdit:new i.Color4(1,.5,.5,1),lightSpecular:new i.Color4(1,1,1,1),materialAmbient:new i.Color4(1,1,1,1),materialDiffuse:new i.Color4(46/256,99/256,191/256,1),materialSpecular:new i.Color4(1,1,1,1),shininess:16,maxTextLength:40,angleSelectFactor:10,angleSelectAddX:0,angleSelectAddY:0,desiredZoomHint:5.5,aniTimeLR:500,aniTimeUD:600,aniTimeT:1500,aniTimeF:4e3,cursorKeys:!0,fixedFrameTime:0,coneHeight:2.5,windowsRatio:.6666666,labelRatio:1.5,cameraDistZ:10,upperOffset:0,controlAreaInitialVisible:!0,minChildSize:30,minIconSize:150,minLabelSize:350,keyEventsFromWindow:!0,labelEllipticalFactor:.5},l=function(n,c){var l=[{selector:"backColor",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.backColor=n,e}())})}}},{selector:"textColor",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.textColor=n,e}())})}}},{selector:"textureFrameColor",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.textureFrameColor=n,e}())})}}},{selector:"fontStyle",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.stringIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.fontStyle=n,e}())})}}},{selector:"massiveColor",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.massiveColor=n,e}())})}}},{selector:"rectColor",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.rectColor=n,e}())})}}},{selector:"labelTextBackground",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.booleanIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.labelTextBackground=n,e}())})}}},{selector:"alwaysGreyTextBack",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.booleanIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.alwaysGreyTextBack=n,e}())})}}},{selector:"labelIconBackground",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.booleanIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.labelIconBackground=n,e}())})}}},{selector:"lightDirection",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.arrayIsForeign(t.numberIsForeign))(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.lightDirection=a["vec3'"](n),e}())})}}},{selector:"lightAmbient",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.lightAmbient=n,e}())})}}},{selector:"lightDiffuse",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.lightDiffuse=n,e}())})}}},{selector:"lightDiffuseEdit",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.lightDiffuseEdit=n,e}())})}}},{selector:"lightSpecular",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.lightSpecular=n,e}())})}}},{selector:"materialAmbient",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.materialAmbient=n,e}())})}}},{selector:"materialDiffuse",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.materialDiffuse=n,e}())})}}},{selector:"materialSpecular",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(i.color4IsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.materialSpecular=n,e}())})}}},{selector:"shininess",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.shininess=n,e}())})}}},{selector:"maxTextLength",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.intIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.maxTextLength=n,e}())})}}},{selector:"angleSelectFactor",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.angleSelectFactor=n,e}())})}}},{selector:"angleSelectAddX",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.angleSelectAddX=n,e}())})}}},{selector:"angleSelectAddY",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.angleSelectAddY=n,e}())})}}},{selector:"desiredZoomHint",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.desiredZoomHint=n,e}())})}}},{selector:"aniTimeLR",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.aniTimeLR=n,e}())})}}},{selector:"aniTimeUD",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.aniTimeUD=n,e}())})}}},{selector:"aniTimeT",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.aniTimeT=n,e}())})}}},{selector:"aniTimeF",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.aniTimeF=n,e}())})}}},{selector:"fixedFrameTime",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.intIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.fixedFrameTime=n,e}())})}}},{selector:"windowsRatio",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.windowsRatio=n,e}())})}}},{selector:"labelRatio",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.labelRatio=n,e}())})}}},{selector:"cameraDistZ",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.cameraDistZ=n,e}())})}}},{selector:"coneHeight",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.coneHeight=n,e}())})}}},{selector:"upperOffset",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.upperOffset=n,e}())})}}},{selector:"cursorKeys",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.booleanIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.cursorKeys=n,e}())})}}},{selector:"controlAreaInitialVisible",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.booleanIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.controlAreaInitialVisible=n,e}())})}}},{selector:"minChildSize",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.minChildSize=n,e}())})}}},{selector:"minIconSize",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.minIconSize=n,e}())})}}},{selector:"minLabelSize",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.minLabelSize=n,e}())})}}},{selector:"keyEventsFromWindow",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.booleanIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.keyEventsFromWindow=n,e}())})}}},{selector:"labelEllipticalFactor",setter:function(n){return function(r){return e[">>="](u.bindEither)(t.read(t.numberIsForeign)(n))(function(n){return e["return"](u.applicativeEither)(function(){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e.labelEllipticalFactor=n,e}())})}}}],s=e.map(e.functorArray)(function(n){return function(t){return function(o){var a=r.hasProperty(r.indexString)(n.selector)(o);if(a)return e.bind(u.bindEither)(r.ix(r.indexString)(o)(n.selector))(function(e){return n.setter(e)(t)});if(!a)return e["return"](u.applicativeEither)(t);throw new Error("Failed pattern match at ConeCanvas.Preferences line 172, column 21 - line 176, column 40: "+[a.constructor.name])}}})(l);return e.bind(u.bindEither)(t.readJSON$_$_$(t.foreignIsForeign,n))(function(n){return e.bind(u.bindEither)(o.foldM$_$_$(u.monadEither,function(e){
return function(t){return t(e)(n)}},c)(s))(function(n){return e["return"](u.applicativeEither)(n)})})};n.parsePrefs$_$_$=l,n.standardPrefs=c}(PS["ConeCanvas.Preferences"]=PS["ConeCanvas.Preferences"]||{}),function(n){"use strict";var e=PS.Prelude,t=function(n){return new e.Eq(function(t){return function(r){return e["=="](n)(t.x)(r.x)&&e["=="](n)(t.y)(r.y)&&e["=="](n)(t.z)(r.z)}})},r=function(n){return new e.Ord(function(){return t(n["__superclass_Prelude.Eq_0"]())},function(t){return function(r){var o=e.compare(n)(t.x)(r.x);if(o instanceof e.GT)return e.GT.value;if(o instanceof e.LT)return e.LT.value;if(o instanceof e.EQ){var a=e.compare(n)(t.y)(r.y);if(a instanceof e.GT)return e.GT.value;if(a instanceof e.LT)return e.LT.value;if(a instanceof e.EQ){var i=e.compare(n)(t.z)(r.z);if(i instanceof e.GT)return e.GT.value;if(i instanceof e.LT)return e.LT.value;if(i instanceof e.EQ)return e.EQ.value;throw new Error("Failed pattern match at ConeCanvas.GeometryTypes line 54, column 23 - line 59, column 1: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.GeometryTypes line 51, column 19 - line 59, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.GeometryTypes line 48, column 9 - line 59, column 1: "+[o.constructor.name])}})};n.eqPoint3=t,n.ordPoint3=r}(PS["ConeCanvas.GeometryTypes"]=PS["ConeCanvas.GeometryTypes"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Control.Monad.Eff"],r=PS["Control.Monad.ST"],o=PS["Data.Maybe"],a=(PS["Graphics.Canvas"],PS["Debug.Trace"]),i=(PS["Data.ArrayBuffer.Types"],PS["ConeCanvas.ConeModel"],PS["ConeCanvas.Preferences"]),u=(PS["ConeCanvas.GeometryTypes"],PS["Data.List"],function(){function n(){}return n.value=new n,n}()),c=function(){function n(){}return n.value=new n,n}(),l=function(){function n(){}return n.value=new n,n}(),s=function(){function n(){}return n.value=new n,n}(),f=function(){function n(){}return n.value=new n,n}(),d=function(){function n(){}return n.value=new n,n}(),v=function(){function n(){}return n.value=new n,n}(),m=function(){function n(){}return n.value=new n,n}(),h=function(){function n(){}return n.value=new n,n}(),p=function(){function n(){}return n.value=new n,n}(),g=function(){function n(){}return n.value=new n,n}(),w=function(){function n(){}return n.value=new n,n}(),_=function(){function n(){}return n.value=new n,n}(),$=function(){function n(){}return n.value=new n,n}(),C=function(){function n(){}return n.value=new n,n}(),S=function(){function n(){}return n.value=new n,n}(),P=function(){function n(){}return n.value=new n,n}(),y=function(){function n(){}return n.value=new n,n}(),b=function(){function n(){}return n.value=new n,n}(),T=function(){function n(){}return n.value=new n,n}(),E=function(){function n(){}return n.value=new n,n}(),F=function(){function n(){}return n.value=new n,n}(),x=function(){function n(){}return n.value=new n,n}(),A=function(){function n(){}return n.value=new n,n}(),N=function(){function n(){}return n.value=new n,n}(),D=function(){function n(){}return n.value=new n,n}(),M=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),L=function(){function n(){}return n.value=new n,n}(),O=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),I=function(){function n(){}return n.value=new n,n}(),R=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),k=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),U=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),G=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),B=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),J=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),z=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),H=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),W=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),j=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),q=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),V=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),Z=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),X=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),K=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),Y=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),Q=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),nn=function(){function n(){}return n.value=new n,n}(),en=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),tn=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),rn=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),on=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),an=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),un=function(){function n(n,e,t,r,o,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=o,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(o){return function(a){return function(i){return new n(e,t,r,o,a,i)}}}}}},n}(),cn=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),ln=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),sn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),fn=function(){function n(){}return n.value=new n,n}(),dn=function(){function n(){}return n.value=new n,n}(),vn=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),mn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),hn=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),pn=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),gn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),wn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),_n=function(n,e){return(n-1)/e-1},$n=function(n,e,t){return r.writeSTRef$_$_$(e.value0,t)},Cn=function(n,e){return(n+1)*e+1},Sn=function(n,e){return r.readSTRef(e.value0)},Pn=function(n,o){return e["<$>"](t.functorEff)(wn.create)(r.newSTRef(o))},yn=function(n,e,t){return r.modifySTRef$_$_$(e.value0,t)},bn=function(n){return n.value0},Tn=function(){var n=r.newSTRef(!1)();return{selectableHot:u.value,pressed:"",needRepaint:n,angleSelect:{x:0,y:0},zoomControl:-1,zoom:1,currentMaxZoom:7,showControl:!0,showIndex:!1,editMode:!1}},En=function(n,u,c,l,s,f,d,v){return function(){var n=Tn(),l=r.newSTRef(o.Nothing.value)();return{selectionModel:u,guiStyle:c,animateStartTime:0,animatePaintRef:l,canvas:o.Nothing.value,hasFocus:!1,iconNames:s,stlNames:f,labelSelection:[],state:dn.value,commandQueue:[],counter:0,prefs:i.standardPrefs,callback:e["return"](t.applicativeEff)(e.unit),keyCallback:function(n){return function(n){return function(n){return function(n){return function(n){return e["return"](t.applicativeEff)(!0)}}}}},cycleCallback:e["return"](t.applicativeEff)(e.unit),modelChangedCallback:o.Nothing.value,selectedChangedCallback:o.Nothing.value,loadIconCallback:function(n){return function(n){return e["return"](t.applicativeEff)(e.unit)}},loadSTLCallback:function(n){return function(n){return e["return"](t.applicativeEff)(e.unit)}},alertCallback:function(n){return a.trace("Alert: "+n)(function(n){return e["return"](t.applicativeEff)(e.unit)})},copySelection:L.value,controlState:n,isPainting:!1,windowSize:{x:0,y:0},bindings:d,frontend:v,benchmark:o.Nothing.value,demoMode:!1}}};n.KLeft=c,n.KRight=l,n.KUp=s,n.KDown=f,n.KMoveLeft=d,n.KMoveRight=v,n.KMoveUp=m,n.KMoveDown=h,n.KFirst=p,n.KSetFirst=g,n.KCut=w,n.KCopy=_,n.KPaste=$,n.KLink=C,n.KClockwork=S,n.KGlobal=P,n.KUnglobal=y,n.KZoomNormal=b,n.KZoomOut=T,n.KBench=E,n.KToggleDemo=F,n.KToggleControl=x,n.KToggleIndex=A,n.KEditModeOn=N,n.KEditModeOff=D,n.CommandingTurn=Z,n.CommandingUpDown=X,n.CommandingTrans=K,n.CommandingClockwork=Y,n.CommandingGlobal=Q,n.CommandingNothing=nn,n.CILabel=O,n.CIMainLabel=I,n.CISuperLabel=R,n.CICard=k,n.CIAngel=U,n.CIZoom=G,n.CITurn=B,n.OSNormal=dn,n.OSTurnMouse=vn,n.OSAnimate=mn,n.OSAngle=hn,n.OSZoom=pn,n.SHNavigate=u,n.SingleSelection=M,n.NoSelection=L,n.TOFade=J,n.TOTurn=z,n.TOSizeChange=H,n.TPAim=W,n.TPIntro=j,n.TPLift=q,n.TPTransOp=V,n.AniMoveLeft=en,n.AniMoveRight=tn,n.AniMoveUp=rn,n.AniMoveDown=on,n.AniTransform=an,n.AniClockwork=un,n.AniGlobalView=cn,n.AniZoom=ln,n.AniPause=sn,n.AniNull=fn,n.ConeFront=gn,n.PaintRef=wn,n.emptyControlState=Tn,n.zoomControl$_$_$=_n,n.realZoom$_$_$=Cn,n.emptyPaintState$_$_$=En,n.getConeFront=bn,n.newPaintRef$_$_$=Pn,n.writePaintRef$_$_$=$n,n.modifyPaintRef$_$_$=yn,n.readPaintRef$_$_$=Sn}(PS["ConeCanvas.ConeControlTypes"]=PS["ConeCanvas.ConeControlTypes"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Array"],r=PS["Data.Maybe"],o=PS["Data.Either"],a=PS["Data.List"],i=PS["Data.Int"],u=PS["Data.Ord"],c=PS["Debug.Trace"],l=PS.Math,s=PS["ConeCanvas.ConeModel"],f=PS["ConeCanvas.ConeZipper"],d=PS["ConeCanvas.ConeControlTypes"],v=(PS["ConeCanvas.GeometryTypes"],PS.Extensions),m=PS["Control.Monad.Eff"],h=function(n,r,o,i,u,c,l,s,m,h){var p=function(n){var t=f.normalizePos$_$_$(n,c),o=f.normalizePos$_$_$(t+s|0,l);return new d.TPTransOp(new d.TOTurn(m,{index:o,ngon:l},h),new d.TPAim(e["++"](a.semigroupList)(r)(new a.Cons(t,a.Nil.value))))},g=e["<$>"](e.functorArray)(p)(v.hRange$_$_$(o+i|0,((o+i|0)+u|0)-1)),w=c!==l;if(w)return t[":"](new d.TPTransOp(new d.TOSizeChange(l,m),new d.TPAim(r)))(g);if(!w)return g;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 648, column 5 - line 653, column 3: "+[w.constructor.name])},p=function(n,i,u){var c=function(u){return function(c){var l=f.coneGetPosition(i),v=f.coneNumLevel(i),m=f.coneNumLevel(u),p=m-1,g=v-1,w=f.zipGetNode(i),_=h(n,a.Nil.value,c,0,p-c,p,m,1,!0,s.TDClockwise.value),$=h(n,a.Nil.value,c,-c,c,p,m,0,!0,s.TDClockwise.value),C=s.makeHiddenNode(n)(f.nodeGetEntry(w)),S=s.makeHiddenLeaf(n)(f.nodeGetEntry(w)),P=new s.ConeNode({entry:S,nodeId:0,firstInd:0,children:new o.Right(a.Nil.value)}),y=new s.ConeNode({entry:C,nodeId:0,firstInd:0,children:new o.Right(a[":"](w)(a.replicate$_$_$(v-1,P)))}),b=new d.TPLift(!0,{path:a.Nil.value,pos:{index:0,ngon:v},model:y,transforms:[new d.TPTransOp(new d.TOSizeChange(m,!0),new d.TPAim(a.Nil.value))]}),T=new d.TPTransOp(new d.TOFade(r.Nothing.value),new d.TPAim(a[":"](c)(a[":"](l)(a.Nil.value)))),E=h(n,a[":"](c)(a.Nil.value),l,1,v-(l+1|0),v,g,0,!0,s.TDClockwise.value),F=h(n,a[":"](c)(a.Nil.value),l,-l,l,v,g,1,!0,s.TDClockwise.value),x=e["++"](e.semigroupArray)(t[":"](b)(t[":"](T)(F)))(e["++"](e.semigroupArray)(E)(e["++"](e.semigroupArray)($)(_)));return x}},l=f.coneUp(i);if(l instanceof r.Nothing)return r.Nothing.value;if(l instanceof r.Just){var v=c(u)(f.coneGetPosition(l.value0));return new r.Just({transPrims:v,transAim:new s.OSCurrent(u)})}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 584, column 5 - line 589, column 3: "+[l.constructor.name])},g=function(n,t){if(t instanceof s.OSParent)return e["return"](m.applicativeEff)(r.Nothing.value);if(t instanceof s.OSCurrent)return function(){var o=f.coneDown$_$_$(n,t.value0)();if(o instanceof r.Nothing)return c.trace("transformUp: target not found")(function(n){return e["return"](m.applicativeEff)(r.Nothing.value)})();if(o instanceof r.Just){var a=f.coneMoveUp(o.value0);if(a instanceof r.Just){var i=p(n,o.value0,a.value0);return i}if(a instanceof r.Nothing)return c.trace("transformUp: aim not found")(function(n){return e["return"](m.applicativeEff)(r.Nothing.value)})();throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 576, column 13 - line 582, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 573, column 5 - line 582, column 1: "+[o.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 570, column 1 - line 571, column 1: "+[t.constructor.name])},w=function(n,i,u){var c=function(u){var c=f.coneGetPosition(i),l=f.coneNumLevel(i),v=f.coneNumLevel(u),m=v-1,p=f.normalizePos$_$_$(f.coneGetPosition(u)-1,v),g=l-1,w=f.zipGetNode(i),_=f.normalizePos$_$_$(c+1|0,l),$=h(n,a[":"](_)(a.Nil.value),p,-p,p+1|0,m,v,-1,!0,s.TDAntiClockwise.value),C=h(n,a[":"](_)(a.Nil.value),p,1,m-(p+1|0),m,v,0,!0,s.TDAntiClockwise.value),S=s.makeHiddenNode(n)(f.nodeGetEntry(w)),P=s.makeHiddenLeaf(n)(f.nodeGetEntry(w)),y=new s.ConeNode({entry:P,nodeId:0,firstInd:0,children:new o.Right(a.Nil.value)}),b=new s.ConeNode({entry:S,nodeId:0,firstInd:0,children:new o.Right(a[":"](w)(a.replicate$_$_$(l-1,y)))}),T=new d.TPLift(!1,{path:a.Nil.value,pos:{index:0,ngon:l},model:b,transforms:[new d.TPTransOp(new d.TOSizeChange(v,!0),new d.TPAim(a.Nil.value))]}),E=new d.TPTransOp(new d.TOFade(r.Nothing.value),new d.TPAim(a[":"](c)(a.Nil.value))),F=h(n,a.Nil.value,c,1,l-(c+1|0),l,g,-1,!0,s.TDAntiClockwise.value),x=h(n,a.Nil.value,c,-c,c,l,g,0,!0,s.TDAntiClockwise.value);return e["++"](e.semigroupArray)(t[":"](T)(t[":"](E)(x)))(e["++"](e.semigroupArray)(F)(e["++"](e.semigroupArray)($)(C)))},l=f.coneUp(u);if(l instanceof r.Just){var v=c(u);return new r.Just({transPrims:v,transAim:new s.OSCurrent(l.value0)})}if(l instanceof r.Nothing)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 521, column 5 - line 527, column 3: "+[l.constructor.name])},_=function(n,t){if(t instanceof s.OSParent)return e["return"](m.applicativeEff)(r.Nothing.value);if(t instanceof s.OSCurrent)return function(){var e=f.coneMoveDown$_$_$(n,t.value0)();if(e instanceof r.Nothing)return r.Nothing.value;if(e instanceof r.Just)return w(n,t.value0,e.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 515, column 5 - line 519, column 1: "+[e.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 512, column 1 - line 513, column 1: "+[t.constructor.name])},$=function(n){return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:d.AniNull.value})},C=function(n,t){for(var r=n,o=t;;){if(o instanceof d.TPAim&&o.value0 instanceof a.Cons&&o.value0.value1 instanceof a.Nil){if(o.value0.value0===r)return!0;if(e.otherwise)return!1}if(o instanceof d.TPAim)return!1;if(o instanceof d.TPIntro)return!1;if(o instanceof d.TPLift)return!1;{if(!(o instanceof d.TPTransOp))throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 788, column 1 - line 790, column 1: "+[r.constructor.name,o.constructor.name]);var i=r,u=o.value1;r=i,o=u}}},S=function(n){for(var t=n;;){if(t instanceof d.TPAim){if(a["null"](t.value0))return!0;if(e.otherwise)return!1}if(t instanceof d.TPIntro)return!1;if(t instanceof d.TPLift)return!1;{if(!(t instanceof d.TPTransOp))throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 797, column 1 - line 799, column 1: "+[t.constructor.name]);var r=t.value1;t=r}}},P=function(n){return function(e){for(var t=n,o=e;;){if(o instanceof d.TPTransOp&&o.value0 instanceof d.TOTurn){var a=C(t,o.value1);if(a)return new r.Just(new d.TOTurn(o.value0.value0,o.value0.value1,o.value0.value2));if(!a)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 747, column 51 - line 750, column 1: "+[a.constructor.name])}{if(!(o instanceof d.TPTransOp))return r.Nothing.value;var i=t,u=o.value1;t=i,o=u}}}},y=function(n){for(var e=n;;){if(e instanceof d.TPTransOp&&e.value0 instanceof d.TOSizeChange){var t=S(e.value1);if(t)return new r.Just({l:e.value0.value0,r:e.value0.value1});if(!t)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 779, column 51 - line 782, column 1: "+[t.constructor.name])}{if(!(e instanceof d.TPTransOp))return r.Nothing.value;var o=e.value1;e=o}}},b=function(n,e){var t=f.coneGetPath(n),o=function(){var n=a.last(t);if(n instanceof r.Nothing)return[];if(n instanceof r.Just)return[new d.TPTransOp(new d.TOFade(new r.Just(!0)),new d.TPAim(a.singleton(n.value0)))];throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 475, column 23 - line 478, column 5: "+[n.constructor.name])}();return{transPrims:o,transAim:new s.OSParent(e)}},T=function(n){for(var e=n;;){if(!(e instanceof d.TPTransOp)){if(e instanceof d.TPAim)return r.Nothing.value;if(e instanceof d.TPIntro)return r.Nothing.value;if(e instanceof d.TPLift)return new r.Just(e);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 833, column 1 - line 834, column 1: "+[e.constructor.name])}var t=e.value1;e=t}},E=function(n){if(n instanceof d.TPTransOp){var t=E(n.value1);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return new r.Just(new d.TPTransOp(n.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 823, column 38 - line 826, column 1: "+[t.constructor.name])}if(n instanceof d.TPAim)return r.Nothing.value;if(n instanceof d.TPIntro)return r.Nothing.value;if(n instanceof d.TPLift){if(a["null"](n.value1.path))return new r.Just(n);if(e.otherwise)return r.Nothing.value}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 823, column 1 - line 826, column 1: "+[n.constructor.name])},F=function(n){return{level:f.coneNumLevel(n),pos:f.coneGetPosition(n),path:f.coneGetPath(n)}},x=function(n,e,o){var i=F(e),u=function(){var n=a.last(f.coneGetPath(e));return n instanceof r.Just&&n.value0-1<0?i.level-1:n instanceof r.Just?n.value0-1:i.level-1}(),c=t[":"](new d.TPTransOp(new d.TOTurn(!0,{index:f.normalizePos$_$_$(u+2|0,i.level),ngon:i.level},s.TDClockwise.value),new d.TPAim(a.singleton(u))))(h(n,a.Nil.value,i.pos,1,i.level-1,i.level,i.level,1,!0,s.TDClockwise.value));return{transPrims:c,transAim:new s.OSCurrent(o)}},A=function(n,e){if(e instanceof s.OSParent)return r.Nothing.value;if(e instanceof s.OSCurrent){var t=f.coneMoveLeft(e.value0);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return r.Just.create(x(n,e.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 299, column 5 - line 303, column 1: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 297, column 1 - line 298, column 1: "+[e.constructor.name])},N=function(n,e,o){var i=F(e),u=function(){var n=a.last(f.coneGetPath(e));return n instanceof r.Just&&(n.value0+1|0)<i.level?n.value0+1|0:0}(),c=t[":"](new d.TPTransOp(new d.TOTurn(!0,{index:f.normalizePos$_$_$(u-2,i.level),ngon:i.level},s.TDAntiClockwise.value),new d.TPAim(a.singleton(u))))(h(n,a.Nil.value,i.pos,1,i.level-1,i.level,i.level,-1,!0,s.TDAntiClockwise.value));return{transPrims:c,transAim:new s.OSCurrent(o)}},D=function(n,e){if(e instanceof s.OSParent)return r.Nothing.value;if(e instanceof s.OSCurrent){var t=f.coneMoveRight(e.value0);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return r.Just.create(N(n,e.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 330, column 5 - line 334, column 1: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 328, column 1 - line 329, column 1: "+[e.constructor.name])},M=function(n){for(var e=n;;){if(!(e instanceof d.TPTransOp)){if(e instanceof d.TPAim)return r.Nothing.value;if(e instanceof d.TPLift)return r.Nothing.value;if(e instanceof d.TPIntro)return new r.Just(e);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 816, column 1 - line 817, column 1: "+[e.constructor.name])}var t=e.value1;e=t}},L=function(n){if(n instanceof d.TPTransOp){var t=L(n.value1);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return new r.Just(new d.TPTransOp(n.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 805, column 34 - line 808, column 1: "+[t.constructor.name])}if(n instanceof d.TPAim)return r.Nothing.value;if(n instanceof d.TPLift)return r.Nothing.value;if(n instanceof d.TPIntro){if(a["null"](n.value0.path))return new r.Just(n);if(e.otherwise)return r.Nothing.value}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 805, column 1 - line 808, column 1: "+[n.constructor.name])},O=function(n,e){var t=f.coneNumLevel(n),o=new d.TPTransOp(new d.TOFade(new r.Just(!1)),new d.TPIntro({path:a.Nil.value,pos:{index:0,ngon:t+1|0},model:e,transforms:[]}));return{oldSize:t,newSize:t+1|0,position:f.coneGetPosition(n),trans:o}},I=function(n,o,i,u){if(o instanceof s.OSCurrent){var c=O(o.value0,i),l=h(n,a.Nil.value,c.position,-c.position,c.position,c.oldSize,c.newSize,0,!0,s.TDClockwise.value),f=h(n,a.Nil.value,c.position,0,c.oldSize-c.position,c.oldSize,c.newSize,1,!0,s.TDClockwise.value);t[":"](c.trans)(e["++"](e.semigroupArray)(l)(f));return{transPrims:[c.trans],transAim:new s.OSCurrent(u)}}if(o instanceof s.OSParent){var v=new d.TPTransOp(new d.TOFade(new r.Just(!1)),new d.TPIntro({path:a.Nil.value,pos:{index:0,ngon:1},model:i,transforms:[]}));return{transPrims:[v],transAim:new s.OSCurrent(u)}}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 411, column 1 - line 423, column 1: "+[o.constructor.name,i.constructor.name,u.constructor.name])},R=function(n,e,t){if(e instanceof s.OSCurrent){var o=f.coneInsertBefore$_$_$(t,e.value0);if(o instanceof r.Nothing)return r.Nothing.value;if(o instanceof r.Just)return r.Just.create(I(n,new s.OSCurrent(e.value0),t,o.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 402, column 5 - line 405, column 1: "+[o.constructor.name])}if(e instanceof s.OSParent){var a=f.coneInsertBelow$_$_$(n,t,e.value0);if(a instanceof r.Nothing)return r.Nothing.value;if(a instanceof r.Just)return r.Just.create(I(n,new s.OSParent(e.value0),t,a.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 406, column 5 - line 410, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 401, column 1 - line 405, column 1: "+[e.constructor.name,t.constructor.name])},k=function(n,o,i,u){if(o instanceof s.OSCurrent){var c=O(o.value0,i),l=h(n,a.Nil.value,c.position,-c.position,c.position+1|0,c.oldSize,c.newSize,-1,!0,s.TDAntiClockwise.value),f=h(n,a.Nil.value,c.position,1,c.oldSize-(c.position+1|0),c.oldSize,c.newSize,0,!0,s.TDAntiClockwise.value),v=t[":"](c.trans)(e["++"](e.semigroupArray)(l)(f));return{transPrims:v,transAim:new s.OSCurrent(u)}}if(o instanceof s.OSParent){var m=new d.TPTransOp(new d.TOFade(new r.Just(!1)),new d.TPIntro({path:a.Nil.value,pos:{index:0,ngon:1},model:i,transforms:[]}));return{transPrims:[m],transAim:new s.OSCurrent(u)}}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 363, column 1 - line 373, column 1: "+[o.constructor.name,i.constructor.name,u.constructor.name])},U=function(n,e,t){if(e instanceof s.OSCurrent){var o=f.coneInsertAfter$_$_$(t,e.value0);if(o instanceof r.Nothing)return r.Nothing.value;if(o instanceof r.Just)return r.Just.create(k(n,new s.OSCurrent(e.value0),t,o.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 354, column 5 - line 357, column 1: "+[o.constructor.name])}if(e instanceof s.OSParent){var a=f.coneInsertBelow$_$_$(n,t,e.value0);if(a instanceof r.Nothing)return r.Nothing.value;if(a instanceof r.Just)return r.Just.create(k(n,new s.OSParent(e.value0),t,a.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 358, column 5 - line 362, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 353, column 1 - line 357, column 1: "+[e.constructor.name,t.constructor.name])},G=function(n){for(var e=n;;){if(e instanceof d.TPTransOp&&e.value0 instanceof d.TOFade)return new r.Just(new d.TOFade(e.value0.value0));{if(!(e instanceof d.TPTransOp))return r.Nothing.value;var t=e.value1;e=t}}},B=function(n){return function(e){for(var t=n,o=e;;){if(o instanceof d.TPTransOp&&o.value0 instanceof d.TOFade){var a=C(t,o.value1);if(a)return new r.Just(new d.TOFade(o.value0.value0));if(!a)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 755, column 53 - line 758, column 1: "+[a.constructor.name])}{if(!(o instanceof d.TPTransOp))return r.Nothing.value;var i=t,u=o.value1;t=i,o=u}}}},J=function(n){var e=f.coneGetPath(n),t=f.coneNumLevel(n),o=a.last(e);if(o instanceof r.Just)return{path:e,selected:f.coneGetPosition(n),oldSize:t,newSize:t-1,trans:new d.TPTransOp(new d.TOFade(new r.Just(!0)),new d.TPAim(a.singleton(o.value0)))};if(o instanceof r.Nothing)return v.fail("ConeTransforms>>getExtroParas: Empty path");throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 462, column 8 - line 472, column 1: "+[o.constructor.name])},z=function(n,r,o){if(o instanceof s.OSCurrent){var i=J(r),u=h(n,a.Nil.value,i.selected,-i.selected,i.selected,i.oldSize,i.newSize,1,!0,s.TDClockwise.value),c=h(n,a.Nil.value,i.selected,1,i.oldSize-(i.selected+1|0),i.oldSize,i.newSize,0,!0,s.TDClockwise.value),l=t[":"](i.trans)(e["++"](e.semigroupArray)(u)(c));return{transPrims:l,transAim:new s.OSCurrent(o.value0)}}if(o instanceof s.OSParent)return b(r,o.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 444, column 1 - line 454, column 1: "+[r.constructor.name,o.constructor.name])},H=function(n,e){if(e instanceof s.OSCurrent){var t=f.selDeleteFillFromLeft(e);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return new r.Just(z(n,e.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 438, column 5 - line 441, column 1: "+[t.constructor.name])}if(e instanceof s.OSParent)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 437, column 1 - line 441, column 1: "+[e.constructor.name])},W=function(n,r,o){if(o instanceof s.OSCurrent){var i=J(r),u=h(n,a.Nil.value,i.selected,-i.selected,i.selected,i.oldSize,i.newSize,0,!0,s.TDAntiClockwise.value),c=h(n,a.Nil.value,i.selected,1,i.oldSize-(i.selected+1|0),i.oldSize,i.newSize,-1,!0,s.TDAntiClockwise.value),l=t[":"](i.trans)(e["++"](e.semigroupArray)(u)(c));return{transPrims:l,transAim:new s.OSCurrent(o.value0)}}if(o instanceof s.OSParent)return b(r,o.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 494, column 1 - line 504, column 1: "+[r.constructor.name,o.constructor.name])},j=function(n,e){if(e instanceof s.OSCurrent){var t=f.selDeleteFillFromRight(e);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return new r.Just(W(n,e.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 488, column 5 - line 491, column 1: "+[t.constructor.name])}if(e instanceof s.OSParent)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 487, column 1 - line 491, column 1: "+[e.constructor.name])},q=function(n){return function(e){if(e instanceof d.TPAim){var t=a.uncons(e.value0);if(t instanceof r.Just){var o=t.value0.head===n;if(o)return new r.Just(new d.TPAim(t.value0.tail));if(!o)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 729, column 74 - line 732, column 45: "+[o.constructor.name])}return r.Nothing.value}if(e instanceof d.TPIntro){var i=a.uncons(e.value0.path);if(i instanceof r.Just){var u=i.value0.head===n;if(u)return new r.Just(new d.TPIntro(function(){var n={};for(var t in e.value0)e.value0.hasOwnProperty(t)&&(n[t]=e.value0[t]);return n.path=i.value0.tail,n}()));if(!u)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 734, column 82 - line 737, column 53: "+[u.constructor.name])}return r.Nothing.value}if(e instanceof d.TPTransOp){var c=V(n,e.value1);if(c instanceof r.Nothing)return r.Nothing.value;if(c instanceof r.Just)return new r.Just(new d.TPTransOp(e.value0,c.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 738, column 44 - line 741, column 1: "+[c.constructor.name])}if(e instanceof d.TPLift){var l=a.uncons(e.value1.path);return l instanceof r.Just?new r.Just(new d.TPLift(e.value0,function(){var n={};for(var t in e.value1)e.value1.hasOwnProperty(t)&&(n[t]=e.value1[t]);return n.path=l.value0.tail,n}())):r.Nothing.value}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 728, column 1 - line 733, column 1: "+[n.constructor.name,e.constructor.name])}},V=function(n,e){if(e instanceof d.TPAim){var t=a.uncons(e.value0);if(t instanceof r.Just){var o=t.value0.head===n;if(o)return new r.Just(new d.TPAim(t.value0.tail));if(!o)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 729, column 74 - line 732, column 45: "+[o.constructor.name])}return r.Nothing.value}if(e instanceof d.TPIntro){var i=a.uncons(e.value0.path);if(i instanceof r.Just){var u=i.value0.head===n;if(u)return new r.Just(new d.TPIntro(function(){var n={};for(var t in e.value0)e.value0.hasOwnProperty(t)&&(n[t]=e.value0[t]);return n.path=i.value0.tail,n}()));if(!u)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 734, column 82 - line 737, column 53: "+[u.constructor.name])}return r.Nothing.value}if(e instanceof d.TPTransOp){var c=V(n,e.value1);if(c instanceof r.Nothing)return r.Nothing.value;if(c instanceof r.Just)return new r.Just(new d.TPTransOp(e.value0,c.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 738, column 44 - line 741, column 1: "+[c.constructor.name])}if(e instanceof d.TPLift){var l=a.uncons(e.value1.path);return l instanceof r.Just?new r.Just(new d.TPLift(e.value0,function(){var n={};for(var t in e.value1)e.value1.hasOwnProperty(t)&&(n[t]=e.value1[t]);return n.path=l.value0.tail,n}())):r.Nothing.value}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 728, column 1 - line 733, column 1: "+[n.constructor.name,e.constructor.name])},Z=function(n,e){return{progress:e.progress,transforms:t.mapMaybe(q(n))(e.transforms)}},X=function(n){return{progress:n,transforms:[]}},K=function(n,t,o){var i={l:a.uncons(t),r:a.uncons(o)};return i.l instanceof r.Just&&i.r instanceof r.Just&&e["=="](n)(i.l.value0.head)(i.r.value0.head)?a[":"](i.l.value0.head)(K(n,i.l.value0.tail,i.r.value0.tail)):a.Nil.value},Y=function(n,t){var o=e["=="](a.eqList(e.eqInt))(n)(t);if(o)return r.Nothing.value;if(!o){var i=K(e.eqInt,n,t);return r.Just.create(a.take(u.min$_$_$(e.ordInt,a.length(t),a.length(i)+2|0))(n));
}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 281, column 5 - line 287, column 1: "+[o.constructor.name])},Q=function(n,t){var r=f.selNumLevel(n),o=l.max$_$_$(1,i.toNumber(r)/(2*t.prefs.desiredZoomHint)),a=u.min$_$_$(e.ordNumber,o,t.controlState.currentMaxZoom);return{x:t.controlState.zoom,y:a}},nn=function(n,t,o){if(o instanceof s.AnimMoveLeft){var i=f.selGetPosition(t.selectionModel),u=i-o.value0,v=f.selNumLevel(t.selectionModel),h=function(){if(0>u)return v+u|0;if(u>v-1)return u-v;if(e.otherwise)return u;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 89, column 5 - line 96, column 1: "+[])}();return e["return"](m.applicativeEff)({condNewSelection:f.selSetSel$_$_$(t.selectionModel,h),newAnim:new d.AniMoveLeft(100,o.value0)})}if(o instanceof s.AnimMoveRight){var i=f.selGetPosition(t.selectionModel),u=i+o.value0|0,v=f.selNumLevel(t.selectionModel),h=function(){if(0>u)return v+u|0;if(u>v-1)return u-v;if(e.otherwise)return u;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 97, column 5 - line 104, column 1: "+[])}();return e["return"](m.applicativeEff)({condNewSelection:f.selSetSel$_$_$(t.selectionModel,h),newAnim:new d.AniMoveRight(100,o.value0)})}if(o instanceof s.AnimTurnToFirst){var C=f.selGetPosition(t.selectionModel),S=0===C;if(S)return $(n);if(!S){var v=f.selNumLevel(t.selectionModel),P=(v/2|0)>=C;if(P)return e["return"](m.applicativeEff)({condNewSelection:f.selSetSel$_$_$(t.selectionModel,0),newAnim:new d.AniMoveLeft(100,C)});if(!P)return e["return"](m.applicativeEff)({condNewSelection:f.selSetSel$_$_$(t.selectionModel,0),newAnim:new d.AniMoveRight(100,v-C)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 109, column 21 - line 112, column 1: "+[P.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 106, column 8 - line 112, column 1: "+[S.constructor.name])}if(o instanceof s.AnimMoveUp){var y=f.selUp(t.selectionModel);if(y instanceof r.Just){var b=Q(y.value0,t);return e["return"](m.applicativeEff)({condNewSelection:new r.Just(y.value0),newAnim:new d.AniMoveUp(100,b.x,b.y)})}if(y instanceof r.Nothing)return $(n);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 113, column 5 - line 119, column 1: "+[y.constructor.name])}if(o instanceof s.AnimMoveDown)return function(){var e=f.selDown$_$_$(n,t.selectionModel)();if(e instanceof r.Just){var o=Q(e.value0,t);return{condNewSelection:new r.Just(e.value0),newAnim:new d.AniMoveDown(100,o.x,o.y)}}if(e instanceof r.Nothing)return $(n)();throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 121, column 5 - line 128, column 1: "+[e.constructor.name])};if(o instanceof s.AnimClockwork){var T=f.selGetPos$_$_$(n,t.selectionModel),E=f.coneGetPath(T);return function(){var e=f.coneSetPath$_$_$(n,T,o.value0)();if(e instanceof r.Nothing)return $(n)();if(e instanceof r.Just){var a=f.selFromPos(e.value0),i=Q(a,t),u=Y(E,o.value0);if(u instanceof r.Nothing)return $(n)();if(u instanceof r.Just)return{condNewSelection:new r.Just(t.selectionModel),newAnim:new d.AniClockwork(100,E,o.value0,u.value0,i.x,i.y)};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 139, column 45 - line 143, column 1: "+[u.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 132, column 5 - line 143, column 1: "+[e.constructor.name])}}if(o instanceof s.AnimTransformLeft&&o.value0 instanceof r.Nothing){var F=A(n,t.selectionModel);if(F instanceof r.Nothing)return $(n);if(F instanceof r.Just)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,F.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 144, column 5 - line 147, column 1: "+[F.constructor.name])}if(o instanceof s.AnimTransformLeft&&o.value0 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return $(n);if(t.selectionModel instanceof s.OSCurrent)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,x(n,t.selectionModel.value0,o.value0.value0))});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 148, column 5 - line 152, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimTransformRight&&o.value0 instanceof r.Nothing){var M=D(n,t.selectionModel);if(M instanceof r.Nothing)return $(n);if(M instanceof r.Just)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,M.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 153, column 5 - line 156, column 1: "+[M.constructor.name])}if(o instanceof s.AnimTransformRight&&o.value0 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return $(n);if(t.selectionModel instanceof s.OSCurrent)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,N(n,t.selectionModel.value0,o.value0.value0))});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 157, column 5 - line 162, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimTransformIntro&&o.value2 instanceof r.Nothing){var L=f.zipGetNode(o.value1),O=function(){if(o.value0)return U(n,t.selectionModel,L);if(!o.value0)return R(n,t.selectionModel,L);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 164, column 21 - line 167, column 5: "+[o.value0.constructor.name])}();if(O instanceof r.Nothing)return $(n);if(O instanceof r.Just)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,O.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 167, column 8 - line 170, column 1: "+[O.constructor.name])}if(o instanceof s.AnimTransformIntro&&o.value2 instanceof r.Just){var L=f.zipGetNode(o.value1),G=function(){if(o.value0)return k(n,t.selectionModel,L,o.value2.value0);if(!o.value0)return I(n,t.selectionModel,L,o.value2.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 172, column 17 - line 175, column 5: "+[o.value0.constructor.name])}();return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,G)})}if(o instanceof s.AnimTransformExtro&&o.value1 instanceof r.Nothing){var O=function(){if(o.value0)return H(n,t.selectionModel);if(!o.value0)return j(n,t.selectionModel);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 178, column 21 - line 181, column 5: "+[o.value0.constructor.name])}();if(O instanceof r.Nothing)return $(n);if(O instanceof r.Just)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,O.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 181, column 8 - line 184, column 1: "+[O.constructor.name])}if(o instanceof s.AnimTransformExtro&&o.value1 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return $(n);if(t.selectionModel instanceof s.OSCurrent){var G=function(){if(o.value0)return z(n,t.selectionModel.value0,o.value1.value0);if(!o.value0)return W(n,t.selectionModel.value0,o.value1.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 187, column 37 - line 190, column 25: "+[o.value0.constructor.name])}();return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,G)})}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 185, column 5 - line 192, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimGlobalView)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniGlobalView(100,o.value0)});if(o instanceof s.AnimZoom&&o.value0 instanceof r.Just){var B=Q(t.selectionModel,t),J=l.abs(B.x-o.value0.value0)>.01;if(J)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniZoom(100,B.x,o.value0.value0)});if(!J)return $(n);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 196, column 13 - line 199, column 1: "+[J.constructor.name])}if(o instanceof s.AnimZoom&&o.value0 instanceof r.Nothing){var q=Q(t.selectionModel,t),V=l.abs(q.x-q.y)>.01;if(V)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniZoom(100,q.x,q.y)});if(!V)return $(n);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 202, column 13 - line 205, column 1: "+[V.constructor.name])}if(o instanceof s.AnimPause)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniPause(o.value0)});if(o instanceof s.AnimNull)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:d.AniNull.value});if(o instanceof s.AnimCut){if(t.selectionModel instanceof s.OSCurrent){var Z=f.coneIsRoot(t.selectionModel.value0);if(Z)return $(n);if(!Z)return function(){var o=(e["<$>"](m.functorEff)(a.length)(s.nodeGetChildren$_$_$(n,f.zipGetNode(t.selectionModel.value0)))(),H(n,t.selectionModel));if(o instanceof r.Just)return{condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,o.value0)};if(o instanceof r.Nothing)return $(n)();throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 219, column 34 - line 222, column 29: "+[o.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 210, column 13 - line 223, column 9: "+[Z.constructor.name])}return $(n)}if(o instanceof s.AnimCopy)return $(n);if(o instanceof s.AnimPaste){if(t.copySelection instanceof d.NoSelection)return $(n);if(t.copySelection instanceof d.SingleSelection){var L=f.zipGetNode(f.selGetPos$_$_$(n,t.copySelection.value0)),X=U(n,t.selectionModel,L);if(X instanceof r.Just)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,X.value0)});if(X instanceof r.Nothing)return $(n);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 230, column 16 - line 234, column 1: "+[X.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 226, column 5 - line 234, column 1: "+[t.copySelection.constructor.name])}if(o instanceof s.AnimTransformUp&&o.value0 instanceof r.Nothing)return function(){var e=g(n,t.selectionModel)();if(e instanceof r.Nothing)return c.trace("toAnimate AnimTransformUp: transformUp returns Nothing")(function(e){return $(n)})();if(e instanceof r.Just)return{condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,e.value0)};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 236, column 5 - line 239, column 1: "+[e.constructor.name])};if(o instanceof s.AnimTransformUp&&o.value0 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return c.trace("toAnimate AnimTransformUp: parentSelection")(function(e){return $(n)});if(t.selectionModel instanceof s.OSCurrent){var K=p(n,t.selectionModel.value0,o.value0.value0);if(K instanceof r.Nothing)return c.trace("toAnimate AnimTransformUp: transformUp' returns Nothing")(function(e){return $(n)});if(K instanceof r.Just)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,K.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 243, column 13 - line 246, column 1: "+[K.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 240, column 5 - line 246, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimTransformDown&&o.value0 instanceof r.Nothing)return function(){var e=_(n,t.selectionModel)();if(e instanceof r.Nothing)return $(n)();if(e instanceof r.Just)return{condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,e.value0)};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 248, column 5 - line 251, column 1: "+[e.constructor.name])};if(o instanceof s.AnimTransformDown&&o.value0 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return $(n);if(t.selectionModel instanceof s.OSCurrent){var nn=w(n,t.selectionModel.value0,o.value0.value0);if(nn instanceof r.Nothing)return $(n);if(nn instanceof r.Just)return e["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,nn.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 255, column 13 - line 259, column 1: "+[nn.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 252, column 5 - line 259, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimTransformReplace)return e["return"](m.applicativeEff)({condNewSelection:new r.Just(new s.OSCurrent(o.value0)),newAnim:d.AniNull.value});if(o instanceof s.AnimTransformShiftToZero&&o.value0 instanceof r.Nothing)return e["return"](m.applicativeEff)({condNewSelection:new r.Just(f.selShiftToZero(t.selectionModel)),newAnim:d.AniNull.value});if(o instanceof s.AnimTransformShiftToZero&&o.value0 instanceof r.Just)return e["return"](m.applicativeEff)({condNewSelection:new r.Just(new s.OSCurrent(o.value0.value0)),newAnim:d.AniNull.value});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 88, column 1 - line 96, column 1: "+[t.constructor.name,o.constructor.name])},en=function(n,e){return{progress:n,transforms:e}};n.commonPrefix$_$_$=K,n.getLiftBase=T,n.getLift=E,n.getIntroBase=M,n.getIntro=L,n.isHeadAim=S,n.isIndexAim$_$_$=C,n.getSizeChange=y,n["getFade'"]=G,n.getFade=B,n.getTurn=P,n.filterTransform$_$_$=Z,n.buildTransform$_$_$=en,n.emptyTransform=X,n.turnMany$_$_$=h,n.transformUp$_$_$=g,n.transformDown$_$_$=_,n.transformExtroR$_$_$=j,n.transformIntroL$_$_$=R,n.transformExtroL$_$_$=H,n.transformIntroR$_$_$=U,n.transformRight$_$_$=D,n.transformLeft$_$_$=A,n.toAnimate$_$_$=nn}(PS["ConeCanvas.ConeTransforms"]=PS["ConeCanvas.ConeTransforms"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Control.Monad.ST"],r=PS["Control.Monad.Eff.Exception"],o=PS["Control.Monad.Eff.Random"],a=PS["Data.Date"],i=(PS["Data.Time"],PS["Data.Maybe"]),u=PS["Data.Array"],c=PS["Data.Array.Unsafe"],l=PS.Math,l=PS.Math,s=PS["Control.Apply"],f=PS["Data.Int"],d=PS["Data.List"],v=PS["Debug.Trace"],m=PS["ConeCanvas.ConeModel"],h=PS["ConeCanvas.ConeZipper"],p=PS["ConeCanvas.ConeTransforms"],g=PS["ConeCanvas.ConeControlTypes"],w=(PS["ConeCanvas.Preferences"],PS["ConeCanvas.GeometryTypes"],PS.Extensions),_=PS["Control.Monad.Eff"],$=PS["Data.Foldable"],C=function(n,e){var t=function(n){return l.min$_$_$(l.max$_$_$(n,-.5),.5)},r=n.rightBottomRear.y-n.leftTopFront.y,o=(e-n.leftTopFront.y)/r,a=o-.5;return 2*-t(a)},S=40,P=function(n){var e=n/100,t=e*e*e*(10+e*(6*e-15));return 100*t},y=function(n,t,r,o){return function(){var a=g.readPaintRef$_$_$(n,t)(),u=e["/="](d.eqList(e.eqInt))(h.selGetPath(o))(h.selGetPath(r));if(u){if(a.selectedChangedCallback instanceof i.Nothing)return e.unit;if(a.selectedChangedCallback instanceof i.Just)return a.selectedChangedCallback.value0(r)();throw new Error("Failed pattern match at ConeCanvas.ConeControl line 168, column 14 - line 171, column 9: "+[a.selectedChangedCallback.constructor.name])}if(!u)return e.unit;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 167, column 5 - line 175, column 1: "+[u.constructor.name])}},b=function(n,t,r){return function(){var o=g.readPaintRef$_$_$(n,t)();if(o.isPainting)return e.unit;if(!o.isPainting)return g.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.isPainting=!0,e})(),g.getConeFront(o.frontend).paintIt(t)(r)(),g.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.isPainting=!1,e})(),e.unit;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 536, column 5 - line 544, column 1: "+[o.isPainting.constructor.name])}},T=function(n,e,t){return function(){var r=g.readPaintRef$_$_$(n,e)();if(t){var o=r.controlState.zoomControl>=1;if(o)return!1;if(!o){var a=l.min$_$_$(r.controlState.zoomControl+.02,1);return g.modifyPaintRef$_$_$(n,e,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoomControl=a,e.zoom=g.realZoom$_$_$(a,n.controlState.currentMaxZoom),e}(),e})(),b(n,e,g.CommandingNothing.value)(),!0}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 737, column 13 - line 748, column 9: "+[o.constructor.name])}if(!t){var i=r.controlState.zoomControl<=-1;if(i)return!1;if(!i){var a=l.max$_$_$(r.controlState.zoomControl-.02,-1);return g.modifyPaintRef$_$_$(n,e,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoomControl=a,e.zoom=g.realZoom$_$_$(a,n.controlState.currentMaxZoom),e}(),e})(),b(n,e,g.CommandingNothing.value)(),!0}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 749, column 13 - line 761, column 1: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 735, column 5 - line 761, column 1: "+[t.constructor.name])}},E=function(n,t,r){return function(){var o=g.readPaintRef$_$_$(n,t)();return function(){return o.state instanceof g.OSTurnMouse?g.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSTurnMouse(r,o.state.value1,o.state.value2),e}):o.state instanceof g.OSAngle?g.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAngle(o.state.value0,r),e}):o.state instanceof g.OSZoom?g.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSZoom(o.state.value0,r.y),e}):e["return"](_.applicativeEff)(o)}()(),!0}},F=function(n,r,a,c){var l=e["return"](_.applicativeEff)({ani:[],isHandled:!1}),s=e["return"](_.applicativeEff)({ani:[],isHandled:!0}),f=d.toList($.foldableArray)([2,1,4,0]),p=d.toList($.foldableArray)([0]),w=[m.AnimMoveDown.value,m.AnimMoveDown.value,new m.AnimMoveLeft(3),new m.AnimMoveRight(3),m.AnimMoveUp.value,m.AnimMoveUp.value,new m.AnimMoveLeft(1),new m.AnimMoveLeft(1),new m.AnimMoveRight(2),new m.AnimClockwork(f),new m.AnimClockwork(p),new m.AnimClockwork(f),new m.AnimClockwork(p),m.AnimMoveDown.value,m.AnimMoveDown.value,new m.AnimMoveLeft(3),new m.AnimMoveRight(3),m.AnimMoveUp.value,m.AnimMoveUp.value,new m.AnimMoveLeft(1),new m.AnimMoveLeft(1),new m.AnimMoveRight(2)];return function(){var f=g.readPaintRef$_$_$(n,a)(),d=function(){if(r instanceof g.KLeft){if(!f.prefs.cursorKeys)return e["return"](_.applicativeEff)({ani:[new m.AnimMoveLeft(1)],isHandled:!0});if(e.otherwise)return e["return"](_.applicativeEff)({ani:[new m.AnimMoveRight(1)],isHandled:!0})}if(r instanceof g.KRight){if(!f.prefs.cursorKeys)return e["return"](_.applicativeEff)({ani:[new m.AnimMoveRight(1)],isHandled:!0});if(e.otherwise)return e["return"](_.applicativeEff)({ani:[new m.AnimMoveLeft(1)],isHandled:!0})}if(r instanceof g.KMoveLeft){if(f.prefs.cursorKeys)return e["return"](_.applicativeEff)({ani:[new m.AnimTransformLeft(i.Nothing.value)],isHandled:!0});if(e.otherwise)return e["return"](_.applicativeEff)({ani:[new m.AnimTransformRight(i.Nothing.value)],isHandled:!0})}if(r instanceof g.KMoveRight){if(!f.prefs.cursorKeys)return e["return"](_.applicativeEff)({ani:[new m.AnimTransformLeft(i.Nothing.value)],isHandled:!0});if(e.otherwise)return e["return"](_.applicativeEff)({ani:[new m.AnimTransformRight(i.Nothing.value)],isHandled:!0})}if(r instanceof g.KUp){if(!f.prefs.cursorKeys)return e["return"](_.applicativeEff)({ani:[m.AnimMoveUp.value],isHandled:!0});if(e.otherwise)return e["return"](_.applicativeEff)({ani:[m.AnimMoveDown.value],isHandled:!0})}if(r instanceof g.KDown){if(f.prefs.cursorKeys)return e["return"](_.applicativeEff)({ani:[m.AnimMoveUp.value],isHandled:!0});if(e.otherwise)return e["return"](_.applicativeEff)({ani:[m.AnimMoveDown.value],isHandled:!0})}if(r instanceof g.KMoveUp)return e["return"](_.applicativeEff)({ani:[m.AnimMoveUp.value,new m.AnimTransformUp(i.Nothing.value)],isHandled:!0});if(r instanceof g.KMoveDown)return e["return"](_.applicativeEff)({ani:[new m.AnimTransformDown(i.Nothing.value),m.AnimMoveDown.value],isHandled:!0});if(r instanceof g.KFirst)return e["return"](_.applicativeEff)({ani:[m.AnimTurnToFirst.value],isHandled:!0});if(r instanceof g.KSetFirst)return e["return"](_.applicativeEff)({ani:[new m.AnimTransformShiftToZero(i.Nothing.value)],isHandled:!0});if(r instanceof g.KCut)return e["return"](_.applicativeEff)({ani:[m.AnimCut.value],isHandled:!0});if(r instanceof g.KCopy)return e["return"](_.applicativeEff)({ani:[m.AnimCopy.value],isHandled:!0});if(r instanceof g.KPaste)return e["return"](_.applicativeEff)({ani:[m.AnimPaste.value],isHandled:!0});if(r instanceof g.KLink){if(f.selectionModel instanceof m.OSParent)return s;if(f.selectionModel instanceof m.OSCurrent){var d=u.uncons(u.filter$_$_$(function(n){return n.actionType instanceof m.PrimaryLinkAction?!0:!1},m.actions(n)(h.zipGetEntry(f.selectionModel.value0))));if(d instanceof i.Nothing)return l;if(d instanceof i.Just)return function(){return d.value0.head.action(c)(),l()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 788, column 59 - line 797, column 15: "+[d.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 785, column 52 - line 797, column 15: "+[f.selectionModel.constructor.name])}if(r instanceof g.KClockwork){if(f.selectionModel instanceof m.OSParent)return s;if(f.selectionModel instanceof m.OSCurrent){var p=h.countLoadedNodes$_$_$(n,h.selGetPos$_$_$(n,f.selectionModel));return function(){var e=o.randomInt$_$_$(0,p-1)(),t=h.getZipFromIndex$_$_$(n,h.selGetPos$_$_$(n,f.selectionModel),e)();if(t instanceof i.Nothing)return v.traceA(_.applicativeEff)("ConeControl>>keyAction: KClockwork random index not found!")(),l();if(t instanceof i.Just){var r=h.coneGetPath(t.value0);return{ani:[new m.AnimClockwork(r)],isHandled:!0}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 803, column 59 - line 810, column 15: "+[t.constructor.name])}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 797, column 53 - line 810, column 15: "+[f.selectionModel.constructor.name])}if(r instanceof g.KGlobal)return e["return"](_.applicativeEff)({ani:[new m.AnimGlobalView(!1)],isHandled:!0});if(r instanceof g.KUnglobal)return e["return"](_.applicativeEff)({ani:[new m.AnimGlobalView(!0)],isHandled:!0});if(r instanceof g.KZoomNormal)return e["return"](_.applicativeEff)({ani:[new m.AnimZoom(i.Nothing.value)],isHandled:!0});if(r instanceof g.KZoomOut)return e["return"](_.applicativeEff)({ani:[new m.AnimZoom(new i.Just(1))],isHandled:!0});if(r instanceof g.KBench)return function(){return g.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.benchmark=new i.Just({runtime:0,cycles:0}),e})(),{ani:w,isHandled:!0}};if(r instanceof g.KToggleDemo)return function(){return g.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.demoMode=!n.demoMode,e})(),{ani:[],isHandled:!0}};if(r instanceof g.KToggleControl)return function(){return g.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.showControl=!n.controlState.showControl,e}(),e})(),t.writeSTRef$_$_$(f.controlState.needRepaint,!0)(),{ani:[],isHandled:!0}};if(r instanceof g.KToggleIndex)return function(){return g.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.showIndex=!n.controlState.showIndex,e}(),e})(),t.writeSTRef$_$_$(f.controlState.needRepaint,!0)(),{ani:[],isHandled:!0}};if(r instanceof g.KEditModeOn)return function(){return g.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.editMode=!0,e}(),e})(),t.writeSTRef$_$_$(f.controlState.needRepaint,!0)(),s()};if(r instanceof g.KEditModeOff)return function(){return g.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.editMode=!1,e}(),e})(),t.writeSTRef$_$_$(f.controlState.needRepaint,!0)(),s()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 765, column 12 - line 848, column 5: "+[r.constructor.name])}()();return function(){var t=u.uncons(d.ani);if(t instanceof i.Just)return function(){return g.modifyPaintRef$_$_$(n,a,function(n){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.commandQueue=e["++"](e.semigroupArray)(n.commandQueue)(d.ani),t})(),e.unit};if(t instanceof i.Nothing)return e["return"](_.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 848, column 5 - line 855, column 5: "+[t.constructor.name])}()(),d.isHandled}},x=function(n,t,r){if(n===t)return i.Nothing.value;if(e.otherwise){var o=n-t,a=function(){var n=l.abs(f.toNumber(o))>f.toNumber(r)/2;if(n){var e=o>0;if(e)return-(r-o);if(!e)return r+o|0;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 669, column 25 - line 672, column 21: "+[e.constructor.name])}if(!n)return o;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 667, column 20 - line 673, column 9: "+[n.constructor.name])}();return new i.Just(function(){var n=0>a;if(n)return new m.AnimMoveRight(-a);if(!n)return new m.AnimMoveLeft(a);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 673, column 18 - line 675, column 48: "+[n.constructor.name])}())}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 663, column 1 - line 678, column 1: "+[n.constructor.name,t.constructor.name,r.constructor.name])},A=function(){var n=a.now(),e=a.toEpochMilliseconds(n);return e},N=function(n,t,o){var a=function(t){return function(r){var o=d.uncons(r);if(o instanceof i.Nothing)return e["return"](_.applicativeEff)([]);if(o instanceof i.Just)return function(){var e=h.coneDown$_$_$(n,t)();if(e instanceof i.Nothing)return[];if(e instanceof i.Just){var r=h.coneSetPos$_$_$(e.value0,o.value0.head);if(r instanceof i.Nothing)return[];if(r instanceof i.Just){var c=h.coneGetFirstBelow(t),l=h.coneNumLevel(r.value0),s=x(c,o.value0.head,l),f=a(r.value0)(o.value0.tail)();if(s instanceof i.Just){var v=d["null"](o.value0.tail);if(v)return[s.value0];if(!v)return u[":"](s.value0)(u[":"](m.AnimMoveDown.value)(f));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 654, column 47 - line 656, column 85: "+[v.constructor.name])}if(s instanceof i.Nothing){var p=d["null"](o.value0.tail);if(p)return[];if(!p)return u[":"](m.AnimMoveDown.value)(f);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 658, column 48 - line 660, column 81: "+[p.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 652, column 29 - line 662, column 1: "+[s.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 645, column 21 - line 662, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 642, column 13 - line 662, column 1: "+[e.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 638, column 32 - line 662, column 1: "+[o.constructor.name])}},c=h.coneGetPath(t),l=d.drop$_$_$(d.length(c),o),s=d.take(d.length(c))(o),f=e["/="](d.eqList(e.eqInt))(s)(c);if(f)return r.throwException(r.error("ConeControl*>getAnimationTo_ pathes don't match! superPath: "+(e.show(d.showList(e.showInt))(c)+(" initialPath: "+e.show(d.showList(e.showInt))(s)))));if(!f)return a(t)(l);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 633, column 8 - line 637, column 3: "+[f.constructor.name])},D=function(n,t,o,a,c){return function(){var o=g.readPaintRef$_$_$(n,t)();if(o.state instanceof g.OSAnimate)return!0;if(a instanceof i.Just&&a.value0 instanceof g.CILabel){var l=h.selNumLevel(o.selectionModel),s=h.selGetPosition(o.selectionModel),f=x(s,a.value0.value0,l);return f instanceof i.Just?(g.modifyPaintRef$_$_$(n,t,function(n){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.commandQueue=e["++"](e.semigroupArray)(n.commandQueue)([f.value0]),t})(),!0):!0}if(a instanceof i.Just&&a.value0 instanceof g.CISuperLabel)return g.modifyPaintRef$_$_$(n,t,function(n){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.commandQueue=e["++"](e.semigroupArray)(n.commandQueue)(u.replicate$_$_$(a.value0.value0,m.AnimMoveUp.value)),t})(),!0;if(a instanceof i.Just&&a.value0 instanceof g.CIMainLabel){var d=h.selDown$_$_$(n,o.selectionModel)();return function(){if(d instanceof i.Just)return function(){return g.modifyPaintRef$_$_$(n,t,function(n){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.commandQueue=e["++"](e.semigroupArray)(n.commandQueue)([m.AnimMoveDown.value]),t})(),e.unit};if(d instanceof i.Nothing)return e["return"](_.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 580, column 21 - line 585, column 21: "+[d.constructor.name])}()(),!0}if(a instanceof i.Just&&a.value0 instanceof g.CICard){var v=h.selUp(o.selectionModel),d=function(){if(v instanceof i.Just&&v.value0 instanceof m.OSCurrent)return N(n,v.value0.value0,a.value0.value0);if(v instanceof i.Just&&v.value0 instanceof m.OSParent)return r.throwException(r.error("ConeControl*>pressedButton: impossible"));if(v instanceof i.Nothing)return function(){var e=N(n,h.selGetPos$_$_$(n,o.selectionModel),a.value0.value0)();return u[":"](m.AnimMoveDown.value)(e)};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 591, column 37 - line 599, column 29: "+[v.constructor.name])}()();return g.modifyPaintRef$_$_$(n,t,function(n){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.commandQueue=e["++"](e.semigroupArray)(n.commandQueue)(d),t})(),!0}if(a instanceof i.Just&&a.value0 instanceof g.CIZoom)return g.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSZoom(a.value0.value0,c.y),e})(),!0;if(a instanceof i.Just&&a.value0 instanceof g.CIAngel)return g.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAngle(a.value0.value0,{x:c.x,y:c.y}),e})(),!0;if(a instanceof i.Just&&a.value0 instanceof g.CITurn){var p={x:a.value0.value0.leftTopFront.x+(a.value0.value0.rightBottomRear.x-a.value0.value0.leftTopFront.x)/2,y:a.value0.value0.rightBottomRear.y+(a.value0.value0.leftTopFront.y-a.value0.value0.rightBottomRear.y)/2};return g.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSTurnMouse({x:c.x,y:c.y},{x:c.x,y:c.y},p),e})(),!0}return!0}},M=function(n,t,r){if(t&&r)return{p1:function(){var e=60>n;if(e)return 100;if(!e)return 2.5*(40-(n-60));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 463, column 13 - line 463, column 66: "+[e.constructor.name])}(),p2:function(){var e=n>70;if(e)return 0;if(!e){var t=30>n;if(t)return 100;if(!t)return 2.5*(40-(n-30));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 465, column 9 - line 465, column 62: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 464, column 13 - line 465, column 62: "+[e.constructor.name]);
}(),p3:function(){var e=n>40;if(e)return 0;if(!e)return 2.5*(40-n);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 466, column 14 - line 466, column 56: "+[e.constructor.name])}()};if(t&&!r)return{p1:function(){var e=40>n;if(e)return 100;if(!e)return 1.6*(60-(n-40));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 468, column 13 - line 468, column 66: "+[e.constructor.name])}(),p2:function(){var e=n>60;if(e)return 0;if(!e)return 1.6*(60-n);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 469, column 13 - line 469, column 55: "+[e.constructor.name])}(),p3:0};if(!t&&r)return{p1:100,p2:function(){var e=40>n;if(e)return 100;if(!e)return 1.6*(60-(n-40));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 473, column 13 - line 473, column 66: "+[e.constructor.name])}(),p3:function(){var e=n>60;if(e)return 0;if(!e)return 1.6*(60-n);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 474, column 13 - line 474, column 55: "+[e.constructor.name])}()};if(e.otherwise)return{p1:100,p2:100-n,p3:0};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 461, column 1 - line 477, column 1: "+[n.constructor.name,t.constructor.name,r.constructor.name])},L=function(n,e,t){var r=l.atan2$_$_$(e.x,e.y),o=l.atan2$_$_$(n.x,n.y),a=r-o,i=-(100*a*f.toNumber(t))/(2*l.pi);return i},O=function(n){return function(e){return function(t){var r=100-100*(e-t)/n;return r}}},I=function(n){return O(n.aniTimeT)},R=function(n){return O(n.aniTimeUD)},k=function(n,e){return O(n.aniTimeLR*f.toNumber(e))},U=function(n,e){return O(n.aniTimeLR*(e/100))},G=function(n){return O(n.aniTimeF)},B=function(n,e){var t=function(n){return l.min$_$_$(l.max$_$_$(n,-.5),.5)},r=n.rightBottomRear.y-n.leftTopFront.y,o=(e.y-n.leftTopFront.y)/r,a=o-.5,i=n.rightBottomRear.x-n.leftTopFront.x,u=(e.x-n.leftTopFront.x)/i,c=u-.5;return{x:2*t(c),y:2*-t(a)}},J=function(n,e){var t=l.atan2$_$_$(e.x,e.y),r=l.atan2$_$_$(n.x,n.y);return t-r},z=function(n,e,t){var r=h.selGetPosition(t),o=h.selNumLevel(t),a=J(n,e),i=a/(2*l.pi)*f.toNumber(o),u=i-l.round(i),c=function(){var n=u>0;if(n)return 1;if(!n)return-1;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 498, column 22 - line 499, column 5: "+[n.constructor.name])}(),s=100*l.abs(u),d=r+f.round(i)|0,v=w.modInt$_$_$(d,o);return{selectedIndex:v,percentage:s,direction:c}},H=function(n,r,o,a){return function(){var o=g.readPaintRef$_$_$(n,r)();return function(){if(o.state instanceof g.OSTurnMouse){var u=z({x:a.x-o.state.value2.x,y:-(a.y-o.state.value2.y)},{x:o.state.value1.x-o.state.value2.x,y:-(o.state.value1.y-o.state.value2.y)},o.selectionModel),c=h.selSetSel$_$_$(o.selectionModel,u.selectedIndex);if(c instanceof i.Just)return function(){var e=A();return g.modifyPaintRef$_$_$(n,r,function(n){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.selectionModel=c.value0,t.state=function(){var n=u.direction>0;if(n)return new g.OSAnimate(new g.AniMoveLeft(u.percentage,1));if(!n)return new g.OSAnimate(new g.AniMoveRight(u.percentage,1));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 691, column 56 - line 693, column 88: "+[n.constructor.name])}(),t.animateStartTime=e,t})(),y(n,r,c.value0,o.selectionModel)()};if(c instanceof i.Nothing)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e})(),e.unit};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 685, column 17 - line 699, column 7: "+[c.constructor.name])}if(o.state instanceof g.OSAngle)return s["*>"](_.applyEff)(g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e}))(e["return"](_.applicativeEff)(e.unit));if(o.state instanceof g.OSZoom)return s["*>"](_.applyEff)(g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e}))(e["return"](_.applicativeEff)(e.unit));var l=""!==o.controlState.pressed;if(l)return function(){return t.writeSTRef$_$_$(o.controlState.needRepaint,!0)(),g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.pressed="",e}(),e})(),e.unit};if(!l)return e["return"](_.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 703, column 12 - line 709, column 3: "+[l.constructor.name])}()(),!0}},W=function(n,r,o,a){var s=function(e){return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e})(),t.writeSTRef$_$_$(e.animatePaintRef,i.Nothing.value)(),b(n,r,g.CommandingNothing.value)()}};return function(){var $=g.readPaintRef$_$_$(n,r)();return t.writeSTRef$_$_$($.animatePaintRef,new i.Just(o))(),function(){if($.state instanceof g.OSTurnMouse){var S=L({x:$.state.value0.x-$.state.value2.x,y:-($.state.value0.y-$.state.value2.y)},{x:$.state.value1.x-$.state.value2.x,y:-($.state.value1.y-$.state.value2.y)},h.selNumLevel($.selectionModel));return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSTurnMouse({x:$.state.value0.x,y:$.state.value0.y},{x:$.state.value1.x,y:$.state.value1.y},{x:$.state.value2.x,y:$.state.value2.y}),e})(),b(n,r,new g.CommandingTurn(S,-1))()}}if($.state instanceof g.OSAngle){var T=B($.state.value0,$.state.value1),E=l.abs(T.x-$.controlState.angleSelect.x)>.01||l.abs(T.y-$.controlState.angleSelect.y)>.01;if(E)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.angleSelect=T,e}(),e})(),b(n,r,g.CommandingNothing.value)()};if(!E)return e["return"](_.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 197, column 24 - line 202, column 9: "+[E.constructor.name])}if($.state instanceof g.OSZoom){var F=C($.state.value0,$.state.value1),x=l.abs($.controlState.zoomControl-F)>.01;if(x)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=g.realZoom$_$_$(F,n.controlState.currentMaxZoom),e.zoomControl=F,e}(),e})(),b(n,r,g.CommandingNothing.value)()};if(!x)return e["return"](_.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 206, column 24 - line 213, column 9: "+[x.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniMoveLeft){var A=k($.prefs,$.state.value0.value1)(o)($.animateStartTime),N=0>=A;if(N)return s($);if(!N)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniMoveLeft(A,$.state.value0.value1)),e})(),b(n,r,new g.CommandingTurn(-P(A)*f.toNumber($.state.value0.value1),$.state.value0.value1))()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 215, column 13 - line 221, column 9: "+[N.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniMoveRight){var A=k($.prefs,$.state.value0.value1)(o)($.animateStartTime),D=0>=A;if(D)return s($);if(!D)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniMoveRight(A,$.state.value0.value1)),e})(),b(n,r,new g.CommandingTurn(P(A)*f.toNumber($.state.value0.value1),$.state.value0.value1))()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 223, column 13 - line 229, column 9: "+[D.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniMoveUp){var A=R($.prefs)(o)($.animateStartTime),O=0>=A;if(O)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=$.state.value0.value2,e.zoomControl=g.zoomControl$_$_$($.state.value0.value2,n.controlState.currentMaxZoom),e}(),e})(),t.writeSTRef$_$_$($.animatePaintRef,i.Nothing.value)(),b(n,r,g.CommandingNothing.value)()};if(!O){var J=$.state.value0.value1+($.state.value0.value1-$.state.value0.value2)*-(100-A)/100,z=P(A);return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniMoveUp(A,$.state.value0.value1,$.state.value0.value2)),e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=J,e.zoomControl=g.zoomControl$_$_$(J,n.controlState.currentMaxZoom),e}(),e})(),b(n,r,new g.CommandingUpDown(-z))()}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 231, column 13 - line 251, column 9: "+[O.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniMoveDown){var A=R($.prefs)(o)($.animateStartTime),H=0>=A;if(H)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=$.state.value0.value2,e.zoomControl=g.zoomControl$_$_$($.state.value0.value2,n.controlState.currentMaxZoom),e}(),e})(),t.writeSTRef$_$_$($.animatePaintRef,i.Nothing.value)(),b(n,r,g.CommandingNothing.value)()};if(!H){var J=$.state.value0.value1+($.state.value0.value1-$.state.value0.value2)*-(100-A)/100,z=P(A);return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniMoveDown(A,$.state.value0.value1,$.state.value0.value2)),e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=J,e.zoomControl=g.zoomControl$_$_$(J,n.controlState.currentMaxZoom),e}(),e})(),b(n,r,new g.CommandingUpDown(z))()}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 253, column 12 - line 273, column 9: "+[H.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniZoom){var A=R($.prefs)(o)($.animateStartTime),W=0>=A;if(W)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=$.state.value0.value2,e.zoomControl=g.zoomControl$_$_$($.state.value0.value2,n.controlState.currentMaxZoom),e}(),e})(),t.writeSTRef$_$_$($.animatePaintRef,i.Nothing.value)(),b(n,r,g.CommandingNothing.value)()};if(!W){var J=$.state.value0.value1+($.state.value0.value1-$.state.value0.value2)*-(100-A)/100;return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniZoom(A,$.state.value0.value1,$.state.value0.value2)),e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=J,e.zoomControl=g.zoomControl$_$_$(J,n.controlState.currentMaxZoom),e}(),e})(),b(n,r,g.CommandingNothing.value)()}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 275, column 13 - line 292, column 9: "+[W.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniTransform){var A=I($.prefs)(o)($.animateStartTime),j=0>=A;if(j)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e.selectionModel=$.state.value0.value1.transAim,e})(),t.writeSTRef$_$_$($.animatePaintRef,i.Nothing.value)(),b(n,r,g.CommandingNothing.value)(),y(n,r,$.state.value0.value1.transAim,$.selectionModel)(),$.callback()};if(!j)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniTransform(A,$.state.value0.value1)),e})(),b(n,r,new g.CommandingTrans(p.buildTransform$_$_$(P(A),$.state.value0.value1.transPrims)))()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 294, column 13 - line 310, column 9: "+[j.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniClockwork){var A=G($.prefs)(o)($.animateStartTime),q=0>=A;if(q){var V=h.selGetPos$_$_$(n,$.selectionModel);return function(){var o=h.coneSetPath$_$_$(n,V,$.state.value0.value2)();if(o instanceof i.Nothing)return v.trace("AniClockwork finished but can't set path: "+e.show(d.showList(e.showInt))($.state.value0.value2))(function(n){return s($)})();if(o instanceof i.Just){var a=h.selFromPos(o.value0);return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e.selectionModel=a,e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=$.state.value0.value5,e.zoomControl=g.zoomControl$_$_$($.state.value0.value5,n.controlState.currentMaxZoom),e}(),e})(),t.writeSTRef$_$_$($.animatePaintRef,i.Nothing.value)(),y(n,r,a,$.selectionModel)(),b(n,r,g.CommandingNothing.value)()}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 316, column 21 - line 332, column 17: "+[o.constructor.name])}}if(!q){var J=$.state.value0.value4+($.state.value0.value4-$.state.value0.value5)*-(100-A)/100,z=P(A),Z=e["/="](d.eqList(e.eqInt))($.state.value0.value2)($.state.value0.value3),X=e["/="](d.eqList(e.eqInt))($.state.value0.value1)($.state.value0.value3),K=M(A,X,Z);return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniClockwork(A,$.state.value0.value1,$.state.value0.value2,$.state.value0.value3,$.state.value0.value4,$.state.value0.value5)),e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.zoom=J,e.zoomControl=g.zoomControl$_$_$(J,n.controlState.currentMaxZoom),e}(),e})(),b(n,r,new g.CommandingClockwork({ccTotal:z,ccFirst:P(K.p1),ccSecond:P(K.p2),ccThird:P(K.p3),ccFrom:$.state.value0.value1,ccTo:$.state.value0.value2,ccUpper:$.state.value0.value3}))()}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 312, column 13 - line 351, column 9: "+[q.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniGlobalView){var A=l.max$_$_$(U($.prefs,$.state.value0.value0)(o)($.animateStartTime),0);return function(){return function(){var t=0===A;if(t){if($.state.value0.value1)return s($);if(!$.state.value0.value1){var o=0===$.state.value0.value0;if(o)return e["return"](_.applicativeEff)(e.unit);if(!o)return function(){return b(n,r,new g.CommandingGlobal(P(100-A),$.state.value0.value1))(),e.unit};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 357, column 30 - line 363, column 17: "+[o.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 355, column 22 - line 363, column 17: "+[$.state.value0.value1.constructor.name])}if(!t)return b(n,r,new g.CommandingGlobal(P(100-A),$.state.value0.value1));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 354, column 13 - line 364, column 13: "+[t.constructor.name])}()(),function(){var t=u.uncons($.commandQueue);return t instanceof i.Just&&t.value0.head instanceof m.AnimGlobalView&&t.value0.head.value0&&$.state.value0.value1===!1?function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniGlobalView(100-A,!0)),e.animateStartTime=o,e.commandQueue=c.tail($.commandQueue),e})(),e.unit}:t instanceof i.Just&&$.state.value0.value1===!1?function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(new g.AniGlobalView(100-A,!0)),e.animateStartTime=o,e})(),e.unit}:e["return"](_.applicativeEff)(e.unit)}()(),e.unit}}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniPause){var Y=$.animateStartTime+$.state.value0.value0>o;if(Y)return function(){return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=g.OSNormal.value,e})(),t.writeSTRef$_$_$($.animatePaintRef,i.Nothing.value)(),e.unit};if(!Y)return e["return"](_.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 380, column 13 - line 388, column 9: "+[Y.constructor.name])}if($.state instanceof g.OSAnimate&&$.state.value0 instanceof g.AniNull)return s($);if($.state instanceof g.OSNormal)return function(){var l=t.readSTRef($.controlState.needRepaint)();!function(){var o=a||l;if(o)return function(){return t.writeSTRef$_$_$($.animatePaintRef,i.Nothing.value)(),b(n,r,g.CommandingNothing.value)()};if(!o)return e["return"](_.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 391, column 13 - line 395, column 13: "+[o.constructor.name])}()();var s=function(){var t=u.uncons($.commandQueue);if(t instanceof i.Nothing)return e["return"](_.applicativeEff)(i.Nothing.value);if(t instanceof i.Just)return function(){!function(){return t.value0.head instanceof m.AnimCopy?w.bindConst$_$_$(_.bindEff,g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.copySelection=new g.SingleSelection($.selectionModel),e}),e["return"](_.applicativeEff)(e.unit)):t.value0.head instanceof m.AnimCut?w.bindConst$_$_$(_.bindEff,g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.copySelection=new g.SingleSelection($.selectionModel),e}),e["return"](_.applicativeEff)(e.unit)):e["return"](_.applicativeEff)(e.unit)}()();var o=p.toAnimate$_$_$(n,$,t.value0.head)();return new i.Just(o)};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 396, column 17 - line 405, column 13: "+[t.constructor.name])}()();if(s instanceof i.Just&&s.value0.condNewSelection instanceof i.Nothing&&s.value0.newAnim instanceof g.AniNull)return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.commandQueue=c.tail($.commandQueue),e})(),e.unit;if(s instanceof i.Just&&s.value0.condNewSelection instanceof i.Nothing)return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(s.value0.newAnim),e.animateStartTime=o,e.commandQueue=c.tail($.commandQueue),e})(),e.unit;if(s instanceof i.Just&&s.value0.condNewSelection instanceof i.Just)return g.modifyPaintRef$_$_$(n,r,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.state=new g.OSAnimate(s.value0.newAnim),e.animateStartTime=o,e.selectionModel=s.value0.condNewSelection.value0,e.commandQueue=c.tail($.commandQueue),e})(),y(n,r,s.value0.condNewSelection.value0,$.selectionModel)();if(s instanceof i.Nothing)return e.unit;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 405, column 13 - line 427, column 5: "+[s.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 186, column 5 - line 427, column 5: "+[$.state.constructor.name])}()(),e.unit}},j=function(n,t,r,o,a,u,c,l){return function(){var f=g.emptyPaintState$_$_$(n,t,r,"ConeCanvas",a,u,c,l)(),d=g.newPaintRef$_$_$(n,f)(),v={startup:function(n){return g.getConeFront(l).startCanvas(d)(n)},setModel:function(t){return function(){var r=(g.readPaintRef$_$_$(n,d)(),[new m.AnimZoom(i.Nothing.value)]);g.modifyPaintRef$_$_$(n,d,function(n){var o={};for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o.selectionModel=t,o.commandQueue=e["++"](e.semigroupArray)(n.commandQueue)(r),o})();var o=A();return W(n,d,o,!0)(),e.unit}},getModel:function(){var e=g.readPaintRef$_$_$(n,d)();return e.selectionModel},selectPath:function(t){return function(){var r=g.readPaintRef$_$_$(n,d)();if(r.selectionModel instanceof m.OSParent)return!1;if(r.selectionModel instanceof m.OSCurrent){var o=h.coneSetPath$_$_$(n,r.selectionModel.value0,t)();if(o instanceof i.Nothing)return!1;if(o instanceof i.Just)return g.modifyPaintRef$_$_$(n,d,function(n){var o={};for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o.commandQueue=e["++"](e.semigroupArray)(r.commandQueue)([new m.AnimClockwork(t)]),o})(),!0;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 116, column 35 - line 122, column 68: "+[o.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 112, column 27 - line 122, column 68: "+[r.selectionModel.constructor.name])}},selectedPath:function(){var e=g.readPaintRef$_$_$(n,d)();return h.coneGetPath(h.selGetPos$_$_$(n,e.selectionModel))},modelChanged:function(t){return function(){return g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.modelChangedCallback=new i.Just(t),e})(),e.unit}},selectedChanged:function(t){return function(){return g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.selectedChangedCallback=new i.Just(t),e})(),e.unit}},animate:function(t){return function(){g.modifyPaintRef$_$_$(n,d,function(n){var r={};for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);return r.commandQueue=e["++"](e.semigroupArray)(n.commandQueue)(t),r})();var r=A();return W(n,d,r,!0)(),e.unit}},animateFinishedCallback:function(t){return function(){return g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.callback=t,e})(),e.unit}},keyCallback:function(t){return function(){return g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.keyCallback=t,e})(),e.unit}},alertCallback:function(t){return function(){return g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.alertCallback=t,e})(),e.unit}},loadIconCallback:function(t){return s["*>"](_.applyEff)(g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.loadIconCallback=t,e}))(e["return"](_.applicativeEff)(e.unit))},loadSTLCallback:function(t){return s["*>"](_.applyEff)(g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.loadSTLCallback=t,e}))(e["return"](_.applicativeEff)(e.unit))},cycleCallback:function(t){return s["*>"](_.applyEff)(g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.cycleCallback=t,e}))(e["return"](_.applicativeEff)(e.unit))}};return function(){if(o instanceof i.Nothing)return e["return"](_.applicativeEff)(e.unit);if(o instanceof i.Just)return s["*>"](_.applyEff)(g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.prefs=o.value0,e}))(e["return"](_.applicativeEff)(e.unit));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 157, column 5 - line 160, column 5: "+[o.constructor.name])}()(),g.modifyPaintRef$_$_$(n,d,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.controlState=function(){var e={};for(var t in n.controlState)n.controlState.hasOwnProperty(t)&&(e[t]=n.controlState[t]);return e.showControl=n.prefs.controlAreaInitialVisible,e}(),e})(),v}};n.getMillisecondsTime=A,n.stepTime=S,n.keyAction$_$_$=F,n.scrollNotified$_$_$=T,n.motionNotified$_$_$=E,n.releasedButton$_$_$=H,n.pressedButton$_$_$=D,n.animateFunc$_$_$=W,n.initConeCanvas$_$_$=j}(PS["ConeCanvas.ConeControl"]=PS["ConeCanvas.ConeControl"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.Maybe"],PS["Data.Either"]),r=PS["Data.List"],o=PS["Data.Traversable"],a=PS["Data.String"],i=PS["ConeCanvas.ConeModel"],u=PS["Control.Monad.Eff"],c=PS["Data.Foldable"],l=function(n){return function(a){return function(s){return function(f){return function(){var d=i.nodeGetChildren$_$_$(n,f)(),v=o.sequence(r.traversableList)(u.applicativeEff)(e.map(r.functorList)(l(n)(a)(s))(d))(),m=r.concat(v),h=a(f.value0.entry)(s),p=r["null"](m);if(p)return r.toList(c.foldableArray)([new i.ConeNode({entry:f.value0.entry,nodeId:0,firstInd:0,children:new t.Right(r.Nil.value)})]);if(!p){var g=!h;if(g)return m;if(!g)return r.toList(c.foldableArray)([new i.ConeNode({entry:f.value0.entry,nodeId:0,firstInd:0,children:new t.Right(m)})]);throw new Error("Failed pattern match at ConeCanvas.ConeFilter line 32, column 13 - line 37, column 1: "+[g.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeFilter line 29, column 5 - line 37, column 1: "+[p.constructor.name])}}}}},s=function(n){return l(n)(function(e){return function(t){return a.contains$_$_$(t,i.label(n)(e))}})};n.filterContainsString=s,n.filterConeNode=l}(PS["ConeCanvas.ConeFilter"]=PS["ConeCanvas.ConeFilter"]||{}),function(n){"use strict";n.rotateSTX$_$_$=function(n,e){return function(){var t=Math.cos(n),r=Math.sin(n),o=e[4]*t+e[8]*r,a=e[5]*t+e[9]*r,i=e[6]*t+e[10]*r,u=e[7]*t+e[11]*r,c=e[4]*-r+e[8]*t,l=e[5]*-r+e[9]*t,s=e[6]*-r+e[10]*t,f=e[7]*-r+e[11]*t;e[4]=o,e[5]=a,e[6]=i,e[7]=u,e[8]=c,e[9]=l,e[10]=s,e[11]=f}},n.rotateSTY$_$_$=function(n,e){return function(){var t=Math.cos(n),r=Math.sin(n),o=e[0]*t+e[8]*-r,a=e[1]*t+e[9]*-r,i=e[2]*t+e[10]*-r,u=e[3]*t+e[11]*-r,c=e[0]*r+e[8]*t,l=e[1]*r+e[9]*t,s=e[2]*r+e[10]*t,f=e[3]*r+e[11]*t;e[0]=o,e[1]=a,e[2]=i,e[3]=u,e[8]=c,e[9]=l,e[10]=s,e[11]=f}},n.translateST$_$_$=function(n,e){return function(){for(var t=0;4>t;t++)e[t+12]+=e[t]*n[0]+e[t+4]*n[1]+e[t+8]*n[2]}},n.scaleST3$_$_$=function(n,e,t,r){return function(){r[0]=r[0]*n,r[1]=r[1]*n,r[2]=r[2]*n,r[3]=r[3]*n,r[4]=r[4]*e,r[5]=r[5]*e,r[6]=r[6]*e,r[7]=r[7]*e,r[8]=r[8]*t,r[9]=r[9]*t,r[10]=r[10]*t,r[11]=r[11]*t}}}(PS["Data.ST.Matrix4"]=PS["Data.ST.Matrix4"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.TypeNat"],r=PS["Data.Array"],o=(PS["Data.Maybe.Unsafe"],PS["Type.Proxy"]),a=PS.Extensions,i=function(n){return n},u=function(n){return n},c=function(n,a){var u=t.sized(n)(o.Proxy.value);return i(r.concat(e["<$>"](e.functorArray)(function(n){return e["<$>"](e.functorArray)(function(e){return a(n)(e)})(r.range$_$_$(0,u-1))})(r.range$_$_$(0,u-1))))},l=function(n){return c(n,function(n){return function(e){var t=n===e;if(t)return 1;if(!t)return 0;throw new Error("Failed pattern match at Data.Matrix line 85, column 31 - line 88, column 1: "+[t.constructor.name])}})},s=function(n,i){var u=t.sized(n)(o.Proxy.value),c=u*u|0;if(c===r.length(i))return i;if(e.otherwise)return a.fail("Matrix>>fromArray: Wrong array length!");throw new Error("Failed pattern match at Data.Matrix line 107, column 6 - line 111, column 1: "+[c.constructor.name])};n.Mat=i,n.toArray=u,n.fromArray$_$_$=s,n["identity'"]=l,n.generate$_$_$=c}(PS["Data.Matrix"]=PS["Data.Matrix"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.TypeNat"],PS["Data.Matrix"],PS["Data.Vector3"]),r=(PS["Data.Vector4"],PS["Data.Vector"]),o=PS["Data.Maybe"],a=(PS.Math,PS.Extensions),i=function(n,e,t,r){if(3===n.length&&16===e.length&&16===t.length&&4===r.length){var i=[e[0]*n[0]+e[4]*n[1]+e[8]*n[2]+e[12],e[1]*n[0]+e[5]*n[1]+e[9]*n[2]+e[13],e[2]*n[0]+e[6]*n[1]+e[10]*n[2]+e[14],e[3]*n[0]+e[7]*n[1]+e[11]*n[2]+e[15]];if(4===i.length){var u=[t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],-i[2]];if(4===u.length){var c=0===u[3];if(c)return o.Nothing.value;if(!c){var l=1/u[3],s=u[2]*l,f=u[1]*l,d=u[0]*l;return new o.Just([(.5*d+.5)*r[2]+r[0],(.5*f+.5)*r[3]+r[1],.5*(1+s)])}throw new Error("Failed pattern match at Data.Matrix4 line 396, column 21 - line 410, column 17: "+[c.constructor.name])}return a.fail("Matrix4>>project: Impossible!")}return a.fail("Matrix4>>project: Impossible!")}return a.fail("Matrix4>>project: Impossible!")},u=function(n,e){return 16===n.length&&4===e.length?[n[0]*e[0]+n[4]*e[1]+n[8]*e[2]+n[12]*e[3],n[1]*e[0]+n[5]*e[1]+n[9]*e[2]+n[13]*e[3],n[2]*e[0]+n[6]*e[1]+n[10]*e[2]+n[14]*e[3],n[3]*e[0]+n[7]*e[1]+n[11]*e[2]+n[15]*e[3]]:a.fail("Matrix4>>mulMatVect: Impossible!")},c=function(n,e){return 16===n.length&&16===e.length?[n[0]*e[0]+n[4]*e[1]+n[8]*e[2]+n[12]*e[3],n[1]*e[0]+n[5]*e[1]+n[9]*e[2]+n[13]*e[3],n[2]*e[0]+n[6]*e[1]+n[10]*e[2]+n[14]*e[3],n[3]*e[0]+n[7]*e[1]+n[11]*e[2]+n[15]*e[3],n[0]*e[4]+n[4]*e[5]+n[8]*e[6]+n[12]*e[7],n[1]*e[4]+n[5]*e[5]+n[9]*e[6]+n[13]*e[7],n[2]*e[4]+n[6]*e[5]+n[10]*e[6]+n[14]*e[7],n[3]*e[4]+n[7]*e[5]+n[11]*e[6]+n[15]*e[7],n[0]*e[8]+n[4]*e[9]+n[8]*e[10]+n[12]*e[11],n[1]*e[8]+n[5]*e[9]+n[9]*e[10]+n[13]*e[11],n[2]*e[8]+n[6]*e[9]+n[10]*e[10]+n[14]*e[11],n[3]*e[8]+n[7]*e[9]+n[11]*e[10]+n[15]*e[11],n[0]*e[12]+n[4]*e[13]+n[8]*e[14]+n[12]*e[15],n[1]*e[12]+n[5]*e[13]+n[9]*e[14]+n[13]*e[15],n[2]*e[12]+n[6]*e[13]+n[10]*e[14]+n[14]*e[15],n[3]*e[12]+n[7]*e[13]+n[11]*e[14]+n[15]*e[15]]:a.fail("Matrix4>>mulM: Impossible!")},l=function(n,e,t,r,o,a){var i=-2/(a-o),u=2/(r-t),c=2/(e-n),l=-(a+o)/(a-o),s=-(r+t)/(r-t),f=-(e+n)/(e-n);return[c,0,0,0,0,u,0,0,0,0,i,0,f,s,l,1]},s=function(n,e,t,r){return l(n,e,t,r,-1,1)},f=function(n,o,i){if(3===n.length){var u=r.direction$_$_$(n,o);if(3===u.length){var l=r.normalize(t.cross$_$_$(e.numNumber,i,u));if(3===l.length){var s=r.normalize(t.cross$_$_$(e.numNumber,u,l));if(3===s.length){var f=[1,0,0,0,0,1,0,0,0,0,1,0,-n[0],-n[1],-n[2],1],d=[l[0],s[0],u[0],0,l[1],s[1],u[1],0,l[2],s[2],u[2],0,0,0,0,1];return c(d,f)}return a.fail("Matrix4>>makeRotate: Impossible!")}return a.fail("Matrix4>>makeRotate: Impossible!")}return a.fail("Matrix4>>makeRotate: Impossible!")}return a.fail("Matrix4>>makeLookAt: Impossible!")},d=function(n,e,t,r,o,a){return[2*o/(e-n),0,0,0,0,2*o/(r-t),0,0,(e+n)/(e-n),(r+t)/(r-t),-(a+o)/(a-o),-1,0,0,-2*a*o/(a-o),0]},v=function(n){if(16===n.length){var e=n[10]*n[15]-n[11]*n[14],t=n[9]*n[15]-n[11]*n[13],r=n[9]*n[14]-n[10]*n[13],i=n[8]*n[15]-n[11]*n[12],u=n[8]*n[14]-n[10]*n[12],c=n[8]*n[13]-n[9]*n[12],l=n[2]*n[7]-n[3]*n[6],s=n[1]*n[7]-n[3]*n[5],f=n[1]*n[6]-n[2]*n[5],d=n[0]*n[7]-n[3]*n[4],v=n[0]*n[6]-n[2]*n[4],m=n[0]*n[5]-n[1]*n[4],h=m*e-v*t+d*r+f*i-s*u+l*c,p=0===h;if(p)return o.Nothing.value;if(!p){var g=1/h;return o.Just.create([(n[5]*e-n[6]*t+n[7]*r)*g,(-n[1]*e+n[2]*t-n[3]*r)*g,(n[13]*l-n[14]*s+n[15]*f)*g,(-n[9]*l+n[10]*s-n[11]*f)*g,(-n[4]*e+n[6]*i-n[7]*u)*g,(n[0]*e-n[2]*i+n[3]*u)*g,(-n[12]*l+n[14]*d-n[15]*v)*g,(n[8]*l-n[10]*d+n[11]*v)*g,(n[4]*t-n[5]*i+n[7]*c)*g,(-n[0]*t+n[1]*i-n[3]*c)*g,(n[12]*s-n[13]*d+n[15]*m)*g,(-n[8]*s+n[9]*d-n[11]*m)*g,(-n[4]*r+n[5]*u-n[6]*c)*g,(n[0]*r-n[1]*u+n[2]*c)*g,(-n[12]*f+n[13]*v-n[14]*m)*g,(n[8]*f-n[9]*v+n[10]*m)*g])}throw new Error("Failed pattern match at Data.Matrix4 line 85, column 8 - line 104, column 1: "+[p.constructor.name])}return a.fail("Matrix4>>inverse: Impossible!")},m=function(n,e,t,r){if(3===n.length&&4===r.length){var i=c(t,e),l=v(i);if(l instanceof o.Nothing)return o.Nothing.value;if(l instanceof o.Just){var s=[(n[0]-r[0])/r[2]*2-1,(n[1]-r[1])/r[3]*2-1,2*n[2]-1,1],f=u(l.value0,s);if(4===f.length){var d=0===f[3];if(d)return o.Nothing.value;if(!d){var m=1/f[3];return new o.Just([f[0]*m,f[1]*m,f[2]*m])}throw new Error("Failed pattern match at Data.Matrix4 line 436, column 29 - line 440, column 25: "+[d.constructor.name]);
}return a.fail("Matrix4>>unProject: Impossible!")}throw new Error("Failed pattern match at Data.Matrix4 line 427, column 8 - line 441, column 1: "+[l.constructor.name])}return a.fail("Matrix4>>unProject: Impossible!")},h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n.mulMatVect$_$_$=u,n.unProject$_$_$=m,n.project$_$_$=i,n.makeLookAt$_$_$=f,n.mulM$_$_$=c,n.makeOrtho2D$_$_$=s,n.makeOrtho$_$_$=l,n.makeFrustum$_$_$=d,n.inverse=v,n.identity=h}(PS["Data.Matrix4"]=PS["Data.Matrix4"]||{}),function(n){"use strict";n.copyImpl=function(n){return function(){var e=n.slice();return e}},n.copyToSTMat$_$_$=function(n,e){return function(){for(var t=0;t<n.length;t++)e[t]=n[t];return{}}}}(PS["Data.ST.Matrix"]=PS["Data.ST.Matrix"]||{}),function(n){"use strict";var e=PS["Data.ST.Matrix"],t=PS.Prelude,r=PS["Control.Monad.Eff"],o=(PS["Control.Monad.ST"],PS["Data.TypeNat"],PS["Data.Array.ST"],PS["Control.Apply"],PS["Data.Matrix"]),a=function(n){return n},i=e.copyImpl,u=function(n){var e=o["identity'"](n);return t["<$>"](r.functorEff)(a)(i(o.toArray(e)))},c=e.copyImpl,l=function(n,e){return function(){var t=c(e)();return o.fromArray$_$_$(n,t)}};n.STMat=a,n["identityST'"]=u,n.fromSTMat$_$_$=l,n.thaw=i,n.freeze=c,n.copyToSTMat$_$_$=e.copyToSTMat$_$_$}(PS["Data.ST.Matrix"]=PS["Data.ST.Matrix"]||{}),function(n){"use strict";var e=PS["Data.ST.Matrix4"];PS.Prelude,PS["Data.TypeNat"],PS["Data.Matrix4"],PS["Data.ST.Matrix"],PS["Control.Monad.Eff"],PS["Control.Monad.ST"];n.scaleST3$_$_$=e.scaleST3$_$_$,n.translateST$_$_$=e.translateST$_$_$,n.rotateSTY$_$_$=e.rotateSTY$_$_$,n.rotateSTX$_$_$=e.rotateSTX$_$_$}(PS["Data.ST.Matrix4"]=PS["Data.ST.Matrix4"]||{}),function(n){"use strict";n.peekSTArrayImplUnsafe=function(n,e){return function(){return n[e]}},n.pokeSTArray=function(n,e,t){return function(){var r=e>=0&&e<n.length;return r&&(n[e]=t),r}},n.pokeAllSTArray=function(n,e,t){return function(){var r=t.length,o=e>=0&&e+t.length<=n.length;if(o)for(var a=0;r>a;a++)n[a+e]=t[a];return o}},n.pushAllSTArray=function(n,e){return function(){return n.push.apply(n,e)}},n.copyImpl=function(n){return function(){return n.slice()}}}(PS["Data.STSequence"]=PS["Data.STSequence"]||{}),function(n){"use strict";var e=PS["Data.STSequence"],t=PS.Prelude,r=PS["Control.Monad.ST"],o=PS["Data.Array"],a=PS["Control.Monad.Eff"],i=(PS["Data.Function"],PS["Data.Int"]),u=PS["Data.Maybe"],c=PS.Extensions,l=c.unsafeCoerce,s=function(n){return function(){var e=r.readSTRef(n.fillCounter)();return o.slice$_$_$(0,e,l(n.buffer))}},f=e.copyImpl,d=function(n){return function(){var t=r.readSTRef(n.fillCounter)(),o=0===t;if(o)return u.Nothing.value;if(!o){var a=e.peekSTArrayImplUnsafe(n.buffer,t-1)();return e.pokeSTArray(n.buffer,t-1,c.undef)(),r.modifySTRef$_$_$(n.fillCounter,function(n){return n-1})(),new u.Just(a)}throw new Error("Failed pattern match at Data.STSequence line 172, column 5 - line 181, column 1: "+[o.constructor.name])}},v=function(n){return r.readSTRef(n.fillCounter)},m=function(n,r){return function(){var o=v(n)(),i=r>=0&&o>r;if(i)return t.liftM1$_$_$(a.monadEff,u.Just.create,e.peekSTArrayImplUnsafe(n.buffer,r))();if(!i)return u.Nothing.value;throw new Error("Failed pattern match at Data.STSequence line 214, column 5 - line 218, column 1: "+[i.constructor.name])}},h=function(n,t,r){return function(){var o=v(n)(),a=t>=0&&o>t;if(a)return e.pokeSTArray(n.buffer,t,r)(),!0;if(!a)return!1;throw new Error("Failed pattern match at Data.STSequence line 231, column 5 - line 235, column 21: "+[a.constructor.name])}},p=function(n){return function(){var e=r.readSTRef(n.fillCounter)();return m(n,e-1)()}},g=30,w=function(n){var e=i.round(.7*i.toNumber(o.length(n)));return function(){var a=f(t["++"](t.semigroupArray)(n)(o.replicate$_$_$(e,c.undef)))(),i=r.newSTRef(o.length(n))();return{buffer:a,fillCounter:i}}},_=function(n){return function(){var e=f(o.replicate$_$_$(n,c.undef))(),t=r.newSTRef(0)();return{buffer:e,fillCounter:t}}},$=function(){var n=f(o.replicate$_$_$(g,c.undef))(),e=r.newSTRef(0)();return{buffer:n,fillCounter:e}},C=function(n){return o.length(l(n.buffer))},S=function(n,t){return function(){var a=r.readSTRef(n.fillCounter)(),u=C(n);return function(){var r=u>a;if(r)return e.pokeSTArray(n.buffer,a,t);if(!r){var l=i.round(.7*i.toNumber(u));return function(){return e.pushAllSTArray(n.buffer,o.replicate$_$_$(l,c.undef))(),e.pokeSTArray(n.buffer,a,t)()}}throw new Error("Failed pattern match at Data.STSequence line 158, column 5 - line 165, column 5: "+[r.constructor.name])}()(),r.modifySTRef$_$_$(n.fillCounter,function(n){return n+1|0})(),n}},P=function(n,t){return function(){var a=v(n)(),u=o.length(t),l=a+u|0;return function(){var r=C(n)>=l;if(r)return e.pokeAllSTArray(n.buffer,a,t);if(!r){var u=i.round(1.7*i.toNumber(l)),s=u-C(n);return function(){return e.pushAllSTArray(n.buffer,o.replicate$_$_$(s,c.undef))(),e.pokeAllSTArray(n.buffer,a,t)()}}throw new Error("Failed pattern match at Data.STSequence line 186, column 5 - line 194, column 5: "+[r.constructor.name])}()(),r.writeSTRef$_$_$(n.fillCounter,l)(),n}};n.poke$_$_$=h,n.last=p,n.peek$_$_$=m,n.pushAll$_$_$=P,n.pop=d,n.push$_$_$=S,n.length=v,n.toArray=s,n.fromArray=w,n.emptyWithBufferSize=_,n.empty=$}(PS["Data.STSequence"]=PS["Data.STSequence"]||{}),function(n){"use strict";n["new"]=function(){return{}},n.peekImpl=function(n){return function(e){return function(t){return function(r){return function(){return{}.hasOwnProperty.call(t,r)?n(t[r]):e}}}}},n.poke$_$_$=function(n,e,t){return function(){return n[e]=t,n}}}(PS["Data.StrMap.ST"]=PS["Data.StrMap.ST"]||{}),function(n){"use strict";var e=PS["Data.StrMap.ST"],t=(PS.Prelude,PS["Control.Monad.Eff"],PS["Control.Monad.ST"],PS["Data.Maybe"]),r=e.peekImpl(t.Just.create)(t.Nothing.value);n.peek=r,n.poke$_$_$=e.poke$_$_$,n["new"]=e["new"]}(PS["Data.StrMap.ST"]=PS["Data.StrMap.ST"]||{}),function(n){"use strict";n.shaderBindings_=function(n){return function(){for(var e={},t=gl.getProgramParameter(n,gl.ACTIVE_UNIFORMS),r=0;t>r;r+=1){var o=gl.getActiveUniform(n,r),a=gl.getUniformLocation(n,o.name),i={};i.uLocation=a,i.uName=o.name,i.uType=o.type,e[o.name]=i}for(var u=gl.getProgramParameter(n,gl.ACTIVE_ATTRIBUTES),c=0;u>c;c+=1){var l=gl.getActiveAttrib(n,c),s=gl.getAttribLocation(n,l.name);gl.enableVertexAttribArray(s);var f={};switch(f.aLocation=s,f.aName=l.name,f.aItemType=l.type,l.type){case gl.FLOAT_VEC2:f.aItemSize=2;break;case gl.FLOAT_VEC3:f.aItemSize=3;break;case gl.FLOAT_VEC4:f.aItemSize=4;break;default:LOG("Unsupported attribute type: "+l.type),f.aItemSize=1}e[l.name]=f}return e}},n.initGL_=function(n,e){return function(){var t=document.getElementById(n);try{gl=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)}catch(r){return!1}return gl?!0:(gl=null,!1)}},n.getCanvasWidth_=function(n){return function(){var e=document.getElementById(n);return e.width}},n.getCanvasHeight_=function(n){return function(){var e=document.getElementById(n);return e.height}},n.requestAnimationFrame_=function(n){if("undefined"==typeof e)var e=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}();return function(){return e(n)}},n.bufferData__=function(n,e,t){return function(){gl.bufferData(n,e,t)}}}(PS["Graphics.WebGL"]=PS["Graphics.WebGL"]||{}),function(n){"use strict";n.runWebGl_=function(n){return n}}(PS["Control.Monad.Eff.WebGL"]=PS["Control.Monad.Eff.WebGL"]||{}),function(n){"use strict";var e=PS["Control.Monad.Eff.WebGL"];PS["Control.Monad.Eff"];n.runWebGl_=e.runWebGl_}(PS["Control.Monad.Eff.WebGL"]=PS["Control.Monad.Eff.WebGL"]||{}),function(n){"use strict";n.activeTexture_=function(n){return function(){gl.activeTexture(n)}},n.attachShader_=function(n,e){return function(){gl.attachShader(n,e)}},n.bindAttribLocation_=function(n,e,t){return function(){gl.bindAttribLocation(n,e,t)}},n.bindBuffer_=function(n,e){return function(){gl.bindBuffer(n,e)}},n.bindFramebuffer_=function(n,e){return function(){gl.bindFramebuffer(n,e)}},n.bindRenderbuffer_=function(n,e){return function(){gl.bindRenderbuffer(n,e)}},n.bindTexture_=function(n,e){return function(){gl.bindTexture(n,e)}},n.blendFunc_=function(n,e){return function(){gl.blendFunc(n,e)}},n.bufferSubData_=function(n,e,t){return function(){gl.bufferSubData(n,e,t)}},n.checkFramebufferStatus_=function(n){return function(){var e=gl.checkFramebufferStatus(n);if(void 0===e)throw"Undefined in  checkFramebufferStatus";return e}},n.clear_=function(n){return function(){gl.clear(n)}},n.clearColor_=function(n,e,t,r){return function(){gl.clearColor(n,e,t,r)}},n.clearDepth_=function(n){return function(){gl.clearDepth(n)}},n.colorMask_=function(n,e,t,r){return function(){gl.colorMask(n,e,t,r)}},n.compileShader_=function(n){return function(){gl.compileShader(n)}},n.createBuffer_=function(){return function(){var n=gl.createBuffer();if(void 0===n)throw"Undefined in  createBuffer";return n}},n.createFramebuffer_=function(){return function(){var n=gl.createFramebuffer();if(void 0===n)throw"Undefined in  createFramebuffer";return n}},n.createProgram_=function(){return function(){var n=gl.createProgram();if(void 0===n)throw"Undefined in  createProgram";return n}},n.createRenderbuffer_=function(){return function(){var n=gl.createRenderbuffer();if(void 0===n)throw"Undefined in  createRenderbuffer";return n}},n.createShader_=function(n){return function(){var e=gl.createShader(n);if(void 0===e)throw"Undefined in  createShader";return e}},n.createTexture_=function(){return function(){var n=gl.createTexture();if(void 0===n)throw"Undefined in  createTexture";return n}},n.depthFunc_=function(n){return function(){gl.depthFunc(n)}},n.disable_=function(n){return function(){gl.disable(n)}},n.disableVertexAttribArray_=function(n){return function(){gl.disableVertexAttribArray(n)}},n.drawArrays_=function(n,e,t){return function(){gl.drawArrays(n,e,t)}},n.drawElements_=function(n,e,t,r){return function(){gl.drawElements(n,e,t,r)}},n.enable_=function(n){return function(){gl.enable(n)}},n.enableVertexAttribArray_=function(n){return function(){gl.enableVertexAttribArray(n)}},n.framebufferRenderbuffer_=function(n,e,t,r){return function(){gl.framebufferRenderbuffer(n,e,t,r)}},n.framebufferTexture2D_=function(n,e,t,r,o){return function(){gl.framebufferTexture2D(n,e,t,r,o)}},n.generateMipmap_=function(n){return function(){gl.generateMipmap(n)}},n.getProgramParameter_=function(n,e){return function(){var t=gl.getProgramParameter(n,e);if(void 0===t)throw"Undefined in  getProgramParameter";return t}},n.getShaderParameter_=function(n,e){return function(){var t=gl.getShaderParameter(n,e);if(void 0===t)throw"Undefined in  getShaderParameter";return t}},n.getShaderInfoLog_=function(n){return function(){var e=gl.getShaderInfoLog(n);if(void 0===e)throw"Undefined in  getShaderInfoLog";return e}},n.linkProgram_=function(n){return function(){gl.linkProgram(n)}},n.pixelStorei_=function(n,e){return function(){gl.pixelStorei(n,e)}},n.renderbufferStorage_=function(n,e,t,r){return function(){gl.renderbufferStorage(n,e,t,r)}},n.shaderSource_=function(n,e){return function(){gl.shaderSource(n,e)}},n.texImage2D_=function(n,e,t,r,o,a,i,u,c){return function(){gl.texImage2D(n,e,t,r,o,a,i,u,c)}},n.texParameteri_=function(n,e,t){return function(){gl.texParameteri(n,e,t)}},n.uniform1f_=function(n,e){return function(){gl.uniform1f(n,e)}},n.uniform1i_=function(n,e){return function(){gl.uniform1i(n,e)}},n.uniform2fv_=function(n,e){return function(){gl.uniform2fv(n,e)}},n.uniform3fv_=function(n,e){return function(){gl.uniform3fv(n,e)}},n.uniform4fv_=function(n,e){return function(){gl.uniform4fv(n,e)}},n.uniformMatrix2fv_=function(n,e,t){return function(){gl.uniformMatrix2fv(n,e,t)}},n.uniformMatrix3fv_=function(n,e,t){return function(){gl.uniformMatrix3fv(n,e,t)}},n.uniformMatrix4fv_=function(n,e,t){return function(){gl.uniformMatrix4fv(n,e,t)}},n.useProgram_=function(n){return function(){gl.useProgram(n)}},n.vertexAttribPointer_=function(n,e,t,r,o,a){return function(){gl.vertexAttribPointer(n,e,t,r,o,a)}},n.viewport_=function(n,e,t,r){return function(){gl.viewport(n,e,t,r)}}}(PS["Graphics.WebGLRaw"]=PS["Graphics.WebGLRaw"]||{}),function(n){"use strict";var e=PS["Graphics.WebGLRaw"],t=(PS["Control.Monad.Eff"],PS["Control.Monad.Eff.WebGL"],PS["Data.ArrayBuffer.Types"],PS["Data.Function"],PS.Prelude,0),r=35633,o=33635,a=32820,i=32819,u=5123,c=5121,l=37441,s=37440,f=37443,d=3317,v=5,m=6,h=4,p=10243,g=10242,w=10241,_=10240,$=34073,C=34071,S=34069,P=34074,y=34072,b=34070,T=34067,E=3553,F=33984,x=1024,A=36128,N=35044,D=768,M=776,L=770,O=3089,I=32854,R=6408,k=32855,U=36194,G=6407,B=36161,J=32823,z=0,H=3333,W=769,j=771,q=775,V=773,Z=32770,X=32772,K=1,Y=517,Q=512,nn=9728,en=35661,tn=6410,rn=6409,on=35714,an=3,un=2,cn=1,ln=9985,sn=9729,fn=513,dn=515,vn=516,mn=518,hn=36160,pn=35632,gn=35666,wn=35665,_n=35664,$n=35676,Cn=35675,Sn=35674,Pn=5126,yn=514,bn=34963,Tn=35048,En=774,Fn=772,xn=2929,An=33306,Nn=33189,Dn=256,Mn=36096,Ln=2884,On=32769,In=32771,Rn=35713,kn=16384,Un=36064,Gn=33071,Bn=35670,Jn=32969,zn=32971,Hn=32968,Wn=32970,jn=32773,qn=3042,Vn=34962,Zn=519,Xn=6406;n._UNPACK_COLORSPACE_CONVERSION_WEBGL=f,n._UNPACK_PREMULTIPLY_ALPHA_WEBGL=l,n._UNPACK_FLIP_Y_WEBGL=s,n._DEPTH_STENCIL_ATTACHMENT=An,n._STENCIL_ATTACHMENT=A,n._DEPTH_ATTACHMENT=Mn,n._COLOR_ATTACHMENT0=Un,n._DEPTH_COMPONENT16=Nn,n._RGB565=U,n._RGB5_A1=k,n._RGBA4=I,n._RENDERBUFFER=B,n._FRAMEBUFFER=hn,n._COMPILE_STATUS=Rn,n._FLOAT_MAT4=$n,n._FLOAT_MAT3=Cn,n._FLOAT_MAT2=Sn,n._BOOL=Bn,n._FLOAT_VEC4=gn,n._FLOAT_VEC3=wn,n._FLOAT_VEC2=_n,n._CLAMP_TO_EDGE=Gn,n._TEXTURE0=F,n._TEXTURE_CUBE_MAP_NEGATIVE_Z=P,n._TEXTURE_CUBE_MAP_POSITIVE_Z=$,n._TEXTURE_CUBE_MAP_NEGATIVE_Y=y,n._TEXTURE_CUBE_MAP_POSITIVE_Y=C,n._TEXTURE_CUBE_MAP_NEGATIVE_X=b,n._TEXTURE_CUBE_MAP_POSITIVE_X=S,n._TEXTURE_CUBE_MAP=T,n._TEXTURE_WRAP_T=p,n._TEXTURE_WRAP_S=g,n._TEXTURE_MIN_FILTER=w,n._TEXTURE_MAG_FILTER=_,n._LINEAR_MIPMAP_NEAREST=ln,n._LINEAR=sn,n._NEAREST=nn,n._ALWAYS=Zn,n._GEQUAL=mn,n._NOTEQUAL=Y,n._GREATER=vn,n._LEQUAL=dn,n._EQUAL=yn,n._LESS=fn,n._NEVER=Q,n._LINK_STATUS=on,n._MAX_COMBINED_TEXTURE_IMAGE_UNITS=en,n._VERTEX_SHADER=r,n._FRAGMENT_SHADER=pn,n._UNSIGNED_SHORT_5_6_5=o,n._UNSIGNED_SHORT_5_5_5_1=a,n._UNSIGNED_SHORT_4_4_4_4=i,n._LUMINANCE_ALPHA=tn,n._LUMINANCE=rn,n._RGBA=R,n._RGB=G,n._ALPHA=Xn,n._FLOAT=Pn,n._UNSIGNED_SHORT=u,n._UNSIGNED_BYTE=c,n._PACK_ALIGNMENT=H,n._UNPACK_ALIGNMENT=d,n._POLYGON_OFFSET_FILL=J,n._SCISSOR_TEST=O,n._DEPTH_TEST=xn,n._BLEND=qn,n._CULL_FACE=Ln,n._TEXTURE_2D=E,n._DYNAMIC_DRAW=Tn,n._STATIC_DRAW=N,n._ELEMENT_ARRAY_BUFFER=bn,n._ARRAY_BUFFER=Vn,n._BLEND_COLOR=jn,n._ONE_MINUS_CONSTANT_ALPHA=X,n._CONSTANT_ALPHA=In,n._ONE_MINUS_CONSTANT_COLOR=Z,n._CONSTANT_COLOR=On,n._BLEND_SRC_ALPHA=zn,n._BLEND_DST_ALPHA=Wn,n._BLEND_SRC_RGB=Jn,n._BLEND_DST_RGB=Hn,n._SRC_ALPHA_SATURATE=M,n._ONE_MINUS_DST_COLOR=q,n._DST_COLOR=En,n._ONE_MINUS_DST_ALPHA=V,n._DST_ALPHA=Fn,n._ONE_MINUS_SRC_ALPHA=j,n._SRC_ALPHA=L,n._ONE_MINUS_SRC_COLOR=W,n._SRC_COLOR=D,n._ONE=K,n._ZERO=t,n._TRIANGLE_FAN=m,n._TRIANGLE_STRIP=v,n._TRIANGLES=h,n._LINE_STRIP=an,n._LINE_LOOP=un,n._LINES=cn,n._POINTS=z,n._COLOR_BUFFER_BIT=kn,n._STENCIL_BUFFER_BIT=x,n._DEPTH_BUFFER_BIT=Dn,n.viewport_=e.viewport_,n.vertexAttribPointer_=e.vertexAttribPointer_,n.useProgram_=e.useProgram_,n.uniformMatrix4fv_=e.uniformMatrix4fv_,n.uniformMatrix3fv_=e.uniformMatrix3fv_,n.uniformMatrix2fv_=e.uniformMatrix2fv_,n.uniform4fv_=e.uniform4fv_,n.uniform3fv_=e.uniform3fv_,n.uniform2fv_=e.uniform2fv_,n.uniform1i_=e.uniform1i_,n.uniform1f_=e.uniform1f_,n.texParameteri_=e.texParameteri_,n.texImage2D_=e.texImage2D_,n.shaderSource_=e.shaderSource_,n.renderbufferStorage_=e.renderbufferStorage_,n.pixelStorei_=e.pixelStorei_,n.linkProgram_=e.linkProgram_,n.getShaderInfoLog_=e.getShaderInfoLog_,n.getShaderParameter_=e.getShaderParameter_,n.getProgramParameter_=e.getProgramParameter_,n.generateMipmap_=e.generateMipmap_,n.framebufferTexture2D_=e.framebufferTexture2D_,n.framebufferRenderbuffer_=e.framebufferRenderbuffer_,n.enableVertexAttribArray_=e.enableVertexAttribArray_,n.enable_=e.enable_,n.drawElements_=e.drawElements_,n.drawArrays_=e.drawArrays_,n.disableVertexAttribArray_=e.disableVertexAttribArray_,n.disable_=e.disable_,n.depthFunc_=e.depthFunc_,n.createTexture_=e.createTexture_,n.createShader_=e.createShader_,n.createRenderbuffer_=e.createRenderbuffer_,n.createProgram_=e.createProgram_,n.createFramebuffer_=e.createFramebuffer_,n.createBuffer_=e.createBuffer_,n.compileShader_=e.compileShader_,n.colorMask_=e.colorMask_,n.clearDepth_=e.clearDepth_,n.clearColor_=e.clearColor_,n.clear_=e.clear_,n.checkFramebufferStatus_=e.checkFramebufferStatus_,n.bufferSubData_=e.bufferSubData_,n.blendFunc_=e.blendFunc_,n.bindTexture_=e.bindTexture_,n.bindRenderbuffer_=e.bindRenderbuffer_,n.bindFramebuffer_=e.bindFramebuffer_,n.bindBuffer_=e.bindBuffer_,n.bindAttribLocation_=e.bindAttribLocation_,n.attachShader_=e.attachShader_,n.activeTexture_=e.activeTexture_}(PS["Graphics.WebGLRaw"]=PS["Graphics.WebGLRaw"]||{}),function(n){"use strict";n.asUint8Array=function(n){var e=new Uint8Array(n);return e},n.asUint16Array=function(n){var e=new Uint16Array(n);return e},n.asFloat32Array=function(n){var e=new Float32Array(n);return e},n.newUint8Array=function(n){var e=new Uint8Array(n);return e},n.asArray=function(n){var e=Array.prototype.slice.call(n);return e},n.length=function(n){return n.length}}(PS["Data.TypedArray"]=PS["Data.TypedArray"]||{}),function(n){"use strict";var e=PS["Data.TypedArray"];PS["Data.ArrayBuffer.Types"],PS["Data.Maybe"],PS.Prelude;n.asArray=e.asArray,n.newUint8Array=e.newUint8Array,n.asFloat32Array=e.asFloat32Array,n.asUint16Array=e.asUint16Array,n.asUint8Array=e.asUint8Array}(PS["Data.TypedArray"]=PS["Data.TypedArray"]||{}),function(n){"use strict";var e=PS["Graphics.WebGL"],t=PS.Prelude,r=PS["Control.Monad.Eff.WebGL"],o=PS["Graphics.WebGLRaw"],a=(PS["Data.ArrayBuffer.Types"],PS["Data.TypedArray"]),i=(PS["Control.Monad.Eff"],PS["Data.Foldable"]),u=PS["Data.Maybe"],c=PS["Data.Array.Unsafe"],l=PS["Data.Array"],s=PS["Data.Either"],f=PS["Data.Int.Bits"],d=PS["Data.Function"],v=PS.Extensions,m=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),h=function(){function n(){}return n.value=new n,n}(),p=function(){function n(){}return n.value=new n,n}(),g=function(){function n(){}return n.value=new n,n}(),w=function(){function n(){}return n.value=new n,n}(),_=function(){function n(){}return n.value=new n,n}(),$=function(){function n(){}return n.value=new n,n}(),C=function(){function n(){}return n.value=new n,n}(),S=function(){function n(){}return n.value=new n,n}(),P=function(){function n(){}return n.value=new n,n}(),y=function(){function n(){}return n.value=new n,n}(),b=function(){function n(){}return n.value=new n,n}(),T=function(){function n(){}return n.value=new n,n}(),E=function(){function n(){}return n.value=new n,n}(),F=function(){function n(){}return n.value=new n,n}(),x=function(){function n(){}return n.value=new n,n}(),A=function(){function n(){}return n.value=new n,n}(),N=function(){function n(){}return n.value=new n,n}(),D=function(){function n(){}return n.value=new n,n}(),M=function(){function n(){}return n.value=new n,n}(),L=function(){function n(){}return n.value=new n,n}(),O=function(){function n(){}return n.value=new n,n}(),I=function(){function n(){}return n.value=new n,n}(),R=function(){function n(){}return n.value=new n,n}(),k=function(){function n(){}return n.value=new n,n}(),U=function(){function n(){}return n.value=new n,n}(),G=function(){function n(){}return n.value=new n,n}(),B=function(){function n(){}return n.value=new n,n}(),J=function(){function n(){}return n.value=new n,n}(),z=function(){function n(){}return n.value=new n,n}(),H=function(){function n(){}return n.value=new n,n}(),W=function(){function n(){}return n.value=new n,n}(),j=function(){function n(){}return n.value=new n,n}(),q=function(){function n(){}return n.value=new n,n}(),V=function(){function n(){}return n.value=new n,n}(),Z=function(){function n(){}return n.value=new n,n}(),X=function(){function n(){}return n.value=new n,n}(),K=function(){function n(){}return n.value=new n,n}(),Y=function(){function n(){}return n.value=new n,n}(),Q=function(){function n(){}return n.value=new n,n}(),nn=function(){function n(){}return n.value=new n,n}(),en=function(){function n(){}return n.value=new n,n}(),tn=function(){function n(){}return n.value=new n,n}(),rn=function(){function n(){}return n.value=new n,n}(),on=function(){function n(){}return n.value=new n,n}(),an=function(){function n(){}return n.value=new n,n}(),un=function(){function n(){}return n.value=new n,n}(),cn=function(){function n(){}return n.value=new n,n}(),ln=d.runFn4(o.viewport_),sn=function(n){return o.vertexAttribPointer_(n.aLocation,n.aItemSize,o._FLOAT,!1,0,0)},fn=function(n,e){if(n.uType===o._BOOL){var r=function(n){if(n)return 1;if(!n)return 0;throw new Error("Failed pattern match at Graphics.WebGL line 282, column 7 - line 283, column 7: "+[n.constructor.name])};return o.uniform1i_(n.uLocation,r(e))}if(t.otherwise)return v.fail("WebGL>>setUniformBoolean: Called for not boolean uniform!");throw new Error("Failed pattern match at Graphics.WebGL line 279, column 1 - line 286, column 1: "+[n.constructor.name,e.constructor.name])},dn=function(n,t,o,a){var i={canvasName:n};return function(){var u=e.initGL_(n,t)();if(u)return r.runWebGl_(a(i))();if(!u)return o("Unable to initialize WebGL. Your browser may not support it.")();throw new Error("Failed pattern match at Graphics.WebGL line 140, column 3 - line 143, column 5: "+[u.constructor.name])}},vn=d.runFn1(e.requestAnimationFrame_),mn=function(n){if(n instanceof g)return o._POINTS;if(n instanceof w)return o._LINES;if(n instanceof _)return o._LINE_STRIP;if(n instanceof $)return o._LINE_LOOP;if(n instanceof C)return o._TRIANGLES;if(n instanceof S)return o._TRIANGLE_STRIP;if(n instanceof P)return o._TRIANGLE_FAN;throw new Error("Failed pattern match at Graphics.WebGL line 479, column 1 - line 480, column 1: "+[n.constructor.name])},hn=function(n){if(n instanceof y)return o._DEPTH_BUFFER_BIT;if(n instanceof b)return o._STENCIL_BUFFER_BIT;if(n instanceof T)return o._COLOR_BUFFER_BIT;throw new Error("Failed pattern match at Graphics.WebGL line 458, column 1 - line 459, column 1: "+[n.constructor.name])},pn=function(n,e){var t=function(){if(n instanceof h)return o._FRAGMENT_SHADER;if(n instanceof p)return o._VERTEX_SHADER;throw new Error("Failed pattern match at Graphics.WebGL line 401, column 25 - line 404, column 3: "+[n.constructor.name])}();return function(){var n=o.createShader_(t)();o.shaderSource_(n,e)(),o.compileShader_(n)();var r=o.getShaderParameter_(n,o._COMPILE_STATUS)();if(r)return new s.Left(n);if(!r){var a=o.getShaderInfoLog_(n)();return new s.Right(a)}throw new Error("Failed pattern match at Graphics.WebGL line 408, column 3 - line 414, column 1: "+[r.constructor.name])}},gn=function(n,t){return function(){var r=o.createBuffer_()();o.bindBuffer_(o._ARRAY_BUFFER,r)();var i=a.asFloat32Array(n);return e.bufferData__(o._ARRAY_BUFFER,i,t)(),{webGLBuffer:r,bufferType:o._ARRAY_BUFFER,bufferSize:l.length(n)}}},wn=function(n){return gn(n,o._DYNAMIC_DRAW)},_n=function(n){return gn(n,o._STATIC_DRAW)},$n=function(n,e){return function(){var t=o.createProgram_()();o.attachShader_(t,e)(),o.attachShader_(t,n)(),o.linkProgram_(t)();var r=o.getProgramParameter_(t,o._LINK_STATUS)();if(r)return o.useProgram_(t)(),new u.Just(t);if(!r)return u.Nothing.value;throw new Error("Failed pattern match at Graphics.WebGL line 421, column 3 - line 431, column 1: "+[r.constructor.name])}},Cn=function(n,t,r){return function(){var o=pn(h.value,n.value0)();if(o instanceof s.Right)return t("Can't compile fragment shader: "+o.value0)();if(o instanceof s.Left){var a=pn(p.value,n.value1)();if(a instanceof s.Right)return t("Can't compile vertex shader: "+a.value0)();if(a instanceof s.Left){var i=$n(o.value0,a.value0)();if(i instanceof u.Nothing)return t("Can't init shaders")();if(i instanceof u.Just){var c=e.shaderBindings_(i.value0)();return r(function(){var n={};for(var e in c)c.hasOwnProperty(e)&&(n[e]=c[e]);return n.webGLProgram=i.value0,n}())()}throw new Error("Failed pattern match at Graphics.WebGL line 202, column 13 - line 210, column 1: "+[i.constructor.name])}throw new Error("Failed pattern match at Graphics.WebGL line 198, column 7 - line 210, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at Graphics.WebGL line 194, column 3 - line 210, column 1: "+[o.constructor.name])}},Sn=function(n){return e.getCanvasWidth_(n.canvasName)},Pn=function(n){return e.getCanvasHeight_(n.canvasName)},yn=function(n){if(n instanceof E)return o._NEVER;if(n instanceof F)return o._ALWAYS;if(n instanceof x)return o._LESS;if(n instanceof A)return o._EQUAL;if(n instanceof N)return o._LEQUAL;if(n instanceof D)return o._GREATER;if(n instanceof M)return o._GEQUAL;if(n instanceof L)return o._NOTEQUAL;throw new Error("Failed pattern match at Graphics.WebGL line 338, column 1 - line 339, column 1: "+[n.constructor.name])},bn=function(n,e,r){return function(){o.bindBuffer_(n.bufferType,n.webGLBuffer)();var i=a.asFloat32Array(r);return o.bufferSubData_(n.bufferType,e,i)(),t.unit}},Tn=function(n){return o.enableVertexAttribArray_(n.aLocation)},En=function(n,e){return o.drawElements_(mn(n),e,o._UNSIGNED_SHORT,0)},Fn=function(n){return o.disableVertexAttribArray_(n.aLocation)},xn=function(n){return o.depthFunc_(yn(n))},An={alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,preferLowPowerToHighPerformance:!1,failIfMajorPerformanceCaveat:!1},Nn=d.runFn4(o.colorMask_),Dn=d.runFn1(o.clearDepth_),Mn=d.runFn4(o.clearColor_),Ln=function(n){return o.clear_(i.foldl(i.foldableArray)(f[".|."])(0)(t.map(t.functorArray)(hn)(n)))},On=function(n){if(n instanceof O)return o._BLEND;if(n instanceof I)return o._DEPTH_TEST;if(n instanceof R)return o._CULL_FACE;if(n instanceof k)return o._POLYGON_OFFSET_FILL;if(n instanceof U)return o._SCISSOR_TEST;throw new Error("Failed pattern match at Graphics.WebGL line 443, column 1 - line 444, column 1: "+[n.constructor.name])},In=function(n){return o.disable_(On(n))},Rn=function(n){return o.enable_(On(n))},kn=function(n){if(n instanceof G)return o._ARRAY_BUFFER;if(n instanceof B)return o._ELEMENT_ARRAY_BUFFER;throw new Error("Failed pattern match at Graphics.WebGL line 492, column 1 - line 493, column 1: "+[n.constructor.name])},Un=function(n,t,r,a,i){var u=kn(t);return function(){var n=o.createBuffer_()();o.bindBuffer_(u,n)();var t=r(a);return e.bufferData__(u,t,i)(),{webGLBuffer:n,bufferType:u,bufferSize:l.length(a)}}},Gn=function(n,e,t,r){return Un(n,e,t,r,o._STATIC_DRAW)},Bn=function(n){if(n instanceof J)return o._ZERO;if(n instanceof z)return o._ONE;if(n instanceof H)return o._SRC_COLOR;if(n instanceof W)return o._ONE_MINUS_SRC_COLOR;if(n instanceof j)return o._DST_COLOR;if(n instanceof q)return o._ONE_MINUS_DST_COLOR;if(n instanceof V)return o._SRC_ALPHA;if(n instanceof Z)return o._ONE_MINUS_SRC_ALPHA;if(n instanceof X)return o._DST_ALPHA;if(n instanceof K)return o._ONE_MINUS_DST_ALPHA;if(n instanceof rn)return o._CONSTANT_COLOR;if(n instanceof on)return o._ONE_MINUS_CONSTANT_COLOR;if(n instanceof an)return o._CONSTANT_ALPHA;if(n instanceof un)return o._ONE_MINUS_CONSTANT_ALPHA;if(n instanceof Y)return o._SRC_ALPHA_SATURATE;if(n instanceof cn)return o._BLEND_COLOR;if(n instanceof Q)return o._BLEND_DST_RGB;if(n instanceof nn)return o._BLEND_SRC_RGB;if(n instanceof en)return o._BLEND_DST_ALPHA;if(n instanceof tn)return o._BLEND_SRC_ALPHA;throw new Error("Failed pattern match at Graphics.WebGL line 520, column 1 - line 521, column 1: "+[n.constructor.name])},Jn=function(n,e){return o.blendFunc_(Bn(n),Bn(e))},zn=function(n,e){return function(){return o.bindBuffer_(n.bufferType,n.webGLBuffer)(),sn(e)()}},Hn=function(n,e,t){return function(){return zn(e,t)(),o.drawArrays_(mn(n),0,e.bufferSize/t.aItemSize|0)()}},Wn=function(n){return o.bindBuffer_(n.bufferType,n.webGLBuffer)},jn=function(n,e,t){return o.bindAttribLocation_(n,e,t)},qn=a.asFloat32Array,Vn=function(n,e){if(n.uType===o._FLOAT)return o.uniform1f_(n.uLocation,c.head(e));if(n.uType===o._FLOAT_MAT4)return o.uniformMatrix4fv_(n.uLocation,!1,qn(e));if(n.uType===o._FLOAT_MAT3)return o.uniformMatrix3fv_(n.uLocation,!1,qn(e));if(n.uType===o._FLOAT_MAT2)return o.uniformMatrix2fv_(n.uLocation,!1,qn(e));if(n.uType===o._FLOAT_VEC4)return o.uniform4fv_(n.uLocation,qn(e));if(n.uType===o._FLOAT_VEC3)return o.uniform3fv_(n.uLocation,qn(e));if(n.uType===o._FLOAT_VEC2)return o.uniform2fv_(n.uLocation,qn(e));if(t.otherwise)return v.fail("WebGL>>setUniformFloats: Called for non float uniform!");throw new Error("Failed pattern match at Graphics.WebGL line 268, column 1 - line 278, column 1: "+[n.constructor.name,e.constructor.name])};n.BLEND=O,n.DEPTH_TEST=I,n.CULL_FACE=R,n.POLYGON_OFFSET_FILL=k,n.SCISSOR_TEST=U,n.ZERO=J,n.ONE=z,n.SRC_COLOR=H,n.ONE_MINUS_SRC_COLOR=W,n.DST_COLOR=j,n.ONE_MINUS_DST_COLOR=q,n.SRC_ALPHA=V,n.ONE_MINUS_SRC_ALPHA=Z,n.DST_ALPHA=X,n.ONE_MINUS_DST_ALPHA=K,n.SRC_ALPHA_SATURATE=Y,n.BLEND_DST_RGB=Q,n.BLEND_SRC_RGB=nn,n.BLEND_DST_ALPHA=en,n.BLEND_SRC_ALPHA=tn,n.CONSTANT_COLOR=rn,n.ONE_MINUS_CONSTANT_COLOR=on,n.CONSTANT_ALPHA=an,n.ONE_MINUS_CONSTANT_ALPHA=un,n.BLEND_COLOR=cn,n.POINTS=g,n.LINES=w,n.LINE_STRIP=_,n.LINE_LOOP=$,n.TRIANGLES=C,n.TRIANGLE_STRIP=S,n.TRIANGLE_FAN=P,n.DEPTH_BUFFER_BIT=y,n.STENCIL_BUFFER_BIT=b,n.COLOR_BUFFER_BIT=T,n.NEVER=E,n.ALWAYS=F,n.LESS=x,n.EQUAL=A,n.LEQUAL=N,n.GREATER=D,n.GEQUAL=M,n.NOTEQUAL=L,n.ARRAY_BUFFER=G,n.ELEMENT_ARRAY_BUFFER=B,n.Shaders=m,n.requestAnimationFrame=vn,n.colorMask=Nn,n.clearDepth=Dn,n.clearColor=Mn,n.clear=Ln,n.enable=Rn,n.disable=In,n.getCanvasHeight=Pn,n.getCanvasWidth=Sn,n.viewport=ln,n.blendFunc$_$_$=Jn,n.depthFunc=xn,n.drawElements$_$_$=En,n.drawArr$_$_$=Hn,n.disableVertexAttribArray=Fn,n.enableVertexAttribArray=Tn,n.vertexPointer=sn,n.bindAttribLocation$_$_$=jn,n.bindBuf=Wn,n.bindBufAndSetVertexAttr$_$_$=zn,n.setUniformBoolean$_$_$=fn,n.setUniformFloats$_$_$=Vn,n.fillBuffer$_$_$=bn,n.makeBufferFloatDyn=wn,n.makeBufferFloat=_n,n.makeBuffer$_$_$=Gn,n.withShaders$_$_$=Cn,n.runWebGLAttr$_$_$=dn,n.defContextAttributes=An}(PS["Graphics.WebGL"]=PS["Graphics.WebGL"]||{}),function(n){"use strict";var e=PS["Graphics.WebGL"],t=new e.Shaders("precision mediump float;\n\n  varying vec4 vFinalColor;\n\n  varying vec2 vTextureCoord;\n  varying float fogFactor;\n\n  uniform float uTexAmbiance;\n  uniform sampler2D uSampler;\n\n  uniform bool uUseTexture;\n  uniform bool uSimple;\n  uniform bool uUseTextureFrame;\n  uniform vec4 uTextureFrameColor;\n\n  void main(void)\n  {\n        vec4 fog_color = vec4(1,1,1,0);\n        if (uSimple) {\n            gl_FragColor = vFinalColor;\n        } else {\n            if (uUseTexture) {\n                vec4 texel = texture2D (uSampler, vTextureCoord);\n                if (uUseTextureFrame && texel.a < 1.0) {\n                    vec4 texelColor = mix(uTextureFrameColor, texel, texel.a * uTexAmbiance);\n                    gl_FragColor = mix(fog_color, texelColor, fogFactor);\n                } else {\n                    vec4 texelColor = vec4(texel.r, texel.g, texel.b, texel.a * uTexAmbiance);\n                    gl_FragColor = mix(fog_color, texelColor, fogFactor);\n                }\n            } else {\n                vec4 frag_color = vFinalColor;\n                gl_FragColor = mix(fog_color, frag_color, fogFactor);\n            }\n        }\n  }\n  ","\n  precision mediump float;\n  attribute vec3 aVertexPosition;\n  attribute vec3 aVertexNormal;\n\n  attribute vec2 aTextureCoord;\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  uniform mat3 uNMatrix;\n\n  uniform float uShininess;   //shininness\n  uniform vec3 uLightDirection;  //light direction\n\n  uniform vec4 uLightAmbient;      //light ambient property\n  uniform vec4 uLightDiffuse;      //light diffuse property\n  uniform vec4 uLightSpecular;     //light specular property\n\n  uniform vec4 uMaterialAmbient;  //object ambient property\n  uniform vec4 uMaterialDiffuse;   //object diffuse property\n  uniform vec4 uMaterialSpecular;  //object specular property\n\n  uniform float uScale;\n\n  varying vec4 vFinalColor;\n  varying vec2 vTextureCoord;\n  varying float fogFactor;\n\n  uniform bool uUseTexture;\n  uniform bool uSimple;\n\n\nvoid main(void) {\n\n    vec4 vertex = uMVMatrix * vec4(aVertexPosition, 1.0);\n    float distance = length(vertex);\n    fogFactor =  clamp ((18.0 - distance) / 9.0, 0.7, 1.0);\n        //fogFactor = (end - z) / (end - start)\n\n    gl_Position = uPMatrix * vertex;\n\n    if (uUseTexture) {\n      vTextureCoord = aTextureCoord;\n    }\n    else if (uSimple) {\n      vFinalColor = uMaterialAmbient;\n    }\n    else\n    {\n      //Transformed normal position\n      vec3 N = uNMatrix * aVertexNormal;\n\n      //Normalize light to calculate lambertTerm\n      vec3 L = normalize(uLightDirection);\n\n      //Lambert's cosine law\n      float lambertTerm = dot(N * uScale,-L);\n\n      //Ambient Term\n      vec4 Ia = uLightAmbient * uMaterialAmbient;\n\n      //Diffuse Term\n      vec4 Id = vec4(0.0,0.0,0.0,1.0);\n\n      //Specular Term\n      vec4 Is = vec4(0.0,0.0,0.0,1.0);\n\n      if(lambertTerm > 0.0) //only if lambertTerm is positive\n      {\n          Id = uLightDiffuse * uMaterialDiffuse * lambertTerm; //add diffuse term\n\n          vec3 eyeVec = -vec3(vertex.xyz);\n          vec3 E = normalize(eyeVec);\n          vec3 R = reflect(L, N * uScale);\n          float specular = pow(max(dot(R, E), 0.0), uShininess );\n\n          Is = uLightSpecular * uMaterialSpecular * specular; //add specular term\n      }\n\n      //Final color\n      vFinalColor = Ia + Id + Is;\n      vFinalColor.a = uMaterialAmbient.a;\n\n    }\n}\n  ");
n.shaders=t}(PS["ConeCanvas.Frontend.Shaders"]=PS["ConeCanvas.Frontend.Shaders"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Foldable"],r=PS["Data.List"],o=PS["Data.Maybe"],a=PS["Data.Maybe.Unsafe"],i=(PS["Data.Monoid"],PS["Data.Traversable"]),u=PS["Data.Tuple"],c=function(){function n(){}return n.value=new n,n}(),l=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(o){return new n(e,t,r,o)}}}},n}(),s=function(){function n(n,e,t,r,o,a,i){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=o,this.value5=a,this.value6=i}return n.create=function(e){return function(t){return function(r){return function(o){return function(a){return function(i){return function(u){return new n(e,t,r,o,a,i,u)}}}}}}},n}(),f=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),d=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),v=function(){function n(n,e,t,r,o,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=o,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(o){return function(a){return function(i){return new n(e,t,r,o,a,i)}}}}}},n}(),m=function(){function n(n,e,t,r,o,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=o,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(o){return function(a){return function(i){return new n(e,t,r,o,a,i)}}}}}},n}(),h=function(){function n(n,e,t,r,o,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=o,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(o){return function(a){return function(i){return new n(e,t,r,o,a,i)}}}}}},n}(),p=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(o){return new n(e,t,r,o)}}}},n}(),g=function(n){if(n instanceof c)return r.Nil.value;if(n instanceof l)return e["++"](r.semigroupList)(g(n.value0))(e["++"](r.semigroupList)(e.pure(r.applicativeList)(n.value2))(g(n.value3)));if(n instanceof s)return e["++"](r.semigroupList)(g(n.value0))(e["++"](r.semigroupList)(e.pure(r.applicativeList)(n.value2))(e["++"](r.semigroupList)(g(n.value3))(e["++"](r.semigroupList)(e.pure(r.applicativeList)(n.value5))(g(n.value6)))));throw new Error("Failed pattern match at Data.Map line 311, column 1 - line 312, column 1: "+[n.constructor.name])},w=function(n){if(n instanceof c)return r.Nil.value;if(n instanceof l)return e["++"](r.semigroupList)(w(n.value0))(e["++"](r.semigroupList)(e.pure(r.applicativeList)(new u.Tuple(n.value1,n.value2)))(w(n.value3)));if(n instanceof s)return e["++"](r.semigroupList)(w(n.value0))(e["++"](r.semigroupList)(e.pure(r.applicativeList)(new u.Tuple(n.value1,n.value2)))(e["++"](r.semigroupList)(w(n.value3))(e["++"](r.semigroupList)(e.pure(r.applicativeList)(new u.Tuple(n.value4,n.value5)))(w(n.value6)))));throw new Error("Failed pattern match at Data.Map line 290, column 1 - line 291, column 1: "+[n.constructor.name])},_=function(n){return function(e){return new l(c.value,n,e,c.value)}},$=function(n,t,r){var a=n,i=t,u=r;n:for(;;){var f=e.compare(a);if(u instanceof c)return o.Nothing.value;if(u instanceof l){var d=f(i)(u.value1);if(d instanceof e.EQ)return new o.Just(u.value2);if(d instanceof e.LT){var v=a,m=i,h=u.value0;a=v,i=m,u=h;continue n}var v=a,m=i,h=u.value3;a=v,i=m,u=h}else{if(!(u instanceof s))throw new Error("Failed pattern match at Data.Map line 121, column 6 - line 143, column 1: "+[u.constructor.name]);var p=f(i)(u.value1);if(p instanceof e.EQ)return new o.Just(u.value2);var g=f(i)(u.value4);if(g instanceof e.EQ)return new o.Just(u.value5);if(p instanceof e.LT){var v=a,m=i,h=u.value0;a=v,i=m,u=h;continue n}if(g instanceof e.GT){var v=a,m=i,h=u.value6;a=v,i=m,u=h;continue n}var v=a,m=i,h=u.value3;a=v,i=m,u=h}}},C=function(n,e,t){return o.isJust($(n,e,t))},S=new e.Functor(function(n){return function(t){if(t instanceof c)return c.value;if(t instanceof l)return new l(e.map(S)(n)(t.value0),t.value1,n(t.value2),e.map(S)(n)(t.value3));if(t instanceof s)return new s(e.map(S)(n)(t.value0),t.value1,n(t.value2),e.map(S)(n)(t.value3),t.value4,n(t.value5),e.map(S)(n)(t.value6));throw new Error("Failed pattern match at Data.Map line 62, column 3 - line 63, column 3: "+[n.constructor.name,t.constructor.name])}}),P=function(n,e,t){var o=n,a=e,i=t;n:for(;;){if(a instanceof r.Nil)return i;if(a instanceof r.Cons){if(a.value0 instanceof f){var u=o,c=a.value1,p=new l(i,a.value0.value0,a.value0.value1,a.value0.value2);o=u,a=c,i=p;continue n}if(a.value0 instanceof d){var u=o,c=a.value1,p=new l(a.value0.value0,a.value0.value1,a.value0.value2,i);o=u,a=c,i=p;continue n}if(a.value0 instanceof v){var u=o,c=a.value1,p=new s(i,a.value0.value0,a.value0.value1,a.value0.value2,a.value0.value3,a.value0.value4,a.value0.value5);o=u,a=c,i=p;continue n}if(a.value0 instanceof m){var u=o,c=a.value1,p=new s(a.value0.value0,a.value0.value1,a.value0.value2,i,a.value0.value3,a.value0.value4,a.value0.value5);o=u,a=c,i=p;continue n}if(a.value0 instanceof h){var u=o,c=a.value1,p=new s(a.value0.value0,a.value0.value1,a.value0.value2,a.value0.value3,a.value0.value4,a.value0.value5,i);o=u,a=c,i=p;continue n}throw new Error("Failed pattern match at Data.Map line 156, column 3 - line 163, column 1: "+[a.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map line 154, column 1 - line 155, column 1: "+[a.constructor.name,i.constructor.name])}},y=function(n){var t=function(e){return function(t){var o=e,a=t;n:for(;;){if(o instanceof r.Nil)return new l(a.value0,a.value1,a.value2,a.value3);if(o instanceof r.Cons){if(o.value0 instanceof f)return P(n,o.value1,new s(a.value0,a.value1,a.value2,a.value3,o.value0.value0,o.value0.value1,o.value0.value2));if(o.value0 instanceof d)return P(n,o.value1,new s(o.value0.value0,o.value0.value1,o.value0.value2,a.value0,a.value1,a.value2,a.value3));if(o.value0 instanceof v){var i=o.value1,u=new p(new l(a.value0,a.value1,a.value2,a.value3),o.value0.value0,o.value0.value1,new l(o.value0.value2,o.value0.value3,o.value0.value4,o.value0.value5));o=i,a=u;continue n}if(o.value0 instanceof m){var i=o.value1,u=new p(new l(o.value0.value0,o.value0.value1,o.value0.value2,a.value0),a.value1,a.value2,new l(a.value3,o.value0.value3,o.value0.value4,o.value0.value5));o=i,a=u;continue n}if(o.value0 instanceof h){var i=o.value1,u=new p(new l(o.value0.value0,o.value0.value1,o.value0.value2,o.value0.value3),o.value0.value4,o.value0.value5,new l(a.value0,a.value1,a.value2,a.value3));o=i,a=u;continue n}throw new Error("Failed pattern match at Data.Map line 197, column 5 - line 205, column 1: "+[o.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map line 195, column 3 - line 196, column 3: "+[o.constructor.name,a.constructor.name])}}},o=e.compare(n),a=function(a){return function(i){return function(u){return function(g){var w=a,_=i,$=u,C=g;n:for(;;){if(C instanceof c)return t(w)(new p(c.value,_,$,c.value));if(C instanceof l){var S=o(_)(C.value1);if(S instanceof e.EQ)return P(n,w,new l(C.value0,_,$,C.value3));if(S instanceof e.LT){var y=new r.Cons(new f(C.value1,C.value2,C.value3),w),b=_,T=$,E=C.value0;w=y,_=b,$=T,C=E;continue n}var y=new r.Cons(new d(C.value0,C.value1,C.value2),w),b=_,T=$,E=C.value3;w=y,_=b,$=T,C=E}else{if(!(C instanceof s))throw new Error("Failed pattern match at Data.Map line 173, column 3 - line 174, column 3: "+[w.constructor.name,_.constructor.name,$.constructor.name,C.constructor.name]);var F=o(_)(C.value1);if(F instanceof e.EQ)return P(n,w,new s(C.value0,_,$,C.value3,C.value4,C.value5,C.value6));var x=o(_)(C.value4);if(x instanceof e.EQ)return P(n,w,new s(C.value0,C.value1,C.value2,C.value3,_,$,C.value6));if(F instanceof e.LT){var y=new r.Cons(new v(C.value1,C.value2,C.value3,C.value4,C.value5,C.value6),w),b=_,T=$,E=C.value0;w=y,_=b,$=T,C=E;continue n}if(F instanceof e.GT){if(x instanceof e.LT){var y=new r.Cons(new m(C.value0,C.value1,C.value2,C.value4,C.value5,C.value6),w),b=_,T=$,E=C.value3;w=y,_=b,$=T,C=E;continue n}var y=new r.Cons(new h(C.value0,C.value1,C.value2,C.value3,C.value4,C.value5),w),b=_,T=$,E=C.value6;w=y,_=b,$=T,C=E;continue n}var y=new r.Cons(new h(C.value0,C.value1,C.value2,C.value3,C.value4,C.value5),w),b=_,T=$,E=C.value6;w=y,_=b,$=T,C=E}}}}}};return a(r.Nil.value)},b=new t.Foldable(function(n){return function(e){return function(o){return t.foldMap(r.foldableList)(n)(e)(g(o))}}},function(n){return function(e){return function(o){return t.foldl(r.foldableList)(n)(e)(g(o))}}},function(n){return function(e){return function(o){return t.foldr(r.foldableList)(n)(e)(g(o))}}}),T=c.value,E=function(n){var t=function(e){return function(t){for(var o=e,i=t;;){if(o instanceof r.Nil)return i;if(o instanceof r.Cons&&o.value0 instanceof f&&o.value0.value2 instanceof c&&i instanceof c)return P(n,o.value1,new l(c.value,o.value0.value0,o.value0.value1,c.value));if(o instanceof r.Cons&&o.value0 instanceof d&&o.value0.value0 instanceof c&&i instanceof c)return P(n,o.value1,new l(c.value,o.value0.value1,o.value0.value2,c.value));if(o instanceof r.Cons&&o.value0 instanceof f&&o.value0.value2 instanceof l){var u=o.value1,p=new s(i,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);o=u,i=p}else{if(!(o instanceof r.Cons&&o.value0 instanceof d&&o.value0.value0 instanceof l))return o instanceof r.Cons&&o.value0 instanceof f&&o.value0.value2 instanceof s?P(n,o.value1,new l(new l(i,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new l(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6))):o instanceof r.Cons&&o.value0 instanceof d&&o.value0.value0 instanceof s?P(n,o.value1,new l(new l(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new l(o.value0.value0.value6,o.value0.value1,o.value0.value2,i))):o instanceof r.Cons&&o.value0 instanceof v&&o.value0.value2 instanceof c&&o.value0.value5 instanceof c&&i instanceof c?P(n,o.value1,new s(c.value,o.value0.value0,o.value0.value1,c.value,o.value0.value3,o.value0.value4,c.value)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value0 instanceof c&&o.value0.value5 instanceof c&&i instanceof c?P(n,o.value1,new s(c.value,o.value0.value1,o.value0.value2,c.value,o.value0.value3,o.value0.value4,c.value)):o instanceof r.Cons&&o.value0 instanceof h&&o.value0.value0 instanceof c&&o.value0.value3 instanceof c&&i instanceof c?P(n,o.value1,new s(c.value,o.value0.value1,o.value0.value2,c.value,o.value0.value4,o.value0.value5,c.value)):o instanceof r.Cons&&o.value0 instanceof v&&o.value0.value2 instanceof l?P(n,o.value1,new l(new s(i,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value0 instanceof l?P(n,o.value1,new l(new s(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,i),o.value0.value3,o.value0.value4,o.value0.value5)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value5 instanceof l?P(n,o.value1,new l(o.value0.value0,o.value0.value1,o.value0.value2,new s(i,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3))):o instanceof r.Cons&&o.value0 instanceof h&&o.value0.value3 instanceof l?P(n,o.value1,new l(o.value0.value0,o.value0.value1,o.value0.value2,new s(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,i))):o instanceof r.Cons&&o.value0 instanceof v&&o.value0.value2 instanceof s?P(n,o.value1,new s(new l(i,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new l(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value0 instanceof s?P(n,o.value1,new s(new l(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new l(o.value0.value0.value6,o.value0.value1,o.value0.value2,i),o.value0.value3,o.value0.value4,o.value0.value5)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value5 instanceof s?P(n,o.value1,new s(o.value0.value0,o.value0.value1,o.value0.value2,new l(i,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new l(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6))):o instanceof r.Cons&&o.value0 instanceof h&&o.value0.value3 instanceof s?P(n,o.value1,new s(o.value0.value0,o.value0.value1,o.value0.value2,new l(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new l(o.value0.value3.value6,o.value0.value4,o.value0.value5,i))):a.unsafeThrow("Impossible case in 'up'");var u=o.value1,p=new s(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,i);o=u,i=p}}}},o=function(n){return function(e){for(var o=n,i=e;;){if(i instanceof l&&i.value0 instanceof c&&i.value3 instanceof c)return t(o)(c.value);if(i instanceof l){var u=new r.Cons(new d(i.value0,i.value1,i.value2),o),f=i.value3;o=u,i=f}else{if(i instanceof s&&i.value0 instanceof c&&i.value3 instanceof c&&i.value6 instanceof c)return t(new r.Cons(new d(c.value,i.value1,i.value2),o))(c.value);if(!(i instanceof s)){if(i instanceof c)return a.unsafeThrow("Impossible case in 'removeMaxNode'");throw new Error("Failed pattern match at Data.Map line 259, column 3 - line 260, column 3: "+[o.constructor.name,i.constructor.name])}var u=new r.Cons(new h(i.value0,i.value1,i.value2,i.value3,i.value4,i.value5),o),f=i.value6;o=u,i=f}}}},i=function(n){for(var e=n;;){if(e instanceof l&&e.value3 instanceof c)return{key:e.value1,value:e.value2};if(e instanceof l){var t=e.value3;e=t}else{if(e instanceof s&&e.value6 instanceof c)return{key:e.value4,value:e.value5};if(!(e instanceof s)){if(e instanceof c)return a.unsafeThrow("Impossible case in 'maxNode'");throw new Error("Failed pattern match at Data.Map line 251, column 3 - line 252, column 3: "+[e.constructor.name])}var t=e.value6;e=t}}},u=function(a){return function(u){return function(p){var g=a,w=u,_=p;n:for(;;){if(_ instanceof c)return P(n,g,c.value);if(_ instanceof l&&_.value0 instanceof c&&_.value3 instanceof c&&e["=="](n["__superclass_Prelude.Eq_0"]())(w)(_.value1))return t(g)(c.value);if(_ instanceof l){if(e["=="](n["__superclass_Prelude.Eq_0"]())(w)(_.value1)){var $=i(_.value0);return o(new r.Cons(new f($.key,$.value,_.value3),g))(_.value0)}if(e["<"](n)(w)(_.value1)){var C=new r.Cons(new f(_.value1,_.value2,_.value3),g),S=w,y=_.value0;g=C,w=S,_=y;continue n}if(e.otherwise){var C=new r.Cons(new d(_.value0,_.value1,_.value2),g),S=w,y=_.value3;g=C,w=S,_=y;continue n}}if(_ instanceof s&&_.value0 instanceof c&&_.value3 instanceof c&&_.value6 instanceof c){if(e["=="](n["__superclass_Prelude.Eq_0"]())(w)(_.value1))return P(n,g,new l(c.value,_.value4,_.value5,c.value));if(e["=="](n["__superclass_Prelude.Eq_0"]())(w)(_.value4))return P(n,g,new l(c.value,_.value1,_.value2,c.value))}if(_ instanceof s){if(e["=="](n["__superclass_Prelude.Eq_0"]())(w)(_.value1)){var $=i(_.value0);return o(new r.Cons(new v($.key,$.value,_.value3,_.value4,_.value5,_.value6),g))(_.value0)}if(e["=="](n["__superclass_Prelude.Eq_0"]())(w)(_.value4)){var $=i(_.value3);return o(new r.Cons(new m(_.value0,_.value1,_.value2,$.key,$.value,_.value6),g))(_.value3)}if(e["<"](n)(w)(_.value1)){var C=new r.Cons(new v(_.value1,_.value2,_.value3,_.value4,_.value5,_.value6),g),S=w,y=_.value0;g=C,w=S,_=y;continue n}if(e["<"](n)(_.value1)(w)&&e["<"](n)(w)(_.value4)){var C=new r.Cons(new m(_.value0,_.value1,_.value2,_.value4,_.value5,_.value6),g),S=w,y=_.value3;g=C,w=S,_=y;continue n}if(e.otherwise){var C=new r.Cons(new h(_.value0,_.value1,_.value2,_.value3,_.value4,_.value5),g),S=w,y=_.value6;g=C,w=S,_=y;continue n}}throw new Error("Failed pattern match at Data.Map line 209, column 3 - line 210, column 3: "+[g.constructor.name,w.constructor.name,_.constructor.name])}}}};return u(r.Nil.value)},F=function(n){return function(e){return function(t){return function(r){var a=e($(n,t,r));if(a instanceof o.Nothing)return E(n)(t)(r);if(a instanceof o.Just)return y(n)(t)(a.value0)(r);throw new Error("Failed pattern match at Data.Map line 268, column 15 - line 273, column 1: "+[a.constructor.name])}}}},x=function(n,e,t,r){var a=e($(n,t,r));if(a instanceof o.Nothing)return E(n)(t)(r);if(a instanceof o.Just)return y(n)(t)(a.value0)(r);throw new Error("Failed pattern match at Data.Map line 268, column 15 - line 273, column 1: "+[a.constructor.name])},A=function(n){return function(e){return function(a){return function(i){var u=function(t){return function(r){return x(n,function(n){return o.Just.create(o.maybe$_$_$(r.value1,e(r.value1),n))},r.value0,t)}};return t.foldl(r.foldableList)(u)(i)(w(a))}}}},N=function(n){return A(n)(e["const"])},D=function(n){return new i.Traversable(function(){return b},function(){return S},function(t){return i.traverse(D(n))(t)(e.id(e.categoryFn))},function(o){return function(a){return function(c){return t.foldr(r.foldableList)(function(t){return function(r){return e["<*>"](o["__superclass_Prelude.Apply_0"]())(e["<$>"](o["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(N(n))(t))(r)}})(e.pure(o)(T))(e["<$>"](r.functorList)(e["<$>"](o["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(u.uncurry(_)))(e["<$>"](r.functorList)(i.traverse(u.traversableTuple)(o)(a))(w(c))))}}})},M=function(n,e,t,r){return x(n,o.maybe(o.Nothing.value)(e),t,r)};n.unionWith=A,n.union=N,n.values=g,n.update$_$_$=M,n.alter=F,n.alter$_$_$=x,n.member$_$_$=C,n["delete"]=E,n.toList=w,n.lookup$_$_$=$,n.insert=y,n.singleton=_,n.empty=T,n.functorMap=S,n.foldableMap=b,n.traversableMap=D}(PS["Data.Map"]=PS["Data.Map"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.Foldable"],PS["Data.List"],PS["Data.Monoid"],PS["Data.Map"]),r=(PS["Control.Monad.Eff"],PS["Control.Monad.ST"],PS["Control.Monad.Rec.Class"],PS["Data.Array"],PS["Data.Array.ST"],PS["Data.Array.Unsafe"],PS["Data.List"],PS["Data.Either"],PS["Data.Foldable"],PS["Data.Unfoldable"],function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}()),o=function(n,e,r){return t.member$_$_$(n,e,r.value0)},a=function(n){return function(o){return function(a){return new r(t.insert(n)(o)(e.unit)(a.value0))}}},i=function(n,o,a){return new r(t.insert(n)(o)(e.unit)(a.value0))},u=new r(t.empty),c=function(n){return function(e){return function(o){return new r(t["delete"](n)(e)(o.value0))}}};n["delete"]=c,n.member$_$_$=o,n.insert=a,n.insert$_$_$=i,n.empty=u}(PS["Data.Set"]=PS["Data.Set"]||{}),function(n){"use strict";n.unbindFramebuffer_=function(n){return function(){gl.bindFramebuffer(n,null)}},n.readPixels__=function(n,e,t,r,o,a,i){return function(){gl.readPixels(n,e,t,r,o,a,i)}}}(PS["Graphics.WebGLFramebuffer"]=PS["Graphics.WebGLFramebuffer"]||{}),function(n){"use strict";n.asArrayBufferView_=function(n){return n},n.texImage2DNull_=function(n,e,t,r,o,a,i,u){return function(){gl.texImage2D(n,e,t,r,o,a,i,u,null)}},n.bindTexture__=function(n){return function(){gl.bindTexture(n,null)}},n.texSubImage2D__=function(n,e,t,r,o,a,i){return function(){gl.texSubImage2D(n,e,t,r,o,a,i)}}}(PS["Graphics.WebGLTexture"]=PS["Graphics.WebGLTexture"]||{}),function(n){"use strict";var e=PS.Prelude,t=function(n,t,r){if(t)return r;if(!t)return e["return"](n["__superclass_Prelude.Applicative_0"]())(e.unit);throw new Error("Failed pattern match at Control.Monad line 9, column 1 - line 10, column 1: "+[t.constructor.name,r.constructor.name])};n.when$_$_$=t}(PS["Control.Monad"]=PS["Control.Monad"]||{}),function(n){"use strict";var e=PS["Graphics.WebGLTexture"],t=PS.Prelude,r=(PS["Control.Monad.Eff.WebGL"],PS["Graphics.WebGL"],PS["Graphics.WebGLRaw"]),o=(PS["Data.Int.Bits"],PS["Control.Monad.Eff"]),a=PS["Control.Monad"],i=PS.Extensions,u=(PS["Graphics.Canvas"],PS["Data.Function"]),c=PS["Data.TypedArray"],l=(PS["Data.ArrayBuffer.Types"],function(){function n(){}return n.value=new n,n}()),s=function(){function n(){}return n.value=new n,n}(),f=function(){function n(){}return n.value=new n,n}(),d=function(){function n(){}return n.value=new n,n}(),v=function(){function n(){}return n.value=new n,n}(),m=function(){function n(){}return n.value=new n,n}(),h=function(){function n(){}return n.value=new n,n}(),p=function(){function n(){}return n.value=new n,n}(),g=function(){function n(){}return n.value=new n,n}(),w=function(){function n(){}return n.value=new n,n}(),_=function(){function n(){}return n.value=new n,n}(),$=function(){function n(){}return n.value=new n,n}(),C=function(){function n(){}return n.value=new n,n}(),S=function(){function n(){}return n.value=new n,n}(),P=function(){function n(){}return n.value=new n,n}(),y=function(){function n(){}return n.value=new n,n}(),b=function(){function n(){}return n.value=new n,n}(),T=function(){function n(){}return n.value=new n,n}(),E=function(){function n(){}return n.value=new n,n}(),F=function(){function n(){}return n.value=new n,n}(),x=function(){function n(){}return n.value=new n,n}(),A=function(){function n(){}return n.value=new n,n}(),N=function(){function n(){}return n.value=new n,n}(),D=function(){function n(){}return n.value=new n,n}(),M=function(){function n(){}return n.value=new n,n}(),L=function(){function n(){}return n.value=new n,n}(),O=function(){function n(){}return n.value=new n,n}(),I=function(){function n(){}return n.value=new n,n}(),R=function(){function n(){}return n.value=new n,n}(),k=function(){function n(){}return n.value=new n,n}(),U=function(){function n(){}return n.value=new n,n}(),G=function(){function n(){}return n.value=new n,n}(),B=u.runFn2(r.uniform1i_),J=function(n){if(n instanceof l)return r._UNSIGNED_BYTE;if(n instanceof s)return r._RGBA;if(n instanceof f)return r._FLOAT;if(n instanceof d)return r._UNSIGNED_SHORT_5_6_5;if(n instanceof v)return r._UNSIGNED_SHORT_4_4_4_4;if(n instanceof m)return r._UNSIGNED_SHORT_5_5_5_1;throw new Error("Failed pattern match at Graphics.WebGLTexture line 102, column 1 - line 103, column 1: "+[n.constructor.name])},z=function(n){if(n instanceof h)return r._TEXTURE_2D;if(n instanceof p)return r._TEXTURE_CUBE_MAP;throw new Error("Failed pattern match at Graphics.WebGLTexture line 128, column 1 - line 129, column 1: "+[n.constructor.name])},H=function(n){if(n instanceof g)return r._TEXTURE_MIN_FILTER;if(n instanceof w)return r._TEXTURE_MAG_FILTER;if(n instanceof _)return r._TEXTURE_WRAP_S;if(n instanceof $)return r._TEXTURE_WRAP_T;throw new Error("Failed pattern match at Graphics.WebGLTexture line 139, column 1 - line 140, column 1: "+[n.constructor.name])},W=function(n,e,t){return r.texParameteri_(z(n),H(e),t)},j=function(n){if(n instanceof C)return r._NEAREST;if(n instanceof S)return r._LINEAR;if(n instanceof P)return r._LINEAR_MIPMAP_NEAREST;throw new Error("Failed pattern match at Graphics.WebGLTexture line 156, column 1 - line 157, column 1: "+[n.constructor.name])},q=function(n){if(n instanceof C)return r._NEAREST;if(n instanceof S)return r._LINEAR;if(n instanceof P)return r._LINEAR;throw new Error("Failed pattern match at Graphics.WebGLTexture line 151, column 1 - line 152, column 1: "+[n.constructor.name])},V=function(n){if(n instanceof y)return r._TEXTURE_2D;if(n instanceof b)return r._TEXTURE_CUBE_MAP_POSITIVE_X;if(n instanceof T)return r._TEXTURE_CUBE_MAP_NEGATIVE_X;if(n instanceof E)return r._TEXTURE_CUBE_MAP_POSITIVE_Y;if(n instanceof F)return r._TEXTURE_CUBE_MAP_NEGATIVE_Y;if(n instanceof x)return r._TEXTURE_CUBE_MAP_POSITIVE_Z;if(n instanceof A)return r._TEXTURE_CUBE_MAP_NEGATIVE_Z;throw new Error("Failed pattern match at Graphics.WebGLTexture line 71, column 1 - line 72, column 1: "+[n.constructor.name])},Z=function(n){return e.bindTexture__(V(n))},X=function(n){if(n instanceof N)return r._PACK_ALIGNMENT;if(n instanceof D)return r._UNPACK_ALIGNMENT;if(n instanceof M)return r._UNPACK_FLIP_Y_WEBGL;if(n instanceof L)return r._UNPACK_PREMULTIPLY_ALPHA_WEBGL;if(n instanceof O)return r._UNPACK_COLORSPACE_CONVERSION_WEBGL;throw new Error("Failed pattern match at Graphics.WebGLTexture line 117, column 1 - line 118, column 1: "+[n.constructor.name])},K=function(n,e){return r.pixelStorei_(X(n),e)},Y=function(n){if(n instanceof I)return r._ALPHA;if(n instanceof R)return r._LUMINANCE;if(n instanceof k)return r._LUMINANCE_ALPHA;if(n instanceof U)return r._RGB;if(n instanceof G)return r._RGBA;throw new Error("Failed pattern match at Graphics.WebGLTexture line 87, column 1 - line 88, column 1: "+[n.constructor.name])},Q=function(n,t,r,o,a,i,u){return e.texImage2DNull_(V(n),t,Y(r),o,a,0,Y(i),J(u))},nn=function(n,e,t,o,a,i,u,c){return r.texImage2D_(V(n),e,Y(t),o,a,0,Y(i),J(u),c)},en=function(n,t,r,o,a,i,u){return e.texSubImage2D__(V(n),t,r,o,Y(a),J(i),u)},tn=function(){var n=r.createTexture_()();return n},rn=function(n,e){return r.bindTexture_(V(n),e)},on=function(n,e,a,i,u,c,s){return function(){return rn(y.value,n)(),W(h.value,w.value,q(c))(),W(h.value,g.value,j(c))(),K(M.value,0)(),K(L.value,0)(),en(y.value,0,e,a,G.value,l.value,s)(),function(){return c instanceof P?r.generateMipmap_(r._TEXTURE_2D):t["return"](o.applicativeEff)(t.unit)}()(),Z(y.value)()}},an=function(n,e,i){return function(){var u=tn();return rn(y.value,u)(),W(h.value,w.value,q(i))(),W(h.value,g.value,j(i))(),a.when$_$_$(o.monadEff,1===(1&(n|e)),function(){return W(h.value,_.value,r._CLAMP_TO_EDGE)(),W(h.value,$.value,r._CLAMP_TO_EDGE)()})(),Q(y.value,0,G.value,n,e,G.value,l.value)(),function(){return i instanceof P?r.generateMipmap_(r._TEXTURE_2D):t["return"](o.applicativeEff)(t.unit)}()(),Z(y.value)(),u}},un=function(n,i,u){return function(){var s=tn(),f=c.newUint8Array(4*(n*i|0)|0);return rn(y.value,s)(),W(h.value,w.value,q(u))(),W(h.value,g.value,j(u))(),a.when$_$_$(o.monadEff,1===(1&(n|i)),function(){return W(h.value,_.value,r._CLAMP_TO_EDGE)(),W(h.value,$.value,r._CLAMP_TO_EDGE)()})(),nn(y.value,0,G.value,n,i,G.value,l.value,e.asArrayBufferView_(f))(),function(){return u instanceof P?r.generateMipmap_(r._TEXTURE_2D):t["return"](o.applicativeEff)(t.unit)}()(),Z(y.value)(),s}},cn=function(n){if(n<r._MAX_COMBINED_TEXTURE_IMAGE_UNITS)return r.activeTexture_(r._TEXTURE0+n|0);if(t.otherwise)return i.fail("WebGLTexture>>activeTexture: wrong argument!");throw new Error("Failed pattern match at Graphics.WebGLTexture line 274, column 1 - line 277, column 1: "+[n.constructor.name])},ln=function(n,e,t,r,o){return function(){return cn(e)(),rn(y.value,n)(),B(t.uLocation)(r)(),o(),Z(y.value)()}};n.NEAREST=C,n.LINEAR=S,n.MIPMAP=P,n.TEXTURE_MIN_FILTER=g,n.TEXTURE_MAG_FILTER=w,n.TEXTURE_WRAP_S=_,n.TEXTURE_WRAP_T=$,n.TTEXTURE_2D=h,n.TTEXTURE_CUBE_MAP=p,n.PACK_ALIGNMENT=N,n.UNPACK_ALIGNMENT=D,n.UNPACK_FLIP_Y_WEBGL=M,n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=L,n.UNPACK_COLORSPACE_CONVERSION_WEBGL=O,n.UNSIGNED_BYTE=l,n.RGBA=s,n.FLOAT=f,n.UNSIGNED_SHORT_5_6_5=d,n.UNSIGNED_SHORT_4_4_4_4=v,n.UNSIGNED_SHORT_5_5_5_1=m,n.IF_ALPHA=I,n.IF_LUMINANCE=R,n.IF_LUMINANCE_ALPHA=k,n.IF_RGB=U,n.IF_RGBA=G,n.TEXTURE_2D=y,n.TEXTURE_CUBE_MAP_POSITIVE_X=b,n.TEXTURE_CUBE_MAP_NEGATIVE_X=T,n.TEXTURE_CUBE_MAP_POSITIVE_Y=E,n.TEXTURE_CUBE_MAP_NEGATIVE_Y=F,n.TEXTURE_CUBE_MAP_POSITIVE_Z=x,n.TEXTURE_CUBE_MAP_NEGATIVE_Z=A,n.targetTypeToConst=V,n.newTextureInit$_$_$=un,n.newTexture$_$_$=an,n.createTexture=tn,n.handleSubLoad2D$_$_$=on,n.unbindTexture=Z,n.bindTexture$_$_$=rn,n.activeTexture=cn,n.withTexture2D$_$_$=ln}(PS["Graphics.WebGLTexture"]=PS["Graphics.WebGLTexture"]||{}),function(n){"use strict";var e=PS["Graphics.WebGLFramebuffer"],t=(PS.Prelude,PS["Control.Monad.Eff.WebGL"],PS["Graphics.WebGLRaw"]),r=PS["Graphics.WebGLTexture"],o=(PS["Control.Monad.Eff"],PS["Data.ArrayBuffer.Types"],PS["Data.TypedArray"]),a=PS["Data.Function"],i=function(){function n(){}return n.value=new n,n}(),u=function(){function n(){}return n.value=new n,n}(),c=function(){function n(){}return n.value=new n,n}(),l=function(){function n(){}return n.value=new n,n}(),s=function(){function n(){}return n.value=new n,n}(),f=function(){function n(){}return n.value=new n,n}(),d=function(){function n(){}return n.value=new n,n}(),v=function(){function n(){}return n.value=new n,n}(),m=function(){function n(){}return n.value=new n,n}(),h=function(){function n(){}return n.value=new n,n}(),p=function(){function n(){}return n.value=new n,n}(),g=function(){function n(){}return n.value=new n,n}(),w=function(){function n(){}return n.value=new n,n}(),_=e.unbindFramebuffer_(t._FRAMEBUFFER),$=function(n){if(n instanceof i)return t._RGBA4;if(n instanceof u)return t._RGB565;if(n instanceof c)return t._RGB5_A1;if(n instanceof l)return t._DEPTH_COMPONENT16;throw new Error("Failed pattern match at Graphics.WebGLFramebuffer line 53, column 1 - line 54, column 1: "+[n.constructor.name])},C=function(n,e,r){return t.renderbufferStorage_(t._RENDERBUFFER,$(n),e,r)},S=function(n,r,a,i,u){var c=o.asUint8Array(o.asArray(u));return function(){return e.readPixels__(n,r,a,i,t._RGBA,t._UNSIGNED_BYTE,c)(),c}},P=function(){var n=t.createRenderbuffer_()();return n},y=function(){var n=t.createFramebuffer_()();return n},b=a.runFn1(t.checkFramebufferStatus_),T=function(n){return t.bindRenderbuffer_(t._RENDERBUFFER,n)},E=function(n){return t.bindFramebuffer_(t._FRAMEBUFFER,n)},F=function(n){if(n instanceof h)return t._COLOR_ATTACHMENT0;if(n instanceof p)return t._DEPTH_ATTACHMENT;if(n instanceof g)return t._STENCIL_ATTACHMENT;if(n instanceof w)return t._DEPTH_STENCIL_ATTACHMENT;throw new Error("Failed pattern match at Graphics.WebGLFramebuffer line 61, column 1 - line 62, column 1: "+[n.constructor.name])},x=function(n,e){return t.framebufferRenderbuffer_(t._FRAMEBUFFER,F(n),t._RENDERBUFFER,e)},A=function(n,e,o){return t.framebufferTexture2D_(t._FRAMEBUFFER,F(n),r.targetTypeToConst(e),o,0)},N=36061,D=36055,M=36057,L=36054,O=36053,I=function(n){if(n instanceof s)return O;if(n instanceof f)return L;if(n instanceof d)return D;if(n instanceof v)return M;if(n instanceof m)return N;throw new Error("Failed pattern match at Graphics.WebGLFramebuffer line 70, column 1 - line 71, column 1: "+[n.constructor.name])};n.FRAMEBUFFER_COMPLETE=s,n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=f,n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=d,n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=v,n.FRAMEBUFFER_UNSUPPORTED=m,n.COLOR_ATTACHMENT0=h,n.DEPTH_ATTACHMENT=p,n.STENCIL_ATTACHMENT=g,n.DEPTH_STENCIL_ATTACHMENT=w,n.RGBA4=i,n.RGB565=u,n.RGB5_A1=c,n.DEPTH_COMPONENT16=l,n.readPixels$_$_$=S,n.frameBufferCodeToConst=I,n.framebufferTexture2D$_$_$=A,n.framebufferRenderbuffer$_$_$=x,n.renderbufferStorage$_$_$=C,n.bindRenderbuffer=T,n.createRenderbuffer=P,n.unbindFramebuffer=_,n.bindFramebuffer=E,n.checkFramebufferStatus=b,n.createFramebuffer=y}(PS["Graphics.WebGLFramebuffer"]=PS["Graphics.WebGLFramebuffer"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.ArrayBuffer.Types"],PS["Data.ST.Matrix4"],PS["Data.STSequence"]),r=PS["Data.StrMap.ST"],o=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.Shaders"],PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.ST"]),a=(PS["Data.Maybe"],PS["Data.Set"],PS["Graphics.Canvas"],
PS["Graphics.WebGL"],PS["Graphics.WebGLFramebuffer"],PS["Graphics.WebGLTexture"],PS.Math),i=(PS["Control.Monad.Eff"],PS["Data.Generic"],PS["ConeCanvas.GeometryTypes"],function(){function n(){}return n.value=new n,n}()),u=function(){function n(){}return n.value=new n,n}(),c=function(){function n(){}return n.value=new n,n}(),l=function(){function n(){}return n.value=new n,n}(),s=function(){function n(){}return n.value=new n,n}(),f=function(){function n(){}return n.value=new n,n}(),d=1.5*a.pi,v=.3,m=5,h=m/5,p=new e.Eq(function(n){return function(e){return n instanceof i&&e instanceof i?!0:n instanceof u&&e instanceof u?!0:n instanceof c&&e instanceof c?!0:!1}}),g=new e.Eq(function(n){return function(e){return n instanceof l&&e instanceof l?!0:n instanceof s&&e instanceof s?!0:n instanceof f&&e instanceof f?!0:!1}}),w={cacheIndex:-1,row:0,column:0,name:"empty"},_=function(){var n=r["new"](),e=t.emptyWithBufferSize(1e3)(),a=o.newSTRef(w)(),i=t.emptyWithBufferSize(1e3)(),u=t.emptyWithBufferSize(1e3)(),c=r["new"](),l=t.emptyWithBufferSize(1e3)(),s=o.newSTRef(w)(),f=t.emptyWithBufferSize(1e3)(),d=t.emptyWithBufferSize(1e3)();return{iconCache:n,iconTextures:e,lastIconPos:a,iconLoad:i,iconPreload:u,iconTextureWidth:128,iconTextureHeight:128,iconCacheColumns:8,iconCacheRows:8,textTextureCache:c,textTextures:l,lastTextTexturePos:s,textLoad:f,textPreload:d,textTextureWidth:320,textTextureWidthP2:512,textTextureHeight:64,textTextureHeightP2:64,textCacheColumns:2,textCacheRows:16}},$={x:0,y:0,z:0},C=1;n.DTCone=l,n.DTLeaf=s,n.DTFloatLabel=f,n.InsideFrustum=i,n.OutsideFrustum=u,n.AboveFrustum=c,n.emptyTexturePos=w,n.emptyTextureCache=_,n.labelHeightFactor=h,n.labelWidthFactor=m,n.coosTop=$,n.startAngleConst=d,n.sphereRadius=v,n.coneRadius=C,n.eqFrustumVerdict=p,n.eqDrawTag=g}(PS["ConeCanvas.Frontend.DrawTypes3d"]=PS["ConeCanvas.Frontend.DrawTypes3d"]||{}),function(n){"use strict";var e=(PS.Prelude,PS["Data.TypeNat"],PS["Data.Matrix"],PS["Data.Maybe"]),t=PS.Extensions,r=function(n){if(16===n.length){var r=n[10]*n[15]-n[11]*n[14],o=n[9]*n[15]-n[11]*n[13],a=n[9]*n[14]-n[10]*n[13],i=n[8]*n[15]-n[11]*n[12],u=n[8]*n[14]-n[10]*n[12],c=n[8]*n[13]-n[9]*n[12],l=n[2]*n[7]-n[3]*n[6],s=n[1]*n[7]-n[3]*n[5],f=n[1]*n[6]-n[2]*n[5],d=n[0]*n[7]-n[3]*n[4],v=n[0]*n[6]-n[2]*n[4],m=n[0]*n[5]-n[1]*n[4],h=m*r-v*o+d*a+f*i-s*u+l*c,p=0===h;if(p)return e.Nothing.value;if(!p){var g=1/h;return e.Just.create([(n[5]*r-n[6]*o+n[7]*a)*g,(n[6]*i-n[4]*r-n[7]*u)*g,(n[4]*o-n[5]*i+n[7]*c)*g,(n[2]*o-n[1]*r-n[3]*a)*g,(n[0]*r-n[2]*i+n[3]*u)*g,(n[1]*i-n[0]*o-n[3]*c)*g,(n[13]*l-n[14]*s+n[15]*f)*g,(n[14]*d-n[12]*l-n[15]*v)*g,(n[12]*s-n[13]*d+n[15]*m)*g])}throw new Error("Failed pattern match at Data.Matrix3 line 51, column 6 - line 66, column 1: "+[p.constructor.name])}return t.fail("Matrix4>>normalFromMat4: Impossible!")};n.normalFromMat4=r}(PS["Data.Matrix3"]=PS["Data.Matrix3"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.TypeNat"],r=PS["Data.Vector3"],o=PS["Graphics.WebGL"],a=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["Data.Int"]),i=PS["Data.Matrix"],u=PS["Data.Matrix3"],c=PS["Data.Matrix4"],l=PS["Data.Maybe"],s=PS["Data.ST.Matrix"],f=(PS["Data.ST.Matrix4"],PS.Extensions),d=PS.Math,v=PS["Control.Monad.Eff"],m=PS["ConeCanvas.ConeModel"],h=function(n,r,a,c){return function(){var n=s.fromSTMat$_$_$(t.s4,r.bindings.mvMatrix)();return o.setUniformFloats$_$_$(r.bindings.uMVMatrix,i.toArray(n))(),function(){if(c){var t=function(){var e=u.normalFromMat4(n);if(e instanceof l.Nothing)return f.fail("ConeView3D setMVMatrix: no inverse of MV matrix");if(e instanceof l.Just)return e.value0;throw new Error("Failed pattern match at ConeCanvas.Frontend.Matrix line 119, column 23 - line 122, column 9: "+[e.constructor.name])}();return o.setUniformFloats$_$_$(r.bindings.uNMatrix,i.toArray(t))}if(!c)return e["return"](v.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.Matrix line 118, column 5 - line 124, column 5: "+[c.constructor.name])}()(),o.setUniformFloats$_$_$(r.bindings.uScale,[a])(),r.bindings.mvMatrix}},p=function(n,e){var t=c.makeOrtho2D$_$_$(-2.5,2.5,-2.5,2.5);return function(){return o.setUniformFloats$_$_$(e.bindings.uPMatrix,i.toArray(t))(),s.copyToSTMat$_$_$(t,e.bindings.pMatrix)(),o.setUniformFloats$_$_$(e.bindings.uMVMatrix,i.toArray(c.identity))(),s.copyToSTMat$_$_$(c.identity,e.bindings.mvMatrix)(),h(n,e,1,!0)(),e.bindings.mvMatrix}},g=function(n,e,r){return function(){var n=s.fromSTMat$_$_$(t.s4,e.bindings.mvMatrix)(),o=r(e.bindings.mvMatrix)();return s.copyToSTMat$_$_$(n,e.bindings.mvMatrix)(),o}},w=function(n){var e=function(){return n.guiStyle instanceof m.OuterLabel?a.toNumber(n.windowSize.x)/a.toNumber(n.windowSize.y):n.prefs.labelRatio*(a.toNumber(n.windowSize.x)/a.toNumber(n.windowSize.y))}();return e},_=7.5,$=10,C=-5,S=function(n,e){var t=C+2.5,o=c.makeLookAt$_$_$(r.vec3$_$_$(0,C,-e.prefs.cameraDistZ),r.vec3$_$_$(0,t,0),r.vec3$_$_$(0,1,0));return function(){return s.copyToSTMat$_$_$(o,e.bindings.mvMatrix)(),e.bindings.mvMatrix}},P=function(n,e,t){var r=_*e.prefs.windowsRatio,a=d.sqrt(e.prefs.cameraDistZ*e.prefs.cameraDistZ+C*C),u=a+$/2,l=a-$/2,f=l/a*_,v=l/a*C+e.prefs.upperOffset,m=l/a*r,h=v+f,p={f1:-m/2,f2:m/2,f3:v,f4:h,f5:l,f6:u},g=c.makeFrustum$_$_$(p.f1/e.controlState.zoom,p.f2/e.controlState.zoom,p.f3/e.controlState.zoom,p.f4/e.controlState.zoom,p.f5,p.f6+t);return function(){o.setUniformFloats$_$_$(e.bindings.uPMatrix,i.toArray(g))(),s.copyToSTMat$_$_$(g,e.bindings.pMatrix)();var t=S(n,e)();return o.enable(o.DEPTH_TEST.value)(),t}};n.setPerspectiveLabel$_$_$=p,n.setMVMatrix$_$_$=h,n.initialMVMatrix$_$_$=S,n.setPerspective$_$_$=P,n.getPerspectiveRatio=w,n.preservingMatrix$_$_$=g}(PS["ConeCanvas.Frontend.Matrix"]=PS["ConeCanvas.Frontend.Matrix"]||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.Int.Bits"],PS["Control.Monad.Eff"]),r=PS["Control.Monad.ST"],o=(PS["Graphics.WebGLAll"],PS["Graphics.WebGLRaw"]),a=PS["Debug.Trace"],i=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Color"]),u=PS["Graphics.WebGL"],c=PS["Graphics.WebGLFramebuffer"],l=PS["Graphics.WebGLTexture"],s=function(n,e){return r.writeSTRef$_$_$(e.bindings.lastPickColor,0)},f=function(n){return n.value0<<16|n.value1<<8|n.value2},d=function(n){return new i.Color4I(n>>16&255,n>>8&255,255&n,1)},v=function(n){return function(){var r=u.getCanvasWidth(n)(),i=u.getCanvasHeight(n)(),s=c.createRenderbuffer();c.bindRenderbuffer(s)();var f=(c.renderbufferStorage$_$_$(c.DEPTH_COMPONENT16.value,r,i)(),c.createFramebuffer());c.bindFramebuffer(f)();var d=l.newTexture$_$_$(r,i,l.NEAREST.value)();c.framebufferTexture2D$_$_$(c.COLOR_ATTACHMENT0.value,l.TEXTURE_2D.value,d)(),c.framebufferRenderbuffer$_$_$(c.DEPTH_ATTACHMENT.value,s)();var v=c.checkFramebufferStatus(o._FRAMEBUFFER)();return function(){if(v===c.frameBufferCodeToConst(c.FRAMEBUFFER_COMPLETE.value))return e["return"](t.applicativeEff)(e.unit);if(e.otherwise)return a.traceA(t.applicativeEff)("initPickbuffer Code: "+e.show(e.showInt)(v));throw new Error("Failed pattern match at ConeCanvas.Frontend.Pickbuffer line 61, column 3 - line 64, column 3: "+[v.constructor.name])}()(),c.unbindFramebuffer(),{buf:f,tex:d}}},m=function(n,e){return r.modifySTRef$_$_$(e.bindings.lastPickColor,function(n){return n+1|0})};n.resetPickColor$_$_$=s,n.getNextPickColor$_$_$=m,n.intToPickColor=d,n.pickColorToInt=f,n.initPickbuffer=v}(PS["ConeCanvas.Frontend.Pickbuffer"]=PS["ConeCanvas.Frontend.Pickbuffer"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS.Math,o=PS["Data.Int"],a=PS["Data.ST.Matrix4"],i=PS["Data.Vector"],u=(PS["Graphics.WebGLAll"],PS["Data.ArrayBuffer.Types"],PS.Extensions),c=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Matrix"]),l=PS["Data.STSequence"],s=PS["ConeCanvas.Frontend.Pickbuffer"],f=PS["ConeCanvas.Color"],d=PS["Control.Monad.Eff"],v=PS["Graphics.WebGL"],m=PS["Graphics.WebGLFramebuffer"],h=[0,0,0],p=60,g=function(n,r,o,i,u,d,h,p,g,w,_){var $=function(){return i.condColor instanceof t.Just?[i.condColor.value0.value0,i.condColor.value0.value1,i.condColor.value0.value2,i.fade]:f.color4toArray(r.prefs.massiveColor)}();return c.preservingMatrix$_$_$(n,r,function(t){return function(){if(a.translateST$_$_$([-u,-d,h],r.bindings.mvMatrix)(),a.scaleST3$_$_$(g,g,g,r.bindings.mvMatrix)(),c.setMVMatrix$_$_$(n,r,g*w,!0)(),v.setUniformBoolean$_$_$(r.bindings.uUseTexture,!1)(),v.setUniformBoolean$_$_$(r.bindings.uSimple,!1)(),v.enableVertexAttribArray(r.bindings.aVertexNormal)(),v.disableVertexAttribArray(r.bindings.aTextureCoord)(),v.setUniformFloats$_$_$(r.bindings.uMaterialAmbient,$)(),v.setUniformFloats$_$_$(r.bindings.uMaterialDiffuse,$)(),v.setUniformFloats$_$_$(r.bindings.uMaterialSpecular,$)(),v.bindBufAndSetVertexAttr$_$_$(r.bindings.nBufferCone,r.bindings.aVertexNormal)(),v.drawArr$_$_$(v.TRIANGLE_FAN.value,r.bindings.vBufferCone,r.bindings.aVertexPosition)(),e.unit,o.needClickInfos){var t=s.getNextPickColor$_$_$(n,r)(),i=s.intToPickColor(t);return m.bindFramebuffer(r.bindings.pickBuffer.buf)(),v.setUniformBoolean$_$_$(r.bindings.uUseTexture,!1)(),v.setUniformBoolean$_$_$(r.bindings.uSimple,!0)(),v.disableVertexAttribArray(r.bindings.aVertexNormal)(),v.disableVertexAttribArray(r.bindings.aTextureCoord)(),v.setUniformFloats$_$_$(r.bindings.uMaterialAmbient,f.color4toArray(f.color4IToColor4(i)))(),v.bindBufAndSetVertexAttr$_$_$(r.bindings.vertexCoos,r.bindings.aVertexPosition)(),v.bindBuf(r.bindings.vertexIndices)(),v.drawArr$_$_$(v.TRIANGLE_FAN.value,r.bindings.vBufferCone,r.bindings.aVertexPosition)(),m.unbindFramebuffer(),v.viewport(0)(0)(r.windowSize.x)(r.windowSize.y)(),l.push$_$_$(o.ciAccu,{pickColor:t,clickIndex:_})(),e.unit}if(!o.needClickInfos)return e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.Cone line 68, column 11 - line 89, column 31: "+[o.needClickInfos.constructor.name])}})},w=function(n,e,t){if(3===n.length&&3===e.length&&3===t.length){var r=t[2]-n[2],o=t[1]-n[1],a=t[0]-n[0],c=e[2]-n[2],l=e[1]-n[1],s=e[0]-n[0];return i.toArray(i.normalize([l*r-c*o,c*a-s*r,s*o-l*a]))}return u.fail("WebGLHelpers>>calcNormal: Wrong array size!")},_=function(n){var a=2*r.pi/o.toNumber(p),i=r.sin(a),u=r.cos(a),c=function(r){return function(o){return function(a){return function(s){return function(f){return function(v){if(a>p){var m=[-s,-n,f];if(v instanceof t.Just)return function(){return l.pushAll$_$_$(o,w(m,h,v.value0))(),e.unit};if(v instanceof t.Nothing)return e["return"](d.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.Cone line 120, column 13 - line 125, column 9: "+[v.constructor.name])}if(e.otherwise){var m=[-s,-n,f];return function(){return l.pushAll$_$_$(r,m)(),function(){if(v instanceof t.Just)return function(){return l.pushAll$_$_$(o,w(m,h,v.value0))(),e.unit};if(v instanceof t.Nothing)return e["return"](d.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.Cone line 128, column 13 - line 133, column 13: "+[v.constructor.name])}()(),c(r)(o)(a+1|0)(u*s-i*f)(i*s+u*f)(new t.Just(m))()}}throw new Error("Failed pattern match at ConeCanvas.Frontend.Cone line 117, column 5 - line 136, column 1: "+[r.constructor.name,o.constructor.name,a.constructor.name,s.constructor.name,f.constructor.name,v.constructor.name])}}}}}};return function(){var n=l.empty(),e=l.empty();l.pushAll$_$_$(n,h)(),l.pushAll$_$_$(e,[0,0,0])(),c(n)(e)(0)(1)(0)(t.Nothing.value)();var r=l.toArray(n)(),o=l.toArray(e)(),a=v.makeBufferFloat(r)(),i=v.makeBufferFloat(o)();return{vBuffer:a,nBuffer:i}}};n.calcNormal$_$_$=w,n.prepareConeXZ=_,n.drawConeXZ$_$_$=g}(PS["ConeCanvas.Frontend.Cone"]=PS["ConeCanvas.Frontend.Cone"]||{}),function(n){"use strict";n.fillText2$_$_$=function(n,e,t,r,o){return function(){return n.fillText(e,t,r,o),n}},n.setTextBaseline$_$_$=function(n,e){return function(){return e.textBaseline=n,e}}}(PS["ConeCanvas.Frontend.Text"]=PS["ConeCanvas.Frontend.Text"]||{}),function(n){"use strict";var e=PS["ConeCanvas.Frontend.Text"],t=(PS.Prelude,PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["Control.Monad.Eff"],PS["Data.Maybe"]),r=PS.Extensions,o=PS["Graphics.Canvas"],a=PS["ConeCanvas.Color"],i=function(n,i,u){return function(){var n=o.getCanvasElementById("textureCanvas")();if(n instanceof t.Nothing)return r.fail("Card>>makeTextTexture: missing hidden canvas: textureCanvas")();if(n instanceof t.Just){var c=o.getContext2D(n.value0)(),l=o.getCanvasWidth(n.value0)(),s=o.getCanvasHeight(n.value0)();return e.setTextBaseline$_$_$("bottom",c)(),o.setTextAlign$_$_$(c,o.AlignCenter.value)(),o.setFont$_$_$(i.prefs.fontStyle,c)(),o.clearRect$_$_$(c,{x:0,y:0,w:l,h:s})(),o.setFillStyle$_$_$(a.color4IasFillStyle(i.prefs.textColor),c)(),e.fillText2$_$_$(c,u,l/2,s-6,l-6)(),n.value0}throw new Error("Failed pattern match at ConeCanvas.Frontend.Text line 35, column 3 - line 50, column 1: "+[n.constructor.name])}};n.makeText$_$_$=i}(PS["ConeCanvas.Frontend.Text"]=PS["ConeCanvas.Frontend.Text"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.StrMap.ST"],r=(PS["Data.Vector"],PS["Graphics.Canvas"]),o=PS["Control.Monad.ST"],a=(PS["Data.ArrayBuffer.Types"],PS["Data.Int"]),i=PS["Data.Maybe"],u=PS["Data.STSequence"],c=(PS["Graphics.WebGLAll"],PS["Data.ST.Matrix4"]),l=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Matrix"]),s=PS["ConeCanvas.Frontend.Text"],f=PS["ConeCanvas.Frontend.Pickbuffer"],d=PS["Data.TypedArray"],v=PS.Extensions,m=PS["Control.Monad.Eff"],h=PS["Graphics.WebGL"],p=PS["Graphics.WebGLTexture"],g=PS["Graphics.WebGLFramebuffer"],w=PS["ConeCanvas.Color"],_=PS["ConeCanvas.ConeControl"],$=function(){var n=h.makeBufferFloatDyn([0,0,1,0,1,1,0,1])(),t=h.makeBuffer$_$_$(e.moduloSemiringInt,h.ELEMENT_ARRAY_BUFFER.value,d.asUint16Array,[0,1,2,0,2,3])(),r=h.makeBufferFloat([0,0,0,1,0,0,1,1,0,0,1,0])();return{textureCoords:n,vertexIndices:t,vertexCoos:r}},C=function(n){return function(){var e=r.getCanvasElementById("iconCanvas")();if(e instanceof i.Nothing)return v.fail("Card>>makeIcon: missing hidden canvas: iconCanvas")();if(e instanceof i.Just){var t=r.getContext2D(e.value0)(),o=r.getCanvasWidth(e.value0)(),a=r.getCanvasHeight(e.value0)();return r.clearRect$_$_$(t,{x:0,y:0,w:o,h:a})(),r.drawImageScale$_$_$(t,n,0,0,o,a)(),e.value0}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 378, column 5 - line 388, column 1: "+[e.constructor.name])}},S=function(n,t){return function(){var r=u.peek$_$_$(n.textTextures,t.cacheIndex)();if(r instanceof i.Nothing)return v.fail("Textures>>lookupTextTexturePos: textureIndex invalid: "+e.show(e.showInt)(t.cacheIndex))();if(r instanceof i.Just)return{x1:a.toNumber(t.column)/a.toNumber(n.textCacheColumns),x2:(a.toNumber(t.column)+a.toNumber(n.textTextureWidth)/a.toNumber(n.textTextureWidthP2))/a.toNumber(n.textCacheColumns),y1:a.toNumber(t.row)/a.toNumber(n.textCacheRows),y2:(a.toNumber(t.row)+a.toNumber(n.textTextureHeight)/a.toNumber(n.textTextureHeightP2))/a.toNumber(n.textCacheRows),texture:r.value0};throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 167, column 5 - line 178, column 1: "+[r.constructor.name])}},P=function(n,t){return function(){var r=u.peek$_$_$(n.iconTextures,t.cacheIndex)();if(r instanceof i.Nothing)return v.fail("Textures>>lookupIconTexturePos: textureIndex invalid: "+e.show(e.showInt)(t.cacheIndex))();if(r instanceof i.Just)return{x1:a.toNumber(t.column)/a.toNumber(n.iconCacheColumns),x2:a.toNumber(t.column+1|0)/a.toNumber(n.iconCacheColumns),y1:a.toNumber(t.row)/a.toNumber(n.iconCacheRows),y2:a.toNumber(t.row+1|0)/a.toNumber(n.iconCacheRows),texture:r.value0};throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 211, column 5 - line 220, column 1: "+[r.constructor.name])}},y=function(n,r,o,a){return function(){var n=t.peek(r.bindings.textureCache.textTextureCache)(o)();if(n instanceof i.Just&&n.value0 instanceof i.Just){var c=S(r.bindings.textureCache,n.value0.value0)();return a(c)()}if(n instanceof i.Just&&n.value0 instanceof i.Nothing)return e.unit;if(n instanceof i.Nothing)return u.push$_$_$(r.bindings.textureCache.textLoad,o)(),t.poke$_$_$(r.bindings.textureCache.textTextureCache,o,i.Nothing.value)(),e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 154, column 3 - line 164, column 1: "+[n.constructor.name])}},b=function(n,e){var t=function(){var t=p.newTextureInit$_$_$(n.textCacheColumns*n.textTextureWidthP2|0,n.textCacheRows*n.textTextureHeightP2|0,p.MIPMAP.value)();u.push$_$_$(n.textTextures,t)();var r=u.length(n.textTextures)();return{cacheIndex:r-1,row:0,column:0,name:e}};return function(){var e=o.readSTRef(n.lastTextTexturePos)(),r=e.cacheIndex<0;if(r)return t();if(!r){var a=e.column<n.textCacheColumns-1;if(a){var i={};for(var u in e)e.hasOwnProperty(u)&&(i[u]=e[u]);return i.column=e.column+1|0,i}if(!a){var c=e.row<n.textCacheRows-1;if(c){var l={};for(var s in e)e.hasOwnProperty(s)&&(l[s]=e[s]);return l.column=0,l.row=e.row+1|0,l}if(!c)return t();throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 337, column 18 - line 340, column 3: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 335, column 14 - line 340, column 3: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 333, column 5 - line 340, column 3: "+[r.constructor.name])}},T=function(n,e){var t=function(){var t=p.newTextureInit$_$_$(n.iconCacheColumns*n.iconTextureWidth|0,n.iconCacheRows*n.iconTextureHeight|0,p.LINEAR.value)();u.push$_$_$(n.iconTextures,t)();var r=u.length(n.iconTextures)();return{cacheIndex:r-1,row:0,column:0,name:e}};return function(){var e=o.readSTRef(n.lastIconPos)(),r=e.cacheIndex<0;if(r)return t();if(!r){var a=e.column<n.iconCacheColumns-1;if(a){var i={};for(var u in e)e.hasOwnProperty(u)&&(i[u]=e[u]);return i.column=e.column+1|0,i}if(!a){var c=e.row<n.iconCacheRows-1;if(c){var l={};for(var s in e)e.hasOwnProperty(s)&&(l[s]=e[s]);return l.column=0,l.row=e.row+1|0,l}if(!c)return t();throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 395, column 18 - line 398, column 3: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 393, column 14 - line 398, column 3: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 391, column 5 - line 398, column 3: "+[r.constructor.name])}},E=function(n,r,o,a){var c=function(n){return function(){u.push$_$_$(r.bindings.textureCache.iconLoad,{name:o,image:n})();u.toArray(r.bindings.textureCache.iconLoad)();return e.unit}};return function(){var n=t.peek(r.bindings.textureCache.iconCache)(o)();if(n instanceof i.Just&&n.value0 instanceof i.Just){var u=P(r.bindings.textureCache,n.value0.value0)();return a(u)()}if(n instanceof i.Just&&n.value0 instanceof i.Nothing)return e.unit;if(n instanceof i.Nothing)return t.poke$_$_$(r.bindings.textureCache.iconCache,o,i.Nothing.value)(),r.loadIconCallback(o)(c)();throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 186, column 9 - line 197, column 3: "+[n.constructor.name])}},F=function(n,t,r,o,a,s,d,v,m,_){return l.preservingMatrix$_$_$(n,t,function($){return function(){c.translateST$_$_$([o,-(a+d),0],t.bindings.mvMatrix)(),c.scaleST3$_$_$(s,d,1,t.bindings.mvMatrix)(),l.setMVMatrix$_$_$(n,t,m,!1)();var $=[r.x1,r.y2,r.x2,r.y2,r.x2,r.y1,r.x1,r.y1];if(h.fillBuffer$_$_$(t.bindings.textureCoords,0,$)(),h.setUniformBoolean$_$_$(t.bindings.uUseTexture,!0)(),h.setUniformBoolean$_$_$(t.bindings.uSimple,!1)(),h.setUniformFloats$_$_$(t.bindings.uTexAmbiance,[v])(),h.disableVertexAttribArray(t.bindings.aVertexNormal)(),h.enableVertexAttribArray(t.bindings.aTextureCoord)(),h.bindBufAndSetVertexAttr$_$_$(t.bindings.vertexCoos,t.bindings.aVertexPosition)(),h.bindBufAndSetVertexAttr$_$_$(t.bindings.textureCoords,t.bindings.aTextureCoord)(),p.withTexture2D$_$_$(r.texture,0,t.bindings.uSampler,0,function(){return h.bindBuf(t.bindings.vertexIndices)(),h.colorMask(!0)(!0)(!0)(!1)(),h.drawElements$_$_$(h.TRIANGLES.value,6)(),h.colorMask(!0)(!0)(!0)(!0)()})(),_ instanceof i.Just){var C=f.getNextPickColor$_$_$(n,t)(),S=f.intToPickColor(C);return g.bindFramebuffer(t.bindings.pickBuffer.buf)(),h.setUniformBoolean$_$_$(t.bindings.uUseTexture,!1)(),h.setUniformBoolean$_$_$(t.bindings.uSimple,!0)(),h.disableVertexAttribArray(t.bindings.aVertexNormal)(),h.disableVertexAttribArray(t.bindings.aTextureCoord)(),h.setUniformFloats$_$_$(t.bindings.uMaterialAmbient,w.color4toArray(w.color4IToColor4(S)))(),h.bindBufAndSetVertexAttr$_$_$(t.bindings.vertexCoos,t.bindings.aVertexPosition)(),h.bindBuf(t.bindings.vertexIndices)(),h.drawElements$_$_$(h.TRIANGLES.value,6)(),g.unbindFramebuffer(),h.viewport(0)(0)(t.windowSize.x)(t.windowSize.y)(),u.push$_$_$(_.value0.ciAccu,{pickColor:C,clickIndex:_.value0.clickIndex})(),e.unit}if(_ instanceof i.Nothing)return e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 81, column 9 - line 107, column 1: "+[_.constructor.name])}})},x=function(n,t,r,o,a,s,d,v,m,p){if(r instanceof i.Just)return F(n,t,r.value0,o,a,s,d,v,m,p);if(r instanceof i.Nothing)return l.preservingMatrix$_$_$(n,t,function(r){return function(){if(c.translateST$_$_$([o,-(a+d),0],t.bindings.mvMatrix)(),c.scaleST3$_$_$(s,d,1,t.bindings.mvMatrix)(),l.setMVMatrix$_$_$(n,t,m,!1)(),h.setUniformFloats$_$_$(t.bindings.uMaterialAmbient,w.color4toArray(t.prefs.rectColor))(),h.setUniformBoolean$_$_$(t.bindings.uUseTexture,!1)(),h.setUniformBoolean$_$_$(t.bindings.uSimple,!0)(),h.drawArr$_$_$(h.LINE_LOOP.value,t.bindings.vertexCoos,t.bindings.aVertexPosition)(),p instanceof i.Just){var r=f.getNextPickColor$_$_$(n,t)(),v=f.intToPickColor(r);return g.bindFramebuffer(t.bindings.pickBuffer.buf)(),h.setUniformBoolean$_$_$(t.bindings.uUseTexture,!1)(),h.setUniformBoolean$_$_$(t.bindings.uSimple,!0)(),h.disableVertexAttribArray(t.bindings.aVertexNormal)(),h.disableVertexAttribArray(t.bindings.aTextureCoord)(),h.setUniformFloats$_$_$(t.bindings.uMaterialAmbient,w.color4toArray(w.color4IToColor4(v)))(),h.bindBufAndSetVertexAttr$_$_$(t.bindings.vertexCoos,t.bindings.aVertexPosition)(),h.bindBuf(t.bindings.vertexIndices)(),h.drawElements$_$_$(h.TRIANGLES.value,6)(),g.unbindFramebuffer(),h.viewport(0)(0)(t.windowSize.x)(t.windowSize.y)(),u.push$_$_$(p.value0.ciAccu,{pickColor:r,clickIndex:p.value0.clickIndex})(),e.unit}if(p instanceof i.Nothing)return e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 124, column 13 - line 148, column 1: "+[p.constructor.name])}});throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 110, column 5 - line 148, column 1: "+[r.constructor.name])},A=function(n,r){return function(){var a=u.last(r.bindings.textureCache.textLoad)();if(a instanceof i.Nothing)return!1;if(a instanceof i.Just){var c=s.makeText$_$_$(n,r,a.value0)(),l=b(r.bindings.textureCache,a.value0)(),f=u.peek$_$_$(r.bindings.textureCache.textTextures,l.cacheIndex)();if(f instanceof i.Nothing)return v.fail("Textures>>constructTextTexture: Index failure: "+e.show(e.showInt)(l.cacheIndex))();if(f instanceof i.Just)return p.bindTexture$_$_$(p.TEXTURE_2D.value,f.value0)(),p.handleSubLoad2D$_$_$(f.value0,r.bindings.textureCache.textTextureWidthP2*l.column|0,r.bindings.textureCache.textTextureHeightP2*l.row|0,r.bindings.textureCache.textTextureWidth,r.bindings.textureCache.textTextureHeight,p.MIPMAP.value,c)(),p.unbindTexture(p.TEXTURE_2D.value)(),u.pop(r.bindings.textureCache.textLoad)(),t.poke$_$_$(r.bindings.textureCache.textTextureCache,a.value0,new i.Just(l))(),o.writeSTRef$_$_$(r.bindings.textureCache.lastTextTexturePos,l)(),!0;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 316, column 13 - line 330, column 1: "+[f.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 310, column 5 - line 330, column 1: "+[a.constructor.name])}},N=function(n,r){return function(){var n=u.last(r.bindings.textureCache.iconLoad)();if(n instanceof i.Nothing)return!1;if(n instanceof i.Just){var a=T(r.bindings.textureCache,n.value0.name)(),c=u.peek$_$_$(r.bindings.textureCache.iconTextures,a.cacheIndex)();if(c instanceof i.Nothing)return v.fail("Textures>>constructIconTexture: Index failure: "+e.show(e.showInt)(a.cacheIndex))();if(c instanceof i.Just){var l=C(n.value0.image)();return p.bindTexture$_$_$(p.TEXTURE_2D.value,c.value0)(),p.handleSubLoad2D$_$_$(c.value0,r.bindings.textureCache.iconTextureWidth*a.column|0,r.bindings.textureCache.iconTextureHeight*a.row|0,r.bindings.textureCache.iconTextureWidth,r.bindings.textureCache.iconTextureHeight,p.MIPMAP.value,l)(),p.unbindTexture(p.TEXTURE_2D.value)(),u.pop(r.bindings.textureCache.iconLoad)(),t.poke$_$_$(r.bindings.textureCache.iconCache,n.value0.name,new i.Just(a))(),o.writeSTRef$_$_$(r.bindings.textureCache.lastIconPos,a)(),!0}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 359, column 17 - line 375, column 1: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 353, column 5 - line 375, column 1: "+[n.constructor.name])}},D=function(n,e,t,r,o,a){return function(){var i=n,c=e,l=t,s=r,f=o,d=a;n:for(;;){var v=_.getMillisecondsTime(),m=v-s>l;if(m)return d;if(!m){var h=function(){if(f)return A(i,c);if(!f)return N(i,c);throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 252, column 26 - line 255, column 13: "+[f.constructor.name])}()(),p=(_.getMillisecondsTime(),u.length(c.bindings.textureCache.textLoad)()),g=u.length(c.bindings.textureCache.iconLoad)(),w=(u.toArray(c.bindings.textureCache.iconLoad)(),0===(p+g|0));if(w)return d||h;if(!w){var $=0!==p,C=i,S=c,P=l,y=s,b=d||h;i=C,c=S,l=P,s=y,f=$,d=b;continue n}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 299, column 13 - line 305, column 1: "+[w.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 249, column 5 - line 305, column 1: "+[m.constructor.name])}}},M=function(n,t,r){return function(){var a=_.getMillisecondsTime(),i=u.length(t.bindings.textureCache.textLoad)(),c=u.length(t.bindings.textureCache.iconLoad)();return function(){var u=0===(i+c|0);if(u)return e["return"](m.applicativeEff)(e.unit);if(!u){var l=0!==i;return function(){var i=D(n,t,r,a,l,!1)();if(i)return o.writeSTRef$_$_$(t.controlState.needRepaint,!0)(),e.unit;if(!i)return e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 232, column 13 - line 237, column 5: "+[i.constructor.name])}}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 227, column 5 - line 237, column 5: "+[u.constructor.name])}()(),e.unit}};n.constructTextures$_$_$=M,n.getIcon$_$_$=E,n.rectangle$_$_$=x,n.prepareTexture=$,n.drawTexture$_$_$=F,n.getTextTexture$_$_$=y}(PS["ConeCanvas.Frontend.Textures"]=PS["ConeCanvas.Frontend.Textures"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Int"],o=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),a=(PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Textures"]),i=(PS["Data.STSequence"],PS["Control.Monad.Eff"]),u=1,c=function(n,r,i,u,c,l){var s=function(n){if(n instanceof t.Just)return n.value0;if(n instanceof t.Nothing)return{x:0,y:0,z:0};throw new Error("Failed pattern match at ConeCanvas.Frontend.ControlArea line 111, column 7 - line 112, column 7: "+[n.constructor.name])};return function(){a.rectangle$_$_$(n,r,t.Nothing.value,u.x,-u.y,c.x,c.y,1,1,t.Nothing.value)();var f=c.x*l,d=r.controlState.zoomControl*((c.y-f)/2),v=-(u.y+(d-c.y/2+f/2)),m=o.getConeFront(r.frontend),h=m.userToDevice(r)({x:u.x+c.x/2,y:u.y-f/2,z:1})(),p=m.userToDevice(r)({x:u.x+c.x-c.x/2,y:u.y-c.y+f/2,z:1})();return a.getIcon$_$_$(n,r,"Handle2.png",function(e){return a.drawTexture$_$_$(n,r,e,u.x,v,c.x,f,1,1,new t.Just({clickIndex:new o.CIZoom({leftTopFront:s(h),rightBottomRear:s(p)}),ciAccu:i}))})(),e.unit}},l=function(n,r,i,c,l,s){var f=function(n){if(n instanceof t.Just)return n.value0;if(n instanceof t.Nothing)return{x:0,y:0,z:0};throw new Error("Failed pattern match at ConeCanvas.Frontend.ControlArea line 83, column 5 - line 84, column 5: "+[n.constructor.name])},d=l.x/4,v=c.x+l.x/2-d/2,m=r.controlState.angleSelect.x*((l.x-d)/2),h=c.x+m+l.x/2-d/2,p=d*s,g=c.y+(-(l.y/2)+p/2),w=r.controlState.angleSelect.y*((l.y-p)/2),_=c.y+(w-l.y/2+p/2),$=o.getConeFront(r.frontend);return function(){var s=$.userToDevice(r)({x:c.x,y:c.y,z:u})(),m=$.userToDevice(r)({x:c.x+l.x,y:c.y-l.y,z:u})(),w=new o.CITurn({leftTopFront:f(s),rightBottomRear:f(m)});a.rectangle$_$_$(n,r,t.Nothing.value,c.x,-c.y,l.x,l.y,1,1,new t.Just({clickIndex:w,ciAccu:i}))(),a.getIcon$_$_$(n,r,"Turn.png",function(e){return a.drawTexture$_$_$(n,r,e,v,-g,d,p,1,1,t.Nothing.value)})();var C=$.userToDevice(r)({x:c.x+d/2,y:c.y-p/2,z:1})(),S=$.userToDevice(r)({x:c.x+l.x-d/2,y:c.y-l.y+p/2,z:1})(),P=new o.CIAngel({leftTopFront:f(C),rightBottomRear:f(S)});return a.getIcon$_$_$(n,r,"Handle.png",function(e){return a.drawTexture$_$_$(n,r,e,h,-_,d,p,1,1,new t.Just({clickIndex:P,ciAccu:i}))})(),e.unit}},s=function(n,t,o){var a=r.toNumber(t.windowSize.x)/r.toNumber(t.windowSize.y);if(t.controlState.showControl)return function(){return l(n,t,o,{x:1.375,y:2.48},{x:1,y:1*a},a)(),c(n,t,o,{x:2.375,y:2.48},{x:.1,y:1*a},a)()};if(!t.controlState.showControl)return e["return"](i.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.ControlArea line 36, column 5 - line 40, column 3: "+[t.controlState.showControl.constructor.name])};n.coneDrawControls2$_$_$=s}(PS["ConeCanvas.Frontend.ControlArea"]=PS["ConeCanvas.Frontend.ControlArea"]||{}),function(n){"use strict";n.asDataView=function(n){return new DataView(n)},n.getFloat32Unsafe=function(n,e,t){return n.getFloat32(e,t)}}(PS["Data.DataView"]=PS["Data.DataView"]||{}),function(n){"use strict";var e=PS["Data.DataView"];PS.Prelude,PS["Data.Function"],PS["Data.Maybe"],PS["Data.ArrayBuffer.Types"];n.getFloat32Unsafe=e.getFloat32Unsafe,n.asDataView=e.asDataView}(PS["Data.DataView"]=PS["Data.DataView"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Graphics.WebGL"],o=PS["Data.ST.Matrix4"],a=(PS["Data.ArrayBuffer.Types"],PS["Control.Monad.ST"]),i=PS["Data.StrMap.ST"],u=PS["Data.Map"],c=PS["Data.STSequence"],l=PS["Data.DataView"],s=PS["Data.Array"],f=(PS["Data.Array.Unsafe"],PS["Data.Vector3"]),d=(PS["Data.Function"],PS["Data.List"]),v=PS.Math,m=PS["Data.Int"],h=PS["Data.Foldable"],p=PS["Data.Traversable"],g=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Matrix"]),w=PS["ConeCanvas.Color"],_=PS["Control.Monad.Eff"],$=PS["ConeCanvas.GeometryTypes"],C=function(n,e,t,r){return v.min$_$_$(v.min$_$_$(v.min$_$_$(n,e),t),r)},S=function(n,e,t,r){return v.max$_$_$(v.max$_$_$(v.max$_$_$(n,e),t),r)},P=function(n,a,i,u,c,l,s,f,d,m){var h=v.abs(u.extent.maxX-u.extent.minX),p=s/(1.5*h),_=(v.abs(u.extent.maxZ-u.extent.minZ),v.abs(u.extent.maxY-u.extent.minY),function(){return i.condColor instanceof t.Just?[i.condColor.value0.value0,i.condColor.value0.value1,i.condColor.value0.value2,1]:w.color4toArray(a.prefs.massiveColor)}());return g.preservingMatrix$_$_$(n,a,function(t){return function(){return o.rotateSTX$_$_$(-v.pi/2,a.bindings.mvMatrix)(),o.scaleST3$_$_$(p,p,p,a.bindings.mvMatrix)(),g.setMVMatrix$_$_$(n,a,p,!0)(),r.setUniformBoolean$_$_$(a.bindings.uUseTexture,!1)(),r.setUniformBoolean$_$_$(a.bindings.uSimple,!1)(),r.disableVertexAttribArray(a.bindings.aTextureCoord)(),r.enableVertexAttribArray(a.bindings.aVertexNormal)(),r.setUniformFloats$_$_$(a.bindings.uMaterialAmbient,_)(),r.setUniformFloats$_$_$(a.bindings.uMaterialDiffuse,_)(),r.setUniformFloats$_$_$(a.bindings.uMaterialSpecular,_)(),
r.bindBufAndSetVertexAttr$_$_$(u.normals,a.bindings.aVertexNormal)(),r.drawArr$_$_$(r.TRIANGLES.value,u.triangles,a.bindings.aVertexPosition)(),e.unit}})},y=function(n,r,o){var a=function(n){var t=m.toNumber(d.length(n.indices)),r=f.vec3$_$_$(n.normal.x/t,n.normal.y/t,n.normal.z/t);return function(){return p.traverse(d.traversableList)(_.applicativeEff)(function(n){return function(){return c.poke$_$_$(o,3*n|0,f.get3X(r))(),c.poke$_$_$(o,(3*n|0)+1|0,f.get3Y(r))(),c.poke$_$_$(o,(3*n|0)+2|0,f.get3Z(r))()}})(n.indices)(),e.unit}},i=function(o){return function(a){var i=r[(3*o|0)+2|0],c=r[(3*o|0)+1|0],l=r[3*o|0],s={x:l,y:c,z:i},f=n[(3*(o/3|0)|0)+2|0],v=n[(3*(o/3|0)|0)+1|0],m=n[3*(o/3|0)|0],h={x:m,y:v,z:f},p=u.lookup$_$_$($.ordPoint3(e.ordNumber),s,a);if(p instanceof t.Nothing)return u.insert($.ordPoint3(e.ordNumber))(s)({normal:h,indices:d.singleton(o)})(a);if(p instanceof t.Just)return u.update$_$_$($.ordPoint3(e.ordNumber),function(n){return new t.Just({normal:{x:m+p.value0.normal.x,y:v+p.value0.normal.y,z:f+p.value0.normal.z},indices:d[":"](o)(p.value0.indices)})},s,a);throw new Error("Failed pattern match at ConeCanvas.Frontend.STL line 165, column 12 - line 170, column 5: "+[p.constructor.name])}},l=h.foldr(h.foldableArray)(i)(u.empty)(s.range$_$_$(0,(s.length(r)/3|0)-1));return function(){return p.traverse(u.traversableMap($.ordPoint3(e.ordNumber)))(_.applicativeEff)(a)(l)(),e.unit}},b=function(n,e,t){var o=l.asDataView(e),a=function(n){return function(e){return function(t){return function(r){var a=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+8|0,!0),i=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+4|0,!0),u=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+0|0,!0);return function(){c.poke$_$_$(n,0+(3*r|0)|0,u)(),c.poke$_$_$(n,1+(3*r|0)|0,i)(),c.poke$_$_$(n,2+(3*r|0)|0,a)();var s=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+44|0,!0),f=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+32|0,!0),d=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+20|0,!0),v=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+40|0,!0),m=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+28|0,!0),h=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+16|0,!0),p=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+36|0,!0),g=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+24|0,!0),w=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+12|0,!0);return c.poke$_$_$(e,0+(9*r|0)|0,w)(),c.poke$_$_$(e,1+(9*r|0)|0,h)(),c.poke$_$_$(e,2+(9*r|0)|0,d)(),c.poke$_$_$(e,3+(9*r|0)|0,g)(),c.poke$_$_$(e,4+(9*r|0)|0,m)(),c.poke$_$_$(e,5+(9*r|0)|0,f)(),c.poke$_$_$(e,6+(9*r|0)|0,p)(),c.poke$_$_$(e,7+(9*r|0)|0,v)(),c.poke$_$_$(e,8+(9*r|0)|0,s)(),{minX:C(t.minX,w,g,p),maxX:S(t.maxX,w,g,p),minY:C(t.minY,h,m,v),maxY:S(t.maxY,h,m,v),minZ:C(t.minZ,d,f,s),maxZ:S(t.maxZ,d,f,s)}}}}}};return function(){var e=c.fromArray(s.replicate$_$_$(3*n|0,0))(),o=c.fromArray(s.replicate$_$_$(9*n|0,0))(),i={minX:1e3,maxX:-1e3,minY:1e3,maxY:-1e3,minZ:1e3,maxZ:-1e3},u=s.foldM$_$_$(_.monadEff,a(e)(o),i)(s.range$_$_$(0,n-1))(),l=c.toArray(e)(),f=c.toArray(o)(),d=c.fromArray(s.replicate$_$_$(9*n|0,0))();y(l,f,d)();var v=c.toArray(d)(),m=r.makeBufferFloat(f)(),h=r.makeBufferFloat(v)();return{name:t,size:n,normals:h,triangles:m,extent:u}}},T=function(n,r,o,u){var c=function(n){return function(u){return 0===n?e["return"](_.applicativeEff)(e.unit):function(){var c=b(n,u,o)();return i.poke$_$_$(r.bindings.stlCache,o,new t.Just(c))(),a.writeSTRef$_$_$(r.controlState.needRepaint,!0)(),e.unit}}};return function(){var n=i.peek(r.bindings.stlCache)(o)();if(n instanceof t.Just&&n.value0 instanceof t.Just)return u(n.value0.value0)();if(n instanceof t.Just&&n.value0 instanceof t.Nothing)return e.unit;if(n instanceof t.Nothing)return i.poke$_$_$(r.bindings.stlCache,o,t.Nothing.value)(),r.loadSTLCallback(o)(c)(),e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.STL line 81, column 5 - line 88, column 3: "+[n.constructor.name])}};n.getSTL$_$_$=T,n.drawSTL$_$_$=P,n.makeSTL$_$_$=b}(PS["ConeCanvas.Frontend.STL"]=PS["ConeCanvas.Frontend.STL"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.ST.Matrix4"],r=PS["Data.STSequence"],o=PS["Data.String"],a=PS["Data.Vector3"],i=PS["Graphics.WebGL"],u=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),c=PS["ConeCanvas.Frontend.Cone"],l=PS["ConeCanvas.Frontend.ControlArea"],s=PS["ConeCanvas.Frontend.DrawTypes3d"],f=PS["ConeCanvas.Frontend.Matrix"],d=PS["ConeCanvas.Frontend.STL"],v=PS["ConeCanvas.Frontend.Textures"],m=PS["Control.Monad.ST"],h=PS["Data.Array"],p=PS["Data.Foldable"],g=PS["Data.Int"],w=PS["Data.Maybe"],_=PS["Debug.Trace"],$=PS.Extensions,C=PS.Math,S=PS["Control.Monad.Eff"],P=PS["ConeCanvas.ConeControl"],y=PS["ConeCanvas.ConeZipper"],b=function(n){return function(t){var r=t%60!==0;if(r)return e["return"](S.applicativeEff)(!1);if(!r)return function(){var e=m.readSTRef(n.animatePaintRef)();if(e instanceof w.Nothing)return!1;if(e instanceof w.Just){var t=P.getMillisecondsTime(),r=t-e.value0>2*P.stepTime;if(r)return m.writeSTRef$_$_$(n.controlState.needRepaint,!0)();if(!r)return!1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 143, column 21 - line 150, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 139, column 13 - line 150, column 1: "+[e.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 135, column 5 - line 150, column 1: "+[r.constructor.name])}},T=function(n,r,u,c,l,d,m,h,p,g){return f.preservingMatrix$_$_$(n,u,function(f){var _=d*s.labelWidthFactor,$=d*s.labelHeightFactor;return function(){return t.translateST$_$_$(a["vec3'"]([-l.x,-l.y,l.z]),f)(),t.rotateSTY$_$_$(C.pi+c.turnAngle,f)(),function(){if(r.condLabel instanceof w.Nothing)return e["return"](S.applicativeEff)(e.unit);if(r.condLabel instanceof w.Just){var t=!o["null"](r.condLabel.value0.label);if(t){var a=function(){var n=u.controlState.showIndex===!1;if(n)return r.condLabel.value0.label;if(!n)return e.show(e.showInt)(r.realIndex+1|0)+(" "+r.condLabel.value0.label);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 364, column 48 - line 367, column 41: "+[n.constructor.name])}(),l=function(){var n=o.length(a)>u.prefs.maxTextLength;if(n)return o.take$_$_$(u.prefs.maxTextLength-2,a)+"..";if(!n)return a;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 368, column 54 - line 371, column 37: "+[n.constructor.name])}();return function(){!function(){var n=h&&u.prefs.labelTextBackground||u.prefs.alwaysGreyTextBack;if(n)return i.setUniformBoolean$_$_$(u.bindings.uUseTextureFrame,!0);if(!n)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 372, column 41 - line 377, column 41: "+[n.constructor.name])}()();var t=function(){if(c.needClickInfos)return new w.Just({ciAccu:c.ciAccu,clickIndex:p});if(!c.needClickInfos)return w.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 378, column 45 - line 381, column 41: "+[c.needClickInfos.constructor.name])}();return v.getTextTexture$_$_$(n,u,l,function(e){return v.drawTexture$_$_$(n,u,e,-_/2/m,-$,_/m,$,g,r.scale*c.commandingScale,t)})()}}if(!t)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 362, column 31 - line 391, column 13: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 360, column 13 - line 391, column 13: "+[r.condLabel.constructor.name])}()(),function(){var n=h||u.prefs.alwaysGreyTextBack;if(n)return i.setUniformBoolean$_$_$(u.bindings.uUseTextureFrame,!1);if(!n)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 391, column 13 - line 395, column 13: "+[n.constructor.name])}()(),e.unit}})},E=function(n){return function(t){return function(r){return function(o){if(o.fade<1)return e["return"](S.applicativeEff)(e.unit);if(e["=="](s.eqDrawTag)(o.drawTag)(s.DTCone.value)){var a=s.coneRadius/o.scale,i=t.prefs.coneHeight/o.scale,l=function(){var n=2===o.level;if(n){var e=0!==o.drawIndex;if(e)return new u.CILabel(o.realIndex);if(!e)return u.CIMainLabel.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 162, column 41 - line 165, column 37: "+[e.constructor.name])}if(!n)return new u.CICard(o.conePath);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 160, column 34 - line 166, column 9: "+[n.constructor.name])}();return c.drawConeXZ$_$_$(n,t,r,o,o.coordinates.x,o.coordinates.y,o.coordinates.z,i,a,r.commandingScale,l)}if(e.otherwise)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 152, column 1 - line 172, column 1: "+[t.constructor.name,r.constructor.name,o.constructor.name])}}}},F=function(n,r,o,u,c,l,s,m,h,p){return function(){return function(){if(r.condSTLName instanceof w.Just)return f.preservingMatrix$_$_$(n,o,function(i){return function(){return t.translateST$_$_$(a["vec3'"]([-c.x,-(c.y+2*l),c.z]),i)(),t.rotateSTY$_$_$(C.pi+r.angle,i)(),d.getSTL$_$_$(n,o,r.condSTLName.value0,function(e){return d.drawSTL$_$_$(n,o,r,e,-l/s,-l,2*l/s,2*l,p,r.scale*u.commandingScale)})(),e.unit}});if(r.condSTLName instanceof w.Nothing)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 409, column 9 - line 424, column 9: "+[r.condSTLName.constructor.name])}()(),f.preservingMatrix$_$_$(n,o,function(f){return function(){return t.translateST$_$_$(a["vec3'"]([-c.x,-(c.y+l),c.z]),f)(),t.rotateSTY$_$_$(C.pi+u.turnAngle,f)(),function(){if(r.condSTLName instanceof w.Just)return e["return"](S.applicativeEff)(e.unit);if(r.condSTLName instanceof w.Nothing){if(r.condIconName instanceof w.Just)return function(){!function(){var n=m&&o.prefs.labelIconBackground;if(n)return i.setUniformBoolean$_$_$(o.bindings.uUseTextureFrame,!0);if(!n)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 432, column 37 - line 435, column 37: "+[n.constructor.name])}()();var t=function(){if(u.needClickInfos)return new w.Just({ciAccu:u.ciAccu,clickIndex:h});if(!u.needClickInfos)return w.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 436, column 41 - line 439, column 37: "+[u.needClickInfos.constructor.name])}();return v.getIcon$_$_$(n,o,r.condIconName.value0,function(e){return v.drawTexture$_$_$(n,o,e,-l/s,-l,2*l/s,2*l,p,r.scale*u.commandingScale,t)})(),e.unit};if(r.condIconName instanceof w.Nothing)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 429, column 28 - line 450, column 13: "+[r.condIconName.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 427, column 13 - line 450, column 13: "+[r.condSTLName.constructor.name])}()(),e.unit}})()}},x=function(n,t,r,o){return function(){return function(){if(o instanceof w.Nothing)return $.mapE_$_$_$(r,t);if(o instanceof w.Just)return $.mapEBreak_$_$_$(r,o.value0,t);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 128, column 5 - line 131, column 5: "+[o.constructor.name])}()(),e.unit}},A=function(n,e,t,r,o,a,i){var u=C.sin(n-e)*(o*a),c=u*C.cos(e),l=-u*C.sin(e),f=r*s.labelWidthFactor,d=function(){var n=i>.15;if(n)return 0;if(!n)return f/(10*i);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 327, column 26 - line 331, column 9: "+[n.constructor.name])}(),v=C.cos(n)*(f/1.8+d),m=C.sin(n)*(f/1.8+d);return{x:t.x+v+l,y:t.y,z:t.z+m+c}},N=function(n,r,o,a,i){var c=function(a){return function(c){var l=-(C.pi/r.prefs.angleSelectFactor)*(r.controlState.angleSelect.x+r.prefs.angleSelectAddX),d=C.pi/r.prefs.angleSelectFactor*(r.controlState.angleSelect.y+r.prefs.angleSelectAddY),v=function(){if(o.upDown>0)return 1-o.upDown/100;if(o.upDown<0)return 1+o.upDown/100;if(e.otherwise)return 1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 282, column 11 - line 324, column 1: "+[])}(),m=1+-1*v,h=function(){if(p.elem$_$_$(p.foldableArray,e.eqNumber,o.upDown)([0,100,-100]))return 1;if(o.upDown>0)return 1-v;if(e.otherwise)return 1-m;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 282, column 11 - line 324, column 1: "+[])}();r.prefs.coneHeight/i.scale;return f.preservingMatrix$_$_$(n,r,function(e){return function(){var e=f.initialMVMatrix$_$_$(n,r)();t.rotateSTX$_$_$(d*h,e)(),t.rotateSTY$_$_$(-l*h,e)();var v=u.getConeFront(r.frontend).deviceToUser(r)({x:g.toNumber(r.windowSize.x)/25,y:.995*g.toNumber(r.windowSize.y),z:.3})();if(v instanceof w.Just){var m=C.min$_$_$(3*c,.3/o.commandingScale),p=1/r.controlState.zoom,_=s.sphereRadius*p,S=_+(m-_)*h,P={x:v.value0.x+S*s.labelWidthFactor/2,y:v.value0.y-S*s.labelHeightFactor,z:v.value0.z},y=P.x+(a.x-P.x)*h,b=-P.y+(a.y- -P.y)*h,E=P.z+(a.z-P.z)*h;return T(n,i,r,o,{x:y,y:b,z:E},S,f.getPerspectiveRatio(r),!0,new u.CILabel(i.realIndex),1)()}if(v instanceof w.Nothing)return $.fail("ConeView3D>>transformToFloating: condPosition impossible")();throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 305, column 19 - line 324, column 1: "+[v.constructor.name])}})}},l=2===i.level,d=C.min$_$_$(3*a,.3/o.commandingScale),v=A(i.angle,o.turnAngle,i.coordinates,d,s.coneRadius/i.parentScale,r.prefs.labelEllipticalFactor,i.parentScale/i.scale),m=0===i.drawIndex&&2===i.level&&!o.isGlobalView&&0!==o.upDown;if(m)return c(v)(a);if(!m){var h=function(){if(l){var n=0!==i.drawIndex;if(n)return new u.CILabel(i.realIndex);if(!n)return u.CIMainLabel.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 273, column 41 - line 276, column 37: "+[n.constructor.name])}if(!l)return new u.CICard(i.conePath);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 271, column 34 - line 277, column 17: "+[l.constructor.name])}();return T(n,i,r,o,v,d,f.getPerspectiveRatio(r),l,h,i.fade)}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 266, column 8 - line 280, column 5: "+[m.constructor.name])},D=function(n){return function(r){return function(o){return function(i){if(e["=="](s.eqDrawTag)(i.drawTag)(s.DTLeaf.value)&&(i.level>1||o.isGlobalView)){var l=s.sphereRadius/i.scale,d=s.coneRadius/i.scale;return function(){!function(){var t=w.isJust(i.condLabel);if(t)return N(n,r,o,l,i);if(!t)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 180, column 13 - line 183, column 13: "+[t.constructor.name])}()();var t=w.isJust(i.condIconName);if(t){var a=function(){var n=2===i.level;if(n){var e=0!==i.drawIndex;if(e)return new u.CILabel(i.realIndex);if(!e)return u.CIMainLabel.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 186, column 41 - line 189, column 37: "+[e.constructor.name])}if(!n)return new u.CICard(i.conePath);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 184, column 34 - line 190, column 17: "+[n.constructor.name])}();return F(n,i,r,o,i.coordinates,2.5*l,f.getPerspectiveRatio(r),!1,a,i.fade)()}if(!t)return e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 183, column 13 - line 193, column 5: "+[t.constructor.name])}}if(e["=="](s.eqDrawTag)(i.drawTag)(s.DTLeaf.value))return e["return"](S.applicativeEff)(e.unit);if(e["=="](s.eqDrawTag)(i.drawTag)(s.DTFloatLabel.value)){var v=function(){var n=function(){if(o.upDown>0)return 1-o.upDown/100;if(o.upDown<0)return 1+o.upDown/100;if(e.otherwise)return 1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 219, column 21 - line 222, column 17: "+[])}(),t=1+-1*n,r=function(){if(p.elem$_$_$(p.foldableArray,e.eqNumber,o.upDown)([0,100,-100]))return 1;if(o.upDown>0)return 1-n;if(e.otherwise)return 1-t;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 214, column 17 - line 223, column 5: "+[])}();return r}();return f.preservingMatrix$_$_$(n,r,function(t){return function(){var t=(f.initialMVMatrix$_$_$(n,r)(),u.getConeFront(r.frontend).deviceToUser(r)({x:g.toNumber(r.windowSize.x)/25,y:.995*g.toNumber(r.windowSize.y),z:.3})());return function(){if(t instanceof w.Just){var a=1/r.controlState.zoom,c=s.sphereRadius*a;return T(n,i,r,function(){var n={};for(var e in o)o.hasOwnProperty(e)&&(n[e]=o[e]);return n.turnAngle=0,n}(),{x:t.value0.x+c*s.labelWidthFactor/2,y:-t.value0.y+c*s.labelHeightFactor,z:t.value0.z},c,f.getPerspectiveRatio(r),!0,new u.CISuperLabel(1),v*i.fade)}return _.trace("ConeView3D>>drawIt': DTFloatLabel deviceToUser failed")(function(n){return e["return"](S.applicativeEff)(e.unit)})}()(),e.unit}})}if(e.otherwise){var l=s.sphereRadius/i.scale,m=(a.vec3$_$_$(-i.coordinates.x,-i.coordinates.y,i.coordinates.z),r.prefs.coneHeight/i.scale),d=s.coneRadius/i.scale,h=function(){var n=2===i.level;if(n){var e=0!==i.drawIndex;if(e)return new u.CILabel(i.realIndex);if(!e)return u.CIMainLabel.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 232, column 41 - line 235, column 37: "+[e.constructor.name])}if(!n)return new u.CICard(i.conePath);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 230, column 34 - line 236, column 9: "+[n.constructor.name])}();return function(){return function(){var t=i.fade<1;if(t)return c.drawConeXZ$_$_$(n,r,o,i,i.coordinates.x,i.coordinates.y,i.coordinates.z,m,d,o.commandingScale,h);if(!t)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 237, column 13 - line 240, column 13: "+[t.constructor.name])}()(),function(){var t=i.level>1&&w.isJust(i.condLabel);if(t)return N(n,r,o,l,i);if(!t)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 240, column 13 - line 243, column 13: "+[t.constructor.name])}()(),function(){var u=i.level>0&&w.isJust(i.condIconName);if(u){var c=1.5*l;return f.preservingMatrix$_$_$(n,r,function(e){return function(){return t.rotateSTY$_$_$(o.turnAngle,e)(),t.translateST$_$_$(a.vec3$_$_$(0,0,-d),e)(),t.rotateSTY$_$_$(-o.turnAngle,e)(),t.translateST$_$_$(a.vec3$_$_$(0,0,d),e)(),F(n,i,r,o,{x:i.coordinates.x,y:i.coordinates.y+m-4*l,z:i.coordinates.z-d},c,f.getPerspectiveRatio(r),!1,h,i.fade)()}})}if(!u)return e["return"](S.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 243, column 13 - line 256, column 13: "+[u.constructor.name])}()(),e.unit}}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 174, column 1 - line 258, column 1: "+[r.constructor.name,o.constructor.name,i.constructor.name])}}}},M=function(n,t,o,a){var u=function(n){return function(t){var r=e.compare(e.ordNumber)(n.coordinates.y)(t.coordinates.y);return r instanceof e.EQ?e.compare(e.ordNumber)(t.coordinates.z)(n.coordinates.z):r}};return function(){var e=r.toArray(a)(),c=h.sortBy$_$_$(u,e);return i.disable(i.BLEND.value)(),x(t,c,E(n)(t)(o),function(){if(o.isGlobalView)return w.Nothing.value;if(!o.isGlobalView)return new w.Just(b(t));throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 109, column 10 - line 109, column 84: "+[o.isGlobalView.constructor.name])}())(),i.enable(i.BLEND.value)(),x(t,c,D(n)(t)(o),function(){if(o.isGlobalView)return w.Nothing.value;if(!o.isGlobalView)return new w.Just(b(t));throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 112, column 10 - line 112, column 84: "+[o.isGlobalView.constructor.name])}())(),i.disable(i.BLEND.value)()}},L=function(n,e,t,o,a,c,s,d,v){var m=function(){return c instanceof u.CommandingTurn?c.value0:0}(),h=y.coneNumLevel(t),p=function(){return c instanceof u.CommandingNothing?!0:!1}(),w=y.coneIsRoot(t),_=2*C.pi/g.toNumber(h);return function(){var e=r.empty(),t=-(m/100)*_;return M(n,s,{ciAccu:e,turnAngle:t,commandingScale:d.commandingScale,upDown:function(){if(w)return 0;if(!w)return d.upDown;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 72, column 20 - line 73, column 9: "+[w.constructor.name])}(),needClickInfos:p,isGlobalView:a},v)(),function(){return f.setPerspectiveLabel$_$_$(n,s)(),i.enable(i.BLEND.value)(),i.disable(i.DEPTH_TEST.value)(),l.coneDrawControls2$_$_$(n,s,e)(),i.disable(i.BLEND.value)(),i.enable(i.DEPTH_TEST.value)()}(),r.toArray(e)()}};n.drawEverything$_$_$=L,n.drawIcon$_$_$=F,n.drawLabel$_$_$=T}(PS["ConeCanvas.Frontend.DrawWebGL"]=PS["ConeCanvas.Frontend.DrawWebGL"]||{}),function(n){"use strict";var e=(PS.Prelude,PS["Data.Int"]),t=PS["Data.Maybe"],r=PS.Math,o=PS.Extensions,a=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),i=PS["ConeCanvas.Frontend.DrawTypes3d"],u=(PS["Control.Monad.Eff"],function(n,e){return r.max$_$_$(e.leftTopFront.y,e.leftTopBack.y)<=n.y}),c=function(n){var e=function(n){return function(e){var t=r.abs(n-e),o=function(){var r=e>n;if(r)return n-t/2;if(!r)return n+t/2;throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 49, column 34 - line 50, column 29: "+[r.constructor.name])}(),a=function(){var r=e>n;if(r)return e+t/2;if(!r)return e-t/2;throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 50, column 34 - line 51, column 25: "+[r.constructor.name])}();return{l:o,r:a}}},t=e(n.leftTopBack.x)(n.rightBottomBack.x),o=e(n.leftTopFront.x)(n.rightBottomFront.x),a=e(n.leftTopBack.y)(n.rightBottomBack.y),i=e(n.leftTopFront.y)(n.rightBottomFront.y),u=e(n.leftTopFront.z)(n.leftTopBack.z),c=e(n.rightBottomFront.z)(n.rightBottomBack.z);return{leftTopFront:{x:o.l,y:i.l,z:u.l},rightBottomFront:{x:o.r,y:i.r,z:c.l},leftTopBack:{x:t.l,y:a.l,z:u.r},rightBottomBack:{x:t.r,y:a.r,z:c.r}}},l=function(n){return function(){var r=a.getConeFront(n.frontend).deviceToUser(n)({x:0,y:e.toNumber(n.windowSize.y),z:0})(),i=a.getConeFront(n.frontend).deviceToUser(n)({x:e.toNumber(n.windowSize.x),y:0,z:0})(),u=a.getConeFront(n.frontend).deviceToUser(n)({x:0,y:e.toNumber(n.windowSize.y),z:1})(),l=a.getConeFront(n.frontend).deviceToUser(n)({x:e.toNumber(n.windowSize.x),y:0,z:1})(),s=[r,i,u,l];if(4===s.length&&s[0]instanceof t.Just&&s[1]instanceof t.Just&&s[2]instanceof t.Just&&s[3]instanceof t.Just){var f={leftTopFront:s[0].value0,rightBottomFront:s[1].value0,leftTopBack:s[2].value0,rightBottomBack:s[3].value0},d=c(f),v={drawFrustum:f,calculatedFrustum:d};return v}return o.fail("ConeView3D>>calcFrustum: Frustum calculation failed!")()}},s=function(n,e,t,o,a){var i=t>=n&&o>=e;if(i)return r.min$_$_$(n,e)<=a&&a<=r.max$_$_$(t,o);if(!i){var u=n>=t&&e>=o;if(u)return r.min$_$_$(t,o)<=a&&a<=r.max$_$_$(n,e);if(!u){var c=t>=n&&e>=o;if(c)return r.min$_$_$(n,o)<=a&&a<=r.max$_$_$(t,e);if(!c)return r.min$_$_$(t,e)<=a&&a<=r.max$_$_$(n,o);throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 85, column 18 - line 91, column 1: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 83, column 14 - line 91, column 1: "+[u.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 81, column 5 - line 91, column 1: "+[i.constructor.name])},f=function(n,e){return s(e.leftTopFront.x,e.leftTopBack.x,e.rightBottomFront.x,e.rightBottomBack.x,n.x)&&s(e.leftTopFront.y,e.leftTopBack.y,e.rightBottomFront.y,e.rightBottomBack.y,n.y)&&s(e.leftTopFront.z,e.rightBottomFront.z,e.leftTopBack.z,e.rightBottomBack.z,n.z)},d=function(n,e,t,r){var o=function(){var o=f(e,r)||f(function(){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);return r.y=e.y-n*t,r}(),r)||f(function(){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);return r.y=e.y-n*t,r.x=e.x+i.coneRadius*t,r}(),r)||f(function(){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);return r.y=e.y-n*t,r.x=e.x-i.coneRadius*t,r}(),r);if(o)return i.InsideFrustum.value;if(!o){var a=u(e,r);if(a)return i.InsideFrustum.value;if(!a)return i.OutsideFrustum.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 139, column 22 - line 142, column 5: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 134, column 15 - line 142, column 5: "+[o.constructor.name])}();return o},v=function(n,e,t){var r=e>n;if(r)return t>=n&&e>=t;if(!r)return t>=e&&n>=t;throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 75, column 5 - line 79, column 1: "+[r.constructor.name])},m=function(n,e){var t=v(e.leftTopFront.x,e.rightBottomFront.x,n.leftTopFront.x)&&v(e.leftTopFront.x,e.rightBottomFront.x,n.rightBottomFront.x)&&v(e.leftTopBack.x,e.rightBottomBack.x,n.leftTopBack.x)&&v(e.leftTopBack.x,e.rightBottomBack.x,n.rightBottomBack.x)&&v(e.leftTopFront.y,e.rightBottomFront.y,n.leftTopFront.y)&&v(e.leftTopFront.y,e.rightBottomFront.y,n.rightBottomFront.y)&&v(e.leftTopBack.y,e.rightBottomBack.y,n.leftTopBack.y)&&v(e.leftTopBack.y,e.rightBottomBack.y,n.rightBottomBack.y)&&v(e.leftTopFront.z,e.leftTopBack.z,n.leftTopFront.z)&&v(e.leftTopFront.z,e.leftTopBack.z,n.leftTopBack.z)&&v(e.rightBottomFront.z,e.rightBottomBack.z,n.rightBottomFront.z)&&v(e.rightBottomFront.z,e.rightBottomBack.z,n.rightBottomBack.z);return t};n.frustumInside$_$_$=m,n.calcFrustumVerdict$_$_$=d,n.calcFrustums=l}(PS["ConeCanvas.Frontend.Frustum"]=PS["ConeCanvas.Frontend.Frustum"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Int"],r=PS["Data.Maybe"],o=PS["Data.Maybe.Unsafe"],a=PS["Control.Monad.ST"],i=PS.Math,u=PS["Data.List"],c=PS["Data.Foldable"],l=PS["Data.Array"],s=PS["Debug.Trace"],f=PS["Data.ST.Matrix4"],d=PS["Data.Vector3"],v=PS.Extensions,m=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),h=PS["ConeCanvas.Frontend.DrawTypes3d"],p=PS["ConeCanvas.Frontend.DrawWebGL"],g=PS["ConeCanvas.Frontend.Matrix"],w=PS["Data.STSequence"],_=PS["ConeCanvas.Frontend.Frustum"],$=PS["ConeCanvas.ConeTransforms"],C=PS["ConeCanvas.ConeModel"],S=PS["ConeCanvas.ConeZipper"],P=PS["Control.Monad.Eff"],y=PS["ConeCanvas.ConeControl"],b=function(n,t){if(u["null"](t))return t;if(e.otherwise)return u.take(u.length(t)-1)(t);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 484, column 1 - line 489, column 1: "+[t.constructor.name])},T=function(n,e){return e instanceof m.CommandingTrans?!0:e instanceof m.CommandingClockwork?!0:!1},E=function(n,e){return e instanceof m.CommandingTrans?e.value0:$.emptyTransform(0)},F=function(n,o,a){if(n instanceof r.Nothing)return 0;if(n instanceof r.Just){var c=u.uncons(n.value0.path);if(c instanceof r.Nothing)return 0;if(c instanceof r.Just){var l=c.value0.head-o,s=t.round(t.toNumber(a)/2),f=function(){if(0===l)return 0;if(-l>s)return a+l|0;if(l>s)return l-a;if(e.otherwise)return l;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 473, column 25 - line 478, column 11: "+[l.constructor.name])}(),d=2*i.pi/t.toNumber(a);return 0===f?0:-(t.toNumber(f)*d)*(n.value0.progress/100)}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 467, column 3 - line 483, column 1: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 465, column 1 - line 466, column 1: "+[n.constructor.name,o.constructor.name,a.constructor.name])},x=function(n,t){if(t instanceof C.TDClockwise){var r=v.modFloat$_$_$(n,2*i.pi),o=function(){var n=0>=r;if(n)return r;if(!n)return r-2*i.pi;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 564, column 15 - line 567, column 5: "+[n.constructor.name])}();return o}if(t instanceof C.TDAntiClockwise){var r=v.modFloat$_$_$(n,2*i.pi),o=function(){var n=r>=0;if(n)return r;if(!n)return 2*i.pi-r;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 570, column 15 - line 573, column 5: "+[n.constructor.name])}();return o}if(t instanceof C.TDShortest){var r=v.modFloat$_$_$(n,2*i.pi),o=function(){if(0>r){var t=n>-i.pi;if(t)return r;if(!t)return i.pi-r;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 577, column 28 - line 578, column 11: "+[t.constructor.name])}if(r<i.pi)return r;if(e.otherwise)return r-i.pi;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 575, column 5 - line 588, column 1: "+[])}();return o}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 562, column 1 - line 568, column 1: "+[n.constructor.name,t.constructor.name])},A=function(n,e){if(n instanceof r.Nothing)return r.Nothing.value;if(n instanceof r.Just){var t=u.uncons(n.value0.path);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just){var o=e===t.value0.head;if(o)return new r.Just({path:t.value0.tail,progress:n.value0.progress});if(!o)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 460, column 20 - line 464, column 1: "+[o.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 458, column 3 - line 464, column 1: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 456, column 1 - line 457, column 1: "+[n.constructor.name,e.constructor.name])},N=function(n){var e=2*i.pi/i.max$_$_$(t.toNumber(2),t.toNumber(n));return 1.618/(i.sqrt(2-2*i.cos(e))/2)},D=function(n,e,t){for(var o=n,a=e,i=t;;){var u=S.coneUp(a);if(u instanceof r.Nothing)return i;{if(!(u instanceof r.Just))throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 768, column 5 - line 774, column 1: "+[u.constructor.name]);var c=S.coneNumLevel(u.value0),l=N(c),s=o,f=i*l;o=s,a=u.value0,i=f}}},M=function(n,e,t){var o=l.uncons(t);if(o instanceof r.Just){var a=N(n),i=N(o.value0.head.l);return i+(a-i)/100*function(){if(o.value0.head.r)return e;if(!o.value0.head.r)return 100-e;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 755, column 34 - line 757, column 58: "+[o.value0.head.r.constructor.name])}()}if(o instanceof r.Nothing)return N(n);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 750, column 5 - line 761, column 1: "+[o.constructor.name])},L=function(n,e,t,r){return{x:t.x+i.cos(e)*h.coneRadius/r,y:t.y+n/r,z:t.z+i.sin(e)*h.coneRadius/r}},O=function(n,o,a,c){if(c instanceof u.Nil)return e["return"](P.applicativeEff)(new r.Just(L(o,h.startAngleConst,h.coosTop,1)));var l=function(a){return function(c){return function(s){return function(f){if(c instanceof u.Nil)return e["return"](P.applicativeEff)(new r.Just(s));if(a instanceof r.Nothing)return e["return"](P.applicativeEff)(r.Nothing.value);if(a instanceof r.Just){var d=u.uncons(c);if(d instanceof r.Just){var v=S.coneSetPos$_$_$(a.value0,d.value0.head),m=S.coneGetPosition(a.value0);if(v instanceof r.Nothing)return e["return"](P.applicativeEff)(r.Nothing.value);if(v instanceof r.Just){var p=d.value0.head-m,g=S.coneNumLevel(a.value0),w=f*N(g),_=2*i.pi/t.toNumber(g),$=h.startAngleConst+t.toNumber(p)*_;return function(){var e=S.coneDown$_$_$(n,v.value0)();return l(e)(d.value0.tail)(L(o,$,s,f))(w)()}}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 789, column 17 - line 799, column 13: "+[v.constructor.name])}return e["return"](P.applicativeEff)(r.Nothing.value)}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 775, column 1 - line 776, column 1: "+[a.constructor.name,c.constructor.name,s.constructor.name,f.constructor.name])}}}};return function(){var e=S.coneDown$_$_$(n,S.coneRoot(a))();S.coneNumLevel(a);return l(e)(c)(L(o,h.startAngleConst,h.coosTop,1))(N(1))()}},I=function(n,e,o,a,u,c,s){var f=l.uncons(l.mapMaybe($.getTurn(o))(u.transforms));if(f instanceof r.Just&&f.value0.head instanceof m.TOTurn){var d=S.normalizePos$_$_$(f.value0.head.value1.index-(a+1|0),f.value0.head.value1.ngon),v=s+(t.toNumber(d)+1)*(2*i.pi/t.toNumber(f.value0.head.value1.ngon)),h=s+t.toNumber(e)*c,p=x(h-v,f.value0.head.value2);
return v+p/100*function(){if(f.value0.head.value0)return u.progress;if(!f.value0.head.value0)return 100-u.progress;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 700, column 34 - line 702, column 69: "+[f.value0.head.value0.constructor.name])}()}return s+t.toNumber(e)*c},R=function(n,e,r,o){var a=E(n,o),u=(l.mapMaybe($.getSizeChange)(a.transforms),S.coneNumLevel(r)),c=S.coneGetPosition(r),s=S.normalizePos$_$_$(c,u),f=2*i.pi/t.toNumber(u),d=I(n,0,s,c,a,f,h.startAngleConst);return L(e,d,h.coosTop,1)},k=function(n,a,v,h,p){var w=-(i.pi/h.prefs.angleSelectFactor)*(h.controlState.angleSelect.x+h.prefs.angleSelectAddX),_=i.pi/h.prefs.angleSelectFactor*(h.controlState.angleSelect.y+h.prefs.angleSelectAddY);if(p instanceof m.CommandingUpDown){var C=E(n,p),y=R(n,h.prefs.coneHeight,v,p),b=l.mapMaybe($.getSizeChange)(C.transforms),T=S.coneNumLevel(v),F=M(T,C.progress,b),x=function(){if(p.value0>0)return 1-p.value0/100;if(p.value0<0)return 1+p.value0/100;if(e.otherwise)return 1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 88, column 13 - line 116, column 9: "+[])}(),A=1+-1*x,N=function(){if(c.elem$_$_$(c.foldableArray,e.eqNumber,p.value0)([0,100,-100]))return 1;if(p.value0>0)return 1-x;if(e.otherwise)return 1-A;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 88, column 13 - line 116, column 9: "+[])}(),L=d.vec3$_$_$(-y.x*N,-y.y*N,y.z*N),I=function(){if(c.elem$_$_$(c.foldableArray,e.eqNumber,p.value0)([0,100,-100]))return 1;if(p.value0>0)return 1+x*(F-1);if(e.otherwise)return 1+A*(F-1);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 88, column 13 - line 116, column 9: "+[])}();return function(){var e=g.setPerspective$_$_$(n,h,1)();return f.rotateSTX$_$_$(_,e)(),f.rotateSTY$_$_$(-w,e)(),f.translateST$_$_$(L,e)(),f.scaleST3$_$_$(I,I,I,e)(),f.translateST$_$_$(d.vec3$_$_$(y.x,y.y,-y.z),e)(),{commandingScale:I,upDown:p.value0}}}if(p instanceof m.CommandingTurn){var T=S.coneNumLevel(v),k=2*i.pi/t.toNumber(T),U=p.value0/-100*k+w;return function(){var e=g.setPerspective$_$_$(n,h,1)();return f.rotateSTX$_$_$(_,e)(),f.rotateSTY$_$_$(-U,e)(),{commandingScale:1,upDown:0}}}return p instanceof m.CommandingGlobal?function(){var t=e["<$>"](P.functorEff)(o.fromJust)(O(n,h.prefs.coneHeight,v,S.coneGetPath(a)))(),r=d.vec3$_$_$(t.x,t.y,-t.z),i=R(n,h.prefs.coneHeight,v,p),u=d.vec3$_$_$(-i.x,-i.y,i.z),c=D(n,a,1),l=1.71*c,s=function(){if(p.value1)return 100-p.value0;if(!p.value1)return p.value0;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 127, column 39 - line 128, column 17: "+[p.value1.constructor.name])}(),m=0+(l-0)/100*s,$=g.setPerspective$_$_$(n,h,m)();return f.rotateSTX$_$_$(_,$)(),f.rotateSTY$_$_$(-w,$)(),f.translateST$_$_$(u,$)(),f.scaleST3$_$_$(c,c,c,$)(),f.translateST$_$_$(r,$)(),{commandingScale:c,upDown:0}}:p instanceof m.CommandingClockwork?function(){var t=S.coneSetPath$_$_$(n,v,p.value0.ccFrom)(),i=S.coneSetPath$_$_$(n,v,p.value0.ccTo)(),l=S.coneSetPath$_$_$(n,v,p.value0.ccUpper)(),m=function(){if(l instanceof r.Nothing)return s.trace("ConeView3D>>calcMatrices: can't set upper path."+e.show(u.showList(e.showInt))(p.value0.ccUpper))(function(n){return 1});if(l instanceof r.Just)return D(n,l.value0,1);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 166, column 23 - line 169, column 17: "+[l.constructor.name])}(),$=(E(n,p),function(){if(i instanceof r.Nothing)return s.trace("ConeView3D>>calcMatrices: can't set to path."+e.show(u.showList(e.showInt))(p.value0.ccTo))(function(n){return 1});if(i instanceof r.Just)return D(n,i.value0,1);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 170, column 23 - line 173, column 17: "+[i.constructor.name])}()),C=p.value0.ccSecond>.1&&p.value0.ccSecond<99.9,y=p.value0.ccSecond<.1,b=function(){if(t instanceof r.Nothing)return s.trace("ConeView3D>>calcMatrices: can't set from path."+e.show(u.showList(e.showInt))(p.value0.ccFrom))(function(n){return 1});if(t instanceof r.Just)return D(n,t.value0,1);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 162, column 23 - line 165, column 17: "+[t.constructor.name])}(),T=function(){if(p.value0.ccFirst<99.9)return b+(m-b)/100*p.value0.ccFirst;if(p.value0.ccThird<.1)return m;if(e.otherwise)return m+($-m)/100*p.value0.ccThird;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 146, column 58 - line 202, column 9: "+[])}(),F=(S.coneGetPath(a),100-p.value0.ccTotal),x=function(){if(10>F)return 10*F;if(F>=90)return 100-10*(F-90);if(e.otherwise)return 100;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 146, column 58 - line 202, column 9: "+[])}(),A=e["<$>"](P.functorEff)(o.fromJust)(O(n,h.prefs.coneHeight,v,p.value0.ccFrom))(),N=e["<$>"](P.functorEff)(o.fromJust)(O(n,h.prefs.coneHeight,v,u.toList(c.foldableArray)([])))(),M=function(){if(i instanceof r.Nothing)return s.trace("ConeView3D>>calcMatrices: can't set to path.")(function(t){return e["<$>"](P.functorEff)(o.fromJust)(O(n,h.prefs.coneHeight,v,p.value0.ccTo))});if(i instanceof r.Just)return e["<$>"](P.functorEff)(o.fromJust)(O(n,h.prefs.coneHeight,i.value0,p.value0.ccTo));throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 180, column 23 - line 184, column 13: "+[i.constructor.name])}()(),L=d.vec3$_$_$(-N.x,-N.y,N.z),I=function(){if(y)return d.vec3$_$_$(A.x,A.y,-A.z);if(C)return d.vec3$_$_$(A.x+(M.x-A.x)/100*p.value0.ccSecond,A.y+(M.y-A.y)/100*p.value0.ccSecond,-(A.z+(M.z-A.z)/100*p.value0.ccSecond));if(e.otherwise)return d.vec3$_$_$(M.x,M.y,-M.z);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 146, column 58 - line 202, column 9: "+[])}(),R=1.71*$,k=0+(R-0)/100*x,U=g.setPerspective$_$_$(n,h,k)();return f.rotateSTX$_$_$(_,U)(),f.rotateSTY$_$_$(-w,U)(),f.translateST$_$_$(L,U)(),f.scaleST3$_$_$(T,T,T,U)(),f.translateST$_$_$(I,U)(),{commandingScale:T,upDown:0}}:function(){var e=g.setPerspective$_$_$(n,h,1)();return f.rotateSTX$_$_$(_,e)(),f.rotateSTY$_$_$(-w,e)(),{commandingScale:1,upDown:0}}},U=function(n,o,a,c,s,f,d,p,g,y,b,T,E,x,N,D,O){var R=D.prefs.coneHeight*(t.toNumber(D.windowSize.y)/D.prefs.coneHeight*2.5)*(E/d),k=S.coneGetPosition(c),J=S.zipGetEntry(c),z=e["++"](u.semigroupList)(x)(u.singleton(S.coneGetPosition(c)));return function(){var u=S.coneDown$_$_$(n,c)();if(u instanceof r.Nothing){var x=function(){var e=S.coneIsLeaf$_$_$(n,c);if(e)return h.DTLeaf.value;if(!e)return h.DTCone.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 367, column 31 - line 370, column 17: "+[e.constructor.name])}(),H=function(){var e=R>D.prefs.minIconSize;if(e)return C.stlName(n)(J);if(!e)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 371, column 31 - line 372, column 13: "+[e.constructor.name])}(),W=function(){var e=R>D.prefs.minIconSize;if(e)return C.iconName(n)(J);if(!e)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 370, column 31 - line 371, column 17: "+[e.constructor.name])}(),j=function(){var e=R>D.prefs.minLabelSize;if(e){var t=S.zipGetEntry(c);return new r.Just({label:C.label(n)(t),comment:C.comment(n)(t),targetUri:C.targetUri(n)(t)})}if(!e)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 363, column 33 - line 367, column 17: "+[e.constructor.name])}(),q=!(T||C.hidden(n)(J));if(q)return w.push$_$_$(o,{drawIndex:a,realIndex:k,conePath:z,level:g,coordinates:s,angle:f,scale:d,parentScale:p,fade:b,condIconName:W,condSTLName:H,condColor:C.color(n)(J),condLabel:j,drawTag:x})(),e.unit;if(!q)return e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 373, column 17 - line 391, column 9: "+[q.constructor.name])}if(u instanceof r.Just){var H=function(){var e=R>D.prefs.minIconSize;if(e)return C.stlName(n)(J);if(!e)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 398, column 30 - line 399, column 17: "+[e.constructor.name])}(),V=l.mapMaybe($.getSizeChange)(y.transforms),Z=S.coneNumLevel(u.value0),X=d*M(Z,y.progress,V),W=function(){var e=R>D.prefs.minIconSize;if(e)return C.iconName(n)(J);if(!e)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 397, column 31 - line 398, column 17: "+[e.constructor.name])}(),K=_.calcFrustumVerdict$_$_$(D.prefs.coneHeight,{x:s.x,y:-s.y,z:s.z},d,O),j=function(){var e=R>D.prefs.minLabelSize;if(e){var t=S.zipGetEntry(c);return new r.Just({label:C.label(n)(t),comment:C.comment(n)(t),targetUri:C.targetUri(n)(t)})}if(!e)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 399, column 30 - line 403, column 17: "+[e.constructor.name])}(),Y=S.coneGetPosition(u.value0),Q=2*i.pi/t.toNumber(Z);!function(){var t=!(R<D.prefs.minChildSize||e["=="](h.eqFrustumVerdict)(K)(h.OutsideFrustum.value))&&b>0;if(t)return function(){return l.foldM$_$_$(P.monadEff,function(e){return function(t){var a=S.normalizePos$_$_$(Y+t|0,Z),i=$.filterTransform$_$_$(a,y),u=function(){var n=1>b;if(n)return b;if(!n){var e=l.uncons(l.mapMaybe($.getFade(a))(y.transforms));return e instanceof r.Just&&e.value0.head instanceof m.TOFade&&e.value0.head.value0 instanceof r.Just&&e.value0.head.value0.value0?y.progress/100:e instanceof r.Just&&e.value0.head instanceof m.TOFade&&e.value0.head.value0 instanceof r.Just&&!e.value0.head.value0.value0?(100-y.progress)/100:e instanceof r.Just&&e.value0.head instanceof m.TOFade&&e.value0.head.value0 instanceof r.Nothing?0:1}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 415, column 42 - line 421, column 29: "+[n.constructor.name])}(),v=F(N,S.coneGetFirstBelow(c),Z),h=I(n,t,a,Y,y,Q,f+v),p=function(){var n=0===t;if(n)return e;if(!n)return S.coneRight(e);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 409, column 45 - line 412, column 34: "+[n.constructor.name])}();return function(){return U(n,o,t,p,L(D.prefs.coneHeight,h,s,d),h,X,d,g+1|0,i,u,!1,E,z,A(N,a),D,O)(),p}}},u.value0)(l[".."](0)(Z-1))(),e.unit};if(!t)return e["return"](P.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 406, column 17 - line 429, column 17: "+[t.constructor.name])}()(),v.mapE$_$_$(B(n)(o)(s)(f)(d)(X)(g+1|0)(y.progress)(E)(z)(D)(O),l.mapMaybe($.getIntro)(y.transforms))(),v.mapE$_$_$(G(n)(o)(s)(f)(d)(X)(g+1|0)(y.progress)(E)(z)(D)(O),l.mapMaybe($.getLift)(y.transforms))();var nn=!(T||C.hidden(n)(J)||e["=="](h.eqFrustumVerdict)(K)(h.AboveFrustum.value));if(nn)return w.push$_$_$(o,{drawIndex:a,realIndex:k,conePath:z,level:g,coordinates:s,angle:f,parentScale:p,scale:d,fade:b,condIconName:W,condSTLName:H,condColor:C.color(n)(J),condLabel:j,drawTag:h.DTCone.value})(),e.unit;if(!nn)return e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 435, column 17 - line 455, column 1: "+[nn.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 361, column 5 - line 455, column 1: "+[u.constructor.name])}},G=function(n){return function(e){return function(o){return function(a){return function(u){return function(c){return function(l){return function(s){return function(f){return function(d){return function(p){return function(g){return function(w){var _=$.getLiftBase(w);if(_ instanceof r.Just&&_.value0 instanceof m.TPLift){var C=a+t.toNumber(_.value0.value1.pos.index)*(2*i.pi/t.toNumber(_.value0.value1.pos.ngon)),P=function(){if(_.value0.value0)return 100-s;if(!_.value0.value0)return s;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 539, column 31 - line 540, column 17: "+[_.value0.value0.constructor.name])}(),y=c+(u-c)/100*P,b={x:o.x+i.cos(C)*h.coneRadius/u,y:o.y+p.prefs.coneHeight/u,z:o.z+i.sin(C)*h.coneRadius/u},T=function(){var n=$["getFade'"](w);return n instanceof r.Just&&n.value0 instanceof m.TOFade&&n.value0.value0 instanceof r.Just&&n.value0.value0.value0?s/100:n instanceof r.Just&&n.value0 instanceof m.TOFade&&n.value0.value0 instanceof r.Just&&!n.value0.value0.value0?(100-s)/100:1}(),E={x:b.x+(o.x-b.x)/100*P,y:b.y+(o.y/u-b.y)/100*P/y,z:b.z+(o.z-b.z)/100*P};return U(n,e,-1,S.makeZipper$_$_$(n,_.value0.value1.model),E,C,y,u,l,$.buildTransform$_$_$(s,_.value0.value1.transforms),T,!0,f,d,r.Nothing.value,p,g)}return v.fail("ConeView::drawLift>> cant extract lift")}}}}}}}}}}}}},B=function(n){return function(e){return function(o){return function(a){return function(u){return function(c){return function(l){return function(s){return function(f){return function(d){return function(p){return function(g){return function(w){var _=$.getIntroBase(w);if(_ instanceof r.Just&&_.value0 instanceof m.TPIntro){var C=a+t.toNumber(_.value0.value0.pos.index)*(2*i.pi/t.toNumber(_.value0.value0.pos.ngon)),P=function(){var n=$["getFade'"](w);return n instanceof r.Just&&n.value0 instanceof m.TOFade&&n.value0.value0 instanceof r.Just&&n.value0.value0.value0?s/100:n instanceof r.Just&&n.value0 instanceof m.TOFade&&n.value0.value0 instanceof r.Just&&!n.value0.value0.value0?(100-s)/100:1}(),y=function(n){return{x:o.x+i.cos(n)*h.coneRadius/u,y:o.y+p.prefs.coneHeight/u,z:o.z+i.sin(n)*h.coneRadius/u}},b=y(C);return U(n,e,-1,S.makeZipper$_$_$(n,_.value0.value0.model),b,C,c,u,l,$.buildTransform$_$_$(s,_.value0.value0.transforms),P,!1,f,d,r.Nothing.value,p,g)}return v.fail("ConeView::drawIntro>> can't extract intro")}}}}}}}}}}}}},J=function(n,o,c,s,f,d,v,p,g,E,F){var x=function(o){var a=function(){return p instanceof m.CommandingUpDown?p.value0:0}(),u=function(){return p instanceof m.CommandingTrans?p.value0:$.emptyTransform(0)}(),s=l.mapMaybe($.getSizeChange)(u.transforms),v=S.coneNumLevel(f),w=M(v,u.progress,s),_=S.coneIsRoot(f),C=S.coneGetPosition(f),T=b(e.showInt,S.coneGetPath(f)),F=function(){return p instanceof m.CommandingClockwork?new r.Just({path:p.value0.ccTo,progress:p.value0.ccSecond}):r.Nothing.value}(),x=2*i.pi/t.toNumber(v);return function(){y.getMillisecondsTime();!function(){var t=!(d&&0>=a);if(t)return function(){return l.foldM$_$_$(P.monadEff,function(e){return function(t){var a=S.normalizePos$_$_$(C+t|0,v),i=I(n,t,a,C,u,x,h.startAngleConst),s=$.filterTransform$_$_$(a,u),f=function(){var n=l.uncons(l.mapMaybe($.getFade(a))(u.transforms));return n instanceof r.Just&&n.value0.head instanceof m.TOFade&&n.value0.head.value0 instanceof r.Just&&n.value0.head.value0.value0?u.progress/100:n instanceof r.Just&&n.value0.head instanceof m.TOFade&&n.value0.head.value0 instanceof r.Just&&!n.value0.head.value0.value0?(100-u.progress)/100:n instanceof r.Just&&n.value0.head instanceof m.TOFade&&n.value0.head.value0 instanceof r.Nothing?0:1}(),d=function(){var n=0===t;if(n)return e;if(!n)return S.coneRight(e);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 288, column 38 - line 291, column 25: "+[n.constructor.name])}();return function(){return U(n,c,t,d,L(g.prefs.coneHeight,i,h.coosTop,1),i,w,1,function(){if(_)return 1;if(!_)return 2;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 300, column 54 - line 300, column 84: "+[_.constructor.name])}(),s,f,!1,E,T,F,g,o)(),d}}},f)(l[".."](0)(v-1))(),e.unit};if(!t)return e["return"](P.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 285, column 9 - line 306, column 9: "+[t.constructor.name])}()();y.getMillisecondsTime();return e.unit}},A=function(t){var r=function(n){return function(e){return.5*n>i.abs(n-e)}},o=e["=="](C.eqConeZip(C.eqConeNode(n["__superclass_Prelude.Eq_0"]())))(t.selectedZip)(f)&&e["=="](u.eqList(e.eqInt))(t.selectedPath)(S.coneGetPath(f))&&r(t.scale)(E)&&_.frustumInside$_$_$(F.drawFrustum,t.cachedFrustum);return o},N=T(n,p);if(N)return function(){a.writeSTRef$_$_$(g.bindings.drawStructsCache,r.Nothing.value)(),x(F.drawFrustum)();var n=y.getMillisecondsTime();return a.writeSTRef$_$_$(g.animatePaintRef,new r.Just(n))(),a.writeSTRef$_$_$(g.bindings.drawStructsCache,r.Nothing.value)(),e.unit};if(!N)return function(){var n=a.readSTRef(g.bindings.drawStructsCache)();if(n instanceof r.Nothing){x(F.calculatedFrustum)();var t=w.toArray(c)();a.writeSTRef$_$_$(g.bindings.drawStructsCache,new r.Just({selectedZip:f,selectedPath:S.coneGetPath(f),scale:E,cachedFrustum:F.calculatedFrustum,structs:t}))();var o=y.getMillisecondsTime();return a.writeSTRef$_$_$(g.animatePaintRef,new r.Just(o))(),e.unit}if(n instanceof r.Just){var i=A(n.value0);if(i)return w.pushAll$_$_$(c,n.value0.structs)(),e.unit;if(!i){x(F.calculatedFrustum)();var t=w.toArray(c)();a.writeSTRef$_$_$(g.bindings.drawStructsCache,new r.Just({selectedZip:f,selectedPath:S.coneGetPath(f),scale:E,cachedFrustum:F.calculatedFrustum,structs:t}))();var o=y.getMillisecondsTime();return a.writeSTRef$_$_$(g.animatePaintRef,new r.Just(o))(),e.unit}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 251, column 31 - line 268, column 3: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 237, column 13 - line 268, column 3: "+[n.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 226, column 5 - line 268, column 3: "+[N.constructor.name])},z=function(n,o,a,u,c,s,f,d,p,g,_){var y=(function(){return d instanceof m.CommandingUpDown?d.value0:0}(),function(){return d instanceof m.CommandingTrans?d.value0:$.emptyTransform(0)}()),T=l.mapMaybe($.getSizeChange)(y.transforms),E=(-(i.pi/p.prefs.angleSelectFactor)*(p.controlState.angleSelect.x+p.prefs.angleSelectAddX),S.coneNumLevel(c)),F=M(E,y.progress,T),x=(i.pi/p.prefs.angleSelectFactor*(p.controlState.angleSelect.y+p.prefs.angleSelectAddY),S.coneIsRoot(c)),A=(S.coneGetPosition(c),b(e.showInt,S.coneGetPath(c))),N=function(){var e=function(){var n=x||s;if(n)return new r.Just(c);if(!n)return S.coneUp(c);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 661, column 15 - line 663, column 32: "+[n.constructor.name])}();if(e instanceof r.Nothing)return{icon:r.Nothing.value,stl:r.Nothing.value,label:r.Nothing.value,color:r.Nothing.value,index:0};if(e instanceof r.Just){var t=S.zipGetEntry(e.value0);return{icon:C.iconName(n)(t),stl:C.stlName(n)(t),label:new r.Just({label:C.label(n)(t),comment:C.comment(n)(t),targetUri:C.targetUri(n)(t)}),color:C.color(n)(t),index:S.coneGetPosition(e.value0)}}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 661, column 9 - line 676, column 5: "+[e.constructor.name])}();2*i.pi/t.toNumber(E);return function(){v.mapE$_$_$(B(n)(a)(h.coosTop)(h.startAngleConst)(1)(F)(2)(y.progress)(g)(A)(p)(_),l.mapMaybe($.getIntro)(y.transforms))(),v.mapE$_$_$(G(n)(a)(h.coosTop)(h.startAngleConst)(1)(F)(2)(y.progress)(g)(A)(p)(_),l.mapMaybe($.getLift)(y.transforms))(),function(){var n=!f;if(n)return function(){return w.push$_$_$(a,{drawIndex:-1,realIndex:N.index,conePath:A,level:3,coordinates:h.coosTop,angle:h.startAngleConst,scale:1,parentScale:1,fade:1,condIconName:N.icon,condSTLName:N.stl,condLabel:N.label,condColor:N.color,drawTag:h.DTFloatLabel.value})(),e.unit};if(!n)return e["return"](P.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 609, column 5 - line 630, column 5: "+[n.constructor.name])}()();var t=!x;if(t)return w.push$_$_$(a,{drawIndex:0,realIndex:N.index,conePath:A,level:function(){if(x)return 0;if(!x)return 1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 638, column 40 - line 638, column 70: "+[x.constructor.name])}(),coordinates:h.coosTop,angle:h.startAngleConst,scale:1,parentScale:1,fade:1,condIconName:N.icon,condSTLName:N.stl,condLabel:N.label,condColor:N.color,drawTag:h.DTCone.value})(),e.unit;if(!t)return e.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 633, column 5 - line 652, column 3: "+[t.constructor.name])}},H=function(n,t,r,a,i){var u=function(){return a instanceof m.CommandingUpDown?a.value0:0}(),c=function(){return a instanceof m.CommandingGlobal?!0:a instanceof m.CommandingClockwork?!0:!1}(),l=function(){if(u>0&&!r)return o.fromJust(S.coneUp(t));if(c)return S.coneRoot(t);if(e.otherwise)return t;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 52, column 1 - line 75, column 1: "+[])}();return function(){var e=k(n,t,l,i,a)(),o=e.commandingScale*i.controlState.zoom,u=_.calcFrustums(i)(),s=w.empty();return J(n,n["__superclass_Prelude.Show_1"](),s,t,l,r,c,a,i,o,u)(),z(n,n["__superclass_Prelude.Show_1"](),s,t,l,r,c,a,i,o,u.drawFrustum)(),p.drawEverything$_$_$(n,n["__superclass_Prelude.Show_1"](),l,r,c,a,i,e,s)()}};n.coneDrawPos$_$_$=H}(PS["ConeCanvas.Frontend.DrawProcessing"]=PS["ConeCanvas.Frontend.DrawProcessing"]||{}),function(n){"use strict";n.addKeyEventListener$_$_$=function(n,e,t){return function(){var r=document.getElementById(t);r.setAttribute("tabindex","0"),r.focus(),r.addEventListener(n,function(n){e(n)()&&n.preventDefault()})}},n.addKeyEventListenerWindow$_$_$=function(n,e){return function(){window.addEventListener(n,function(n){e(n)()&&n.preventDefault()})}},n.eventGetKeyCode=function(n){return n.keyCode},n.isMetaPressed=function(n){return n.metaKey},n.isControlPressed=function(n){return n.ctrlKey},n.isShiftPressed=function(n){return n.shiftKey},n.isAltPressed=function(n){return n.altKey}}(PS["ConeCanvas.Frontend.Events.Keyboard"]=PS["ConeCanvas.Frontend.Events.Keyboard"]||{}),function(n){"use strict";var e=PS["ConeCanvas.Frontend.Events.Keyboard"],t=PS.Prelude,r=PS["Data.Maybe"],o=PS["Data.Set"],a=(PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.Eff"],PS["Data.Either"]),i=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),u=(PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.ConeControl"]),c=function(n,t,o,c,l,s){var f=e.eventGetKeyCode(l),d=function(){if(s)return new a.Left(f);if(!s)return new a.Right(f);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 73, column 14 - line 74, column 3: "+[s.constructor.name])}(),v=function(){if(d instanceof a.Left&&37===d.value0){var n=e.isControlPressed(l)||e.isMetaPressed(l);if(n)return new r.Just(i.KMoveLeft.value);if(!n)return new r.Just(i.KRight.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 76, column 33 - line 77, column 19: "+[n.constructor.name])}if(d instanceof a.Left&&39===d.value0){var t=e.isControlPressed(l)||e.isMetaPressed(l);if(t)return new r.Just(i.KMoveRight.value);if(!t)return new r.Just(i.KLeft.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 78, column 33 - line 79, column 19: "+[t.constructor.name])}if(d instanceof a.Left&&38===d.value0){var o=e.isControlPressed(l)||e.isMetaPressed(l);if(o)return new r.Just(i.KMoveUp.value);if(!o)return new r.Just(i.KDown.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 80, column 33 - line 81, column 19: "+[o.constructor.name])}if(d instanceof a.Left&&40===d.value0){var u=e.isControlPressed(l)||e.isMetaPressed(l);if(u)return new r.Just(i.KMoveDown.value);if(!u)return new r.Just(i.KUp.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 82, column 33 - line 83, column 19: "+[u.constructor.name])}if(d instanceof a.Left&&49===d.value0){var c=e.isShiftPressed(l);if(c){var s=e.isControlPressed(l)||e.isMetaPressed(l);if(s)return new r.Just(i.KSetFirst.value);if(!s)return new r.Just(i.KFirst.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 85, column 35 - line 88, column 35: "+[s.constructor.name])}if(!c)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 84, column 33 - line 89, column 19: "+[c.constructor.name])}if(d instanceof a.Left&&88===d.value0){var f=!e.isShiftPressed(l)&&(e.isControlPressed(l)||e.isMetaPressed(l));if(f)return new r.Just(i.KCut.value);if(!f)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 90, column 33 - line 92, column 19: "+[f.constructor.name])}if(d instanceof a.Left&&67===d.value0){var v=!e.isShiftPressed(l)&&(e.isControlPressed(l)||e.isMetaPressed(l));if(v)return new r.Just(i.KCopy.value);if(!v)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 93, column 33 - line 95, column 19: "+[v.constructor.name])}if(d instanceof a.Left&&86===d.value0){var m=!e.isShiftPressed(l)&&(e.isControlPressed(l)||e.isMetaPressed(l));if(m)return new r.Just(i.KPaste.value);if(!m)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 96, column 33 - line 98, column 19: "+[m.constructor.name])}if(d instanceof a.Left&&76===d.value0){var h=!e.isShiftPressed(l)&&!(e.isControlPressed(l)||e.isMetaPressed(l));if(h)return new r.Just(i.KLink.value);if(!h)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 99, column 33 - line 101, column 19: "+[h.constructor.name])}if(d instanceof a.Left&&70===d.value0){var p=!e.isShiftPressed(l)&&!(e.isControlPressed(l)||e.isMetaPressed(l));if(p)return new r.Just(i.KClockwork.value);if(!p)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 102, column 33 - line 104, column 19: "+[p.constructor.name])}if(d instanceof a.Left&&71===d.value0){var g=!e.isShiftPressed(l)&&!(e.isControlPressed(l)||e.isMetaPressed(l));if(g)return new r.Just(i.KGlobal.value);if(!g)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 105, column 33 - line 107, column 19: "+[g.constructor.name])}if(d instanceof a.Right&&71===d.value0){var w=!e.isShiftPressed(l)&&!(e.isControlPressed(l)||e.isMetaPressed(l));if(w)return new r.Just(i.KUnglobal.value);if(!w)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 108, column 33 - line 110, column 19: "+[w.constructor.name])}if(d instanceof a.Right&&90===d.value0){var _=e.isControlPressed(l)||e.isMetaPressed(l);if(_)return r.Nothing.value;if(!_){var $=!e.isShiftPressed(l);if($)return new r.Just(i.KZoomNormal.value);if(!$)return new r.Just(i.KZoomOut.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 112, column 42 - line 113, column 19: "+[$.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 111, column 33 - line 113, column 19: "+[_.constructor.name])}if(d instanceof a.Right&&66===d.value0){var C=(e.isControlPressed(l)||e.isMetaPressed(l))&&e.isShiftPressed(l);if(C)return new r.Just(i.KBench.value);if(!C)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 114, column 33 - line 117, column 19: "+[C.constructor.name])}if(d instanceof a.Right&&68===d.value0){var S=e.isControlPressed(l)||e.isMetaPressed(l);if(S)return new r.Just(i.KToggleDemo.value);if(!S)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 118, column 33 - line 122, column 19: "+[S.constructor.name])}if(d instanceof a.Right&&75===d.value0){var P=e.isAltPressed(l)||e.isMetaPressed(l);if(P)return new r.Just(i.KToggleControl.value);if(!P)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 123, column 33 - line 126, column 19: "+[P.constructor.name])}if(d instanceof a.Right&&73===d.value0){var y=e.isAltPressed(l)||e.isMetaPressed(l);if(y)return new r.Just(i.KToggleIndex.value);if(!y)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 127, column 33 - line 130, column 19: "+[y.constructor.name])}return d instanceof a.Left&&17===d.value0?new r.Just(i.KEditModeOn.value):d instanceof a.Right&&17===d.value0?new r.Just(i.KEditModeOff.value):r.Nothing.value}();if(v instanceof r.Nothing)return function(){var r=i.readPaintRef$_$_$(n,t)();if(s)return r.keyCallback(!0)(f)(e.isShiftPressed(l))(e.isControlPressed(l))(e.isAltPressed(l))();if(!s)return r.keyCallback(!1)(f)(e.isShiftPressed(l))(e.isControlPressed(l))(e.isAltPressed(l))();throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 138, column 9 - line 141, column 5: "+[s.constructor.name])};if(v instanceof r.Just)return function(){return u.keyAction$_$_$(n,v.value0,t,c)(),!0};throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 135, column 3 - line 145, column 1: "+[v.constructor.name])},l=function(n){return function(r){return function(a){return function(u){return function(l){var s=e.eventGetKeyCode(l);return function(){var e=i.readPaintRef$_$_$(n,r)(),f=!o.member$_$_$(t.ordInt,s,e.bindings.keysPressed);if(f)return!0;if(!f)return i.writePaintRef$_$_$(n,r,function(){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.bindings=function(){var n={};for(var r in e.bindings)e.bindings.hasOwnProperty(r)&&(n[r]=e.bindings[r]);return n.keysPressed=o["delete"](t.ordInt)(s)(e.bindings.keysPressed),n}(),n}())(),c(n,r,a,u,l,!1)();throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 60, column 3 - line 69, column 1: "+[f.constructor.name])}}}}}},s=function(n){return function(r){return function(a){return function(u){return function(l){var s=e.eventGetKeyCode(l);return function(){var e=i.readPaintRef$_$_$(n,r)(),f=o.member$_$_$(t.ordInt,s,e.bindings.keysPressed);if(f)return!0;if(!f)return i.writePaintRef$_$_$(n,r,function(){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.bindings=function(){var n={};for(var r in e.bindings)e.bindings.hasOwnProperty(r)&&(n[r]=e.bindings[r]);return n.keysPressed=o.insert$_$_$(t.ordInt,s,e.bindings.keysPressed),n}(),n}())(),c(n,r,a,u,l,!0)();throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 48, column 3 - line 55, column 1: "+[f.constructor.name])}}}}}},f=function(n,t,r,o){return function(){var a=i.readPaintRef$_$_$(n,t)();if(a.prefs.keyEventsFromWindow)return e.addKeyEventListenerWindow$_$_$("keydown",s(n)(t)(r)(o))(),e.addKeyEventListenerWindow$_$_$("keyup",l(n)(t)(r)(o))();if(!a.prefs.keyEventsFromWindow)return e.addKeyEventListener$_$_$("keydown",s(n)(t)(r)(o),a.bindings.context.canvasName)(),e.addKeyEventListener$_$_$("keyup",l(n)(t)(r)(o),a.bindings.context.canvasName)();throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 33, column 5 - line 42, column 1: "+[a.prefs.keyEventsFromWindow.constructor.name])}};n.handleKeys$_$_$=c,n.handleKeyU=l,n.handleKeyD=s,n.addKeyboardEventListeners$_$_$=f}(PS["ConeCanvas.Frontend.Events.Keyboard"]=PS["ConeCanvas.Frontend.Events.Keyboard"]||{}),function(n){"use strict";n.addMouseEventListener$_$_$=function(n,e,t){return function(){var r=document.getElementById(t);r.addEventListener(n,function(n){e(n)()&&n.preventDefault()})}},n.eventGetButton=function(n){return n.button},n.eventGetIsUp=function(n){return n.deltaY>0},n.getMousePos$_$_$=function(n,e){return function(){var t=document.getElementById(e),r=t.getBoundingClientRect(),o=t.scrollWidth,a=t.width,i=a/o,u=t.scrollHeight,c=t.height,l=c/u;return{x:(n.clientX-r.left)*i,y:(n.clientY-r.top)*l}}}}(PS["ConeCanvas.Frontend.Events.Mouse"]=PS["ConeCanvas.Frontend.Events.Mouse"]||{}),function(n){"use strict";var e=PS["ConeCanvas.Frontend.Events.Mouse"],t=PS.Prelude,r=PS["Data.Maybe"],o=PS["Data.Int"],a=PS["Data.TypedArray"],i=(PS["Graphics.WebGLAll"],PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.Eff"]),u=PS["Data.Array"],c=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),l=(PS["ConeCanvas.Frontend.DrawTypes3d"],
PS["ConeCanvas.Frontend.Pickbuffer"]),s=PS["ConeCanvas.ConeControl"],f=PS["Graphics.WebGLFramebuffer"],d=PS["Graphics.WebGL"],v=PS["Graphics.WebGLTexture"],m=PS["ConeCanvas.Color"],h=function(n){return{x:o.toNumber(n.x),y:o.toNumber(n.y)}},p=function(n){return function(t){return function(r){return function(r){return function(r){var o=e.eventGetIsUp(r);return function(){return s.scrollNotified$_$_$(n,t,o)(),!0}}}}}},g=function(n){return function(r){return function(o){return function(a){return function(a){var u=e.eventGetButton(a);return 0===u?function(){var t=c.readPaintRef$_$_$(n,r)(),i=e.getMousePos$_$_$(a,t.bindings.context.canvasName)();return s.releasedButton$_$_$(n,r,o,h(i))(),!0}:t["return"](i.applicativeEff)(!0)}}}}},w=function(n){return function(t){return function(r){return function(r){return function(r){return function(){var o=c.readPaintRef$_$_$(n,t)(),a=e.getMousePos$_$_$(r,o.bindings.context.canvasName)();return s.motionNotified$_$_$(n,t,h(a))(),!0}}}}}},_=function(n){return function(o){return function(p){return function(p){return function(g){var w=e.eventGetButton(g);return 0===w?function(){var t=c.readPaintRef$_$_$(n,o)(),i=a.asUint8Array([0,0,0,0]),w=e.getMousePos$_$_$(g,t.bindings.context.canvasName)();f.bindFramebuffer(t.bindings.pickBuffer.buf)(),d.viewport(0)(0)(t.windowSize.x)(t.windowSize.y)(),f.framebufferTexture2D$_$_$(f.COLOR_ATTACHMENT0.value,v.TEXTURE_2D.value,t.bindings.pickBuffer.tex)();var _=f.readPixels$_$_$(w.x,t.windowSize.y-w.y,1,1,i)();f.unbindFramebuffer(),d.viewport(0)(0)(t.windowSize.x)(t.windowSize.y)();var $=m.color4IfromArray(a.asArray(_)),C=l.pickColorToInt($),S=function(){var n=u.uncons(u.filter$_$_$(function(n){return n.pickColor===C},t.labelSelection));if(n instanceof r.Nothing)return r.Nothing.value;if(n instanceof r.Just)return new r.Just(n.value0.head.clickIndex);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Mouse line 61, column 30 - line 66, column 9: "+[n.constructor.name])}();return s.pressedButton$_$_$(n,o,p,S,h(w))(),!1}:t["return"](i.applicativeEff)(!1)}}}}},$=function(n,t,r,o){return function(){var a=c.readPaintRef$_$_$(n,t)();return e.addMouseEventListener$_$_$("mousedown",_(n)(t)(r)(o),a.bindings.context.canvasName)(),e.addMouseEventListener$_$_$("mouseup",g(n)(t)(r)(o),a.bindings.context.canvasName)(),e.addMouseEventListener$_$_$("mousemove",w(n)(t)(r)(o),a.bindings.context.canvasName)(),e.addMouseEventListener$_$_$("wheel",p(n)(t)(r)(o),a.bindings.context.canvasName)()}};n.handleMousewheel=p,n.handleMousemove=w,n.handleMouseup=g,n.handleMousedown=_,n.addMouseEventListeners$_$_$=$}(PS["ConeCanvas.Frontend.Events.Mouse"]=PS["ConeCanvas.Frontend.Events.Mouse"]||{}),function(n){"use strict";n.initTouchPrim$_$_$=function(n,e,t,r,o){return function(){var a=document.getElementById(n),i=new Hammer(a);i.get("swipe").set({direction:Hammer.DIRECTION_ALL}),i.on("swipeleft",function(n){t()}),i.on("swiperight",function(n){e()}),i.on("swipeup",function(n){o()}),i.on("swipedown",function(n){r()})}}}(PS["ConeCanvas.Frontend.Events.Touch"]=PS["ConeCanvas.Frontend.Events.Touch"]||{}),function(n){"use strict";var e=PS["ConeCanvas.Frontend.Events.Touch"],t=PS.Prelude,r=(PS["Control.Monad.Eff"],PS["Control.Monad.Eff.WebGL"],PS["ConeCanvas.ConeControlTypes"]),o=(PS["ConeCanvas.Frontend.DrawTypes3d"],PS.ConeCanvas,PS["ConeCanvas.ConeModel"]),a=function(n,e){return function(){return r.modifyPaintRef$_$_$(n,e,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.commandQueue=t["<>"](t.semigroupArray)(n.commandQueue)([o.AnimMoveUp.value]),e})(),t.unit}},i=function(n,e){return function(){return r.modifyPaintRef$_$_$(n,e,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.commandQueue=t["<>"](t.semigroupArray)(n.commandQueue)([new o.AnimMoveRight(1)]),e})(),t.unit}},u=function(n,e){return function(){return r.modifyPaintRef$_$_$(n,e,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.commandQueue=t["<>"](t.semigroupArray)(n.commandQueue)([new o.AnimMoveLeft(1)]),e})(),t.unit}},c=function(n,e){return function(){return r.modifyPaintRef$_$_$(n,e,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.commandQueue=t["<>"](t.semigroupArray)(n.commandQueue)([o.AnimMoveDown.value]),e})(),t.unit}},l=function(n,t){return function(){var o=r.readPaintRef$_$_$(n,t)();return e.initTouchPrim$_$_$(o.bindings.context.canvasName,u(n,t),i(n,t),a(n,t),c(n,t))()}};n.down$_$_$=c,n.up$_$_$=a,n.right$_$_$=i,n.left$_$_$=u,n.initTouch$_$_$=l}(PS["ConeCanvas.Frontend.Events.Touch"]=PS["ConeCanvas.Frontend.Events.Touch"]||{}),function(n){"use strict";var e=(PS.Prelude,PS["Graphics.WebGLAll"],PS["Data.Vector"]),t=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["Control.Monad.Eff"],PS["Graphics.WebGL"]),r=PS["ConeCanvas.Color"],o=function(n,o){return function(){return t.setUniformFloats$_$_$(o.bindings.uLightDirection,e.toArray(o.prefs.lightDirection))(),t.setUniformFloats$_$_$(o.bindings.uLightAmbient,r.color4toArray(o.prefs.lightAmbient))(),t.setUniformFloats$_$_$(o.bindings.uLightDiffuse,r.color4toArray(o.prefs.lightDiffuse))(),t.setUniformFloats$_$_$(o.bindings.uLightSpecular,r.color4toArray(o.prefs.lightSpecular))(),t.setUniformFloats$_$_$(o.bindings.uMaterialAmbient,r.color4toArray(o.prefs.materialAmbient))(),t.setUniformFloats$_$_$(o.bindings.uMaterialDiffuse,r.color4toArray(o.prefs.materialDiffuse))(),t.setUniformFloats$_$_$(o.bindings.uMaterialSpecular,r.color4toArray(o.prefs.materialSpecular))(),t.setUniformFloats$_$_$(o.bindings.uShininess,[o.prefs.shininess])()}},a=function(n,e,o){return t.setUniformFloats$_$_$(e.bindings.uLightDiffuse,r.color4toArray(function(){if(o)return e.prefs.lightDiffuseEdit;if(!o)return e.prefs.lightDiffuse;throw new Error("Failed pattern match at ConeCanvas.Frontend.Lightning line 34, column 23 - line 36, column 59: "+[o.constructor.name])}()))};n.setLightning$_$_$=o,n.setEditLightning$_$_$=a}(PS["ConeCanvas.Frontend.Lightning"]=PS["ConeCanvas.Frontend.Lightning"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Maybe.Unsafe"],o=PS["Data.Int"],a=PS["Control.Monad.ST"],i=PS["Data.Array"],u=PS["Control.Monad.Eff.Random"],c=(PS["Graphics.Canvas"],PS["Graphics.WebGLAll"],PS["Data.ST.Matrix"]),l=PS["Data.Matrix4"],s=(PS["Data.Vector"],PS["Data.Set"]),f=PS["Data.StrMap.ST"],d=PS.Extensions,v=PS["Debug.Trace"],m=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),h=PS["ConeCanvas.Frontend.DrawTypes3d"],p=PS["ConeCanvas.Frontend.DrawProcessing"],g=PS["ConeCanvas.Frontend.Pickbuffer"],w=PS["ConeCanvas.Frontend.Cone"],_=PS["ConeCanvas.Frontend.Textures"],$=PS["ConeCanvas.Frontend.Lightning"],C=PS["ConeCanvas.Frontend.Matrix"],S=PS["ConeCanvas.Frontend.Shaders"],P=(PS["ConeCanvas.Preferences"],PS["ConeCanvas.Frontend.Events.Keyboard"]),y=PS["ConeCanvas.Frontend.Events.Mouse"],b=PS["ConeCanvas.Frontend.Events.Touch"],T=PS["Control.Monad.Eff"],E=PS["Graphics.WebGL"],F=PS["Graphics.WebGLTexture"],x=PS["ConeCanvas.ConeControl"],A=PS["ConeCanvas.ConeModel"],N=PS["ConeCanvas.ConeZipper"],D=PS["ConeCanvas.Color"],M=PS["Graphics.WebGLFramebuffer"],L=PS["Data.TypeNat"],O=function(n,a,c){return function(){var l=m.readPaintRef$_$_$(n,a)();if(l.cycleCallback(),l.benchmark instanceof t.Nothing)return E.requestAnimationFrame(function(){F.activeTexture(0)();var t=x.getMillisecondsTime();x.animateFunc$_$_$(n,a,t,!1)();var s=x.getMillisecondsTime(),f=s-t;return _.constructTextures$_$_$(n,l,x.stepTime-f)(),function(){var t=i["null"](l.commandQueue)&&l.demoMode;if(t){if(l.state instanceof m.OSNormal){if(l.selectionModel instanceof A.OSParent)return e["return"](T.applicativeEff)(e.unit);if(l.selectionModel instanceof A.OSCurrent){var c=N.countLoadedNodes$_$_$(n,N.selGetPos$_$_$(n,l.selectionModel));return function(){var t=u.randomInt$_$_$(0,c-1)(),i=N.getZipFromIndex$_$_$(n,N.selGetPos$_$_$(n,l.selectionModel),t)(),s=N.coneGetPath(r.fromJust(i)),f=u.randomInt$_$_$(1e3,3e3)();return m.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.commandQueue=[new A.AnimClockwork(s),new A.AnimPause(o.toNumber(f))],e})(),e.unit}}throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 148, column 29 - line 160, column 25: "+[l.selectionModel.constructor.name])}return e["return"](T.applicativeEff)(e.unit)}if(!t)return e["return"](T.applicativeEff)(e.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 145, column 17 - line 162, column 17: "+[t.constructor.name])}()(),O(n,a,c)()})();if(l.benchmark instanceof t.Just)return E.requestAnimationFrame(function(){var r=x.getMillisecondsTime();x.animateFunc$_$_$(n,a,r,!1)();var u=x.getMillisecondsTime(),s=u-r;return _.constructTextures$_$_$(n,l,x.stepTime-s)(),function(){var r=i["null"](l.commandQueue);if(r)return function(){return v.traceA(T.applicativeEff)("Benchmark finished cycles: "+(e.show(e.showInt)(l.benchmark.value0.cycles)+(" runtime per cycle:  "+e.show(e.showNumber)(l.benchmark.value0.runtime/o.toNumber(l.benchmark.value0.cycles)))))(),m.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.benchmark=t.Nothing.value,e})()};if(!r)return m.modifyPaintRef$_$_$(n,a,function(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.benchmark=new t.Just({runtime:l.benchmark.value0.runtime+s,cycles:l.benchmark.value0.cycles+1|0}),e});throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 172, column 17 - line 186, column 17: "+[r.constructor.name])}()(),O(n,a,c)()})();throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 134, column 5 - line 188, column 1: "+[l.benchmark.constructor.name])}},I=function(n){return new m.ConeFront({startCanvas:function(e){return function(t){return function(){var r=m.readPaintRef$_$_$(n,e)(),o=E.getCanvasWidth(r.bindings.context)(),a=E.getCanvasHeight(r.bindings.context)();E.viewport(0)(0)(o)(a)(),m.modifyPaintRef$_$_$(n,e,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.windowSize={x:o,y:a},e})();var i=m.readPaintRef$_$_$(n,e)();P.addKeyboardEventListeners$_$_$(n,e,I(n),t)(),y.addMouseEventListeners$_$_$(n,e,I(n),t)(),b.initTouch$_$_$(n,e)(),g.resetPickColor$_$_$(n,i)(),E.setUniformBoolean$_$_$(r.bindings.uUseTexture,!1)(),E.setUniformBoolean$_$_$(r.bindings.uUseTextureFrame,!1)(),E.setUniformFloats$_$_$(r.bindings.uTextureFrameColor,D.color4toArray(i.prefs.textureFrameColor))(),E.setUniformFloats$_$_$(r.bindings.uTexAmbiance,[1])(),E.enableVertexAttribArray(r.bindings.aVertexNormal)(),E.disableVertexAttribArray(r.bindings.aTextureCoord)(),E.disable(E.BLEND.value)(),E.blendFunc$_$_$(E.SRC_ALPHA.value,E.ONE_MINUS_SRC_ALPHA.value)(),E.enable(E.DEPTH_TEST.value)(),E.depthFunc(E.LESS.value)(),$.setLightning$_$_$(n,i)();var u=x.getMillisecondsTime();return x.animateFunc$_$_$(n,e,u,!0)(),O(n,e,I(n))()}}},paintIt:function(t){return function(r){return function(){var o=m.readPaintRef$_$_$(n,t)();g.resetPickColor$_$_$(n,o)(),$.setEditLightning$_$_$(n,o,o.controlState.editMode)(),a.writeSTRef$_$_$(o.controlState.needRepaint,!1)(),M.bindFramebuffer(o.bindings.pickBuffer.buf)(),F.activeTexture(0)(),E.viewport(0)(0)(o.windowSize.x)(o.windowSize.y)(),M.framebufferTexture2D$_$_$(M.COLOR_ATTACHMENT0.value,F.TEXTURE_2D.value,o.bindings.pickBuffer.tex)(),E.clearColor(0)(0)(0)(0)(),E.clear([E.COLOR_BUFFER_BIT.value,E.DEPTH_BUFFER_BIT.value])(),M.unbindFramebuffer(),E.viewport(0)(0)(o.windowSize.x)(o.windowSize.y)(),E.clearDepth(100)(),E.clearColor(o.prefs.backColor.value0)(o.prefs.backColor.value1)(o.prefs.backColor.value2)(o.prefs.backColor.value3)(),E.clear([E.COLOR_BUFFER_BIT.value,E.DEPTH_BUFFER_BIT.value])(),C.setPerspective$_$_$(n,o,1)();var i=function(){if(o.selectionModel instanceof A.OSCurrent)return p.coneDrawPos$_$_$(n,o.selectionModel.value0,!1,r,o);if(o.selectionModel instanceof A.OSParent)return p.coneDrawPos$_$_$(n,o.selectionModel.value0,!0,r,o);throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 243, column 19 - line 246, column 9: "+[o.selectionModel.constructor.name])}()();return m.modifyPaintRef$_$_$(n,t,function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.labelSelection=i,e.counter=n.counter+1|0,e})(),e.unit}}},warningCancel:function(e){return function(t){return function(){var r=m.readPaintRef$_$_$(n,e)();return r.alertCallback(t)(),!0}}},warning:function(t){return function(r){return function(){var o=m.readPaintRef$_$_$(n,t)();return o.alertCallback(r)(),e.unit}}},quit:function(n){return e["return"](T.applicativeEff)(e.unit)},userToDevice:function(n){return function(e){return function(){var r=c.fromSTMat$_$_$(L.s4,n.bindings.mvMatrix)(),a=c.fromSTMat$_$_$(L.s4,n.bindings.pMatrix)(),i=l.project$_$_$([e.x,e.y,e.z],r,a,[0,0,o.toNumber(n.windowSize.x),o.toNumber(n.windowSize.y)]);return i instanceof t.Nothing?t.Nothing.value:i instanceof t.Just&&3===i.value0.length?new t.Just({x:o.toNumber(n.windowSize.x)-i.value0[0],y:i.value0[1],z:i.value0[2]}):d.fail("FrontendWebGL>>userToDevice: Impossible!")()}}},deviceToUser:function(n){return function(e){return function(){var r=c.fromSTMat$_$_$(L.s4,n.bindings.mvMatrix)(),a=c.fromSTMat$_$_$(L.s4,n.bindings.pMatrix)(),i=l.unProject$_$_$([o.toNumber(n.windowSize.x)-e.x,e.y,e.z],r,a,[0,0,o.toNumber(n.windowSize.x),o.toNumber(n.windowSize.y)]);return i instanceof t.Nothing?t.Nothing.value:i instanceof t.Just&&3===i.value0.length?new t.Just({x:i.value0[0],y:i.value0[1],z:i.value0[2]}):d.fail("FrontendWebGL>>deviceToUser: Impossible!")()}}}})},R=function(n,r,o,i,u){return E.runWebGLAttr$_$_$(r,function(){var n={};for(var e in E.defContextAttributes)E.defContextAttributes.hasOwnProperty(e)&&(n[e]=E.defContextAttributes[e]);return n.preserveDrawingBuffer=!1,n}(),function(n){return o(n)},function(r){return E.withShaders$_$_$(S.shaders,function(n){return i(n)},function(o){return function(){E.bindAttribLocation$_$_$(o.webGLProgram,0,"aVertexPosition")();var i=c["identityST'"](L.s4)(),l=c["identityST'"](L.s4)(),d=h.emptyTextureCache(),v=f["new"](),m=a.newSTRef(0)(),p=a.newSTRef(t.Nothing.value)(),$=g.initPickbuffer(r)(),C=w.prepareConeXZ(n.coneHeight)(),S=_.prepareTexture();E.makeBufferFloatDyn([])(),E.makeBufferFloatDyn([])();return u({aVertexPosition:o.aVertexPosition,aVertexNormal:o.aVertexNormal,uPMatrix:o.uPMatrix,uMVMatrix:o.uMVMatrix,uNMatrix:o.uNMatrix,uShininess:o.uShininess,uLightDirection:o.uLightDirection,uLightAmbient:o.uLightAmbient,uLightDiffuse:o.uLightDiffuse,uLightSpecular:o.uLightSpecular,uMaterialAmbient:o.uMaterialAmbient,uMaterialDiffuse:o.uMaterialDiffuse,uMaterialSpecular:o.uMaterialSpecular,uScale:o.uScale,aTextureCoord:o.aTextureCoord,uSampler:o.uSampler,uUseTexture:o.uUseTexture,uSimple:o.uSimple,uUseTextureFrame:o.uUseTextureFrame,uTextureFrameColor:o.uTextureFrameColor,uTexAmbiance:o.uTexAmbiance,webGLProgram:o.webGLProgram,mvMatrix:i,pMatrix:l,keysPressed:s.empty,vBufferCone:C.vBuffer,nBufferCone:C.nBuffer,vBufferSTL:C.vBuffer,nBufferSTL:C.nBuffer,textureCoords:S.textureCoords,vertexIndices:S.vertexIndices,vertexCoos:S.vertexCoos,textureCache:d,stlCache:v,pickBuffer:$,lastPickColor:m,context:r,benchmark:t.Nothing.value,drawStructsCache:p})(),e.unit}})})};n.myFrontend=I,n.loop$_$_$=O,n.initGUI$_$_$=R}(PS["ConeCanvas.Frontend.FrontendWebGL"]=PS["ConeCanvas.Frontend.FrontendWebGL"]||{}),function(n){"use strict";n.navigateToUrlInt=function(n){return function(){globSetURL(n)}},n.handleSelectedPrim=function(n){return function(n){return function(){globSelectedPrim(n)}}},n.handleSelectedPrim$_$_$=function(n,e){return function(){globSelectedPrim(e)}},n.getServerHash=function(){return window.location.hash},n.getSearchString=function(n){return function(){var e=document.getElementById(n);return e.value}}}(PS.Main=PS.Main||{}),function(n){"use strict";var e=PS.Prelude,t=(PS["Data.Maybe"],PS["Data.Foreign.Class"]),r=(PS["Control.Monad.ST"],PS["Data.Map"],PS["Data.List"],PS.ConeCanvas,PS["ConeCanvas.ConeModel"]),o=PS["Data.Either"],a=PS["Data.Foreign.Index"],i=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),u=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),c=function(){function n(){}return n.value=new n,n}(),l=function(){function n(){}return n.value=new n,n}(),s=function(){function n(){}return n.value=new n,n}(),f=function(){function n(){}return n.value=new n,n}(),d=function(){function n(){}return n.value=new n,n}(),v=function(){function n(){}return n.value=new n,n}(),m=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),h=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),p=new e.Show(function(n){if(n instanceof c)return"CPENext";if(n instanceof l)return"CPEPrevious";if(n instanceof s)return"CPEStart";if(n instanceof f)return"CPEEnd";if(n instanceof d)return"CPEExposeCanvas";if(n instanceof v)return"CPEHideCanvas";throw new Error("Failed pattern match at OntoPanel.OntoPanelTypes line 49, column 5 - line 50, column 5: "+[n.constructor.name])}),g=function(n){return new t.IsForeign(function(i){return e.bind(o.bindEither)(t.readProp$_$_$(t.intIsForeign,a.indexString,"nodeId",i))(function(u){return e.bind(o.bindEither)(t.readProp$_$_$(t.arrayIsForeign(r.isForeignConeNode(n)),a.indexString,"nodeChilds",i))(function(n){return e["return"](o.applicativeEither)(new m({nodeId:u,nodeChilds:n}))})})})},w=function(n){return new t.IsForeign(function(i){return e.bind(o.bindEither)(t.readProp$_$_$(t.arrayIsForeign(r.isForeignConeNode(n)),a.indexString,"children",i))(function(r){return e.bind(o.bindEither)(t.readProp$_$_$(t.arrayIsForeign(g(n)),a.indexString,"cacheIt",i))(function(n){return e["return"](o.applicativeEither)(new h({children:r,cacheIt:n}))})})})};n.ChildLoad=h,n.ChildCached=m,n.CPENext=c,n.CPEPrevious=l,n.CPEStart=s,n.CPEEnd=f,n.CPEExposeCanvas=d,n.CPEHideCanvas=v,n.ConePresentationFrame=u,n.FrontendCache=i,n.showConePresentation=p,n.childCachedIsForeign=g,n.childLoadIsForeign=w}(PS["OntoPanel.OntoPanelTypes"]=PS["OntoPanel.OntoPanelTypes"]||{}),function(n){"use strict";n.ajaxGetInt$_$_$=function(n,e){return function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&e(t.responseText)()},t.open("GET",n),t.timeout=2e4,t.ontimeout=function(){console.log("ServerConnection>>ajaxGetInt: Timeout"),e("")()},t.setRequestHeader("Content-Type","application/json"),t.send()}},n.ajaxGetIntSync=function(n){return function(){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.setRequestHeader("Content-Type","application/json"),e.send(),200==e.status?e.responseText:""}},n.ajaxPostInt$_$_$=function(n,e,t){return function(){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(r.responseText)()},r.open("POST",n,!0),r.timeout=2e4,r.ontimeout=function(){console.log("ServerConnection>>ajaxPostInt: Timeout"),t("")()},r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send("data=".concat(e))}}}(PS["OntoPanel.ServerConnection"]=PS["OntoPanel.ServerConnection"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Either"],o=PS["Data.List"],a=PS["Data.Foreign"],i=PS["Data.Foreign.Class"],u=PS["Data.Foreign.NullOrUndefined"],c=(PS.ConeCanvas,PS["OntoPanel.OntoPanelTypes"]),l=PS.Extensions,s=PS["ConeCanvas.ConeModel"],f=PS["Control.Monad.Eff"],d=PS["ConeCanvas.ConeZipper"],v=PS["Data.Foreign.Index"],m=PS["Data.Foldable"],h=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),p=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),g=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),w=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),_=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),$=function(){function n(){}return n.value=new n,n}(),C=function(){function n(){}return n.value=new n,n}(),S=function(){function n(){}return n.value=new n,n}(),P=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),y=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),b=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),T=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),E=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),F=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),x=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),A=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),N=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),D=function(){function n(){}return n.value=new n,n}(),M=function(){function n(){}return n.value=new n,n}(),L=function(){function n(){}return n.value=new n,n}(),O=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),I=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),R=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),k=function(){function n(){}return n.value=new n,n}(),U=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),G=function(n,r){if(r.value1 instanceof t.Nothing)return e["return"](f.applicativeEff)(r.value0);if(r.value1 instanceof t.Just)return function(){var e=d.coneSetPath$_$_$(n,r.value0,r.value1.value0)();if(e instanceof t.Nothing)return r.value0;if(e instanceof t.Just)return e.value0;throw new Error("Failed pattern match at OntoPanel.Foreign line 38, column 5 - line 42, column 1: "+[e.constructor.name])};throw new Error("Failed pattern match at OntoPanel.Foreign line 35, column 1 - line 36, column 1: "+[r.constructor.name])},B=function(n,e){if(e instanceof p)return function(){var t=G(n,e.value0)();return new s.OSCurrent(t)};if(e instanceof g)return function(){var t=G(n,e.value0)();return new s.OSParent(t)};throw new Error("Failed pattern match at OntoPanel.Foreign line 71, column 1 - line 74, column 1: "+[e.constructor.name])},J=function(n){return function(r){if(r instanceof w)return e["return"](f.applicativeEff)(new s.AnimMoveLeft(r.value0));if(r instanceof _)return e["return"](f.applicativeEff)(new s.AnimMoveRight(r.value0));if(r instanceof $)return e["return"](f.applicativeEff)(s.AnimTurnToFirst.value);if(r instanceof C)return e["return"](f.applicativeEff)(s.AnimMoveUp.value);if(r instanceof S)return e["return"](f.applicativeEff)(s.AnimMoveDown.value);if(r instanceof P)return e["return"](f.applicativeEff)(new s.AnimClockwork(r.value0));if(r instanceof y&&r.value0 instanceof t.Nothing)return e["return"](f.applicativeEff)(new s.AnimTransformLeft(t.Nothing.value));if(r instanceof y&&r.value0 instanceof t.Just)return function(){var e=G(n,r.value0.value0)();return new s.AnimTransformLeft(new t.Just(e))};if(r instanceof b&&r.value0 instanceof t.Nothing)return e["return"](f.applicativeEff)(new s.AnimTransformRight(t.Nothing.value));if(r instanceof b&&r.value0 instanceof t.Just)return function(){var e=G(n,r.value0.value0)();return new s.AnimTransformRight(new t.Just(e))};if(r instanceof T&&r.value0 instanceof t.Nothing)return e["return"](f.applicativeEff)(new s.AnimTransformUp(t.Nothing.value));if(r instanceof T&&r.value0 instanceof t.Just)return function(){var e=G(n,r.value0.value0)();return new s.AnimTransformUp(new t.Just(e))};if(r instanceof E&&r.value0 instanceof t.Nothing)return e["return"](f.applicativeEff)(new s.AnimTransformDown(t.Nothing.value));if(r instanceof E&&r.value0 instanceof t.Just)return function(){var e=G(n,r.value0.value0)();return new s.AnimTransformDown(new t.Just(e))};if(r instanceof F&&r.value2 instanceof t.Nothing)return function(){var e=G(n,r.value1)();return new s.AnimTransformIntro(r.value0,e,t.Nothing.value)};if(r instanceof F&&r.value2 instanceof t.Just)return function(){var e=G(n,r.value1)(),o=G(n,r.value2.value0)();return new s.AnimTransformIntro(r.value0,e,new t.Just(o))};if(r instanceof x&&r.value1 instanceof t.Nothing)return e["return"](f.applicativeEff)(new s.AnimTransformExtro(r.value0,t.Nothing.value));if(r instanceof x&&r.value1 instanceof t.Just)return function(){var e=B(n,r.value1.value0)();return new s.AnimTransformExtro(r.value0,new t.Just(e))};if(r instanceof A&&r.value0 instanceof t.Nothing)return e["return"](f.applicativeEff)(new s.AnimTransformShiftToZero(t.Nothing.value));if(r instanceof A&&r.value0 instanceof t.Just)return function(){var e=G(n,r.value0.value0)();return new s.AnimTransformShiftToZero(new t.Just(e))};if(r instanceof N&&r.value1 instanceof t.Nothing)return function(){var e=G(n,r.value0)();return new s.AnimTransformReplace(e)};if(r instanceof N&&r.value1 instanceof t.Just)return function(){var e=G(n,r.value0)(),o=d.coneSetPath$_$_$(n,e,r.value1.value0)();if(o instanceof t.Nothing)return new s.AnimTransformReplace(e);if(o instanceof t.Just)return new s.AnimTransformReplace(o.value0);throw new Error("Failed pattern match at OntoPanel.Foreign line 235, column 5 - line 238, column 1: "+[o.constructor.name])};if(r instanceof D)return e["return"](f.applicativeEff)(s.AnimCut.value);if(r instanceof M)return e["return"](f.applicativeEff)(s.AnimCopy.value);if(r instanceof L)return e["return"](f.applicativeEff)(s.AnimPaste.value);if(r instanceof O)return e["return"](f.applicativeEff)(new s.AnimGlobalView(r.value0));if(r instanceof I)return e["return"](f.applicativeEff)(new s.AnimZoom(r.value0));if(r instanceof R)return e["return"](f.applicativeEff)(new s.AnimPause(r.value0));if(r instanceof k)return e["return"](f.applicativeEff)(s.AnimNull.value);throw new Error("Failed pattern match at OntoPanel.Foreign line 192, column 1 - line 193, column 1: "+[r.constructor.name])}},z=function(n,e){return function(){var t=l.mapM$_$_$(f.monadEff,J(n),e.value0.animations)();return new c.ConePresentationFrame({animations:t,url:e.value0.url})}},H=function(n){return new i.IsForeign(function(a){return e.bind(r.bindEither)(i.readProp$_$_$(s.isForeignConeNode(n),v.indexString,"node",a))(function(n){return e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.arrayIsForeign(i.intIsForeign)),v.indexString,"newConePath",a)))(function(a){return e["return"](r.applicativeEither)(new h({content:n,before:o.Nil.value,after:o.Nil.value,parents:o.Nil.value},function(){if(a instanceof t.Nothing)return t.Nothing.value;if(a instanceof t.Just)return new t.Just(o.toList(m.foldableArray)(a.value0));throw new Error("Failed pattern match at OntoPanel.Foreign line 51, column 19 - line 53, column 56: "+[a.constructor.name])}()))})})})},W=function(n){return new i.IsForeign(function(t){return e.bind(r.bindEither)(i.read(H(n))(t))(function(n){return e.bind(r.bindEither)(i.readProp$_$_$(i.stringIsForeign,v.indexString,"tag",t))(function(e){return"OSCurrent"===e?r.Right.create(new p(n)):"OSParent"===e?r.Right.create(new g(n)):r.Left.create(new a.JSONError("ConeModel>>isForeignConeZip: unknown tag: "+e))})})})},j=function(n){return new i.IsForeign(function(c){return e.bind(r.bindEither)(i.readProp$_$_$(i.stringIsForeign,v.indexString,"tag",c))(function(l){return e.bind(r.bindEither)(function(){return"AnimMoveLeft"===l?r.Right.create(e["<$>"](r.functorEither)(w.create)(i.readProp$_$_$(i.intIsForeign,v.indexString,"left",c))):"AnimMoveRight"===l?r.Right.create(e["<$>"](r.functorEither)(_.create)(i.readProp$_$_$(i.intIsForeign,v.indexString,"right",c))):"AnimTurnToFirst"===l?r.Right.create(e.pure(r.applicativeEither)($.value)):"AnimMoveUp"===l?r.Right.create(e.pure(r.applicativeEither)(C.value)):"AnimMoveDown"===l?r.Right.create(e.pure(r.applicativeEither)(S.value)):"AnimClockwork"===l?r.Right.create(e.bind(r.bindEither)(i.readProp$_$_$(i.arrayIsForeign(i.intIsForeign),v.indexString,"conePath",c))(function(n){return e["return"](r.applicativeEither)(new P(o.toList(m.foldableArray)(n)))})):"AnimTransformLeft"===l?r.Right.create(e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(n)),v.indexString,"model",c)))(function(n){return e["return"](r.applicativeEither)(new y(n))})):"AnimTransformRight"===l?r.Right.create(e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(n)),v.indexString,"model",c)))(function(n){return e["return"](r.applicativeEither)(new b(n))})):"AnimTransformIntro"===l?r.Right.create(e.bind(r.bindEither)(i.readProp$_$_$(i.booleanIsForeign,v.indexString,"leftOrRight",c))(function(t){return e.bind(r.bindEither)(i.readProp$_$_$(H(n),v.indexString,"introModel",c))(function(o){return e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(n)),v.indexString,"model",c)))(function(n){return e["return"](r.applicativeEither)(new F(t,o,n))})})})):"AnimTransformExtro"===l?r.Right.create(e.bind(r.bindEither)(i.readProp$_$_$(i.booleanIsForeign,v.indexString,"leftOrRight",c))(function(t){return e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(W(n)),v.indexString,"model",c)))(function(n){return e["return"](r.applicativeEither)(new x(t,n))})})):"AnimTransformDown"===l?r.Right.create(e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(n)),v.indexString,"model",c)))(function(n){return e["return"](r.applicativeEither)(new E(n))})):"AnimTransformUp"===l?r.Right.create(e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(n)),v.indexString,"model",c)))(function(n){return e["return"](r.applicativeEither)(new T(n))})):"AnimTransformShiftToZero"===l?r.Right.create(e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(n)),v.indexString,"model",c)))(function(n){return e["return"](r.applicativeEither)(new A(n))})):"AnimTransformReplace"===l?r.Right.create(e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.arrayIsForeign(i.intIsForeign)),v.indexString,"newConePath",c)))(function(a){return e.bind(r.bindEither)(i.readProp$_$_$(H(n),v.indexString,"newModel",c))(function(n){if(a instanceof t.Nothing)return e["return"](r.applicativeEither)(new N(n,t.Nothing.value));if(a instanceof t.Just)return e["return"](r.applicativeEither)(new N(n,new t.Just(o.toList(m.foldableArray)(a.value0))));throw new Error("Failed pattern match at OntoPanel.Foreign line 168, column 21 - line 171, column 17: "+[a.constructor.name])})})):"AnimGlobalView"===l?r.Right.create(e["<$>"](r.functorEither)(O.create)(i.readProp$_$_$(i.booleanIsForeign,v.indexString,"startOrFinish",c))):"AnimZoom"===l?r.Right.create(e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.numberIsForeign),v.indexString,"factor",c)))(function(n){return e["return"](r.applicativeEither)(new I(n))})):"AnimPause"===l?r.Right.create(e["<$>"](r.functorEither)(R.create)(i.readProp$_$_$(i.numberIsForeign,v.indexString,"time",c))):"AnimCut"===l?r.Right.create(e.pure(r.applicativeEither)(D.value)):"AnimCopy"===l?r.Right.create(e.pure(r.applicativeEither)(M.value)):"AnimPaste"===l?r.Right.create(e.pure(r.applicativeEither)(L.value)):"AnimNull"===l?r.Right.create(e.pure(r.applicativeEither)(k.value)):r.Left.create(new a.JSONError("ConeModel>>foreignAnimationFS: Unknown tag: ++ show tag"));
}())(function(n){return n})})})},q=function(n){return new i.IsForeign(function(t){return e.bind(r.bindEither)(i.readProp$_$_$(i.arrayIsForeign(j(n)),v.indexString,"animations",t))(function(n){return e.bind(r.bindEither)(e["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.stringIsForeign),v.indexString,"urlExpl",t)))(function(t){return e["return"](r.applicativeEither)(new U({animations:n,url:t}))})})})};n.ConePresentationFrameF=U,n.AnimMoveLeftF=w,n.AnimMoveRightF=_,n.AnimTurnToFirstF=$,n.AnimMoveUpF=C,n.AnimMoveDownF=S,n.AnimClockworkF=P,n.AnimTransformLeftF=y,n.AnimTransformRightF=b,n.AnimTransformUpF=T,n.AnimTransformDownF=E,n.AnimTransformIntroF=F,n.AnimTransformExtroF=x,n.AnimTransformShiftToZeroF=A,n.AnimTransformReplaceF=N,n.AnimCutF=D,n.AnimCopyF=M,n.AnimPasteF=L,n.AnimGlobalViewF=O,n.AnimZoomF=I,n.AnimPauseF=R,n.AnimNullF=k,n.OSCurrentF=p,n.OSParentF=g,n.ConeZipF=h,n.runConePresentationFrameF$_$_$=z,n.runAnimationF=J,n.runConeSelectionF$_$_$=B,n.runConeZipF$_$_$=G,n.isForeignConeZipF=H,n.isForeignConeSelectionF=W,n.foreignAnimation=j,n.foreignConePresentationFrameF=q}(PS["OntoPanel.Foreign"]=PS["OntoPanel.Foreign"]||{}),function(n){"use strict";var e=PS["OntoPanel.ServerConnection"],t=PS.Prelude,r=PS["Data.Either"],o=PS["Data.Maybe"],a=PS["Data.Foreign.Class"],i=PS["Data.List"],u=PS["Control.Monad.Eff"],c=PS["Debug.Trace"],l=(PS.DOM,PS["ConeCanvas.ConeModel"],PS["OntoPanel.OntoPanelTypes"]),s=PS["OntoPanel.Foreign"],f=PS.Extensions,d=PS["Data.Foreign.Index"],v=PS["Data.Foreign"],m=PS["Data.Unfoldable"],h=PS["Data.Foldable"],p=function(){function n(){}return n.value=new n,n}(),g=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),w=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),_=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),$=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),C=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),S=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),P=new a.IsForeign(function(n){return t.bind(r.bindEither)(a.readProp$_$_$(a.stringIsForeign,d.indexString,"tag",n))(function(e){return"PathToRoot"===e?t["<$>"](r.functorEither)(C.create)(a.readProp$_$_$(a.arrayIsForeign(a.intIsForeign),d.indexString,"ids",n)):"IconList"===e?t["<$>"](r.functorEither)(_.create)(a.readProp$_$_$(a.arrayIsForeign(a.stringIsForeign),d.indexString,"icons",n)):"STLList"===e?t["<$>"](r.functorEither)($.create)(a.readProp$_$_$(a.arrayIsForeign(a.stringIsForeign),d.indexString,"stls",n)):"Base64IMG"===e?t["<*>"](r.applyEither)(t["<$>"](r.functorEither)(g.create)(a.readProp$_$_$(a.stringIsForeign,d.indexString,"name",n)))(a.readProp$_$_$(a.stringIsForeign,d.indexString,"base64",n)):"STLBinary"===e?t["<*>"](r.applyEither)(t["<$>"](r.functorEither)(w.create)(a.readProp$_$_$(a.stringIsForeign,d.indexString,"name",n)))(a.readProp$_$_$(a.stringIsForeign,d.indexString,"base64",n)):"Prefs"===e?t["<$>"](r.functorEither)(S.create)(a.readProp$_$_$(a.stringIsForeign,d.indexString,"string",n)):t["return"](r.applicativeEither)(p.value)})}),y=function(n,i,l,s){if(i instanceof o.Just)return e.ajaxPostInt$_$_$(l,s,function(e){return r.either$_$_$(function(n){return c.trace("Parse Error: "+t.show(v.showForeignError)(n))(function(n){return t["return"](u.applicativeEff)(t.unit)})},i.value0,a.readJSON$_$_$(n,e))});if(i instanceof o.Nothing)return e.ajaxPostInt$_$_$(l,s,t["const"](t["return"](u.applicativeEff)(t.unit)));throw new Error("Failed pattern match at OntoPanel.ServerConnection line 125, column 5 - line 133, column 1: "+[i.constructor.name])},b=function(n,e,t){return y(s.foreignConePresentationFrameF(n),new o.Just(t),"/present/event",e)},T=function(n){return y(a.stringIsForeign,o.Nothing.value,"/model/event",t.show(t.showArray(t.showInt))(i.fromList(m.unfoldableArray)(n)))},E=function(n,t){return e.ajaxGetInt$_$_$("/model/full"+t,n)},F=function(n,o,i){return function(){var u=e.ajaxGetIntSync(o)();return r.either$_$_$(function(n){return c.trace("Parse Error: "+t.show(v.showForeignError)(n))(function(n){return i})},t.id(t.categoryFn),a.readJSON$_$_$(n,u))}},x=function(n,e){return F(l.childLoadIsForeign(n),"/cone/children?id="+t.show(t.showString)(e),new l.ChildLoad({children:[],cacheIt:[]}))},A=function(n,i,l){if(i instanceof o.Nothing)return e.ajaxGetInt$_$_$(l,t["const"](t["return"](u.applicativeEff)(t.unit)));if(i instanceof o.Just)return e.ajaxGetInt$_$_$(l,function(e){return r.either$_$_$(function(n){return c.trace("Parse Error: "+t.show(v.showForeignError)(n))(function(n){return t["return"](u.applicativeEff)(t.unit)})},i.value0,a.readJSON$_$_$(n,e))});throw new Error("Failed pattern match at OntoPanel.ServerConnection line 114, column 5 - line 118, column 1: "+[i.constructor.name])},N=function(n){var e=function(e){return e instanceof _?n(e.value0):f.fail("loadIconNames>>Load failure.")};return A(P,new o.Just(e),"/iconlist")},D=function(n,e){var t=function(t){return t instanceof C?e(i.toList(h.foldableArray)(t.value0)):f.fail("URL not found on server: "+n)};return A(P,new o.Just(t),"/cone/rootpath?targeturl="+n)},M=function(n){var e=function(e){return e instanceof S?n(e.value0):f.fail("loadPrefs>>Load failure.")};return A(P,new o.Just(e),"/prefs")},L=function(n){var e=function(e){return e instanceof $?n(e.value0):f.fail("loadSTLNames>>Load failure.")};return A(P,new o.Just(e),"/stllist")};n.CSRInvalid=p,n.CSRBase64IMG=g,n.CSRSTLBinary=w,n.CSRIconList=_,n.CSRSTLList=$,n.CSRPathToRoot=C,n.CSRJson=S,n.ajaxModel$_$_$=E,n.ajaxGet$_$_$=A,n.sendSelected=T,n.presentationPost$_$_$=b,n.loadGet$_$_$=x,n.loadPrefs=M,n.loadSTLNames=L,n.loadIconNames=N,n.loadPath$_$_$=D,n.coneSrvResponseIsForeign=P}(PS["OntoPanel.ServerConnection"]=PS["OntoPanel.ServerConnection"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Map"],o=PS["Control.Monad.ST"],a=PS["Data.List"],i=PS["Data.Either"],u=PS["Data.Foldable"],c=(PS.ConeCanvas,PS["OntoPanel.OntoPanelTypes"]),l=PS["OntoPanel.ServerConnection"],s=PS["Control.Monad.Eff"],f=PS["ConeCanvas.ConeModel"],d=PS["ConeCanvas.ConeZipper"],v=e["<$>"](s.functorEff)(c.FrontendCache.create)(o.newSTRef({cacheContent:r.empty,cacheHits:r.empty})),m=function(n){var o=function(n){if(n instanceof t.Nothing)return new t.Just(1);if(n instanceof t.Just)return new t.Just(n.value0+1|0);throw new Error("Failed pattern match at OntoPanel.FrontendCache line 85, column 5 - line 86, column 5: "+[n.constructor.name])};return r.alter(e.ordInt)(o)(n)},h=function(n){return function(n){return function(t){return r.insert(e.ordInt)(t.value0.nodeId)(a.toList(u.foldableArray)(t.value0.nodeChilds))(n)}}},p=function(n,t,o,a){return r.insert(e.ordInt)(o)(a)(t)},g=function(n){return function(i){return function(c){return function(){var s=o.readSTRef(i.value0)(),f=r.lookup$_$_$(e.ordInt,c,s.cacheContent);if(f instanceof t.Just)return o.writeSTRef$_$_$(i.value0,function(){var n={};for(var e in s)s.hasOwnProperty(e)&&(n[e]=s[e]);return n.cacheHits=m(c)(s.cacheHits),n}())(),a.toList(a.foldableList)(f.value0);if(f instanceof t.Nothing){var d=l.loadGet$_$_$(n,e.show(e.showInt)(c))(),v=p(n,s.cacheContent,c,a.toList(u.foldableArray)(d.value0.children)),g=u.foldl(u.foldableArray)(h(n))(v)(d.value0.cacheIt);return o.writeSTRef$_$_$(i.value0,function(){var n={};for(var e in s)s.hasOwnProperty(e)&&(n[e]=s[e]);return n.cacheContent=g,n}())(),a.toList(u.foldableArray)(d.value0.children)}throw new Error("Failed pattern match at OntoPanel.FrontendCache line 40, column 5 - line 54, column 1: "+[f.constructor.name])}}}},w=function(n){return function(t){return function(r){if(r.value0.children instanceof i.Left)return new f.ConeNode(function(){var e={};for(var o in r.value0)r.value0.hasOwnProperty(o)&&(e[o]=r.value0[o]);return e.children=new i.Left(g(n)(t)),e}());if(r.value0.children instanceof i.Right)return new f.ConeNode(function(){var o={};for(var u in r.value0)r.value0.hasOwnProperty(u)&&(o[u]=r.value0[u]);return o.children=new i.Right(e.map(a.functorList)(w(n)(t))(r.value0.children.value0)),o}());throw new Error("Failed pattern match at OntoPanel.FrontendCache line 56, column 5 - line 60, column 1: "+[r.value0.children.constructor.name])}}},_=function(n,t,r){if(r.value0.children instanceof i.Left)return new f.ConeNode(function(){var e={};for(var o in r.value0)r.value0.hasOwnProperty(o)&&(e[o]=r.value0[o]);return e.children=new i.Left(g(n)(t)),e}());if(r.value0.children instanceof i.Right)return new f.ConeNode(function(){var o={};for(var u in r.value0)r.value0.hasOwnProperty(u)&&(o[u]=r.value0[u]);return o.children=new i.Right(e.map(a.functorList)(w(n)(t))(r.value0.children.value0)),o}());throw new Error("Failed pattern match at OntoPanel.FrontendCache line 56, column 5 - line 60, column 1: "+[r.value0.children.constructor.name])},$=function(n,e,t){return d.makeZipper$_$_$(n,_(n,e,t.content))},C=function(n,e,t){if(t instanceof f.OSCurrent)return new f.OSCurrent($(n,e,t.value0));if(t instanceof f.OSParent)return new f.OSParent($(n,e,t.value0));throw new Error("Failed pattern match at OntoPanel.FrontendCache line 64, column 1 - line 65, column 1: "+[e.constructor.name,t.constructor.name])};n.setLoadFuncSel$_$_$=C,n.setLoadFuncZipper$_$_$=$,n.setLoadFuncNode=w,n.setLoadFuncNode$_$_$=_,n.newCache=v,n.loadFunc=g}(PS["OntoPanel.FrontendCache"]=PS["OntoPanel.FrontendCache"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Foreign"],o=PS["Data.Foreign.Class"],a=PS["Data.Foreign.NullOrUndefined"],i=PS["Data.Either"],u=PS["Data.List"],c=PS["Debug.Trace"],l=(PS.ConeCanvas,PS["OntoPanel.OntoPanelTypes"],PS["OntoPanel.ServerConnection"]),s=PS["OntoPanel.FrontendCache"],f=PS["OntoPanel.Foreign"],d=PS["ConeCanvas.Color"],v=PS["ConeCanvas.ConeModel"],m=PS["Data.Foreign.Index"],h=PS["ConeCanvas.ConeZipper"],p=(PS["Control.Monad.Eff"],new e.Show(function(n){return'"'+(n.label+(" "+(e.show(t.showMaybe(e.showString))(n.condSTL)+'"')))})),g=new e.Eq(function(n){return function(e){return n.entryId===e.entryId}}),w={entryId:0,label:"",targetUri:t.Nothing.value,comment:t.Nothing.value,condIcon:t.Nothing.value,condSTL:t.Nothing.value,condColor:t.Just.create(d.color3fromArray([.5,.5,.5])),isLeaf:!0,isHidden:!0},_=new v.ConeNode({entry:w,nodeId:0,firstInd:0,children:new i.Right(u.Nil.value)}),$=new o.IsForeign(function(n){return e.bind(i.bindEither)(e["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.intIsForeign),m.indexString,"entryId",n)))(function(r){return e.bind(i.bindEither)(o.readProp$_$_$(o.stringIsForeign,m.indexString,"label",n))(function(u){return e.bind(i.bindEither)(e["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.stringIsForeign),m.indexString,"targetUri",n)))(function(c){return e.bind(i.bindEither)(e["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.stringIsForeign),m.indexString,"comment",n)))(function(l){return e.bind(i.bindEither)(e["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.stringIsForeign),m.indexString,"iconName",n)))(function(s){return e.bind(i.bindEither)(e["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.stringIsForeign),m.indexString,"stlName",n)))(function(f){return e.bind(i.bindEither)(e["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.arrayIsForeign(o.numberIsForeign)),m.indexString,"color",n)))(function(a){return e.bind(i.bindEither)(o.readProp$_$_$(o.booleanIsForeign,m.indexString,"isLeaf",n))(function(n){return e["return"](i.applicativeEither)({entryId:function(){if(r instanceof t.Nothing)return 0;if(r instanceof t.Just)return r.value0;throw new Error("Failed pattern match at OntoPanel.DynamicModel line 75, column 31 - line 78, column 13: "+[r.constructor.name])}(),label:u,targetUri:c,comment:l,condIcon:s,condSTL:f,condColor:e["<$>"](t.functorMaybe)(d.color3fromArray)(a),isLeaf:n,isHidden:!1})})})})})})})})})}),C=new v.ConeEntry(function(){return $},function(){return g},function(){return p},function(n){return[]},function(n){return n.condColor},function(n){return n.comment},function(n){return n.entryId},function(n){return n.isHidden},function(n){return n.condIcon},function(n){return n.isLeaf},function(n){return n.label},function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.isHidden=!0,e.isLeaf=!0,e},function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.isHidden=!0,e.isLeaf=!1,e},function(n){return[]},function(n){return t.Nothing.value},function(n){return n.condSTL},function(n){return n.targetUri}),S=function(n){return function(a){return function(u){return function(d){var v=t.maybe$_$_$("",function(n){return function(n){return"seed="+n}(e.show(e.showInt)(n))},a),m=t.maybe$_$_$("",function(n){return function(n){return"ratio="+n}(e.show(e.showInt)(n))},u),p=function(){if(""===v&&""===m)return"";if(""!==v&&""!==m)return"?"+(v+("&"+m));if(""===v)return"?"+m;if(e.otherwise)return"?"+v;throw new Error("Failed pattern match at OntoPanel.DynamicModel line 116, column 1 - line 140, column 28: "+[])}(),g=function(n){return function(a){var u=function(){if(""===a)return new i.Left(new r.JSONError("no server response"));if(e.otherwise)return o.readJSON$_$_$(f.isForeignConeZipF(C),a);throw new Error("Failed pattern match at OntoPanel.DynamicModel line 129, column 13 - line 132, column 13: "+[])}(),l=i.either$_$_$(function(n){return c.trace("Parse Error: "+e.show(r.showForeignError)(n))(function(n){return new f.ConeZipF(h.makeZipper$_$_$(C,_),t.Nothing.value)})},e.id(e.categoryFn),u);return function(){var e=f.runConeZipF$_$_$(C,l)(),r=s.setLoadFuncZipper$_$_$(C,n,e),o=h.coneDown$_$_$(C,r)();if(o instanceof t.Nothing)return d(r)();if(o instanceof t.Just)return d(o.value0)();throw new Error("Failed pattern match at OntoPanel.DynamicModel line 138, column 9 - line 140, column 28: "+[o.constructor.name])}}};return l.ajaxModel$_$_$(g(n),p)}}}};n.dynamicModel=S,n.emptyDynamicModel=_,n.emptyDynamicEntry=w,n.dynamicEntryIsForeign=$,n.dynamicConeEntry=C,n.eqDynamicEntry=g,n.showDynamicEntry=p}(PS["OntoPanel.DynamicModel"]=PS["OntoPanel.DynamicModel"]||{}),function(n){"use strict";n.imageDirect$_$_$=function(n,e,t){return function(){var r=new Image;e&&(r.crossOrigin="anonymous"),r.onload=t(r),r.src=n}}}(PS["OntoPanel.IconLoading"]=PS["OntoPanel.IconLoading"]||{}),function(n){"use strict";var e=PS["OntoPanel.IconLoading"],t=PS.Prelude,r=(PS["Data.Maybe"],PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.Eff"],PS["Data.String"]),o=(PS.DOM,PS["OntoPanel.ServerConnection"],PS["Graphics.Canvas"],function(n){return function(o){if(r.contains$_$_$("http://",n)||r.contains$_$_$("https://",n))return e.imageDirect$_$_$(n,!0,o);if(t.otherwise)return e.imageDirect$_$_$("/icons?name="+n,!1,o);throw new Error("Failed pattern match at OntoPanel.IconLoading line 30, column 1 - line 43, column 1: "+[n.constructor.name,o.constructor.name])}});n.imageAjax=o}(PS["OntoPanel.IconLoading"]=PS["OntoPanel.IconLoading"]||{}),function(n){"use strict";n.primHideCanvas=function(){globCanvasHide()},n.primExposeCanvas=function(){globCanvasExpose()},n.primSetURL=function(n){return function(){globSetURL(n)}}}(PS["OntoPanel.Presentation"]=PS["OntoPanel.Presentation"]||{}),function(n){"use strict";var e=PS["OntoPanel.Presentation"],t=PS.Prelude,r=PS["Control.Monad.Eff"],o=(PS.DOM,PS["Data.Maybe"]),a=(PS.ConeCanvas,PS["OntoPanel.ServerConnection"]),i=PS["OntoPanel.OntoPanelTypes"],u=PS["OntoPanel.FrontendCache"],c=PS["OntoPanel.Foreign"],l=PS["ConeCanvas.ConeModel"],s=function(n){return function(e){return function(t){return t instanceof l.AnimTransformLeft&&t.value0 instanceof o.Just?new l.AnimTransformLeft(new o.Just(u.setLoadFuncZipper$_$_$(n,e,t.value0.value0))):t instanceof l.AnimTransformRight&&t.value0 instanceof o.Just?new l.AnimTransformRight(new o.Just(u.setLoadFuncZipper$_$_$(n,e,t.value0.value0))):t instanceof l.AnimTransformIntro&&t.value2 instanceof o.Nothing?new l.AnimTransformIntro(t.value0,u.setLoadFuncZipper$_$_$(n,e,t.value1),o.Nothing.value):t instanceof l.AnimTransformIntro&&t.value2 instanceof o.Just?new l.AnimTransformIntro(t.value0,u.setLoadFuncZipper$_$_$(n,e,t.value1),new o.Just(u.setLoadFuncZipper$_$_$(n,e,t.value2.value0))):t instanceof l.AnimTransformExtro&&t.value1 instanceof o.Just?new l.AnimTransformExtro(t.value0,new o.Just(u.setLoadFuncSel$_$_$(n,e,t.value1.value0))):t instanceof l.AnimTransformDown&&t.value0 instanceof o.Just?new l.AnimTransformDown(new o.Just(u.setLoadFuncZipper$_$_$(n,e,t.value0.value0))):t instanceof l.AnimTransformUp&&t.value0 instanceof o.Just?new l.AnimTransformUp(new o.Just(u.setLoadFuncZipper$_$_$(n,e,t.value0.value0))):t instanceof l.AnimTransformShiftToZero&&t.value0 instanceof o.Just?new l.AnimTransformShiftToZero(new o.Just(u.setLoadFuncZipper$_$_$(n,e,t.value0.value0))):t}}},f=function(n){return'"'+(n+'"')},d=function(n,r,a){return function(){return r.animate(a.value0.animations)(),a.value0.url instanceof o.Just&&""!==a.value0.url.value0?e.primSetURL(a.value0.url.value0)():t.unit}},v=function(n,o,u,l){return l instanceof i.CPEExposeCanvas?function(){return a.presentationPost$_$_$(n,f(t.show(i.showConePresentation)(l)),function(n){return t["return"](r.applicativeEff)(t.unit)})(),e.primExposeCanvas()}:l instanceof i.CPEHideCanvas?function(){return a.presentationPost$_$_$(n,f(t.show(i.showConePresentation)(l)),function(n){return t["return"](r.applicativeEff)(t.unit)})(),e.primHideCanvas()}:a.presentationPost$_$_$(n,f(t.show(i.showConePresentation)(l)),function(e){return function(){var r=c.runConePresentationFrameF$_$_$(n,e)(),a=t.map(t.functorArray)(s(n)(u))(r.value0.animations);return d(n,o,new i.ConePresentationFrame({animations:a,url:r.value0.url}))()}})},m=function(n){return function(e){return function(o){return function(a){return function(u){return function(c){return function(l){return function(s){var f=s&&!l&&!c&&a;if(f)return 78===u?function(){return v(n,e,o,i.CPENext.value)(),!0}:80===u?function(){return v(n,e,o,i.CPEPrevious.value)(),!0}:83===u?function(){return v(n,e,o,i.CPEStart.value)(),!0}:69===u?function(){return v(n,e,o,i.CPEEnd.value)(),!0}:88===u?function(){return v(n,e,o,i.CPEExposeCanvas.value)(),!0}:72===u?function(){return v(n,e,o,i.CPEHideCanvas.value)(),!0}:t["return"](r.applicativeEff)(!1);if(!f)return t["return"](r.applicativeEff)(!1);throw new Error("Failed pattern match at OntoPanel.Presentation line 74, column 5 - line 98, column 1: "+[f.constructor.name])}}}}}}}};n.installPresentationCallback=m}(PS["OntoPanel.Presentation"]=PS["OntoPanel.Presentation"]||{}),function(n){"use strict";n.stlFromBase64=function(n){for(var e=window.atob(n),t=e.length,r=new Uint8Array(t),o=0;t>o;o++)r[o]=e.charCodeAt(o);return r.buffer},n.getSTLSize=function(n){var e=n.slice(80,84),t=new Uint32Array(e);return t[0]}}(PS["OntoPanel.STLLoading"]=PS["OntoPanel.STLLoading"]||{}),function(n){"use strict";var e=PS["OntoPanel.STLLoading"],t=PS.Prelude,r=PS["Data.Maybe"],o=PS["Control.Monad.Eff"],a=(PS.DOM,PS["Data.ArrayBuffer.Types"],PS["Debug.Trace"]),i=(PS["Control.Monad.Eff.WebGL"],PS["OntoPanel.ServerConnection"]),u=function(n){return function(u){var c=function(n){if(n instanceof i.CSRSTLBinary){var r=e.stlFromBase64(n.value1),c=e.getSTLSize(r);return u(c)(r)}return a.trace("stlEff: wrong answer: ")(function(n){return t["return"](o.applicativeEff)(t.unit)})};return i.ajaxGet$_$_$(i.coneSrvResponseIsForeign,new r.Just(c),n)}},c=function(n){return u("/stl?name="+n)};n.stlAjax=c}(PS["OntoPanel.STLLoading"]=PS["OntoPanel.STLLoading"]||{}),function(n){"use strict";var e=PS.Prelude,t=PS["Control.Monad.ST"],r=PS["Data.String"],o=PS["Data.Maybe"],a=PS["Data.List"],i=(PS.ConeCanvas,PS["ConeCanvas.ConeFilter"]),u=(PS["OntoPanel.OntoPanelTypes"],PS["ConeCanvas.ConeModel"]),c=PS["Control.Monad.Eff"],l=PS["ConeCanvas.ConeZipper"],s=function(n,s,f,d){var v=function(t){return function(r){var i=a.uncons(r);if(i instanceof o.Nothing)return e["return"](c.applicativeEff)(e.unit);if(i instanceof o.Just&&i.value0.tail instanceof a.Nil)return function(){return t.setModel(new u.OSCurrent(l.makeZipper$_$_$(n,i.value0.head)))(),e.unit};if(i instanceof o.Just)return function(){return t.setModel(new u.OSCurrent(l.makeZipper$_$_$(n,i.value0.head)))(),e.unit};throw new Error("Failed pattern match at OntoPanel.Search line 58, column 9 - line 67, column 24: "+[i.constructor.name])}};return function(){var a=t.readSTRef(f)(),c=s.getModel(),l=r.trim(d);if(a instanceof o.Nothing){var m=""===l;if(m)return e.unit;if(!m){if(c instanceof u.OSCurrent){t.writeSTRef$_$_$(f,new o.Just({lastSearch:l,originalModel:c.value0}))();var h=i.filterContainsString(n)(l)(c.value0.content)();return v(s)(h)()}if(c instanceof u.OSParent)return e.unit;throw new Error("Failed pattern match at OntoPanel.Search line 39, column 21 - line 45, column 9: "+[c.constructor.name])}throw new Error("Failed pattern match at OntoPanel.Search line 36, column 13 - line 45, column 9: "+[m.constructor.name])}if(a instanceof o.Just){var p=l===a.value0.lastSearch;if(p)return e.unit;if(!p){var g=""===l;if(g)return t.writeSTRef$_$_$(f,o.Nothing.value)(),s.setModel(new u.OSCurrent(a.value0.originalModel))();if(!g){t.writeSTRef$_$_$(f,new o.Just({lastSearch:l,originalModel:a.value0.originalModel}))();var h=i.filterContainsString(n)(l)(u.runConeZip$_$_$(n,a.value0.originalModel).content)();return v(s)(h)()}throw new Error("Failed pattern match at OntoPanel.Search line 48, column 22 - line 56, column 3: "+[g.constructor.name])}throw new Error("Failed pattern match at OntoPanel.Search line 46, column 13 - line 56, column 3: "+[p.constructor.name])}throw new Error("Failed pattern match at OntoPanel.Search line 34, column 5 - line 56, column 3: "+[a.constructor.name])}};n.keyHandlerContains$_$_$=s}(PS["OntoPanel.Search"]=PS["OntoPanel.Search"]||{}),function(n){"use strict";var e=PS.Main,t=PS.Prelude,r=PS["Data.List"],o=PS["Data.Either"],a=PS["ConeCanvas.Frontend.FrontendWebGL"],i=PS["ConeCanvas.Preferences"],u=PS["Control.Monad.Eff"],c=(PS["Control.Monad.Eff.Exception"],PS["Control.Monad.Eff.Random"],PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.ST"]),l=(PS.DOM,PS["Data.Date"],PS["Data.Maybe"]),s=PS["Data.String"],f=PS["Debug.Trace"],d=PS.Extensions,v=(PS["Graphics.Canvas"],PS.ConeCanvas,PS["OntoPanel.DynamicModel"]),m=PS["OntoPanel.FrontendCache"],h=PS["OntoPanel.IconLoading"],p=(PS["OntoPanel.OntoPanelTypes"],PS["OntoPanel.Presentation"]),g=PS["OntoPanel.STLLoading"],w=PS["OntoPanel.Search"],_=PS["OntoPanel.ServerConnection"],$=PS["ConeCanvas.ConeModel"],C=PS["ConeCanvas.ConeZipper"],S=PS["Data.Foreign"],P=PS["ConeCanvas.ConeControl"],y=function(n){return function(n){return f.trace("updateSearch request: "+n)(function(n){return t["return"](u.applicativeEff)(t.unit)})}},b=function(n){var r=C.selGetEntry(n);if(r.targetUri instanceof l.Just)return e.navigateToUrlInt(r.targetUri.value0);if(r.targetUri instanceof l.Nothing)return t["return"](u.applicativeEff)(t.unit);throw new Error("Failed pattern match at Main line 140, column 32 - line 144, column 1: "+[r.targetUri.constructor.name])},T=function(n){return function(e){return function(o){var a=function(n){return e.animate([new $.AnimClockwork(r.toList(r.foldableList)(n))])};return function(){var r=e.getModel(),i=$.targetUri(n)(C.selGetEntry(r));return i instanceof l.Just&&s.contains$_$_$(i.value0,o)?t.unit:_.loadPath$_$_$(o,a)()}}}},E=function(n){return function(){var r=(c.newSTRef(l.Nothing.value)(),e.getServerHash()),s=function(){return"#bench"===r?!0:!1}(),w=m.newCache();return _.loadIconNames(function(r){return _.loadSTLNames(function(c){return _.loadPrefs(function(m){var E=function(){var n=i.parsePrefs$_$_$(m,i.standardPrefs);if(n instanceof o.Left)return f.trace("PrefsError "+t.show(S.showForeignError)(n.value0))(function(n){return i.standardPrefs});if(n instanceof o.Right)return n.value0;throw new Error("Failed pattern match at Main line 91, column 29 - line 94, column 17: "+[n.constructor.name])}();return function(){if(s)return v.dynamicModel(w)(new l.Just(171))(l.Nothing.value);if(!s)return v.dynamicModel(w)(l.Nothing.value)(l.Nothing.value);throw new Error("Failed pattern match at Main line 94, column 18 - line 96, column 68: "+[s.constructor.name])}()(function(o){var i=C.countLoadedNodes$_$_$(v.dynamicConeEntry,o);return function(){return f.traceA(u.applicativeEff)("got model with loaded node size: "+t.show(t.showInt)(i))(),a.initGUI$_$_$(E,"glcanvas",d.alert,d.alert,function(i){return function(){var f=P.initConeCanvas$_$_$(v.dynamicConeEntry,C.selFromPos(o),$.Browser.value,new l.Just(E),r,c,i,a.myFrontend(v.dynamicConeEntry))();return f.loadIconCallback(h.imageAjax)(),f.loadSTLCallback(g.stlAjax)(),f.keyCallback(p.installPresentationCallback(v.dynamicConeEntry)(f)(w))(),function(){var n=!s;if(n)return f.selectedChanged(function(n){return function(){return b(n)(),e.handleSelectedPrim$_$_$(v.dynamicConeEntry,C.selGetEntry(n))(),_.sendSelected(C.selGetPath(n))()}});if(!n)return t["return"](u.applicativeEff)(t.unit);throw new Error("Failed pattern match at Main line 109, column 35 - line 116, column 35: "+[n.constructor.name])}()(),f.alertCallback(d.alert)(),f.startup(f)(),f.animate([new $.AnimZoom(l.Nothing.value)])(),n({navigateToCone:T(v.dynamicConeEntry)(f),updateSearch:y(f)})()}})()}})})})})()}},F=function(n){return function(t){return function(r){return function(){var o=e.getSearchString("search")();return w.keyHandlerContains$_$_$(n,t,r,o)()}}}};n.updateSearchFull=y,n.navigateToConeFull=T,n.navigateToUrl=b,n.cycleHandler=F,n.main=E,n.getSearchString=e.getSearchString,n.getServerHash=e.getServerHash,n.handleSelectedPrim=e.handleSelectedPrim,n.navigateToUrlInt=e.navigateToUrlInt}(PS.Main=PS.Main||{});var gl,globDivCanvas,coneAPI,tutorial_counter=5;$(document).ready(function(){"use strict";$("#democontent").blur(),$("#glcanvas").focus();var n=function(n){return function(){$(".spinner").hide(),coneAPI=n}};PS.Main.main(n)()});var globCanvasHide=function(){"use strict";globDivCanvas.is(":hidden")||globDivCanvas.slideUp()},globCanvasExpose=function(){"use strict";globDivCanvas.is(":hidden")&&globDivCanvas.show("slow")};$(".subreddit_list li").click(function(){"use strict";"http://reddit.com/r/"+$(this).children("strong")[0].innerHTML});var globSelectedPrim=function(n){"use strict";var e,t,r,o,a;n.comment.hasOwnProperty("value0")&&(e=n.comment.value0,t=e[0],"n"===t?show_subreddit(n.label):(r=new XMLHttpRequest,r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(o=r.responseText,"p"===t?show_post(n.targetUri.value0,n.label,o):"c"===t?show_comment(n.label,o):alert("Data error. Please reload page"))},a="/content?id=".concat(e.slice(1)),console.log("content request: GET "+a),r.open("GET",a,!0),r.timeout=2e3,r.ontimeout=function(){console.log("timeout getting content")},r.send()))},globSetURL=function(n){"use strict";console.log("globSetURL: "+n)};if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){"use strict";var e=n.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(n){"use strict";function e(){var n=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in e)if(void 0!==n.style[t])return{end:e[t]};return!1}n.fn.emulateTransitionEnd=function(e){var t=!1,r=this;n(this).one("bsTransitionEnd",function(){t=!0});var o=function(){t||n(r).trigger(n.support.transition.end)};return setTimeout(o,e),this},n(function(){n.support.transition=e(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(e){return n(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(n){"use strict";function e(e){return this.each(function(){var t=n(this),o=t.data("bs.alert");o||t.data("bs.alert",o=new r(this)),"string"==typeof e&&o[e].call(t)})}var t='[data-dismiss="alert"]',r=function(e){n(e).on("click",t,this.close)};r.VERSION="3.3.6",r.TRANSITION_DURATION=150,r.prototype.close=function(e){function t(){i.detach().trigger("closed.bs.alert").remove()}var o=n(this),a=o.attr("data-target");a||(a=o.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var i=n(a);e&&e.preventDefault(),i.length||(i=o.closest(".alert")),i.trigger(e=n.Event("close.bs.alert")),e.isDefaultPrevented()||(i.removeClass("in"),n.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",t).emulateTransitionEnd(r.TRANSITION_DURATION):t())};var o=n.fn.alert;n.fn.alert=e,n.fn.alert.Constructor=r,n.fn.alert.noConflict=function(){return n.fn.alert=o,this},n(document).on("click.bs.alert.data-api",t,r.prototype.close)}(jQuery),+function(n){"use strict";function e(e){return this.each(function(){var r=n(this),o=r.data("bs.button"),a="object"==typeof e&&e;o||r.data("bs.button",o=new t(this,a)),"toggle"==e?o.toggle():e&&o.setState(e)})}var t=function(e,r){this.$element=n(e),this.options=n.extend({},t.DEFAULTS,r),this.isLoading=!1};t.VERSION="3.3.6",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(e){var t="disabled",r=this.$element,o=r.is("input")?"val":"html",a=r.data();e+="Text",null==a.resetText&&r.data("resetText",r[o]()),setTimeout(n.proxy(function(){r[o](null==a[e]?this.options[e]:a[e]),"loadingText"==e?(this.isLoading=!0,r.addClass(t).attr(t,t)):this.isLoading&&(this.isLoading=!1,r.removeClass(t).removeAttr(t))},this),0)},t.prototype.toggle=function(){var n=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var t=this.$element.find("input");"radio"==t.prop("type")?(t.prop("checked")&&(n=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==t.prop("type")&&(t.prop("checked")!==this.$element.hasClass("active")&&(n=!1),this.$element.toggleClass("active")),t.prop("checked",this.$element.hasClass("active")),n&&t.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=n.fn.button;n.fn.button=e,n.fn.button.Constructor=t,n.fn.button.noConflict=function(){return n.fn.button=r,this},n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn")),e.call(r,"toggle"),n(t.target).is('input[type="radio"]')||n(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){n(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(n){"use strict";function e(e){return this.each(function(){var r=n(this),o=r.data("bs.carousel"),a=n.extend({},t.DEFAULTS,r.data(),"object"==typeof e&&e),i="string"==typeof e?e:a.slide;o||r.data("bs.carousel",o=new t(this,a)),"number"==typeof e?o.to(e):i?o[i]():a.interval&&o.pause().cycle()})}var t=function(e,t){this.$element=n(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))};t.VERSION="3.3.6",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(n){
if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}},t.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)},t.prototype.getItemForDirection=function(n,e){var t=this.getItemIndex(e),r="prev"==n&&0===t||"next"==n&&t==this.$items.length-1;if(r&&!this.options.wrap)return e;var o="prev"==n?-1:1,a=(t+o)%this.$items.length;return this.$items.eq(a)},t.prototype.to=function(n){var e=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));return n>this.$items.length-1||0>n?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))},t.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(e,r){var o=this.$element.find(".item.active"),a=r||this.getItemForDirection(e,o),i=this.interval,u="next"==e?"left":"right",c=this;if(a.hasClass("active"))return this.sliding=!1;var l=a[0],s=n.Event("slide.bs.carousel",{relatedTarget:l,direction:u});if(this.$element.trigger(s),!s.isDefaultPrevented()){if(this.sliding=!0,i&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=n(this.$indicators.children()[this.getItemIndex(a)]);f&&f.addClass("active")}var d=n.Event("slid.bs.carousel",{relatedTarget:l,direction:u});return n.support.transition&&this.$element.hasClass("slide")?(a.addClass(e),a[0].offsetWidth,o.addClass(u),a.addClass(u),o.one("bsTransitionEnd",function(){a.removeClass([e,u].join(" ")).addClass("active"),o.removeClass(["active",u].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(d)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(o.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(d)),i&&this.cycle(),this}};var r=n.fn.carousel;n.fn.carousel=e,n.fn.carousel.Constructor=t,n.fn.carousel.noConflict=function(){return n.fn.carousel=r,this};var o=function(t){var r,o=n(this),a=n(o.attr("data-target")||(r=o.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var i=n.extend({},a.data(),o.data()),u=o.attr("data-slide-to");u&&(i.interval=!1),e.call(a,i),u&&a.data("bs.carousel").to(u),t.preventDefault()}};n(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);e.call(t,t.data())})})}(jQuery),+function(n){"use strict";function e(e){var t,r=e.attr("data-target")||(t=e.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function t(e){return this.each(function(){var t=n(this),o=t.data("bs.collapse"),a=n.extend({},r.DEFAULTS,t.data(),"object"==typeof e&&e);!o&&a.toggle&&/show|hide/.test(e)&&(a.toggle=!1),o||t.data("bs.collapse",o=new r(this,a)),"string"==typeof e&&o[e]()})}var r=function(e,t){this.$element=n(e),this.options=n.extend({},r.DEFAULTS,t),this.$trigger=n('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.6",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var a=n.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(t.call(o,"hide"),e||o.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!n.support.transition)return u.call(this);var c=n.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[i](this.$element[0][c])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=n.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return n.support.transition?void this.$element[t](0).one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(r.TRANSITION_DURATION):o.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,r){var o=n(r);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(n,e){var t=n.hasClass("in");n.attr("aria-expanded",t),e.toggleClass("collapsed",!t).attr("aria-expanded",t)};var o=n.fn.collapse;n.fn.collapse=t,n.fn.collapse.Constructor=r,n.fn.collapse.noConflict=function(){return n.fn.collapse=o,this},n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var o=n(this);o.attr("data-target")||r.preventDefault();var a=e(o),i=a.data("bs.collapse"),u=i?"toggle":o.data();t.call(a,u)})}(jQuery),+function(n){"use strict";function e(e){var t=e.attr("data-target");t||(t=e.attr("href"),t=t&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));var r=t&&n(t);return r&&r.length?r:e.parent()}function t(t){t&&3===t.which||(n(o).remove(),n(a).each(function(){var r=n(this),o=e(r),a={relatedTarget:this};o.hasClass("open")&&(t&&"click"==t.type&&/input|textarea/i.test(t.target.tagName)&&n.contains(o[0],t.target)||(o.trigger(t=n.Event("hide.bs.dropdown",a)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),o.removeClass("open").trigger(n.Event("hidden.bs.dropdown",a)))))}))}function r(e){return this.each(function(){var t=n(this),r=t.data("bs.dropdown");r||t.data("bs.dropdown",r=new i(this)),"string"==typeof e&&r[e].call(t)})}var o=".dropdown-backdrop",a='[data-toggle="dropdown"]',i=function(e){n(e).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.6",i.prototype.toggle=function(r){var o=n(this);if(!o.is(".disabled, :disabled")){var a=e(o),i=a.hasClass("open");if(t(),!i){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",t);var u={relatedTarget:this};if(a.trigger(r=n.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(n.Event("shown.bs.dropdown",u))}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=n(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var o=e(r),i=o.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&o.find(a).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",c=o.find(".dropdown-menu"+u);if(c.length){var l=c.index(t.target);38==t.which&&l>0&&l--,40==t.which&&l<c.length-1&&l++,~l||(l=0),c.eq(l).trigger("focus")}}}};var u=n.fn.dropdown;n.fn.dropdown=r,n.fn.dropdown.Constructor=i,n.fn.dropdown.noConflict=function(){return n.fn.dropdown=u,this},n(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",a,i.prototype.toggle).on("keydown.bs.dropdown.data-api",a,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery),+function(n){"use strict";function e(e,r){return this.each(function(){var o=n(this),a=o.data("bs.modal"),i=n.extend({},t.DEFAULTS,o.data(),"object"==typeof e&&e);a||o.data("bs.modal",a=new t(this,i)),"string"==typeof e?a[e](r):i.show&&a.show(r)})}var t=function(e,t){this.options=t,this.$body=n(document.body),this.$element=n(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.VERSION="3.3.6",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)},t.prototype.show=function(e){var r=this,o=n.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(e){n(e.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=n.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),o&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var a=n.Event("shown.bs.modal",{relatedTarget:e});o?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(a)}))},t.prototype.hide=function(e){e&&e.preventDefault(),e=n.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){27==n.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this)):n(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var n=this;this.$element.hide(),this.backdrop(function(){n.$body.removeClass("modal-open"),n.resetAdjustments(),n.resetScrollbar(),n.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(e){var r=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=n.support.transition&&o;if(this.$backdrop=n(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",n.proxy(function(n){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(n.target===n.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;a?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var i=function(){r.removeBackdrop(),e&&e()};n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else e&&e()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var n=window.innerWidth;if(!n){var e=document.documentElement.getBoundingClientRect();n=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<n,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var n=document.createElement("div");n.className="modal-scrollbar-measure",this.$body.append(n);var e=n.offsetWidth-n.clientWidth;return this.$body[0].removeChild(n),e};var r=n.fn.modal;n.fn.modal=e,n.fn.modal.Constructor=t,n.fn.modal.noConflict=function(){return n.fn.modal=r,this},n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),o=r.attr("href"),a=n(r.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),i=a.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(o)&&o},a.data(),r.data());r.is("a")&&t.preventDefault(),a.one("show.bs.modal",function(n){n.isDefaultPrevented()||a.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),e.call(a,i,this)})}(jQuery),+function(n){"use strict";function e(e){return this.each(function(){var r=n(this),o=r.data("bs.tooltip"),a="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||r.data("bs.tooltip",o=new t(this,a)),"string"==typeof e&&o[e]())})}var t=function(n,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",n,e)};t.VERSION="3.3.6",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(e,t,r){if(this.enabled=!0,this.type=e,this.$element=n(t),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(n.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),a=o.length;a--;){var i=o[a];if("click"==i)this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if("manual"!=i){var u="hover"==i?"mouseenter":"focusin",c="hover"==i?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,n.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,n.proxy(this.leave,this))}}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(e){return e=n.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},t.prototype.getDelegateOptions=function(){var e={},t=this.getDefaults();return this._options&&n.each(this._options,function(n,r){t[n]!=r&&(e[n]=r)}),e},t.prototype.enter=function(e){var t=e instanceof this.constructor?e:n(e.currentTarget).data("bs."+this.type);return t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),n(e.currentTarget).data("bs."+this.type,t)),e instanceof n.Event&&(t.inState["focusin"==e.type?"focus":"hover"]=!0),t.tip().hasClass("in")||"in"==t.hoverState?void(t.hoverState="in"):(clearTimeout(t.timeout),t.hoverState="in",t.options.delay&&t.options.delay.show?void(t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)):t.show())},t.prototype.isInStateTrue=function(){for(var n in this.inState)if(this.inState[n])return!0;return!1},t.prototype.leave=function(e){var t=e instanceof this.constructor?e:n(e.currentTarget).data("bs."+this.type);return t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),n(e.currentTarget).data("bs."+this.type,t)),e instanceof n.Event&&(t.inState["focusout"==e.type?"focus":"hover"]=!1),t.isInStateTrue()?void 0:(clearTimeout(t.timeout),t.hoverState="out",t.options.delay&&t.options.delay.hide?void(t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)):t.hide())},t.prototype.show=function(){var e=n.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var r=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!r)return;var o=this,a=this.tip(),i=this.getUID(this.type);this.setContent(),a.attr("id",i),this.$element.attr("aria-describedby",i),this.options.animation&&a.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,l=c.test(u);l&&(u=u.replace(c,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var s=this.getPosition(),f=a[0].offsetWidth,d=a[0].offsetHeight;if(l){var v=u,m=this.getPosition(this.$viewport);u="bottom"==u&&s.bottom+d>m.bottom?"top":"top"==u&&s.top-d<m.top?"bottom":"right"==u&&s.right+f>m.width?"left":"left"==u&&s.left-f<m.left?"right":u,a.removeClass(v).addClass(u)}var h=this.getCalculatedOffset(u,s,f,d);this.applyPlacement(h,u);var p=function(){var n=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==n&&o.leave(o)};n.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",p).emulateTransitionEnd(t.TRANSITION_DURATION):p()}},t.prototype.applyPlacement=function(e,t){var r=this.tip(),o=r[0].offsetWidth,a=r[0].offsetHeight,i=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(i)&&(i=0),isNaN(u)&&(u=0),e.top+=i,e.left+=u,n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},e),0),r.addClass("in");var c=r[0].offsetWidth,l=r[0].offsetHeight;"top"==t&&l!=a&&(e.top=e.top+a-l);var s=this.getViewportAdjustedDelta(t,e,c,l);s.left?e.left+=s.left:e.top+=s.top;var f=/top|bottom/.test(t),d=f?2*s.left-o+c:2*s.top-a+l,v=f?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(d,r[0][v],f)},t.prototype.replaceArrow=function(n,e,t){this.arrow().css(t?"left":"top",50*(1-n/e)+"%").css(t?"top":"left","")},t.prototype.setContent=function(){var n=this.tip(),e=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](e),n.removeClass("fade in top bottom left right")},t.prototype.hide=function(e){function r(){"in"!=o.hoverState&&a.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,a=n(this.$tip),i=n.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(a.removeClass("in"),n.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",r).emulateTransitionEnd(t.TRANSITION_DURATION):r(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||"string"!=typeof n.attr("data-original-title"))&&n.attr("data-original-title",n.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(e){e=e||this.$element;var t=e[0],r="BODY"==t.tagName,o=t.getBoundingClientRect();null==o.width&&(o=n.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var a=r?{top:0,left:0}:e.offset(),i={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},u=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},o,i,u,a)},t.prototype.getCalculatedOffset=function(n,e,t,r){return"bottom"==n?{top:e.top+e.height,left:e.left+e.width/2-t/2}:"top"==n?{top:e.top-r,left:e.left+e.width/2-t/2}:"left"==n?{top:e.top+e.height/2-r/2,left:e.left-t}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},t.prototype.getViewportAdjustedDelta=function(n,e,t,r){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,i=this.getPosition(this.$viewport);if(/right|left/.test(n)){var u=e.top-a-i.scroll,c=e.top+a-i.scroll+r;u<i.top?o.top=i.top-u:c>i.top+i.height&&(o.top=i.top+i.height-c)}else{var l=e.left-a,s=e.left+a+t;l<i.left?o.left=i.left-l:s>i.right&&(o.left=i.left+i.width-s)}return o},t.prototype.getTitle=function(){var n,e=this.$element,t=this.options;return n=e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(n){do n+=~~(1e6*Math.random());while(document.getElementById(n));return n},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=n(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(e){var t=this;e&&(t=n(e.currentTarget).data("bs."+this.type),t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),n(e.currentTarget).data("bs."+this.type,t))),e?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(t):t.leave(t)):t.tip().hasClass("in")?t.leave(t):t.enter(t)},t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout),this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type),n.$tip&&n.$tip.detach(),n.$tip=null,n.$arrow=null,n.$viewport=null})};var r=n.fn.tooltip;n.fn.tooltip=e,n.fn.tooltip.Constructor=t,n.fn.tooltip.noConflict=function(){return n.fn.tooltip=r,this}}(jQuery),+function(n){"use strict";function e(e){return this.each(function(){var r=n(this),o=r.data("bs.popover"),a="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||r.data("bs.popover",o=new t(this,a)),"string"==typeof e&&o[e]())})}var t=function(n,e){this.init("popover",n,e)};if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.6",t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var n=this.tip(),e=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](e),n.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof t?"html":"append":"text"](t),n.removeClass("fade top bottom left right in"),n.find(".popover-title").html()||n.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var n=this.$element,e=this.options;return n.attr("data-content")||("function"==typeof e.content?e.content.call(n[0]):e.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=n.fn.popover;n.fn.popover=e,n.fn.popover.Constructor=t,n.fn.popover.noConflict=function(){return n.fn.popover=r,this}}(jQuery),+function(n){"use strict";function e(t,r){this.$body=n(document.body),this.$scrollElement=n(n(t).is(document.body)?window:t),this.options=n.extend({},e.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",n.proxy(this.process,this)),this.refresh(),this.process()}function t(t){return this.each(function(){var r=n(this),o=r.data("bs.scrollspy"),a="object"==typeof t&&t;o||r.data("bs.scrollspy",o=new e(this,a)),"string"==typeof t&&o[t]()})}e.VERSION="3.3.6",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,t="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),n.isWindow(this.$scrollElement[0])||(t="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=n(this),o=e.data("target")||e.attr("href"),a=/^#./.test(o)&&n(o);return a&&a.length&&a.is(":visible")&&[[a[t]().top+r,o]]||null}).sort(function(n,e){return n[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var n,e=this.$scrollElement.scrollTop()+this.options.offset,t=this.getScrollHeight(),r=this.options.offset+t-this.$scrollElement.height(),o=this.offsets,a=this.targets,i=this.activeTarget;if(this.scrollHeight!=t&&this.refresh(),e>=r)return i!=(n=a[a.length-1])&&this.activate(n);if(i&&e<o[0])return this.activeTarget=null,this.clear();for(n=o.length;n--;)i!=a[n]&&e>=o[n]&&(void 0===o[n+1]||e<o[n+1])&&this.activate(a[n])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var t=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',r=n(t).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=n.fn.scrollspy;n.fn.scrollspy=t,n.fn.scrollspy.Constructor=e,n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this},n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var e=n(this);t.call(e,e.data())})})}(jQuery),+function(n){"use strict";function e(e){return this.each(function(){var r=n(this),o=r.data("bs.tab");o||r.data("bs.tab",o=new t(this)),"string"==typeof e&&o[e]()})}var t=function(e){this.element=n(e)};t.VERSION="3.3.6",t.TRANSITION_DURATION=150,t.prototype.show=function(){var e=this.element,t=e.closest("ul:not(.dropdown-menu)"),r=e.data("target");if(r||(r=e.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=t.find(".active:last a"),a=n.Event("hide.bs.tab",{relatedTarget:e[0]}),i=n.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(a),e.trigger(i),!i.isDefaultPrevented()&&!a.isDefaultPrevented()){var u=n(r);this.activate(e.closest("li"),t),this.activate(u,u.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},t.prototype.activate=function(e,r,o){function a(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),u?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var i=r.find("> .active"),u=o&&n.support.transition&&(i.length&&i.hasClass("fade")||!!r.find("> .fade").length);i.length&&u?i.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a(),i.removeClass("in")};var r=n.fn.tab;n.fn.tab=e,n.fn.tab.Constructor=t,n.fn.tab.noConflict=function(){return n.fn.tab=r,this};var o=function(t){t.preventDefault(),e.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(n){"use strict";function e(e){return this.each(function(){var r=n(this),o=r.data("bs.affix"),a="object"==typeof e&&e;o||r.data("bs.affix",o=new t(this,a)),"string"==typeof e&&o[e]()})}var t=function(e,r){this.options=n.extend({},t.DEFAULTS,r),this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this)),this.$element=n(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};t.VERSION="3.3.6",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(n,e,t,r){var o=this.$target.scrollTop(),a=this.$element.offset(),i=this.$target.height();if(null!=t&&"top"==this.affixed)return t>o?"top":!1;if("bottom"==this.affixed)return null!=t?o+this.unpin<=a.top?!1:"bottom":n-r>=o+i?!1:"bottom";var u=null==this.affixed,c=u?o:a.top,l=u?i:e;return null!=t&&t>=o?"top":null!=r&&c+l>=n-r?"bottom":!1},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-n},t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),r=this.options.offset,o=r.top,a=r.bottom,i=Math.max(n(document).height(),n(document.body).height());"object"!=typeof r&&(a=o=r),"function"==typeof o&&(o=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var u=this.getState(i,e,o,a);if(this.affixed!=u){null!=this.unpin&&this.$element.css("top","");var c="affix"+(u?"-"+u:""),l=n.Event(c+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==u&&this.$element.offset({top:i-e-a})}};var r=n.fn.affix;n.fn.affix=e,n.fn.affix.Constructor=t,n.fn.affix.noConflict=function(){return n.fn.affix=r,this},n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var t=n(this),r=t.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),e.call(t,r)})})}(jQuery),function(){var n,e,t,r,o,a,i;r=function(n,e){var t,r,o,a;o=[];for(r in e.prototype)try{
a=e.prototype[r],null==n[r]&&"function"!=typeof a?o.push(n[r]=a):o.push(void 0)}catch(i){t=i}return o},n={},null==n.options&&(n.options={}),t={checks:{xhr:{url:function(){return"/favicon.ico?_="+Math.floor(1e9*Math.random())},timeout:5e3},image:{url:function(){return"/favicon.ico?_="+Math.floor(1e9*Math.random())}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0},o=function(n,e){var t,r,o,a,i,u;for(t=n,u=e.split("."),r=o=0,a=u.length;a>o&&(i=u[r],t=t[i],"object"==typeof t);r=++o);return r===u.length-1?t:void 0},n.getOption=function(e){var r,a;return a=null!=(r=o(n.options,e))?r:o(t,e),"function"==typeof a?a():a},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(n.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return n.confirmDown()},!1),n.state="up",n.markUp=function(){return n.trigger("confirmed-up"),"up"!==n.state?(n.state="up",n.trigger("up")):void 0},n.markDown=function(){return n.trigger("confirmed-down"),"down"!==n.state?(n.state="down",n.trigger("down")):void 0},a={},n.on=function(e,t,r){var o,i,u,c,l;if(i=e.split(" "),i.length>1){for(l=[],u=0,c=i.length;c>u;u++)o=i[u],l.push(n.on(o,t,r));return l}return null==a[e]&&(a[e]=[]),a[e].push([r,t])},n.off=function(n,e){var t,r,o,i,u;if(null!=a[n]){if(e){for(o=0,u=[];o<a[n].length;)i=a[n][o],r=i[0],t=i[1],t===e?u.push(a[n].splice(o,1)):u.push(o++);return u}return a[n]=[]}},n.trigger=function(n){var e,t,r,o,i,u,c;if(null!=a[n]){for(i=a[n],c=[],r=0,o=i.length;o>r;r++)u=i[r],e=u[0],t=u[1],c.push(t.call(e));return c}},e=function(n,e,t){var r,o,a,i,u;return u=function(){return n.status&&n.status<12e3?e():t()},null===n.onprogress?(r=n.onerror,n.onerror=function(){return t(),"function"==typeof r?r.apply(null,arguments):void 0},i=n.ontimeout,n.ontimeout=function(){return t(),"function"==typeof i?i.apply(null,arguments):void 0},o=n.onload,n.onload=function(){return u(),"function"==typeof o?o.apply(null,arguments):void 0}):(a=n.onreadystatechange,n.onreadystatechange=function(){return 4===n.readyState?u():0===n.readyState&&t(),"function"==typeof a?a.apply(null,arguments):void 0})},n.checks={},n.checks.xhr=function(){var t,r;r=new XMLHttpRequest,r.offline=!1,r.open("HEAD",n.getOption("checks.xhr.url"),!0),null!=r.timeout&&(r.timeout=n.getOption("checks.xhr.timeout")),e(r,n.markUp,n.markDown);try{r.send()}catch(o){t=o,n.markDown()}return r},n.checks.image=function(){var e;return e=document.createElement("img"),e.onerror=n.markDown,e.onload=n.markUp,void(e.src=n.getOption("checks.image.url"))},n.checks.down=n.markDown,n.checks.up=n.markUp,n.check=function(){return n.trigger("checking"),n.checks[n.getOption("checks.active")]()},n.confirmUp=n.confirmDown=n.check,n.onXHR=function(n){var e,t,o;return o=function(e,t){var r;return r=e.open,e.open=function(o,a,i,u,c){return n({type:o,url:a,async:i,flags:t,user:u,password:c,xhr:e}),r.apply(e,arguments)}},t=window.XMLHttpRequest,window.XMLHttpRequest=function(n){var e,r,a;return a=new t(n),o(a,n),r=a.setRequestHeader,a.headers={},a.setRequestHeader=function(n,e){return a.headers[n]=e,r.call(a,n,e)},e=a.overrideMimeType,a.overrideMimeType=function(n){return a.mimeType=n,e.call(a,n)},a},r(window.XMLHttpRequest,t),null!=window.XDomainRequest?(e=window.XDomainRequest,window.XDomainRequest=function(){var n;return n=new e,o(n),n},r(window.XDomainRequest,e)):void 0},i=function(){return n.getOption("interceptRequests")&&n.onXHR(function(t){var r;return r=t.xhr,r.offline!==!1?e(r,n.markUp,n.confirmDown):void 0}),n.getOption("checkOnLoad")?n.check():void 0},setTimeout(i,0),window.Offline=n}.call(this),function(){var n,e,t,r,o,a,i,u,c;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");r=Offline.reconnect={},a=null,o=function(){var n;return null!=r.state&&"inactive"!==r.state&&Offline.trigger("reconnect:stopped"),r.state="inactive",r.remaining=r.delay=null!=(n=Offline.getOption("reconnect.initialDelay"))?n:3},e=function(){var n,e;return n=null!=(e=Offline.getOption("reconnect.delay"))?e:Math.min(Math.ceil(1.5*r.delay),3600),r.remaining=r.delay=n},i=function(){return"connecting"!==r.state?(r.remaining-=1,Offline.trigger("reconnect:tick"),0===r.remaining?u():void 0):void 0},u=function(){return"waiting"===r.state?(Offline.trigger("reconnect:connecting"),r.state="connecting",Offline.check()):void 0},n=function(){return Offline.getOption("reconnect")?(o(),r.state="waiting",Offline.trigger("reconnect:started"),a=setInterval(i,1e3)):void 0},c=function(){return null!=a&&clearInterval(a),o()},t=function(){return Offline.getOption("reconnect")&&"connecting"===r.state?(Offline.trigger("reconnect:failure"),r.state="waiting",e()):void 0},r.tryNow=u,o(),Offline.on("down",n),Offline.on("confirmed-down",t),Offline.on("up",c)}.call(this),function(){var n,e,t,r,o,a;if(!window.Offline)throw new Error("Requests module brought in without offline.js");t=[],a=!1,r=function(n){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(a=!0),t.push(n)},o=function(n){var e,t,r,o,a,i,u,c,l;l=n.xhr,i=n.url,a=n.type,u=n.user,r=n.password,e=n.body,l.abort(),l.open(a,i,!0,u,r),o=l.headers;for(t in o)c=o[t],l.setRequestHeader(t,c);return l.mimeType&&l.overrideMimeType(l.mimeType),l.send(e)},n=function(){return t=[]},e=function(){var e,r,a,i,u,c;for(Offline.trigger("requests:flush"),u={},e=0,a=t.length;a>e;e++)i=t[e],c=i.url.replace(/(\?|&)_=[0-9]+/,function(n,e){return"?"===e?e:""}),u[i.type.toUpperCase()+" - "+c]=i;for(r in u)i=u[r],o(i);return n()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return a?(a=!1,n()):void 0}),Offline.on("up",e),Offline.on("down",function(){return a=!1}),Offline.onXHR(function(n){var e,t,o,a,i;return i=n.xhr,o=n.async,i.offline!==!1&&(a=function(){return r(n)},t=i.send,i.send=function(e){return n.body=e,t.apply(i,arguments)},o)?null===i.onprogress?(i.addEventListener("error",a,!1),i.addEventListener("timeout",a,!1)):(e=i.onreadystatechange,i.onreadystatechange=function(){return 0===i.readyState?a():4===i.readyState&&(0===i.status||i.status>=12e3)&&a(),"function"==typeof e?e.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:e,clear:n}):void 0},0)}.call(this),function(){var n,e,t,r,o;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(r=["up","down"],e=0,t=r.length;t>e;e++)o=r[e],(document.querySelector("script[data-simulate='"+o+"']")||localStorage.OFFLINE_SIMULATE===o)&&(null==Offline.options&&(Offline.options={}),null==(n=Offline.options).checks&&(n.checks={}),Offline.options.checks.active=o)}.call(this),function(){var n,e,t,r,o,a,i,u,c,l,s,f,d;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");e='<div class="offline-ui"><div class="offline-ui-content"></div></div>',n='<a href class="offline-ui-retry"></a>',a=function(n){var e;return e=document.createElement("div"),e.innerHTML=n,e.children[0]},i=o=null,r=function(n){return s(n),i.className+=" "+n},s=function(n){return i.className=i.className.replace(new RegExp("(^| )"+n.split(" ").join("|")+"( |$)","gi")," ")},c={},u=function(n,e){return r(n),null!=c[n]&&clearTimeout(c[n]),c[n]=setTimeout(function(){return s(n),delete c[n]},1e3*e)},d=function(n){var e,t,r,o;r={day:86400,hour:3600,minute:60,second:1};for(t in r)if(e=r[t],n>=e)return o=Math.floor(n/e),[o,t];return["now",""]},f=function(){var t,u;return i=a(e),document.body.appendChild(i),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(i.appendChild(a(n)),t=i.querySelector(".offline-ui-retry"),u=function(n){return n.preventDefault(),Offline.reconnect.tryNow()},null!=t.addEventListener?t.addEventListener("click",u,!1):t.attachEvent("click",u)),r("offline-ui-"+Offline.state),o=i.querySelector(".offline-ui-content")},l=function(){return f(),Offline.on("up",function(){return s("offline-ui-down"),r("offline-ui-up"),u("offline-ui-up-2s",2),u("offline-ui-up-5s",5)}),Offline.on("down",function(){return s("offline-ui-up"),r("offline-ui-down"),u("offline-ui-down-2s",2),u("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return r("offline-ui-connecting"),s("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var n,e,t;return r("offline-ui-waiting"),s("offline-ui-connecting"),n=d(Offline.reconnect.remaining),e=n[0],t=n[1],o.setAttribute("data-retry-in-value",e),o.setAttribute("data-retry-in-unit",t)}),Offline.on("reconnect:stopped",function(){return s("offline-ui-connecting offline-ui-waiting"),o.setAttribute("data-retry-in-value",null),o.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return u("offline-ui-reconnect-failed-2s",2),u("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return u("offline-ui-reconnect-succeeded-2s",2),u("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?l():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",l,!1):(t=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&l(),"function"==typeof t?t.apply(null,arguments):void 0})}.call(this),function(n,e,t,r){"use strict";function o(n,e,t){return setTimeout(l(n,t),e)}function a(n,e,t){return Array.isArray(n)?(i(n,t[e],t),!0):!1}function i(n,e,t){var o;if(n)if(n.forEach)n.forEach(e,t);else if(n.length!==r)for(o=0;o<n.length;)e.call(t,n[o],o,n),o++;else for(o in n)n.hasOwnProperty(o)&&e.call(t,n[o],o,n)}function u(e,t,r){var o="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace"),r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=n.console&&(n.console.warn||n.console.log);return a&&a.call(n.console,o,r),e.apply(this,arguments)}}function c(n,e,t){var r,o=e.prototype;r=n.prototype=Object.create(o),r.constructor=n,r._super=o,t&&dn(r,t)}function l(n,e){return function(){return n.apply(e,arguments)}}function s(n,e){return typeof n==hn?n.apply(e?e[0]||r:r,e):n}function f(n,e){return n===r?e:n}function d(n,e,t){i(p(e),function(e){n.addEventListener(e,t,!1)})}function v(n,e,t){i(p(e),function(e){n.removeEventListener(e,t,!1)})}function m(n,e){for(;n;){if(n==e)return!0;n=n.parentNode}return!1}function h(n,e){return n.indexOf(e)>-1}function p(n){return n.trim().split(/\s+/g)}function g(n,e,t){if(n.indexOf&&!t)return n.indexOf(e);for(var r=0;r<n.length;){if(t&&n[r][t]==e||!t&&n[r]===e)return r;r++}return-1}function w(n){return Array.prototype.slice.call(n,0)}function _(n,e,t){for(var r=[],o=[],a=0;a<n.length;){var i=e?n[a][e]:n[a];g(o,i)<0&&r.push(n[a]),o[a]=i,a++}return t&&(r=e?r.sort(function(n,t){return n[e]>t[e]}):r.sort()),r}function $(n,e){for(var t,o,a=e[0].toUpperCase()+e.slice(1),i=0;i<vn.length;){if(t=vn[i],o=t?t+a:e,o in n)return o;i++}return r}function C(){return Cn++}function S(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||n}function P(n,e){var t=this;this.manager=n,this.callback=e,this.element=n.element,this.target=n.options.inputTarget,this.domHandler=function(e){s(n.options.enable,[n])&&t.handler(e)},this.init()}function y(n){var e,t=n.options.inputClass;return new(e=t?t:yn?k:bn?B:Pn?z:R)(n,b)}function b(n,e,t){var r=t.pointers.length,o=t.changedPointers.length,a=e&Nn&&r-o===0,i=e&(Mn|Ln)&&r-o===0;t.isFirst=!!a,t.isFinal=!!i,a&&(n.session={}),t.eventType=e,T(n,t),n.emit("hammer.input",t),n.recognize(t),n.session.prevInput=t}function T(n,e){var t=n.session,r=e.pointers,o=r.length;t.firstInput||(t.firstInput=x(e)),o>1&&!t.firstMultiple?t.firstMultiple=x(e):1===o&&(t.firstMultiple=!1);var a=t.firstInput,i=t.firstMultiple,u=i?i.center:a.center,c=e.center=A(r);e.timeStamp=wn(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=L(u,c),e.distance=M(u,c),E(t,e),e.offsetDirection=D(e.deltaX,e.deltaY);var l=N(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=gn(l.x)>gn(l.y)?l.x:l.y,e.scale=i?I(i.pointers,r):1,e.rotation=i?O(i.pointers,r):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,F(t,e);var s=n.element;m(e.srcEvent.target,s)&&(s=e.srcEvent.target),e.target=s}function E(n,e){var t=e.center,r=n.offsetDelta||{},o=n.prevDelta||{},a=n.prevInput||{};(e.eventType===Nn||a.eventType===Mn)&&(o=n.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=n.offsetDelta={x:t.x,y:t.y}),e.deltaX=o.x+(t.x-r.x),e.deltaY=o.y+(t.y-r.y)}function F(n,e){var t,o,a,i,u=n.lastInterval||e,c=e.timeStamp-u.timeStamp;if(e.eventType!=Ln&&(c>An||u.velocity===r)){var l=e.deltaX-u.deltaX,s=e.deltaY-u.deltaY,f=N(c,l,s);o=f.x,a=f.y,t=gn(f.x)>gn(f.y)?f.x:f.y,i=D(l,s),n.lastInterval=e}else t=u.velocity,o=u.velocityX,a=u.velocityY,i=u.direction;e.velocity=t,e.velocityX=o,e.velocityY=a,e.direction=i}function x(n){for(var e=[],t=0;t<n.pointers.length;)e[t]={clientX:pn(n.pointers[t].clientX),clientY:pn(n.pointers[t].clientY)},t++;return{timeStamp:wn(),pointers:e,center:A(e),deltaX:n.deltaX,deltaY:n.deltaY}}function A(n){var e=n.length;if(1===e)return{x:pn(n[0].clientX),y:pn(n[0].clientY)};for(var t=0,r=0,o=0;e>o;)t+=n[o].clientX,r+=n[o].clientY,o++;return{x:pn(t/e),y:pn(r/e)}}function N(n,e,t){return{x:e/n||0,y:t/n||0}}function D(n,e){return n===e?On:gn(n)>=gn(e)?0>n?In:Rn:0>e?kn:Un}function M(n,e,t){t||(t=zn);var r=e[t[0]]-n[t[0]],o=e[t[1]]-n[t[1]];return Math.sqrt(r*r+o*o)}function L(n,e,t){t||(t=zn);var r=e[t[0]]-n[t[0]],o=e[t[1]]-n[t[1]];return 180*Math.atan2(o,r)/Math.PI}function O(n,e){return L(e[1],e[0],Hn)+L(n[1],n[0],Hn)}function I(n,e){return M(e[0],e[1],Hn)/M(n[0],n[1],Hn)}function R(){this.evEl=jn,this.evWin=qn,this.pressed=!1,P.apply(this,arguments)}function k(){this.evEl=Xn,this.evWin=Kn,P.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Qn,this.evWin=ne,this.started=!1,P.apply(this,arguments)}function G(n,e){var t=w(n.touches),r=w(n.changedTouches);return e&(Mn|Ln)&&(t=_(t.concat(r),"identifier",!0)),[t,r]}function B(){this.evTarget=te,this.targetIds={},P.apply(this,arguments)}function J(n,e){var t=w(n.touches),r=this.targetIds;if(e&(Nn|Dn)&&1===t.length)return r[t[0].identifier]=!0,[t,t];var o,a,i=w(n.changedTouches),u=[],c=this.target;if(a=t.filter(function(n){return m(n.target,c)}),e===Nn)for(o=0;o<a.length;)r[a[o].identifier]=!0,o++;for(o=0;o<i.length;)r[i[o].identifier]&&u.push(i[o]),e&(Mn|Ln)&&delete r[i[o].identifier],o++;return u.length?[_(a.concat(u),"identifier",!0),u]:void 0}function z(){P.apply(this,arguments);var n=l(this.handler,this);this.touch=new B(this.manager,n),this.mouse=new R(this.manager,n),this.primaryTouch=null,this.lastTouches=[]}function H(n,e){n&Nn?(this.primaryTouch=e.changedPointers[0].identifier,W.call(this,e)):n&(Mn|Ln)&&W.call(this,e)}function W(n){var e=n.changedPointers[0];if(e.identifier===this.primaryTouch){var t={x:e.clientX,y:e.clientY};this.lastTouches.push(t);var r=this.lastTouches,o=function(){var n=r.indexOf(t);n>-1&&r.splice(n,1)};setTimeout(o,re)}}function j(n){for(var e=n.srcEvent.clientX,t=n.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],a=Math.abs(e-o.x),i=Math.abs(t-o.y);if(oe>=a&&oe>=i)return!0}return!1}function q(n,e){this.manager=n,this.set(e)}function V(n){if(h(n,se))return se;var e=h(n,fe),t=h(n,de);return e&&t?se:e||t?e?fe:de:h(n,le)?le:ce}function Z(){if(!ie)return!1;var e={},t=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){e[r]=t?n.CSS.supports("touch-action",r):!0}),e}function X(n){this.options=dn({},this.defaults,n||{}),this.id=C(),this.manager=null,this.options.enable=f(this.options.enable,!0),this.state=me,this.simultaneous={},this.requireFail=[]}function K(n){return n&_e?"cancel":n&ge?"end":n&pe?"move":n&he?"start":""}function Y(n){return n==Un?"down":n==kn?"up":n==In?"left":n==Rn?"right":""}function Q(n,e){var t=e.manager;return t?t.get(n):n}function nn(){X.apply(this,arguments)}function en(){nn.apply(this,arguments),this.pX=null,this.pY=null}function tn(){nn.apply(this,arguments)}function rn(){X.apply(this,arguments),this._timer=null,this._input=null}function on(){nn.apply(this,arguments)}function an(){nn.apply(this,arguments)}function un(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function cn(n,e){return e=e||{},e.recognizers=f(e.recognizers,cn.defaults.preset),new ln(n,e)}function ln(n,e){this.options=dn({},cn.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||n,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=n,this.input=y(this),this.touchAction=new q(this,this.options.touchAction),sn(this,!0),i(this.options.recognizers,function(n){var e=this.add(new n[0](n[1]));n[2]&&e.recognizeWith(n[2]),n[3]&&e.requireFailure(n[3])},this)}function sn(n,e){var t=n.element;if(t.style){var r;i(n.options.cssProps,function(o,a){r=$(t.style,a),e?(n.oldCssProps[r]=t.style[r],t.style[r]=o):t.style[r]=n.oldCssProps[r]||""}),e||(n.oldCssProps={})}}function fn(n,t){var r=e.createEvent("Event");r.initEvent(n,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}var dn,vn=["","webkit","Moz","MS","ms","o"],mn=e.createElement("div"),hn="function",pn=Math.round,gn=Math.abs,wn=Date.now;dn="function"!=typeof Object.assign?function(n){if(n===r||null===n)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),t=1;t<arguments.length;t++){var o=arguments[t];if(o!==r&&null!==o)for(var a in o)o.hasOwnProperty(a)&&(e[a]=o[a])}return e}:Object.assign;var _n=u(function(n,e,t){for(var o=Object.keys(e),a=0;a<o.length;)(!t||t&&n[o[a]]===r)&&(n[o[a]]=e[o[a]]),a++;return n},"extend","Use `assign`."),$n=u(function(n,e){return _n(n,e,!0)},"merge","Use `assign`."),Cn=1,Sn=/mobile|tablet|ip(ad|hone|od)|android/i,Pn="ontouchstart"in n,yn=$(n,"PointerEvent")!==r,bn=Pn&&Sn.test(navigator.userAgent),Tn="touch",En="pen",Fn="mouse",xn="kinect",An=25,Nn=1,Dn=2,Mn=4,Ln=8,On=1,In=2,Rn=4,kn=8,Un=16,Gn=In|Rn,Bn=kn|Un,Jn=Gn|Bn,zn=["x","y"],Hn=["clientX","clientY"];P.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(S(this.element),this.evWin,this.domHandler)}};var Wn={mousedown:Nn,mousemove:Dn,mouseup:Mn},jn="mousedown",qn="mousemove mouseup";c(R,P,{handler:function(n){var e=Wn[n.type];e&Nn&&0===n.button&&(this.pressed=!0),e&Dn&&1!==n.which&&(e=Mn),this.pressed&&(e&Mn&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[n],changedPointers:[n],pointerType:Fn,srcEvent:n}))}});var Vn={pointerdown:Nn,pointermove:Dn,pointerup:Mn,pointercancel:Ln,pointerout:Ln},Zn={2:Tn,3:En,4:Fn,5:xn},Xn="pointerdown",Kn="pointermove pointerup pointercancel";n.MSPointerEvent&&!n.PointerEvent&&(Xn="MSPointerDown",Kn="MSPointerMove MSPointerUp MSPointerCancel"),c(k,P,{handler:function(n){var e=this.store,t=!1,r=n.type.toLowerCase().replace("ms",""),o=Vn[r],a=Zn[n.pointerType]||n.pointerType,i=a==Tn,u=g(e,n.pointerId,"pointerId");o&Nn&&(0===n.button||i)?0>u&&(e.push(n),u=e.length-1):o&(Mn|Ln)&&(t=!0),0>u||(e[u]=n,this.callback(this.manager,o,{pointers:e,changedPointers:[n],pointerType:a,srcEvent:n}),t&&e.splice(u,1))}});var Yn={touchstart:Nn,touchmove:Dn,touchend:Mn,touchcancel:Ln},Qn="touchstart",ne="touchstart touchmove touchend touchcancel";c(U,P,{handler:function(n){var e=Yn[n.type];if(e===Nn&&(this.started=!0),this.started){var t=G.call(this,n,e);e&(Mn|Ln)&&t[0].length-t[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:t[0],changedPointers:t[1],pointerType:Tn,srcEvent:n})}}});var ee={touchstart:Nn,touchmove:Dn,touchend:Mn,touchcancel:Ln},te="touchstart touchmove touchend touchcancel";c(B,P,{handler:function(n){var e=ee[n.type],t=J.call(this,n,e);t&&this.callback(this.manager,e,{pointers:t[0],changedPointers:t[1],pointerType:Tn,srcEvent:n})}});var re=2500,oe=25;c(z,P,{handler:function(n,e,t){var r=t.pointerType==Tn,o=t.pointerType==Fn;if(!(o&&t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents)){if(r)H.call(this,e,t);else if(o&&j.call(this,t))return;this.callback(n,e,t)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ae=$(mn.style,"touchAction"),ie=ae!==r,ue="compute",ce="auto",le="manipulation",se="none",fe="pan-x",de="pan-y",ve=Z();q.prototype={set:function(n){n==ue&&(n=this.compute()),ie&&this.manager.element.style&&ve[n]&&(this.manager.element.style[ae]=n),this.actions=n.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var n=[];return i(this.manager.recognizers,function(e){s(e.options.enable,[e])&&(n=n.concat(e.getTouchAction()))}),V(n.join(" "))},preventDefaults:function(n){var e=n.srcEvent,t=n.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,o=h(r,se)&&!ve[se],a=h(r,de)&&!ve[de],i=h(r,fe)&&!ve[fe];if(o){var u=1===n.pointers.length,c=n.distance<2,l=n.deltaTime<250;if(u&&c&&l)return}return i&&a?void 0:o||a&&t&Gn||i&&t&Bn?this.preventSrc(e):void 0},preventSrc:function(n){this.manager.session.prevented=!0,n.preventDefault()}};var me=1,he=2,pe=4,ge=8,we=ge,_e=16,$e=32;X.prototype={defaults:{},set:function(n){return dn(this.options,n),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(n){if(a(n,"recognizeWith",this))return this;var e=this.simultaneous;return n=Q(n,this),e[n.id]||(e[n.id]=n,n.recognizeWith(this)),this},dropRecognizeWith:function(n){return a(n,"dropRecognizeWith",this)?this:(n=Q(n,this),delete this.simultaneous[n.id],this)},requireFailure:function(n){if(a(n,"requireFailure",this))return this;var e=this.requireFail;return n=Q(n,this),-1===g(e,n)&&(e.push(n),n.requireFailure(this)),this},dropRequireFailure:function(n){if(a(n,"dropRequireFailure",this))return this;n=Q(n,this);var e=g(this.requireFail,n);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(n){return!!this.simultaneous[n.id]},emit:function(n){function e(e){t.manager.emit(e,n)}var t=this,r=this.state;ge>r&&e(t.options.event+K(r)),e(t.options.event),n.additionalEvent&&e(n.additionalEvent),r>=ge&&e(t.options.event+K(r))},tryEmit:function(n){return this.canEmit()?this.emit(n):void(this.state=$e)},canEmit:function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&($e|me)))return!1;n++}return!0},recognize:function(n){var e=dn({},n);return s(this.options.enable,[this,e])?(this.state&(we|_e|$e)&&(this.state=me),this.state=this.process(e),void(this.state&(he|pe|ge|_e)&&this.tryEmit(e))):(this.reset(),void(this.state=$e))},process:function(n){},getTouchAction:function(){},reset:function(){}},c(nn,X,{defaults:{pointers:1},attrTest:function(n){var e=this.options.pointers;return 0===e||n.pointers.length===e},process:function(n){var e=this.state,t=n.eventType,r=e&(he|pe),o=this.attrTest(n);return r&&(t&Ln||!o)?e|_e:r||o?t&Mn?e|ge:e&he?e|pe:he:$e}}),c(en,nn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Jn},getTouchAction:function(){var n=this.options.direction,e=[];return n&Gn&&e.push(de),n&Bn&&e.push(fe),e},directionTest:function(n){var e=this.options,t=!0,r=n.distance,o=n.direction,a=n.deltaX,i=n.deltaY;return o&e.direction||(e.direction&Gn?(o=0===a?On:0>a?In:Rn,t=a!=this.pX,r=Math.abs(n.deltaX)):(o=0===i?On:0>i?kn:Un,t=i!=this.pY,r=Math.abs(n.deltaY))),n.direction=o,t&&r>e.threshold&&o&e.direction},attrTest:function(n){return nn.prototype.attrTest.call(this,n)&&(this.state&he||!(this.state&he)&&this.directionTest(n))},emit:function(n){this.pX=n.deltaX,this.pY=n.deltaY;var e=Y(n.direction);e&&(n.additionalEvent=this.options.event+e),this._super.emit.call(this,n)}}),c(tn,nn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&he)},emit:function(n){if(1!==n.scale){var e=n.scale<1?"in":"out";n.additionalEvent=this.options.event+e}this._super.emit.call(this,n)}}),c(rn,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ce]},process:function(n){var e=this.options,t=n.pointers.length===e.pointers,r=n.distance<e.threshold,a=n.deltaTime>e.time;if(this._input=n,!r||!t||n.eventType&(Mn|Ln)&&!a)this.reset();else if(n.eventType&Nn)this.reset(),this._timer=o(function(){this.state=we,this.tryEmit()},e.time,this);else if(n.eventType&Mn)return we;return $e},reset:function(){clearTimeout(this._timer)},emit:function(n){this.state===we&&(n&&n.eventType&Mn?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=wn(),this.manager.emit(this.options.event,this._input)))}}),c(on,nn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&he)}}),c(an,nn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Gn|Bn,pointers:1},getTouchAction:function(){return en.prototype.getTouchAction.call(this)},attrTest:function(n){var e,t=this.options.direction;return t&(Gn|Bn)?e=n.overallVelocity:t&Gn?e=n.overallVelocityX:t&Bn&&(e=n.overallVelocityY),this._super.attrTest.call(this,n)&&t&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers==this.options.pointers&&gn(e)>this.options.velocity&&n.eventType&Mn},emit:function(n){var e=Y(n.offsetDirection);e&&this.manager.emit(this.options.event+e,n),this.manager.emit(this.options.event,n)}}),c(un,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(n){var e=this.options,t=n.pointers.length===e.pointers,r=n.distance<e.threshold,a=n.deltaTime<e.time;if(this.reset(),n.eventType&Nn&&0===this.count)return this.failTimeout();if(r&&a&&t){if(n.eventType!=Mn)return this.failTimeout();var i=this.pTime?n.timeStamp-this.pTime<e.interval:!0,u=!this.pCenter||M(this.pCenter,n.center)<e.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,u&&i?this.count+=1:this.count=1,this._input=n;var c=this.count%e.taps;if(0===c)return this.hasRequireFailures()?(this._timer=o(function(){this.state=we,this.tryEmit()},e.interval,this),he):we}return $e},failTimeout:function(){return this._timer=o(function(){this.state=$e},this.options.interval,this),$e},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==we&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),cn.VERSION="2.0.7",cn.defaults={domEvents:!1,touchAction:ue,enable:!0,inputTarget:null,inputClass:null,preset:[[on,{enable:!1}],[tn,{enable:!1},["rotate"]],[an,{direction:Gn}],[en,{direction:Gn},["swipe"]],[un],[un,{event:"doubletap",taps:2},["tap"]],[rn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ce=1,Se=2;ln.prototype={set:function(n){return dn(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},stop:function(n){this.session.stopped=n?Se:Ce},recognize:function(n){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(n);var t,r=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&we)&&(o=e.curRecognizer=null);for(var a=0;a<r.length;)t=r[a],e.stopped===Se||o&&t!=o&&!t.canRecognizeWith(o)?t.reset():t.recognize(n),!o&&t.state&(he|pe|ge)&&(o=e.curRecognizer=t),a++}},get:function(n){if(n instanceof X)return n;for(var e=this.recognizers,t=0;t<e.length;t++)if(e[t].options.event==n)return e[t];return null},add:function(n){if(a(n,"add",this))return this;var e=this.get(n.options.event);return e&&this.remove(e),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},remove:function(n){if(a(n,"remove",this))return this;if(n=this.get(n)){var e=this.recognizers,t=g(e,n);-1!==t&&(e.splice(t,1),this.touchAction.update())}return this},on:function(n,e){if(n!==r&&e!==r){var t=this.handlers;return i(p(n),function(n){t[n]=t[n]||[],t[n].push(e)}),this}},off:function(n,e){if(n!==r){var t=this.handlers;return i(p(n),function(n){e?t[n]&&t[n].splice(g(t[n],e),1):delete t[n]}),this}},emit:function(n,e){this.options.domEvents&&fn(n,e);var t=this.handlers[n]&&this.handlers[n].slice();if(t&&t.length){e.type=n,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<t.length;)t[r](e),r++}},destroy:function(){this.element&&sn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dn(cn,{INPUT_START:Nn,INPUT_MOVE:Dn,INPUT_END:Mn,INPUT_CANCEL:Ln,STATE_POSSIBLE:me,STATE_BEGAN:he,STATE_CHANGED:pe,STATE_ENDED:ge,STATE_RECOGNIZED:we,STATE_CANCELLED:_e,STATE_FAILED:$e,DIRECTION_NONE:On,DIRECTION_LEFT:In,DIRECTION_RIGHT:Rn,DIRECTION_UP:kn,DIRECTION_DOWN:Un,DIRECTION_HORIZONTAL:Gn,DIRECTION_VERTICAL:Bn,DIRECTION_ALL:Jn,Manager:ln,Input:P,TouchAction:q,TouchInput:B,MouseInput:R,PointerEventInput:k,TouchMouseInput:z,SingleTouchInput:U,Recognizer:X,AttrRecognizer:nn,Tap:un,Pan:en,Swipe:an,Pinch:tn,Rotate:on,Press:rn,on:d,off:v,each:i,merge:$n,extend:_n,assign:dn,inherit:c,bindFn:l,prefixed:$});var Pe="undefined"!=typeof n?n:"undefined"!=typeof self?self:{};Pe.Hammer=cn,"function"==typeof define&&define.amd?define(function(){return cn}):"undefined"!=typeof module&&module.exports?module.exports=cn:n[t]=cn}(window,document,"Hammer");