function cond_hide_tutorial(){"use strict";0===tutorial_counter?$(".tutorial").fadeOut():tutorial_counter-=1}function weird_double_parser(e){"use strict";var n=$.parseHTML(e);return n&&n.length>0&&(n=$.parseHTML(n[0].data)),n}function show_post(e,n,t){"use strict";console.log("Selected post '"+n),cond_hide_tutorial();var r,o,a,i,u,c=t.split(";-;"),l=c[1],s=c[2],f=c[3],d=c[4];$("#overview").slideUp(function(){$(".comment_content").fadeOut(function(){$(".post_content").fadeIn()})}),$(".img_content").hide(),$(".movie_content").hide(),$(".imgur").hide(),""!==f?(r="",r=f.indexOf("://")>-1?f.split("/")[2]:f.split("/")[0],$(".post_content .text_post").hide(),$(".post_content .link_post").show(),$(".post_content .content").hide(),$(".post_content .source").attr("href",f),$(".post_content .domain").html(r),o=f.substr(-3).toLowerCase(),a=f.substr(-4).toLowerCase(),$.inArray(o,["jpg","png","gif"])>=0||"jpeg"===a?($(".img_content").show(),$(".img_content").attr("src",f)):"gifv"===a?(i=f.slice(0,-4)+"webm",u=f.slice(0,-4)+"mp4",$(".movie_content").html("<video class='img-responsive' autoplay='' loop='' muted='' preload=''><source src='"+i+"' type='video/webm'><source src='"+u+"' type='video/mp4'></video>"),$(".movie_content").show()):r.indexOf("imgur")>-1&&show_imgur(f)):($(".post_content .text_post").show(),$(".post_content .link_post").hide(),""!==d?($(".post_content .content").show(),$(".post_content .content").html(""),$(".post_content .content").append(weird_double_parser(d))):$(".post_content .content").hide()),$(".post_content .title").html(n),$(".post_content .score").html(e),$(".post_content .permalink").attr("href",s),$(".post_content .author").html(l)}function show_imgur(e){"use strict";var n=e.match(/(a\/)?(\w+)/g),t=n[n.length-1];$(".imgur").html('<blockquote class="imgur-embed-pub" lang="en" data-id="'+t+'" data-context="false"><a href="//imgur.com/'+t+'">View post on imgur.com</a></blockquote><script async src="//s.imgur.com/min/embed.js" charset="utf-8"></script>').show()}function show_comment(e,n){"use strict";var t,r=n.split(";-;"),o=r[1],a=r[2],i=r[3];cond_hide_tutorial(),$("#overview").slideUp(function(){$(".post_content .content").slideUp(function(){$(".comment_content").fadeIn()})}),$(".comment_content .score").html(i),$(".comment_content .author").html(e),$(".comment_content .content").html(""),$(".comment_content .content").append(weird_double_parser(a)),t=$(".post_content .permalink").attr("href")+o,$(".comment_content .source").attr("href",t)}function show_subreddit(e){"use strict";console.log("Selected subreddit '"+e+"'"),$(".post_content").fadeOut(function(){$(".comment_content").fadeOut(function(){$("#overview").slideDown()})}),$(".subreddit_list li").removeClass("bg-primary"),$(".subreddit_list strong:contains('"+e+"')").parent().addClass("bg-primary")}!function(e,n){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?n(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(e)}("undefined"!=typeof window?window:this,function(e,n){function t(e){var n="length"in e&&e.length,t=oe.type(e);return"function"===t||oe.isWindow(e)?!1:1===e.nodeType&&n?!0:"array"===t||0===n||"number"==typeof n&&n>0&&n-1 in e}function r(e,n,t){if(oe.isFunction(n))return oe.grep(e,function(e,r){return!!n.call(e,r,e)!==t});if(n.nodeType)return oe.grep(e,function(e){return e===n!==t});if("string"==typeof n){if(de.test(n))return oe.filter(n,e,t);n=oe.filter(n,e)}return oe.grep(e,function(e){return oe.inArray(e,n)>=0!==t})}function o(e,n){do e=e[n];while(e&&1!==e.nodeType);return e}function a(e){var n=$e[e]={};return oe.each(e.match(_e)||[],function(e,t){n[t]=!0}),n}function i(){me.addEventListener?(me.removeEventListener("DOMContentLoaded",u,!1),e.removeEventListener("load",u,!1)):(me.detachEvent("onreadystatechange",u),e.detachEvent("onload",u))}function u(){(me.addEventListener||"load"===event.type||"complete"===me.readyState)&&(i(),oe.ready())}function c(e,n,t){if(void 0===t&&1===e.nodeType){var r="data-"+n.replace(Te,"-$1").toLowerCase();if(t=e.getAttribute(r),"string"==typeof t){try{t="true"===t?!0:"false"===t?!1:"null"===t?null:+t+""===t?+t:Pe.test(t)?oe.parseJSON(t):t}catch(o){}oe.data(e,n,t)}else t=void 0}return t}function l(e){var n;for(n in e)if(("data"!==n||!oe.isEmptyObject(e[n]))&&"toJSON"!==n)return!1;return!0}function s(e,n,t,r){if(oe.acceptData(e)){var o,a,i=oe.expando,u=e.nodeType,c=u?oe.cache:e,l=u?e[i]:e[i]&&i;if(l&&c[l]&&(r||c[l].data)||void 0!==t||"string"!=typeof n)return l||(l=u?e[i]=V.pop()||oe.guid++:i),c[l]||(c[l]=u?{}:{toJSON:oe.noop}),("object"==typeof n||"function"==typeof n)&&(r?c[l]=oe.extend(c[l],n):c[l].data=oe.extend(c[l].data,n)),a=c[l],r||(a.data||(a.data={}),a=a.data),void 0!==t&&(a[oe.camelCase(n)]=t),"string"==typeof n?(o=a[n],null==o&&(o=a[oe.camelCase(n)])):o=a,o}}function f(e,n,t){if(oe.acceptData(e)){var r,o,a=e.nodeType,i=a?oe.cache:e,u=a?e[oe.expando]:oe.expando;if(i[u]){if(n&&(r=t?i[u]:i[u].data)){oe.isArray(n)?n=n.concat(oe.map(n,oe.camelCase)):n in r?n=[n]:(n=oe.camelCase(n),n=n in r?[n]:n.split(" ")),o=n.length;for(;o--;)delete r[n[o]];if(t?!l(r):!oe.isEmptyObject(r))return}(t||(delete i[u].data,l(i[u])))&&(a?oe.cleanData([e],!0):te.deleteExpando||i!=i.window?delete i[u]:i[u]=null)}}}function d(){return!0}function v(){return!1}function m(){try{return me.activeElement}catch(e){}}function h(e){var n=Ie.split("|"),t=e.createDocumentFragment();if(t.createElement)for(;n.length;)t.createElement(n.pop());return t}function p(e,n){var t,r,o=0,a=typeof e.getElementsByTagName!==ye?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==ye?e.querySelectorAll(n||"*"):void 0;if(!a)for(a=[],t=e.childNodes||e;null!=(r=t[o]);o++)!n||oe.nodeName(r,n)?a.push(r):oe.merge(a,p(r,n));return void 0===n||n&&oe.nodeName(e,n)?oe.merge([e],a):a}function g(e){Ae.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,n){return oe.nodeName(e,"table")&&oe.nodeName(11!==n.nodeType?n:n.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _(e){return e.type=(null!==oe.find.attr(e,"type"))+"/"+e.type,e}function $(e){var n=qe.exec(e.type);return n?e.type=n[1]:e.removeAttribute("type"),e}function C(e,n){for(var t,r=0;null!=(t=e[r]);r++)oe._data(t,"globalEval",!n||oe._data(n[r],"globalEval"))}function S(e,n){if(1===n.nodeType&&oe.hasData(e)){var t,r,o,a=oe._data(e),i=oe._data(n,a),u=a.events;if(u){delete i.handle,i.events={};for(t in u)for(r=0,o=u[t].length;o>r;r++)oe.event.add(n,t,u[t][r])}i.data&&(i.data=oe.extend({},i.data))}}function y(e,n){var t,r,o;if(1===n.nodeType){if(t=n.nodeName.toLowerCase(),!te.noCloneEvent&&n[oe.expando]){o=oe._data(n);for(r in o.events)oe.removeEvent(n,r,o.handle);n.removeAttribute(oe.expando)}"script"===t&&n.text!==e.text?(_(n).text=e.text,$(n)):"object"===t?(n.parentNode&&(n.outerHTML=e.outerHTML),te.html5Clone&&e.innerHTML&&!oe.trim(n.innerHTML)&&(n.innerHTML=e.innerHTML)):"input"===t&&Ae.test(e.type)?(n.defaultChecked=n.checked=e.checked,n.value!==e.value&&(n.value=e.value)):"option"===t?n.defaultSelected=n.selected=e.defaultSelected:("input"===t||"textarea"===t)&&(n.defaultValue=e.defaultValue)}}function P(n,t){var r,o=oe(t.createElement(n)).appendTo(t.body),a=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(o[0]))?r.display:oe.css(o[0],"display");return o.detach(),a}function T(e){var n=me,t=Qe[e];return t||(t=P(e,n),"none"!==t&&t||(Ye=(Ye||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(n.documentElement),n=(Ye[0].contentWindow||Ye[0].contentDocument).document,n.write(),n.close(),t=P(e,n),Ye.detach()),Qe[e]=t),t}function b(e,n){return{get:function(){var t=e();if(null!=t)return t?void delete this.get:(this.get=n).apply(this,arguments)}}}function E(e,n){if(n in e)return n;for(var t=n.charAt(0).toUpperCase()+n.slice(1),r=n,o=vn.length;o--;)if(n=vn[o]+t,n in e)return n;return r}function x(e,n){for(var t,r,o,a=[],i=0,u=e.length;u>i;i++)r=e[i],r.style&&(a[i]=oe._data(r,"olddisplay"),t=r.style.display,n?(a[i]||"none"!==t||(r.style.display=""),""===r.style.display&&xe(r)&&(a[i]=oe._data(r,"olddisplay",T(r.nodeName)))):(o=xe(r),(t&&"none"!==t||!o)&&oe._data(r,"olddisplay",o?t:oe.css(r,"display"))));for(i=0;u>i;i++)r=e[i],r.style&&(n&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=n?a[i]||"":"none"));return e}function F(e,n,t){var r=ln.exec(n);return r?Math.max(0,r[1]-(t||0))+(r[2]||"px"):n}function A(e,n,t,r,o){for(var a=t===(r?"border":"content")?4:"width"===n?1:0,i=0;4>a;a+=2)"margin"===t&&(i+=oe.css(e,t+Ee[a],!0,o)),r?("content"===t&&(i-=oe.css(e,"padding"+Ee[a],!0,o)),"margin"!==t&&(i-=oe.css(e,"border"+Ee[a]+"Width",!0,o))):(i+=oe.css(e,"padding"+Ee[a],!0,o),"padding"!==t&&(i+=oe.css(e,"border"+Ee[a]+"Width",!0,o)));return i}function N(e,n,t){var r=!0,o="width"===n?e.offsetWidth:e.offsetHeight,a=en(e),i=te.boxSizing&&"border-box"===oe.css(e,"boxSizing",!1,a);if(0>=o||null==o){if(o=nn(e,n,a),(0>o||null==o)&&(o=e.style[n]),rn.test(o))return o;r=i&&(te.boxSizingReliable()||o===e.style[n]),o=parseFloat(o)||0}return o+A(e,n,t||(i?"border":"content"),r,a)+"px"}function D(e,n,t,r,o){return new D.prototype.init(e,n,t,r,o)}function M(){return setTimeout(function(){mn=void 0}),mn=oe.now()}function L(e,n){var t,r={height:e},o=0;for(n=n?1:0;4>o;o+=2-n)t=Ee[o],r["margin"+t]=r["padding"+t]=e;return n&&(r.opacity=r.width=e),r}function O(e,n,t){for(var r,o=($n[n]||[]).concat($n["*"]),a=0,i=o.length;i>a;a++)if(r=o[a].call(t,n,e))return r}function I(e,n,t){var r,o,a,i,u,c,l,s,f=this,d={},v=e.style,m=e.nodeType&&xe(e),h=oe._data(e,"fxshow");t.queue||(u=oe._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,c=u.empty.fire,u.empty.fire=function(){u.unqueued||c()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,oe.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in n||"width"in n)&&(t.overflow=[v.overflow,v.overflowX,v.overflowY],l=oe.css(e,"display"),s="none"===l?oe._data(e,"olddisplay")||T(e.nodeName):l,"inline"===s&&"none"===oe.css(e,"float")&&(te.inlineBlockNeedsLayout&&"inline"!==T(e.nodeName)?v.zoom=1:v.display="inline-block")),t.overflow&&(v.overflow="hidden",te.shrinkWrapBlocks()||f.always(function(){v.overflow=t.overflow[0],v.overflowX=t.overflow[1],v.overflowY=t.overflow[2]}));for(r in n)if(o=n[r],pn.exec(o)){if(delete n[r],a=a||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!h||void 0===h[r])continue;m=!0}d[r]=h&&h[r]||oe.style(e,r)}else l=void 0;if(oe.isEmptyObject(d))"inline"===("none"===l?T(e.nodeName):l)&&(v.display=l);else{h?"hidden"in h&&(m=h.hidden):h=oe._data(e,"fxshow",{}),a&&(h.hidden=!m),m?oe(e).show():f.done(function(){oe(e).hide()}),f.done(function(){var n;oe._removeData(e,"fxshow");for(n in d)oe.style(e,n,d[n])});for(r in d)i=O(m?h[r]:0,r,f),r in h||(h[r]=i.start,m&&(i.end=i.start,i.start="width"===r||"height"===r?1:0))}}function R(e,n){var t,r,o,a,i;for(t in e)if(r=oe.camelCase(t),o=n[r],a=e[t],oe.isArray(a)&&(o=a[1],a=e[t]=a[0]),t!==r&&(e[r]=a,delete e[t]),i=oe.cssHooks[r],i&&"expand"in i){a=i.expand(a),delete e[r];for(t in a)t in e||(e[t]=a[t],n[t]=o)}else n[r]=o}function k(e,n,t){var r,o,a=0,i=_n.length,u=oe.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var n=mn||M(),t=Math.max(0,l.startTime+l.duration-n),r=t/l.duration||0,a=1-r,i=0,c=l.tweens.length;c>i;i++)l.tweens[i].run(a);return u.notifyWith(e,[l,a,t]),1>a&&c?t:(u.resolveWith(e,[l]),!1)},l=u.promise({elem:e,props:oe.extend({},n),opts:oe.extend(!0,{specialEasing:{}},t),originalProperties:n,originalOptions:t,startTime:mn||M(),duration:t.duration,tweens:[],createTween:function(n,t){var r=oe.Tween(e,l.opts,n,t,l.opts.specialEasing[n]||l.opts.easing);return l.tweens.push(r),r},stop:function(n){var t=0,r=n?l.tweens.length:0;if(o)return this;for(o=!0;r>t;t++)l.tweens[t].run(1);return n?u.resolveWith(e,[l,n]):u.rejectWith(e,[l,n]),this}}),s=l.props;for(R(s,l.opts.specialEasing);i>a;a++)if(r=_n[a].call(l,e,s,l.opts))return r;return oe.map(s,O,l),oe.isFunction(l.opts.start)&&l.opts.start.call(e,l),oe.fx.timer(oe.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function U(e){return function(n,t){"string"!=typeof n&&(t=n,n="*");var r,o=0,a=n.toLowerCase().match(_e)||[];if(oe.isFunction(t))for(;r=a[o++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(t)):(e[r]=e[r]||[]).push(t)}}function G(e,n,t,r){function o(u){var c;return a[u]=!0,oe.each(e[u]||[],function(e,u){var l=u(n,t,r);return"string"!=typeof l||i||a[l]?i?!(c=l):void 0:(n.dataTypes.unshift(l),o(l),!1)}),c}var a={},i=e===Hn;return o(n.dataTypes[0])||!a["*"]&&o("*")}function B(e,n){var t,r,o=oe.ajaxSettings.flatOptions||{};for(r in n)void 0!==n[r]&&((o[r]?e:t||(t={}))[r]=n[r]);return t&&oe.extend(!0,e,t),e}function J(e,n,t){for(var r,o,a,i,u=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===o&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(i in u)if(u[i]&&u[i].test(o)){c.unshift(i);break}if(c[0]in t)a=c[0];else{for(i in t){if(!c[0]||e.converters[i+" "+c[0]]){a=i;break}r||(r=i)}a=a||r}return a?(a!==c[0]&&c.unshift(a),t[a]):void 0}function z(e,n,t,r){var o,a,i,u,c,l={},s=e.dataTypes.slice();if(s[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(a=s.shift();a;)if(e.responseFields[a]&&(t[e.responseFields[a]]=n),!c&&r&&e.dataFilter&&(n=e.dataFilter(n,e.dataType)),c=a,a=s.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(i=l[c+" "+a]||l["* "+a],!i)for(o in l)if(u=o.split(" "),u[1]===a&&(i=l[c+" "+u[0]]||l["* "+u[0]])){i===!0?i=l[o]:l[o]!==!0&&(a=u[0],s.unshift(u[1]));break}if(i!==!0)if(i&&e["throws"])n=i(n);else try{n=i(n)}catch(f){return{state:"parsererror",error:i?f:"No conversion from "+c+" to "+a}}}return{state:"success",data:n}}function H(e,n,t,r){var o;if(oe.isArray(n))oe.each(n,function(n,o){t||Vn.test(e)?r(e,o):H(e+"["+("object"==typeof o?n:"")+"]",o,t,r)});else if(t||"object"!==oe.type(n))r(e,n);else for(o in n)H(e+"["+o+"]",n[o],t,r)}function W(){try{return new e.XMLHttpRequest}catch(n){}}function j(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}function q(e){return oe.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var V=[],Z=V.slice,X=V.concat,K=V.push,Y=V.indexOf,Q={},ee=Q.toString,ne=Q.hasOwnProperty,te={},re="1.11.3",oe=function(e,n){return new oe.fn.init(e,n)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ie=/^-ms-/,ue=/-([\da-z])/gi,ce=function(e,n){return n.toUpperCase()};oe.fn=oe.prototype={jquery:re,constructor:oe,selector:"",length:0,toArray:function(){return Z.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Z.call(this)},pushStack:function(e){var n=oe.merge(this.constructor(),e);return n.prevObject=this,n.context=this.context,n},each:function(e,n){return oe.each(this,e,n)},map:function(e){return this.pushStack(oe.map(this,function(n,t){return e.call(n,t,n)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var n=this.length,t=+e+(0>e?n:0);return this.pushStack(t>=0&&n>t?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:V.sort,splice:V.splice},oe.extend=oe.fn.extend=function(){var e,n,t,r,o,a,i=arguments[0]||{},u=1,c=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[u]||{},u++),"object"==typeof i||oe.isFunction(i)||(i={}),u===c&&(i=this,u--);c>u;u++)if(null!=(o=arguments[u]))for(r in o)e=i[r],t=o[r],i!==t&&(l&&t&&(oe.isPlainObject(t)||(n=oe.isArray(t)))?(n?(n=!1,a=e&&oe.isArray(e)?e:[]):a=e&&oe.isPlainObject(e)?e:{},i[r]=oe.extend(l,a,t)):void 0!==t&&(i[r]=t));return i},oe.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray||function(e){return"array"===oe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!oe.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var n;for(n in e)return!1;return!0},isPlainObject:function(e){var n;if(!e||"object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;try{if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(te.ownLast)for(n in e)return ne.call(e,n);for(n in e);return void 0===n||ne.call(e,n)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Q[ee.call(e)]||"object":typeof e},globalEval:function(n){n&&oe.trim(n)&&(e.execScript||function(n){e.eval.call(e,n)})(n)},camelCase:function(e){return e.replace(ie,"ms-").replace(ue,ce)},nodeName:function(e,n){return e.nodeName&&e.nodeName.toLowerCase()===n.toLowerCase()},each:function(e,n,r){var o,a=0,i=e.length,u=t(e);if(r){if(u)for(;i>a&&(o=n.apply(e[a],r),o!==!1);a++);else for(a in e)if(o=n.apply(e[a],r),o===!1)break}else if(u)for(;i>a&&(o=n.call(e[a],a,e[a]),o!==!1);a++);else for(a in e)if(o=n.call(e[a],a,e[a]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,n){var r=n||[];return null!=e&&(t(Object(e))?oe.merge(r,"string"==typeof e?[e]:e):K.call(r,e)),r},inArray:function(e,n,t){var r;if(n){if(Y)return Y.call(n,e,t);for(r=n.length,t=t?0>t?Math.max(0,r+t):t:0;r>t;t++)if(t in n&&n[t]===e)return t}return-1},merge:function(e,n){for(var t=+n.length,r=0,o=e.length;t>r;)e[o++]=n[r++];if(t!==t)for(;void 0!==n[r];)e[o++]=n[r++];return e.length=o,e},grep:function(e,n,t){for(var r,o=[],a=0,i=e.length,u=!t;i>a;a++)r=!n(e[a],a),r!==u&&o.push(e[a]);return o},map:function(e,n,r){var o,a=0,i=e.length,u=t(e),c=[];if(u)for(;i>a;a++)o=n(e[a],a,r),null!=o&&c.push(o);else for(a in e)o=n(e[a],a,r),null!=o&&c.push(o);return X.apply([],c)},guid:1,proxy:function(e,n){var t,r,o;return"string"==typeof n&&(o=e[n],n=e,e=o),oe.isFunction(e)?(t=Z.call(arguments,2),r=function(){return e.apply(n||this,t.concat(Z.call(arguments)))},r.guid=e.guid=e.guid||oe.guid++,r):void 0},now:function(){return+new Date},support:te}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,n){Q["[object "+n+"]"]=n.toLowerCase()});var le=function(e){function n(e,n,t,r){var o,a,i,u,c,l,f,v,m,h;if((n?n.ownerDocument||n:G)!==D&&N(n),n=n||D,t=t||[],u=n.nodeType,"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return t;if(!r&&L){if(11!==u&&(o=we.exec(e)))if(i=o[1]){if(9===u){if(a=n.getElementById(i),!a||!a.parentNode)return t;if(a.id===i)return t.push(a),t}else if(n.ownerDocument&&(a=n.ownerDocument.getElementById(i))&&k(n,a)&&a.id===i)return t.push(a),t}else{if(o[2])return Y.apply(t,n.getElementsByTagName(e)),t;if((i=o[3])&&C.getElementsByClassName)return Y.apply(t,n.getElementsByClassName(i)),t}if(C.qsa&&(!O||!O.test(e))){if(v=f=U,m=n,h=1!==u&&e,1===u&&"object"!==n.nodeName.toLowerCase()){for(l=T(e),(f=n.getAttribute("id"))?v=f.replace($e,"\\$&"):n.setAttribute("id",v),v="[id='"+v+"'] ",c=l.length;c--;)l[c]=v+d(l[c]);m=_e.test(e)&&s(n.parentNode)||n,h=l.join(",")}if(h)try{return Y.apply(t,m.querySelectorAll(h)),t}catch(p){}finally{f||n.removeAttribute("id")}}}return E(e.replace(ce,"$1"),n,t,r)}function t(){function e(t,r){return n.push(t+" ")>S.cacheLength&&delete e[n.shift()],e[t+" "]=r}var n=[];return e}function r(e){return e[U]=!0,e}function o(e){var n=D.createElement("div");try{return!!e(n)}catch(t){return!1}finally{n.parentNode&&n.parentNode.removeChild(n),n=null}}function a(e,n){for(var t=e.split("|"),r=e.length;r--;)S.attrHandle[t[r]]=n}function i(e,n){var t=n&&e,r=t&&1===e.nodeType&&1===n.nodeType&&(~n.sourceIndex||q)-(~e.sourceIndex||q);if(r)return r;if(t)for(;t=t.nextSibling;)if(t===n)return-1;return e?1:-1}function u(e){return function(n){var t=n.nodeName.toLowerCase();return"input"===t&&n.type===e}}function c(e){return function(n){var t=n.nodeName.toLowerCase();return("input"===t||"button"===t)&&n.type===e}}function l(e){return r(function(n){return n=+n,r(function(t,r){for(var o,a=e([],t.length,n),i=a.length;i--;)t[o=a[i]]&&(t[o]=!(r[o]=t[o]))})})}function s(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function d(e){for(var n=0,t=e.length,r="";t>n;n++)r+=e[n].value;return r}function v(e,n,t){var r=n.dir,o=t&&"parentNode"===r,a=J++;return n.first?function(n,t,a){for(;n=n[r];)if(1===n.nodeType||o)return e(n,t,a)}:function(n,t,i){var u,c,l=[B,a];if(i){for(;n=n[r];)if((1===n.nodeType||o)&&e(n,t,i))return!0}else for(;n=n[r];)if(1===n.nodeType||o){if(c=n[U]||(n[U]={}),(u=c[r])&&u[0]===B&&u[1]===a)return l[2]=u[2];if(c[r]=l,l[2]=e(n,t,i))return!0}}}function m(e){return e.length>1?function(n,t,r){for(var o=e.length;o--;)if(!e[o](n,t,r))return!1;return!0}:e[0]}function h(e,t,r){for(var o=0,a=t.length;a>o;o++)n(e,t[o],r);return r}function p(e,n,t,r,o){for(var a,i=[],u=0,c=e.length,l=null!=n;c>u;u++)(a=e[u])&&(!t||t(a,r,o))&&(i.push(a),l&&n.push(u));return i}function g(e,n,t,o,a,i){return o&&!o[U]&&(o=g(o)),a&&!a[U]&&(a=g(a,i)),r(function(r,i,u,c){var l,s,f,d=[],v=[],m=i.length,g=r||h(n||"*",u.nodeType?[u]:u,[]),w=!e||!r&&n?g:p(g,d,e,u,c),_=t?a||(r?e:m||o)?[]:i:w;if(t&&t(w,_,u,c),o)for(l=p(_,v),o(l,[],u,c),s=l.length;s--;)(f=l[s])&&(_[v[s]]=!(w[v[s]]=f));if(r){if(a||e){if(a){for(l=[],s=_.length;s--;)(f=_[s])&&l.push(w[s]=f);a(null,_=[],l,c)}for(s=_.length;s--;)(f=_[s])&&(l=a?ee(r,f):d[s])>-1&&(r[l]=!(i[l]=f))}}else _=p(_===i?_.splice(m,_.length):_),a?a(null,i,_,c):Y.apply(i,_)})}function w(e){for(var n,t,r,o=e.length,a=S.relative[e[0].type],i=a||S.relative[" "],u=a?1:0,c=v(function(e){return e===n},i,!0),l=v(function(e){return ee(n,e)>-1},i,!0),s=[function(e,t,r){var o=!a&&(r||t!==x)||((n=t).nodeType?c(e,t,r):l(e,t,r));return n=null,o}];o>u;u++)if(t=S.relative[e[u].type])s=[v(m(s),t)];else{if(t=S.filter[e[u].type].apply(null,e[u].matches),t[U]){for(r=++u;o>r&&!S.relative[e[r].type];r++);return g(u>1&&m(s),u>1&&d(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(ce,"$1"),t,r>u&&w(e.slice(u,r)),o>r&&w(e=e.slice(r)),o>r&&d(e))}s.push(t)}return m(s)}function _(e,t){var o=t.length>0,a=e.length>0,i=function(r,i,u,c,l){var s,f,d,v=0,m="0",h=r&&[],g=[],w=x,_=r||a&&S.find.TAG("*",l),$=B+=null==w?1:Math.random()||.1,C=_.length;for(l&&(x=i!==D&&i);m!==C&&null!=(s=_[m]);m++){if(a&&s){for(f=0;d=e[f++];)if(d(s,i,u)){c.push(s);break}l&&(B=$)}o&&((s=!d&&s)&&v--,r&&h.push(s))}if(v+=m,o&&m!==v){for(f=0;d=t[f++];)d(h,g,i,u);if(r){if(v>0)for(;m--;)h[m]||g[m]||(g[m]=X.call(c));g=p(g)}Y.apply(c,g),l&&!r&&g.length>0&&v+t.length>1&&n.uniqueSort(c)}return l&&(B=$,x=w),h};return o?r(i):i}var $,C,S,y,P,T,b,E,x,F,A,N,D,M,L,O,I,R,k,U="sizzle"+1*new Date,G=e.document,B=0,J=0,z=t(),H=t(),W=t(),j=function(e,n){return e===n&&(A=!0),0},q=1<<31,V={}.hasOwnProperty,Z=[],X=Z.pop,K=Z.push,Y=Z.push,Q=Z.slice,ee=function(e,n){for(var t=0,r=e.length;r>t;t++)if(e[t]===n)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ae="\\["+te+"*("+re+")(?:"+te+"*([*^$|!~]?=)"+te+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+te+"*\\]",ie=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",ue=new RegExp(te+"+","g"),ce=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),le=new RegExp("^"+te+"*,"+te+"*"),se=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),fe=new RegExp("="+te+"*([^\\]'\"]*?)"+te+"*\\]","g"),de=new RegExp(ie),ve=new RegExp("^"+oe+"$"),me={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,we=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/[+~]/,$e=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+te+"?|("+te+")|.)","ig"),Se=function(e,n,t){var r="0x"+n-65536;return r!==r||t?n:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ye=function(){N()};try{Y.apply(Z=Q.call(G.childNodes),G.childNodes),Z[G.childNodes.length].nodeType}catch(Pe){Y={apply:Z.length?function(e,n){K.apply(e,Q.call(n))}:function(e,n){for(var t=e.length,r=0;e[t++]=n[r++];);e.length=t-1}}}C=n.support={},P=n.isXML=function(e){var n=e&&(e.ownerDocument||e).documentElement;return n?"HTML"!==n.nodeName:!1},N=n.setDocument=function(e){var n,t,r=e?e.ownerDocument||e:G;return r!==D&&9===r.nodeType&&r.documentElement?(D=r,M=r.documentElement,t=r.defaultView,t&&t!==t.top&&(t.addEventListener?t.addEventListener("unload",ye,!1):t.attachEvent&&t.attachEvent("onunload",ye)),L=!P(r),C.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=ge.test(r.getElementsByClassName),C.getById=o(function(e){return M.appendChild(e).id=U,!r.getElementsByName||!r.getElementsByName(U).length}),C.getById?(S.find.ID=function(e,n){if("undefined"!=typeof n.getElementById&&L){var t=n.getElementById(e);return t&&t.parentNode?[t]:[]}},S.filter.ID=function(e){var n=e.replace(Ce,Se);return function(e){return e.getAttribute("id")===n}}):(delete S.find.ID,S.filter.ID=function(e){var n=e.replace(Ce,Se);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),S.find.TAG=C.getElementsByTagName?function(e,n){return"undefined"!=typeof n.getElementsByTagName?n.getElementsByTagName(e):C.qsa?n.querySelectorAll(e):void 0}:function(e,n){var t,r=[],o=0,a=n.getElementsByTagName(e);if("*"===e){for(;t=a[o++];)1===t.nodeType&&r.push(t);return r}return a},S.find.CLASS=C.getElementsByClassName&&function(e,n){return L?n.getElementsByClassName(e):void 0},I=[],O=[],(C.qsa=ge.test(r.querySelectorAll))&&(o(function(e){M.appendChild(e).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+te+"*(?:value|"+ne+")"),e.querySelectorAll("[id~="+U+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+U+"+*").length||O.push(".#.+[+~]")}),o(function(e){var n=r.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+te+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(C.matchesSelector=ge.test(R=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(e){C.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),I.push("!=",ie)}),O=O.length&&new RegExp(O.join("|")),I=I.length&&new RegExp(I.join("|")),n=ge.test(M.compareDocumentPosition),k=n||ge.test(M.contains)?function(e,n){var t=9===e.nodeType?e.documentElement:e,r=n&&n.parentNode;return e===r||!(!r||1!==r.nodeType||!(t.contains?t.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,n){if(n)for(;n=n.parentNode;)if(n===e)return!0;return!1},j=n?function(e,n){if(e===n)return A=!0,0;var t=!e.compareDocumentPosition-!n.compareDocumentPosition;return t?t:(t=(e.ownerDocument||e)===(n.ownerDocument||n)?e.compareDocumentPosition(n):1,1&t||!C.sortDetached&&n.compareDocumentPosition(e)===t?e===r||e.ownerDocument===G&&k(G,e)?-1:n===r||n.ownerDocument===G&&k(G,n)?1:F?ee(F,e)-ee(F,n):0:4&t?-1:1)}:function(e,n){if(e===n)return A=!0,0;var t,o=0,a=e.parentNode,u=n.parentNode,c=[e],l=[n];if(!a||!u)return e===r?-1:n===r?1:a?-1:u?1:F?ee(F,e)-ee(F,n):0;if(a===u)return i(e,n);for(t=e;t=t.parentNode;)c.unshift(t);for(t=n;t=t.parentNode;)l.unshift(t);for(;c[o]===l[o];)o++;return o?i(c[o],l[o]):c[o]===G?-1:l[o]===G?1:0},r):D},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==D&&N(e),t=t.replace(fe,"='$1']"),C.matchesSelector&&L&&(!I||!I.test(t))&&(!O||!O.test(t)))try{var r=R.call(e,t);if(r||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(o){}return n(t,D,null,[e]).length>0},n.contains=function(e,n){return(e.ownerDocument||e)!==D&&N(e),k(e,n)},n.attr=function(e,n){(e.ownerDocument||e)!==D&&N(e);var t=S.attrHandle[n.toLowerCase()],r=t&&V.call(S.attrHandle,n.toLowerCase())?t(e,n,!L):void 0;return void 0!==r?r:C.attributes||!L?e.getAttribute(n):(r=e.getAttributeNode(n))&&r.specified?r.value:null},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var n,t=[],r=0,o=0;if(A=!C.detectDuplicates,F=!C.sortStable&&e.slice(0),e.sort(j),A){for(;n=e[o++];)n===e[o]&&(r=t.push(o));for(;r--;)e.splice(t[r],1)}return F=null,e},y=n.getText=function(e){var n,t="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)t+=y(e)}else if(3===o||4===o)return e.nodeValue}else for(;n=e[r++];)t+=y(n);return t},S=n.selectors={cacheLength:50,createPseudo:r,match:me,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ce,Se),e[3]=(e[3]||e[4]||e[5]||"").replace(Ce,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,t=!e[6]&&e[2];return me.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":t&&de.test(t)&&(n=T(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(e[0]=e[0].slice(0,n),e[2]=t.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var n=e.replace(Ce,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===n}},CLASS:function(e){var n=z[e+" "];return n||(n=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&z(e,function(e){return n.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(o){var a=n.attr(o,e);return null==a?"!="===t:t?(a+="","="===t?a===r:"!="===t?a!==r:"^="===t?r&&0===a.indexOf(r):"*="===t?r&&a.indexOf(r)>-1:"$="===t?r&&a.slice(-r.length)===r:"~="===t?(" "+a.replace(ue," ")+" ").indexOf(r)>-1:"|="===t?a===r||a.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,n,t,r,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),u="of-type"===n;return 1===r&&0===o?function(e){return!!e.parentNode}:function(n,t,c){var l,s,f,d,v,m,h=a!==i?"nextSibling":"previousSibling",p=n.parentNode,g=u&&n.nodeName.toLowerCase(),w=!c&&!u;if(p){if(a){for(;h;){for(f=n;f=f[h];)if(u?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;m=h="only"===e&&!m&&"nextSibling"}return!0}if(m=[i?p.firstChild:p.lastChild],i&&w){for(s=p[U]||(p[U]={}),l=s[e]||[],v=l[0]===B&&l[1],d=l[0]===B&&l[2],f=v&&p.childNodes[v];f=++v&&f&&f[h]||(d=v=0)||m.pop();)if(1===f.nodeType&&++d&&f===n){s[e]=[B,v,d];break}}else if(w&&(l=(n[U]||(n[U]={}))[e])&&l[0]===B)d=l[1];else for(;(f=++v&&f&&f[h]||(d=v=0)||m.pop())&&((u?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++d||(w&&((f[U]||(f[U]={}))[e]=[B,d]),f!==n)););return d-=o,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,t){var o,a=S.pseudos[e]||S.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);
return a[U]?a(t):a.length>1?(o=[e,e,"",t],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var r,o=a(e,t),i=o.length;i--;)r=ee(e,o[i]),e[r]=!(n[r]=o[i])}):function(e){return a(e,0,o)}):a}},pseudos:{not:r(function(e){var n=[],t=[],o=b(e.replace(ce,"$1"));return o[U]?r(function(e,n,t,r){for(var a,i=o(e,null,r,[]),u=e.length;u--;)(a=i[u])&&(e[u]=!(n[u]=a))}):function(e,r,a){return n[0]=e,o(n,null,a,t),n[0]=null,!t.pop()}}),has:r(function(e){return function(t){return n(e,t).length>0}}),contains:r(function(e){return e=e.replace(Ce,Se),function(n){return(n.textContent||n.innerText||y(n)).indexOf(e)>-1}}),lang:r(function(e){return ve.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(Ce,Se).toLowerCase(),function(n){var t;do if(t=L?n.lang:n.getAttribute("xml:lang")||n.getAttribute("lang"))return t=t.toLowerCase(),t===e||0===t.indexOf(e+"-");while((n=n.parentNode)&&1===n.nodeType);return!1}}),target:function(n){var t=e.location&&e.location.hash;return t&&t.slice(1)===n.id},root:function(e){return e===M},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var n=e.nodeName.toLowerCase();return"input"===n&&!!e.checked||"option"===n&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var n=e.nodeName.toLowerCase();return"input"===n&&"button"===e.type||"button"===n},text:function(e){var n;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(n=e.getAttribute("type"))||"text"===n.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,n){return[n-1]}),eq:l(function(e,n,t){return[0>t?t+n:t]}),even:l(function(e,n){for(var t=0;n>t;t+=2)e.push(t);return e}),odd:l(function(e,n){for(var t=1;n>t;t+=2)e.push(t);return e}),lt:l(function(e,n,t){for(var r=0>t?t+n:t;--r>=0;)e.push(r);return e}),gt:l(function(e,n,t){for(var r=0>t?t+n:t;++r<n;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for($ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[$]=u($);for($ in{submit:!0,reset:!0})S.pseudos[$]=c($);return f.prototype=S.filters=S.pseudos,S.setFilters=new f,T=n.tokenize=function(e,t){var r,o,a,i,u,c,l,s=H[e+" "];if(s)return t?0:s.slice(0);for(u=e,c=[],l=S.preFilter;u;){(!r||(o=le.exec(u)))&&(o&&(u=u.slice(o[0].length)||u),c.push(a=[])),r=!1,(o=se.exec(u))&&(r=o.shift(),a.push({value:r,type:o[0].replace(ce," ")}),u=u.slice(r.length));for(i in S.filter)!(o=me[i].exec(u))||l[i]&&!(o=l[i](o))||(r=o.shift(),a.push({value:r,type:i,matches:o}),u=u.slice(r.length));if(!r)break}return t?u.length:u?n.error(e):H(e,c).slice(0)},b=n.compile=function(e,n){var t,r=[],o=[],a=W[e+" "];if(!a){for(n||(n=T(e)),t=n.length;t--;)a=w(n[t]),a[U]?r.push(a):o.push(a);a=W(e,_(o,r)),a.selector=e}return a},E=n.select=function(e,n,t,r){var o,a,i,u,c,l="function"==typeof e&&e,f=!r&&T(e=l.selector||e);if(t=t||[],1===f.length){if(a=f[0]=f[0].slice(0),a.length>2&&"ID"===(i=a[0]).type&&C.getById&&9===n.nodeType&&L&&S.relative[a[1].type]){if(n=(S.find.ID(i.matches[0].replace(Ce,Se),n)||[])[0],!n)return t;l&&(n=n.parentNode),e=e.slice(a.shift().value.length)}for(o=me.needsContext.test(e)?0:a.length;o--&&(i=a[o],!S.relative[u=i.type]);)if((c=S.find[u])&&(r=c(i.matches[0].replace(Ce,Se),_e.test(a[0].type)&&s(n.parentNode)||n))){if(a.splice(o,1),e=r.length&&d(a),!e)return Y.apply(t,r),t;break}}return(l||b(e,f))(r,n,!L,t,_e.test(e)&&s(n.parentNode)||n),t},C.sortStable=U.split("").sort(j).join("")===U,C.detectDuplicates=!!A,N(),C.sortDetached=o(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,n,t){return t?void 0:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),C.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,n,t){return t||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(ne,function(e,n,t){var r;return t?void 0:e[n]===!0?n.toLowerCase():(r=e.getAttributeNode(n))&&r.specified?r.value:null}),n}(e);oe.find=le,oe.expr=le.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=le.uniqueSort,oe.text=le.getText,oe.isXMLDoc=le.isXML,oe.contains=le.contains;var se=oe.expr.match.needsContext,fe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;oe.filter=function(e,n,t){var r=n[0];return t&&(e=":not("+e+")"),1===n.length&&1===r.nodeType?oe.find.matchesSelector(r,e)?[r]:[]:oe.find.matches(e,oe.grep(n,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var n,t=[],r=this,o=r.length;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(n=0;o>n;n++)if(oe.contains(r[n],this))return!0}));for(n=0;o>n;n++)oe.find(e,r[n],t);return t=this.pushStack(o>1?oe.unique(t):t),t.selector=this.selector?this.selector+" "+e:e,t},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&se.test(e)?oe(e):e||[],!1).length}});var ve,me=e.document,he=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pe=oe.fn.init=function(e,n){var t,r;if(!e)return this;if("string"==typeof e){if(t="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:he.exec(e),!t||!t[1]&&n)return!n||n.jquery?(n||ve).find(e):this.constructor(n).find(e);if(t[1]){if(n=n instanceof oe?n[0]:n,oe.merge(this,oe.parseHTML(t[1],n&&n.nodeType?n.ownerDocument||n:me,!0)),fe.test(t[1])&&oe.isPlainObject(n))for(t in n)oe.isFunction(this[t])?this[t](n[t]):this.attr(t,n[t]);return this}if(r=me.getElementById(t[2]),r&&r.parentNode){if(r.id!==t[2])return ve.find(e);this.length=1,this[0]=r}return this.context=me,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?"undefined"!=typeof ve.ready?ve.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};pe.prototype=oe.fn,ve=oe(me);var ge=/^(?:parents|prev(?:Until|All))/,we={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(e,n,t){for(var r=[],o=e[n];o&&9!==o.nodeType&&(void 0===t||1!==o.nodeType||!oe(o).is(t));)1===o.nodeType&&r.push(o),o=o[n];return r},sibling:function(e,n){for(var t=[];e;e=e.nextSibling)1===e.nodeType&&e!==n&&t.push(e);return t}}),oe.fn.extend({has:function(e){var n,t=oe(e,this),r=t.length;return this.filter(function(){for(n=0;r>n;n++)if(oe.contains(this,t[n]))return!0})},closest:function(e,n){for(var t,r=0,o=this.length,a=[],i=se.test(e)||"string"!=typeof e?oe(e,n||this.context):0;o>r;r++)for(t=this[r];t&&t!==n;t=t.parentNode)if(t.nodeType<11&&(i?i.index(t)>-1:1===t.nodeType&&oe.find.matchesSelector(t,e))){a.push(t);break}return this.pushStack(a.length>1?oe.unique(a):a)},index:function(e){return e?"string"==typeof e?oe.inArray(this[0],oe(e)):oe.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,n){return this.pushStack(oe.unique(oe.merge(this.get(),oe(e,n))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var n=e.parentNode;return n&&11!==n.nodeType?n:null},parents:function(e){return oe.dir(e,"parentNode")},parentsUntil:function(e,n,t){return oe.dir(e,"parentNode",t)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return oe.dir(e,"nextSibling")},prevAll:function(e){return oe.dir(e,"previousSibling")},nextUntil:function(e,n,t){return oe.dir(e,"nextSibling",t)},prevUntil:function(e,n,t){return oe.dir(e,"previousSibling",t)},siblings:function(e){return oe.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return oe.sibling(e.firstChild)},contents:function(e){return oe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:oe.merge([],e.childNodes)}},function(e,n){oe.fn[e]=function(t,r){var o=oe.map(this,n,t);return"Until"!==e.slice(-5)&&(r=t),r&&"string"==typeof r&&(o=oe.filter(r,o)),this.length>1&&(we[e]||(o=oe.unique(o)),ge.test(e)&&(o=o.reverse())),this.pushStack(o)}});var _e=/\S+/g,$e={};oe.Callbacks=function(e){e="string"==typeof e?$e[e]||a(e):oe.extend({},e);var n,t,r,o,i,u,c=[],l=!e.once&&[],s=function(a){for(t=e.memory&&a,r=!0,i=u||0,u=0,o=c.length,n=!0;c&&o>i;i++)if(c[i].apply(a[0],a[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,c&&(l?l.length&&s(l.shift()):t?c=[]:f.disable())},f={add:function(){if(c){var r=c.length;!function a(n){oe.each(n,function(n,t){var r=oe.type(t);"function"===r?e.unique&&f.has(t)||c.push(t):t&&t.length&&"string"!==r&&a(t)})}(arguments),n?o=c.length:t&&(u=r,s(t))}return this},remove:function(){return c&&oe.each(arguments,function(e,t){for(var r;(r=oe.inArray(t,c,r))>-1;)c.splice(r,1),n&&(o>=r&&o--,i>=r&&i--)}),this},has:function(e){return e?oe.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=l=t=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!c||r&&!l||(t=t||[],t=[e,t.slice?t.slice():t],n?l.push(t):s(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},oe.extend({Deferred:function(e){var n=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],t="pending",r={state:function(){return t},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(t){oe.each(n,function(n,a){var i=oe.isFunction(e[n])&&e[n];o[a[1]](function(){var e=i&&i.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().done(t.resolve).fail(t.reject).progress(t.notify):t[a[0]+"With"](this===r?t.promise():this,i?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,r):r}},o={};return r.pipe=r.then,oe.each(n,function(e,a){var i=a[2],u=a[3];r[a[1]]=i.add,u&&i.add(function(){t=u},n[1^e][2].disable,n[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?r:this,arguments),this},o[a[0]+"With"]=i.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var n,t,r,o=0,a=Z.call(arguments),i=a.length,u=1!==i||e&&oe.isFunction(e.promise)?i:0,c=1===u?e:oe.Deferred(),l=function(e,t,r){return function(o){t[e]=this,r[e]=arguments.length>1?Z.call(arguments):o,r===n?c.notifyWith(t,r):--u||c.resolveWith(t,r)}};if(i>1)for(n=new Array(i),t=new Array(i),r=new Array(i);i>o;o++)a[o]&&oe.isFunction(a[o].promise)?a[o].promise().done(l(o,r,a)).fail(c.reject).progress(l(o,t,n)):--u;return u||c.resolveWith(r,a),c.promise()}});var Ce;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){if(e===!0?!--oe.readyWait:!oe.isReady){if(!me.body)return setTimeout(oe.ready);oe.isReady=!0,e!==!0&&--oe.readyWait>0||(Ce.resolveWith(me,[oe]),oe.fn.triggerHandler&&(oe(me).triggerHandler("ready"),oe(me).off("ready")))}}}),oe.ready.promise=function(n){if(!Ce)if(Ce=oe.Deferred(),"complete"===me.readyState)setTimeout(oe.ready);else if(me.addEventListener)me.addEventListener("DOMContentLoaded",u,!1),e.addEventListener("load",u,!1);else{me.attachEvent("onreadystatechange",u),e.attachEvent("onload",u);var t=!1;try{t=null==e.frameElement&&me.documentElement}catch(r){}t&&t.doScroll&&!function o(){if(!oe.isReady){try{t.doScroll("left")}catch(e){return setTimeout(o,50)}i(),oe.ready()}}()}return Ce.promise(n)};var Se,ye="undefined";for(Se in oe(te))break;te.ownLast="0"!==Se,te.inlineBlockNeedsLayout=!1,oe(function(){var e,n,t,r;t=me.getElementsByTagName("body")[0],t&&t.style&&(n=me.createElement("div"),r=me.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(r).appendChild(n),typeof n.style.zoom!==ye&&(n.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",te.inlineBlockNeedsLayout=e=3===n.offsetWidth,e&&(t.style.zoom=1)),t.removeChild(r))}),function(){var e=me.createElement("div");if(null==te.deleteExpando){te.deleteExpando=!0;try{delete e.test}catch(n){te.deleteExpando=!1}}e=null}(),oe.acceptData=function(e){var n=oe.noData[(e.nodeName+" ").toLowerCase()],t=+e.nodeType||1;return 1!==t&&9!==t?!1:!n||n!==!0&&e.getAttribute("classid")===n};var Pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?oe.cache[e[oe.expando]]:e[oe.expando],!!e&&!l(e)},data:function(e,n,t){return s(e,n,t)},removeData:function(e,n){return f(e,n)},_data:function(e,n,t){return s(e,n,t,!0)},_removeData:function(e,n){return f(e,n,!0)}}),oe.fn.extend({data:function(e,n){var t,r,o,a=this[0],i=a&&a.attributes;if(void 0===e){if(this.length&&(o=oe.data(a),1===a.nodeType&&!oe._data(a,"parsedAttrs"))){for(t=i.length;t--;)i[t]&&(r=i[t].name,0===r.indexOf("data-")&&(r=oe.camelCase(r.slice(5)),c(a,r,o[r])));oe._data(a,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){oe.data(this,e)}):arguments.length>1?this.each(function(){oe.data(this,e,n)}):a?c(a,e,oe.data(a,e)):void 0},removeData:function(e){return this.each(function(){oe.removeData(this,e)})}}),oe.extend({queue:function(e,n,t){var r;return e?(n=(n||"fx")+"queue",r=oe._data(e,n),t&&(!r||oe.isArray(t)?r=oe._data(e,n,oe.makeArray(t)):r.push(t)),r||[]):void 0},dequeue:function(e,n){n=n||"fx";var t=oe.queue(e,n),r=t.length,o=t.shift(),a=oe._queueHooks(e,n),i=function(){oe.dequeue(e,n)};"inprogress"===o&&(o=t.shift(),r--),o&&("fx"===n&&t.unshift("inprogress"),delete a.stop,o.call(e,i,a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,n){var t=n+"queueHooks";return oe._data(e,t)||oe._data(e,t,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(e,n+"queue"),oe._removeData(e,t)})})}}),oe.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?oe.queue(this[0],e):void 0===n?this:this.each(function(){var t=oe.queue(this,e,n);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var t,r=1,o=oe.Deferred(),a=this,i=this.length,u=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=void 0),e=e||"fx";i--;)t=oe._data(a[i],e+"queueHooks"),t&&t.empty&&(r++,t.empty.add(u));return u(),o.promise(n)}});var be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=["Top","Right","Bottom","Left"],xe=function(e,n){return e=n||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Fe=oe.access=function(e,n,t,r,o,a,i){var u=0,c=e.length,l=null==t;if("object"===oe.type(t)){o=!0;for(u in t)oe.access(e,n,u,t[u],!0,a,i)}else if(void 0!==r&&(o=!0,oe.isFunction(r)||(i=!0),l&&(i?(n.call(e,r),n=null):(l=n,n=function(e,n,t){return l.call(oe(e),t)})),n))for(;c>u;u++)n(e[u],t,i?r:r.call(e[u],u,n(e[u],t)));return o?e:l?n.call(e):c?n(e[0],t):a},Ae=/^(?:checkbox|radio)$/i;!function(){var e=me.createElement("input"),n=me.createElement("div"),t=me.createDocumentFragment();if(n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",te.leadingWhitespace=3===n.firstChild.nodeType,te.tbody=!n.getElementsByTagName("tbody").length,te.htmlSerialize=!!n.getElementsByTagName("link").length,te.html5Clone="<:nav></:nav>"!==me.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,t.appendChild(e),te.appendChecked=e.checked,n.innerHTML="<textarea>x</textarea>",te.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue,t.appendChild(n),n.innerHTML="<input type='radio' checked='checked' name='t'/>",te.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,te.noCloneEvent=!0,n.attachEvent&&(n.attachEvent("onclick",function(){te.noCloneEvent=!1}),n.cloneNode(!0).click()),null==te.deleteExpando){te.deleteExpando=!0;try{delete n.test}catch(r){te.deleteExpando=!1}}}(),function(){var n,t,r=me.createElement("div");for(n in{submit:!0,change:!0,focusin:!0})t="on"+n,(te[n+"Bubbles"]=t in e)||(r.setAttribute(t,"t"),te[n+"Bubbles"]=r.attributes[t].expando===!1);r=null}();var Ne=/^(?:input|select|textarea)$/i,De=/^key/,Me=/^(?:mouse|pointer|contextmenu)|click/,Le=/^(?:focusinfocus|focusoutblur)$/,Oe=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(e,n,t,r,o){var a,i,u,c,l,s,f,d,v,m,h,p=oe._data(e);if(p){for(t.handler&&(c=t,t=c.handler,o=c.selector),t.guid||(t.guid=oe.guid++),(i=p.events)||(i=p.events={}),(s=p.handle)||(s=p.handle=function(e){return typeof oe===ye||e&&oe.event.triggered===e.type?void 0:oe.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=(n||"").match(_e)||[""],u=n.length;u--;)a=Oe.exec(n[u])||[],v=h=a[1],m=(a[2]||"").split(".").sort(),v&&(l=oe.event.special[v]||{},v=(o?l.delegateType:l.bindType)||v,l=oe.event.special[v]||{},f=oe.extend({type:v,origType:h,data:r,handler:t,guid:t.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:m.join(".")},c),(d=i[v])||(d=i[v]=[],d.delegateCount=0,l.setup&&l.setup.call(e,r,m,s)!==!1||(e.addEventListener?e.addEventListener(v,s,!1):e.attachEvent&&e.attachEvent("on"+v,s))),l.add&&(l.add.call(e,f),f.handler.guid||(f.handler.guid=t.guid)),o?d.splice(d.delegateCount++,0,f):d.push(f),oe.event.global[v]=!0);e=null}},remove:function(e,n,t,r,o){var a,i,u,c,l,s,f,d,v,m,h,p=oe.hasData(e)&&oe._data(e);if(p&&(s=p.events)){for(n=(n||"").match(_e)||[""],l=n.length;l--;)if(u=Oe.exec(n[l])||[],v=h=u[1],m=(u[2]||"").split(".").sort(),v){for(f=oe.event.special[v]||{},v=(r?f.delegateType:f.bindType)||v,d=s[v]||[],u=u[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=a=d.length;a--;)i=d[a],!o&&h!==i.origType||t&&t.guid!==i.guid||u&&!u.test(i.namespace)||r&&r!==i.selector&&("**"!==r||!i.selector)||(d.splice(a,1),i.selector&&d.delegateCount--,f.remove&&f.remove.call(e,i));c&&!d.length&&(f.teardown&&f.teardown.call(e,m,p.handle)!==!1||oe.removeEvent(e,v,p.handle),delete s[v])}else for(v in s)oe.event.remove(e,v+n[l],t,r,!0);oe.isEmptyObject(s)&&(delete p.handle,oe._removeData(e,"events"))}},trigger:function(n,t,r,o){var a,i,u,c,l,s,f,d=[r||me],v=ne.call(n,"type")?n.type:n,m=ne.call(n,"namespace")?n.namespace.split("."):[];if(u=s=r=r||me,3!==r.nodeType&&8!==r.nodeType&&!Le.test(v+oe.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),i=v.indexOf(":")<0&&"on"+v,n=n[oe.expando]?n:new oe.Event(v,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=void 0,n.target||(n.target=r),t=null==t?[n]:oe.makeArray(t,[n]),l=oe.event.special[v]||{},o||!l.trigger||l.trigger.apply(r,t)!==!1)){if(!o&&!l.noBubble&&!oe.isWindow(r)){for(c=l.delegateType||v,Le.test(c+v)||(u=u.parentNode);u;u=u.parentNode)d.push(u),s=u;s===(r.ownerDocument||me)&&d.push(s.defaultView||s.parentWindow||e)}for(f=0;(u=d[f++])&&!n.isPropagationStopped();)n.type=f>1?c:l.bindType||v,a=(oe._data(u,"events")||{})[n.type]&&oe._data(u,"handle"),a&&a.apply(u,t),a=i&&u[i],a&&a.apply&&oe.acceptData(u)&&(n.result=a.apply(u,t),n.result===!1&&n.preventDefault());if(n.type=v,!o&&!n.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),t)===!1)&&oe.acceptData(r)&&i&&r[v]&&!oe.isWindow(r)){s=r[i],s&&(r[i]=null),oe.event.triggered=v;try{r[v]()}catch(h){}oe.event.triggered=void 0,s&&(r[i]=s)}return n.result}},dispatch:function(e){e=oe.event.fix(e);var n,t,r,o,a,i=[],u=Z.call(arguments),c=(oe._data(this,"events")||{})[e.type]||[],l=oe.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(i=oe.event.handlers.call(this,e,c),n=0;(o=i[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(r=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,t=((oe.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,u),void 0!==t&&(e.result=t)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var t,r,o,a,i=[],u=n.delegateCount,c=e.target;if(u&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)r=n[a],t=r.selector+" ",void 0===o[t]&&(o[t]=r.needsContext?oe(t,this).index(c)>=0:oe.find(t,this,null,[c]).length),o[t]&&o.push(r);o.length&&i.push({elem:c,handlers:o})}return u<n.length&&i.push({elem:this,handlers:n.slice(u)}),i},fix:function(e){if(e[oe.expando])return e;var n,t,r,o=e.type,a=e,i=this.fixHooks[o];for(i||(this.fixHooks[o]=i=Me.test(o)?this.mouseHooks:De.test(o)?this.keyHooks:{}),r=i.props?this.props.concat(i.props):this.props,e=new oe.Event(a),n=r.length;n--;)t=r[n],e[t]=a[t];return e.target||(e.target=a.srcElement||me),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,n){return null==e.which&&(e.which=null!=n.charCode?n.charCode:n.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var t,r,o,a=n.button,i=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||me,o=r.documentElement,t=r.body,e.pageX=n.clientX+(o&&o.scrollLeft||t&&t.scrollLeft||0)-(o&&o.clientLeft||t&&t.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||t&&t.scrollTop||0)-(o&&o.clientTop||t&&t.clientTop||0)),!e.relatedTarget&&i&&(e.relatedTarget=i===e.target?n.toElement:i),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,n,t,r){var o=oe.extend(new oe.Event,t,{type:e,isSimulated:!0,originalEvent:{}});r?oe.event.trigger(o,null,n):oe.event.dispatch.call(n,o),o.isDefaultPrevented()&&t.preventDefault()}},oe.removeEvent=me.removeEventListener?function(e,n,t){e.removeEventListener&&e.removeEventListener(n,t,!1)}:function(e,n,t){var r="on"+n;e.detachEvent&&(typeof e[r]===ye&&(e[r]=null),e.detachEvent(r,t))},oe.Event=function(e,n){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?d:v):this.type=e,n&&oe.extend(this,n),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,n)},oe.Event.prototype={isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,n){oe.event.special[e]={delegateType:n,bindType:n,handle:function(e){var t,r=this,o=e.relatedTarget,a=e.handleObj;return(!o||o!==r&&!oe.contains(r,o))&&(e.type=a.origType,t=a.handler.apply(this,arguments),e.type=n),t}}}),te.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,t=oe.nodeName(n,"input")||oe.nodeName(n,"button")?n.form:void 0;t&&!oe._data(t,"submitBubbles")&&(oe.event.add(t,"submit._submit",function(e){e._submit_bubble=!0}),oe._data(t,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&oe.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),te.changeBubbles||(oe.event.special.change={setup:function(){return Ne.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,e,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(e){var n=e.target;Ne.test(n.nodeName)&&!oe._data(n,"changeBubbles")&&(oe.event.add(n,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||oe.event.simulate("change",this.parentNode,e,!0)}),oe._data(n,"changeBubbles",!0))})},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!Ne.test(this.nodeName)}}),te.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(e,n){var t=function(e){oe.event.simulate(n,e.target,oe.event.fix(e),!0)};oe.event.special[n]={setup:function(){var r=this.ownerDocument||this,o=oe._data(r,n);o||r.addEventListener(e,t,!0),oe._data(r,n,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=oe._data(r,n)-1;o?oe._data(r,n,o):(r.removeEventListener(e,t,!0),oe._removeData(r,n))}}}),oe.fn.extend({on:function(e,n,t,r,o){var a,i;if("object"==typeof e){"string"!=typeof n&&(t=t||n,n=void 0);for(a in e)this.on(a,n,t,e[a],o);return this}if(null==t&&null==r?(r=n,t=n=void 0):null==r&&("string"==typeof n?(r=t,t=void 0):(r=t,t=n,n=void 0)),r===!1)r=v;else if(!r)return this;return 1===o&&(i=r,r=function(e){return oe().off(e),i.apply(this,arguments)},r.guid=i.guid||(i.guid=oe.guid++)),this.each(function(){oe.event.add(this,e,r,t,n)})},one:function(e,n,t,r){return this.on(e,n,t,r,1)},off:function(e,n,t){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,oe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(t=n,n=void 0),t===!1&&(t=v),this.each(function(){oe.event.remove(this,e,t,n)})},trigger:function(e,n){return this.each(function(){oe.event.trigger(e,n,this)})},triggerHandler:function(e,n){var t=this[0];return t?oe.event.trigger(e,n,t,!0):void 0}});var Ie="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Re=/ jQuery\d+="(?:null|\d+)"/g,ke=new RegExp("<(?:"+Ie+")[\\s/>]","i"),Ue=/^\s+/,Ge=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Be=/<([\w:]+)/,Je=/<tbody/i,ze=/<|&#?\w+;/,He=/<(?:script|style|link)/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^$|\/(?:java|ecma)script/i,qe=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ze={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:te.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xe=h(me),Ke=Xe.appendChild(me.createElement("div"));Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,Ze.th=Ze.td,oe.extend({clone:function(e,n,t){var r,o,a,i,u,c=oe.contains(e.ownerDocument,e);if(te.html5Clone||oe.isXMLDoc(e)||!ke.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Ke.innerHTML=e.outerHTML,Ke.removeChild(a=Ke.firstChild)),!(te.noCloneEvent&&te.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(r=p(a),u=p(e),i=0;null!=(o=u[i]);++i)r[i]&&y(o,r[i]);if(n)if(t)for(u=u||p(e),r=r||p(a),i=0;null!=(o=u[i]);i++)S(o,r[i]);else S(e,a);return r=p(a,"script"),r.length>0&&C(r,!c&&p(e,"script")),r=u=o=null,a},buildFragment:function(e,n,t,r){for(var o,a,i,u,c,l,s,f=e.length,d=h(n),v=[],m=0;f>m;m++)if(a=e[m],a||0===a)if("object"===oe.type(a))oe.merge(v,a.nodeType?[a]:a);else if(ze.test(a)){for(u=u||d.appendChild(n.createElement("div")),c=(Be.exec(a)||["",""])[1].toLowerCase(),s=Ze[c]||Ze._default,u.innerHTML=s[1]+a.replace(Ge,"<$1></$2>")+s[2],o=s[0];o--;)u=u.lastChild;if(!te.leadingWhitespace&&Ue.test(a)&&v.push(n.createTextNode(Ue.exec(a)[0])),!te.tbody)for(a="table"!==c||Je.test(a)?"<table>"!==s[1]||Je.test(a)?0:u:u.firstChild,o=a&&a.childNodes.length;o--;)oe.nodeName(l=a.childNodes[o],"tbody")&&!l.childNodes.length&&a.removeChild(l);for(oe.merge(v,u.childNodes),u.textContent="";u.firstChild;)u.removeChild(u.firstChild);u=d.lastChild}else v.push(n.createTextNode(a));for(u&&d.removeChild(u),te.appendChecked||oe.grep(p(v,"input"),g),m=0;a=v[m++];)if((!r||-1===oe.inArray(a,r))&&(i=oe.contains(a.ownerDocument,a),u=p(d.appendChild(a),"script"),i&&C(u),t))for(o=0;a=u[o++];)je.test(a.type||"")&&t.push(a);return u=null,d},cleanData:function(e,n){for(var t,r,o,a,i=0,u=oe.expando,c=oe.cache,l=te.deleteExpando,s=oe.event.special;null!=(t=e[i]);i++)if((n||oe.acceptData(t))&&(o=t[u],a=o&&c[o])){if(a.events)for(r in a.events)s[r]?oe.event.remove(t,r):oe.removeEvent(t,r,a.handle);c[o]&&(delete c[o],l?delete t[u]:typeof t.removeAttribute!==ye?t.removeAttribute(u):t[u]=null,V.push(o))}}}),oe.fn.extend({text:function(e){return Fe(this,function(e){return void 0===e?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||me).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var n=w(this,e);n.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var n=w(this,e);n.insertBefore(e,n.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,n){for(var t,r=e?oe.filter(e,this):this,o=0;null!=(t=r[o]);o++)n||1!==t.nodeType||oe.cleanData(p(t)),t.parentNode&&(n&&oe.contains(t.ownerDocument,t)&&C(p(t,"script")),t.parentNode.removeChild(t));return this},empty:function(){for(var e,n=0;null!=(e=this[n]);n++){for(1===e.nodeType&&oe.cleanData(p(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&oe.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,n){return e=null==e?!1:e,n=null==n?e:n,this.map(function(){return oe.clone(this,e,n)})},html:function(e){return Fe(this,function(e){
var n=this[0]||{},t=0,r=this.length;if(void 0===e)return 1===n.nodeType?n.innerHTML.replace(Re,""):void 0;if("string"==typeof e&&!He.test(e)&&(te.htmlSerialize||!ke.test(e))&&(te.leadingWhitespace||!Ue.test(e))&&!Ze[(Be.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ge,"<$1></$2>");try{for(;r>t;t++)n=this[t]||{},1===n.nodeType&&(oe.cleanData(p(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(n){e=this.parentNode,oe.cleanData(p(this)),e&&e.replaceChild(n,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,n){e=X.apply([],e);var t,r,o,a,i,u,c=0,l=this.length,s=this,f=l-1,d=e[0],v=oe.isFunction(d);if(v||l>1&&"string"==typeof d&&!te.checkClone&&We.test(d))return this.each(function(t){var r=s.eq(t);v&&(e[0]=d.call(this,t,r.html())),r.domManip(e,n)});if(l&&(u=oe.buildFragment(e,this[0].ownerDocument,!1,this),t=u.firstChild,1===u.childNodes.length&&(u=t),t)){for(a=oe.map(p(u,"script"),_),o=a.length;l>c;c++)r=u,c!==f&&(r=oe.clone(r,!0,!0),o&&oe.merge(a,p(r,"script"))),n.call(this[c],r,c);if(o)for(i=a[a.length-1].ownerDocument,oe.map(a,$),c=0;o>c;c++)r=a[c],je.test(r.type||"")&&!oe._data(r,"globalEval")&&oe.contains(i,r)&&(r.src?oe._evalUrl&&oe._evalUrl(r.src):oe.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Ve,"")));u=t=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){oe.fn[e]=function(e){for(var t,r=0,o=[],a=oe(e),i=a.length-1;i>=r;r++)t=r===i?this:this.clone(!0),oe(a[r])[n](t),K.apply(o,t.get());return this.pushStack(o)}});var Ye,Qe={};!function(){var e;te.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var n,t,r;return t=me.getElementsByTagName("body")[0],t&&t.style?(n=me.createElement("div"),r=me.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(r).appendChild(n),typeof n.style.zoom!==ye&&(n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",n.appendChild(me.createElement("div")).style.width="5px",e=3!==n.offsetWidth),t.removeChild(r),e):void 0}}();var en,nn,tn=/^margin/,rn=new RegExp("^("+be+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(n){return n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):e.getComputedStyle(n,null)},nn=function(e,n,t){var r,o,a,i,u=e.style;return t=t||en(e),i=t?t.getPropertyValue(n)||t[n]:void 0,t&&(""!==i||oe.contains(e.ownerDocument,e)||(i=oe.style(e,n)),rn.test(i)&&tn.test(n)&&(r=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=i,i=t.width,u.width=r,u.minWidth=o,u.maxWidth=a)),void 0===i?i:i+""}):me.documentElement.currentStyle&&(en=function(e){return e.currentStyle},nn=function(e,n,t){var r,o,a,i,u=e.style;return t=t||en(e),i=t?t[n]:void 0,null==i&&u&&u[n]&&(i=u[n]),rn.test(i)&&!on.test(n)&&(r=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left="fontSize"===n?"1em":i,i=u.pixelLeft+"px",u.left=r,a&&(o.left=a)),void 0===i?i:i+""||"auto"}),function(){function n(){var n,t,r,o;t=me.getElementsByTagName("body")[0],t&&t.style&&(n=me.createElement("div"),r=me.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(r).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a=i=!1,c=!0,e.getComputedStyle&&(a="1%"!==(e.getComputedStyle(n,null)||{}).top,i="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width,o=n.appendChild(me.createElement("div")),o.style.cssText=n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",n.style.width="1px",c=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight),n.removeChild(o)),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=n.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",u=0===o[0].offsetHeight,u&&(o[0].style.display="",o[1].style.display="none",u=0===o[0].offsetHeight),t.removeChild(r))}var t,r,o,a,i,u,c;t=me.createElement("div"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=t.getElementsByTagName("a")[0],r=o&&o.style,r&&(r.cssText="float:left;opacity:.5",te.opacity="0.5"===r.opacity,te.cssFloat=!!r.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",te.clearCloneStyle="content-box"===t.style.backgroundClip,te.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,oe.extend(te,{reliableHiddenOffsets:function(){return null==u&&n(),u},boxSizingReliable:function(){return null==i&&n(),i},pixelPosition:function(){return null==a&&n(),a},reliableMarginRight:function(){return null==c&&n(),c}}))}(),oe.swap=function(e,n,t,r){var o,a,i={};for(a in n)i[a]=e.style[a],e.style[a]=n[a];o=t.apply(e,r||[]);for(a in n)e.style[a]=i[a];return o};var an=/alpha\([^)]*\)/i,un=/opacity\s*=\s*([^)]*)/,cn=/^(none|table(?!-c[ea]).+)/,ln=new RegExp("^("+be+")(.*)$","i"),sn=new RegExp("^([+-])=("+be+")","i"),fn={position:"absolute",visibility:"hidden",display:"block"},dn={letterSpacing:"0",fontWeight:"400"},vn=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(e,n){if(n){var t=nn(e,"opacity");return""===t?"1":t}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":te.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,t,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,i,u=oe.camelCase(n),c=e.style;if(n=oe.cssProps[u]||(oe.cssProps[u]=E(c,u)),i=oe.cssHooks[n]||oe.cssHooks[u],void 0===t)return i&&"get"in i&&void 0!==(o=i.get(e,!1,r))?o:c[n];if(a=typeof t,"string"===a&&(o=sn.exec(t))&&(t=(o[1]+1)*o[2]+parseFloat(oe.css(e,n)),a="number"),null!=t&&t===t&&("number"!==a||oe.cssNumber[u]||(t+="px"),te.clearCloneStyle||""!==t||0!==n.indexOf("background")||(c[n]="inherit"),!(i&&"set"in i&&void 0===(t=i.set(e,t,r)))))try{c[n]=t}catch(l){}}},css:function(e,n,t,r){var o,a,i,u=oe.camelCase(n);return n=oe.cssProps[u]||(oe.cssProps[u]=E(e.style,u)),i=oe.cssHooks[n]||oe.cssHooks[u],i&&"get"in i&&(a=i.get(e,!0,t)),void 0===a&&(a=nn(e,n,r)),"normal"===a&&n in dn&&(a=dn[n]),""===t||t?(o=parseFloat(a),t===!0||oe.isNumeric(o)?o||0:a):a}}),oe.each(["height","width"],function(e,n){oe.cssHooks[n]={get:function(e,t,r){return t?cn.test(oe.css(e,"display"))&&0===e.offsetWidth?oe.swap(e,fn,function(){return N(e,n,r)}):N(e,n,r):void 0},set:function(e,t,r){var o=r&&en(e);return F(e,t,r?A(e,n,r,te.boxSizing&&"border-box"===oe.css(e,"boxSizing",!1,o),o):0)}}}),te.opacity||(oe.cssHooks.opacity={get:function(e,n){return un.test((n&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":n?"1":""},set:function(e,n){var t=e.style,r=e.currentStyle,o=oe.isNumeric(n)?"alpha(opacity="+100*n+")":"",a=r&&r.filter||t.filter||"";t.zoom=1,(n>=1||""===n)&&""===oe.trim(a.replace(an,""))&&t.removeAttribute&&(t.removeAttribute("filter"),""===n||r&&!r.filter)||(t.filter=an.test(a)?a.replace(an,o):a+" "+o)}}),oe.cssHooks.marginRight=b(te.reliableMarginRight,function(e,n){return n?oe.swap(e,{display:"inline-block"},nn,[e,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(e,n){oe.cssHooks[e+n]={expand:function(t){for(var r=0,o={},a="string"==typeof t?t.split(" "):[t];4>r;r++)o[e+Ee[r]+n]=a[r]||a[r-2]||a[0];return o}},tn.test(e)||(oe.cssHooks[e+n].set=F)}),oe.fn.extend({css:function(e,n){return Fe(this,function(e,n,t){var r,o,a={},i=0;if(oe.isArray(n)){for(r=en(e),o=n.length;o>i;i++)a[n[i]]=oe.css(e,n[i],!1,r);return a}return void 0!==t?oe.style(e,n,t):oe.css(e,n)},e,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){xe(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=D,D.prototype={constructor:D,init:function(e,n,t,r,o,a){this.elem=e,this.prop=t,this.easing=o||"swing",this.options=n,this.start=this.now=this.cur(),this.end=r,this.unit=a||(oe.cssNumber[t]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var n,t=D.propHooks[this.prop];return this.options.duration?this.pos=n=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=n=e,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var n;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(n=oe.css(e.elem,e.prop,""),n&&"auto"!==n?n:0):e.elem[e.prop]},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[oe.cssProps[e.prop]]||oe.cssHooks[e.prop])?oe.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},oe.fx=D.prototype.init,oe.fx.step={};var mn,hn,pn=/^(?:toggle|show|hide)$/,gn=new RegExp("^(?:([+-])=|)("+be+")([a-z%]*)$","i"),wn=/queueHooks$/,_n=[I],$n={"*":[function(e,n){var t=this.createTween(e,n),r=t.cur(),o=gn.exec(n),a=o&&o[3]||(oe.cssNumber[e]?"":"px"),i=(oe.cssNumber[e]||"px"!==a&&+r)&&gn.exec(oe.css(t.elem,e)),u=1,c=20;if(i&&i[3]!==a){a=a||i[3],o=o||[],i=+r||1;do u=u||".5",i/=u,oe.style(t.elem,e,i+a);while(u!==(u=t.cur()/r)&&1!==u&&--c)}return o&&(i=t.start=+i||+r||0,t.unit=a,t.end=o[1]?i+(o[1]+1)*o[2]:+o[2]),t}]};oe.Animation=oe.extend(k,{tweener:function(e,n){oe.isFunction(e)?(n=e,e=["*"]):e=e.split(" ");for(var t,r=0,o=e.length;o>r;r++)t=e[r],$n[t]=$n[t]||[],$n[t].unshift(n)},prefilter:function(e,n){n?_n.unshift(e):_n.push(e)}}),oe.speed=function(e,n,t){var r=e&&"object"==typeof e?oe.extend({},e):{complete:t||!t&&n||oe.isFunction(e)&&e,duration:e,easing:t&&n||n&&!oe.isFunction(n)&&n};return r.duration=oe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.fn.extend({fadeTo:function(e,n,t,r){return this.filter(xe).css("opacity",0).show().end().animate({opacity:n},e,t,r)},animate:function(e,n,t,r){var o=oe.isEmptyObject(e),a=oe.speed(n,t,r),i=function(){var n=k(this,oe.extend({},e),a);(o||oe._data(this,"finish"))&&n.stop(!0)};return i.finish=i,o||a.queue===!1?this.each(i):this.queue(a.queue,i)},stop:function(e,n,t){var r=function(e){var n=e.stop;delete e.stop,n(t)};return"string"!=typeof e&&(t=n,n=e,e=void 0),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var n=!0,o=null!=e&&e+"queueHooks",a=oe.timers,i=oe._data(this);if(o)i[o]&&i[o].stop&&r(i[o]);else for(o in i)i[o]&&i[o].stop&&wn.test(o)&&r(i[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(t),n=!1,a.splice(o,1));(n||!t)&&oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var n,t=oe._data(this),r=t[e+"queue"],o=t[e+"queueHooks"],a=oe.timers,i=r?r.length:0;for(t.finish=!0,oe.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),n=a.length;n--;)a[n].elem===this&&a[n].queue===e&&(a[n].anim.stop(!0),a.splice(n,1));for(n=0;i>n;n++)r[n]&&r[n].finish&&r[n].finish.call(this);delete t.finish})}}),oe.each(["toggle","show","hide"],function(e,n){var t=oe.fn[n];oe.fn[n]=function(e,r,o){return null==e||"boolean"==typeof e?t.apply(this,arguments):this.animate(L(n,!0),e,r,o)}}),oe.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){oe.fn[e]=function(e,t,r){return this.animate(n,e,t,r)}}),oe.timers=[],oe.fx.tick=function(){var e,n=oe.timers,t=0;for(mn=oe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),mn=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){hn||(hn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(hn),hn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(e,n){return e=oe.fx?oe.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,t){var r=setTimeout(n,e);t.stop=function(){clearTimeout(r)}})},function(){var e,n,t,r,o;n=me.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],t=me.createElement("select"),o=t.appendChild(me.createElement("option")),e=n.getElementsByTagName("input")[0],r.style.cssText="top:1px",te.getSetAttribute="t"!==n.className,te.style=/top/.test(r.getAttribute("style")),te.hrefNormalized="/a"===r.getAttribute("href"),te.checkOn=!!e.value,te.optSelected=o.selected,te.enctype=!!me.createElement("form").enctype,t.disabled=!0,te.optDisabled=!o.disabled,e=me.createElement("input"),e.setAttribute("value",""),te.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),te.radioValue="t"===e.value}();var Cn=/\r/g;oe.fn.extend({val:function(e){var n,t,r,o=this[0];{if(arguments.length)return r=oe.isFunction(e),this.each(function(t){var o;1===this.nodeType&&(o=r?e.call(this,t,oe(this).val()):e,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(e){return null==e?"":e+""})),n=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&void 0!==n.set(this,o,"value")||(this.value=o))});if(o)return n=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&void 0!==(t=n.get(o,"value"))?t:(t=o.value,"string"==typeof t?t.replace(Cn,""):null==t?"":t)}}}),oe.extend({valHooks:{option:{get:function(e){var n=oe.find.attr(e,"value");return null!=n?n:oe.trim(oe.text(e))}},select:{get:function(e){for(var n,t,r=e.options,o=e.selectedIndex,a="select-one"===e.type||0>o,i=a?null:[],u=a?o+1:r.length,c=0>o?u:a?o:0;u>c;c++)if(t=r[c],(t.selected||c===o)&&(te.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!oe.nodeName(t.parentNode,"optgroup"))){if(n=oe(t).val(),a)return n;i.push(n)}return i},set:function(e,n){for(var t,r,o=e.options,a=oe.makeArray(n),i=o.length;i--;)if(r=o[i],oe.inArray(oe.valHooks.option.get(r),a)>=0)try{r.selected=t=!0}catch(u){r.scrollHeight}else r.selected=!1;return t||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,n){return oe.isArray(n)?e.checked=oe.inArray(oe(e).val(),n)>=0:void 0}},te.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Sn,yn,Pn=oe.expr.attrHandle,Tn=/^(?:checked|selected)$/i,bn=te.getSetAttribute,En=te.input;oe.fn.extend({attr:function(e,n){return Fe(this,oe.attr,e,n,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,n,t){var r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===ye?oe.prop(e,n,t):(1===a&&oe.isXMLDoc(e)||(n=n.toLowerCase(),r=oe.attrHooks[n]||(oe.expr.match.bool.test(n)?yn:Sn)),void 0===t?r&&"get"in r&&null!==(o=r.get(e,n))?o:(o=oe.find.attr(e,n),null==o?void 0:o):null!==t?r&&"set"in r&&void 0!==(o=r.set(e,t,n))?o:(e.setAttribute(n,t+""),t):void oe.removeAttr(e,n))},removeAttr:function(e,n){var t,r,o=0,a=n&&n.match(_e);if(a&&1===e.nodeType)for(;t=a[o++];)r=oe.propFix[t]||t,oe.expr.match.bool.test(t)?En&&bn||!Tn.test(t)?e[r]=!1:e[oe.camelCase("default-"+t)]=e[r]=!1:oe.attr(e,t,""),e.removeAttribute(bn?t:r)},attrHooks:{type:{set:function(e,n){if(!te.radioValue&&"radio"===n&&oe.nodeName(e,"input")){var t=e.value;return e.setAttribute("type",n),t&&(e.value=t),n}}}}}),yn={set:function(e,n,t){return n===!1?oe.removeAttr(e,t):En&&bn||!Tn.test(t)?e.setAttribute(!bn&&oe.propFix[t]||t,t):e[oe.camelCase("default-"+t)]=e[t]=!0,t}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,n){var t=Pn[n]||oe.find.attr;Pn[n]=En&&bn||!Tn.test(n)?function(e,n,r){var o,a;return r||(a=Pn[n],Pn[n]=o,o=null!=t(e,n,r)?n.toLowerCase():null,Pn[n]=a),o}:function(e,n,t){return t?void 0:e[oe.camelCase("default-"+n)]?n.toLowerCase():null}}),En&&bn||(oe.attrHooks.value={set:function(e,n,t){return oe.nodeName(e,"input")?void(e.defaultValue=n):Sn&&Sn.set(e,n,t)}}),bn||(Sn={set:function(e,n,t){var r=e.getAttributeNode(t);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(t)),r.value=n+="","value"===t||n===e.getAttribute(t)?n:void 0}},Pn.id=Pn.name=Pn.coords=function(e,n,t){var r;return t?void 0:(r=e.getAttributeNode(n))&&""!==r.value?r.value:null},oe.valHooks.button={get:function(e,n){var t=e.getAttributeNode(n);return t&&t.specified?t.value:void 0},set:Sn.set},oe.attrHooks.contenteditable={set:function(e,n,t){Sn.set(e,""===n?!1:n,t)}},oe.each(["width","height"],function(e,n){oe.attrHooks[n]={set:function(e,t){return""===t?(e.setAttribute(n,"auto"),t):void 0}}})),te.style||(oe.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,n){return e.style.cssText=n+""}});var xn=/^(?:input|select|textarea|button|object)$/i,Fn=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,n){return Fe(this,oe.prop,e,n,arguments.length>1)},removeProp:function(e){return e=oe.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(n){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,t){var r,o,a,i=e.nodeType;if(e&&3!==i&&8!==i&&2!==i)return a=1!==i||!oe.isXMLDoc(e),a&&(n=oe.propFix[n]||n,o=oe.propHooks[n]),void 0!==t?o&&"set"in o&&void 0!==(r=o.set(e,t,n))?r:e[n]=t:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var n=oe.find.attr(e,"tabindex");return n?parseInt(n,10):xn.test(e.nodeName)||Fn.test(e.nodeName)&&e.href?0:-1}}}}),te.hrefNormalized||oe.each(["href","src"],function(e,n){oe.propHooks[n]={get:function(e){return e.getAttribute(n,4)}}}),te.optSelected||(oe.propHooks.selected={get:function(e){var n=e.parentNode;return n&&(n.selectedIndex,n.parentNode&&n.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),te.enctype||(oe.propFix.enctype="encoding");var An=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var n,t,r,o,a,i,u=0,c=this.length,l="string"==typeof e&&e;if(oe.isFunction(e))return this.each(function(n){oe(this).addClass(e.call(this,n,this.className))});if(l)for(n=(e||"").match(_e)||[];c>u;u++)if(t=this[u],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(An," "):" ")){for(a=0;o=n[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i=oe.trim(r),t.className!==i&&(t.className=i)}return this},removeClass:function(e){var n,t,r,o,a,i,u=0,c=this.length,l=0===arguments.length||"string"==typeof e&&e;if(oe.isFunction(e))return this.each(function(n){oe(this).removeClass(e.call(this,n,this.className))});if(l)for(n=(e||"").match(_e)||[];c>u;u++)if(t=this[u],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(An," "):"")){for(a=0;o=n[a++];)for(;r.indexOf(" "+o+" ")>=0;)r=r.replace(" "+o+" "," ");i=e?oe.trim(r):"",t.className!==i&&(t.className=i)}return this},toggleClass:function(e,n){var t=typeof e;return"boolean"==typeof n&&"string"===t?n?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(t){oe(this).toggleClass(e.call(this,t,this.className,n),n)}):this.each(function(){if("string"===t)for(var n,r=0,o=oe(this),a=e.match(_e)||[];n=a[r++];)o.hasClass(n)?o.removeClass(n):o.addClass(n);else(t===ye||"boolean"===t)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||e===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(e){for(var n=" "+e+" ",t=0,r=this.length;r>t;t++)if(1===this[t].nodeType&&(" "+this[t].className+" ").replace(An," ").indexOf(n)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){oe.fn[n]=function(e,t){return arguments.length>0?this.on(n,null,e,t):this.trigger(n)}}),oe.fn.extend({hover:function(e,n){return this.mouseenter(e).mouseleave(n||e)},bind:function(e,n,t){return this.on(e,null,n,t)},unbind:function(e,n){return this.off(e,null,n)},delegate:function(e,n,t,r){return this.on(n,e,t,r)},undelegate:function(e,n,t){return 1===arguments.length?this.off(e,"**"):this.off(n,e||"**",t)}});var Nn=oe.now(),Dn=/\?/,Mn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(n){if(e.JSON&&e.JSON.parse)return e.JSON.parse(n+"");var t,r=null,o=oe.trim(n+"");return o&&!oe.trim(o.replace(Mn,function(e,n,o,a){return t&&n&&(r=0),0===r?e:(t=o||n,r+=!a-!o,"")}))?Function("return "+o)():oe.error("Invalid JSON: "+n)},oe.parseXML=function(n){var t,r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(r=new DOMParser,t=r.parseFromString(n,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n))}catch(o){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+n),t};var Ln,On,In=/#.*$/,Rn=/([?&])_=[^&]*/,kn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Un=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Gn=/^(?:GET|HEAD)$/,Bn=/^\/\//,Jn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,zn={},Hn={},Wn="*/".concat("*");try{On=location.href}catch(jn){On=me.createElement("a"),On.href="",On=On.href}Ln=Jn.exec(On.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:On,type:"GET",isLocal:Un.test(Ln[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?B(B(e,oe.ajaxSettings),n):B(oe.ajaxSettings,e)},ajaxPrefilter:U(zn),ajaxTransport:U(Hn),ajax:function(e,n){function t(e,n,t,r){var o,s,g,w,$,S=n;2!==_&&(_=2,u&&clearTimeout(u),l=void 0,i=r||"",C.readyState=e>0?4:0,o=e>=200&&300>e||304===e,t&&(w=J(f,C,t)),w=z(f,w,C,o),o?(f.ifModified&&($=C.getResponseHeader("Last-Modified"),$&&(oe.lastModified[a]=$),$=C.getResponseHeader("etag"),$&&(oe.etag[a]=$)),204===e||"HEAD"===f.type?S="nocontent":304===e?S="notmodified":(S=w.state,s=w.data,g=w.error,o=!g)):(g=S,(e||!S)&&(S="error",0>e&&(e=0))),C.status=e,C.statusText=(n||S)+"",o?m.resolveWith(d,[s,S,C]):m.rejectWith(d,[C,S,g]),C.statusCode(p),p=void 0,c&&v.trigger(o?"ajaxSuccess":"ajaxError",[C,f,o?s:g]),h.fireWith(d,[C,S]),c&&(v.trigger("ajaxComplete",[C,f]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,o,a,i,u,c,l,s,f=oe.ajaxSetup({},n),d=f.context||f,v=f.context&&(d.nodeType||d.jquery)?oe(d):oe.event,m=oe.Deferred(),h=oe.Callbacks("once memory"),p=f.statusCode||{},g={},w={},_=0,$="canceled",C={readyState:0,getResponseHeader:function(e){var n;if(2===_){if(!s)for(s={};n=kn.exec(i);)s[n[1].toLowerCase()]=n[2];n=s[e.toLowerCase()]}return null==n?null:n},getAllResponseHeaders:function(){return 2===_?i:null},setRequestHeader:function(e,n){var t=e.toLowerCase();return _||(e=w[t]=w[t]||e,g[e]=n),this},overrideMimeType:function(e){return _||(f.mimeType=e),this},statusCode:function(e){var n;if(e)if(2>_)for(n in e)p[n]=[p[n],e[n]];else C.always(e[C.status]);return this},abort:function(e){var n=e||$;return l&&l.abort(n),t(0,n),this}};if(m.promise(C).complete=h.add,C.success=C.done,C.error=C.fail,f.url=((e||f.url||On)+"").replace(In,"").replace(Bn,Ln[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=oe.trim(f.dataType||"*").toLowerCase().match(_e)||[""],null==f.crossDomain&&(r=Jn.exec(f.url.toLowerCase()),f.crossDomain=!(!r||r[1]===Ln[1]&&r[2]===Ln[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Ln[3]||("http:"===Ln[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=oe.param(f.data,f.traditional)),G(zn,f,n,C),2===_)return C;c=oe.event&&f.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Gn.test(f.type),a=f.url,f.hasContent||(f.data&&(a=f.url+=(Dn.test(a)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=Rn.test(a)?a.replace(Rn,"$1_="+Nn++):a+(Dn.test(a)?"&":"?")+"_="+Nn++)),f.ifModified&&(oe.lastModified[a]&&C.setRequestHeader("If-Modified-Since",oe.lastModified[a]),oe.etag[a]&&C.setRequestHeader("If-None-Match",oe.etag[a])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Wn+"; q=0.01":""):f.accepts["*"]);for(o in f.headers)C.setRequestHeader(o,f.headers[o]);if(f.beforeSend&&(f.beforeSend.call(d,C,f)===!1||2===_))return C.abort();$="abort";for(o in{success:1,error:1,complete:1})C[o](f[o]);if(l=G(Hn,f,n,C)){C.readyState=1,c&&v.trigger("ajaxSend",[C,f]),f.async&&f.timeout>0&&(u=setTimeout(function(){C.abort("timeout")},f.timeout));try{_=1,l.send(g,t)}catch(S){if(!(2>_))throw S;t(-1,S)}}else t(-1,"No Transport");return C},getJSON:function(e,n,t){return oe.get(e,n,t,"json")},getScript:function(e,n){return oe.get(e,void 0,n,"script")}}),oe.each(["get","post"],function(e,n){oe[n]=function(e,t,r,o){return oe.isFunction(t)&&(o=o||r,r=t,t=void 0),oe.ajax({url:e,type:n,dataType:o,data:t,success:r})}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(e){if(oe.isFunction(e))return this.each(function(n){oe(this).wrapAll(e.call(this,n))});if(this[0]){var n=oe(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return oe.isFunction(e)?this.each(function(n){oe(this).wrapInner(e.call(this,n))}):this.each(function(){var n=oe(this),t=n.contents();t.length?t.wrapAll(e):n.append(e)})},wrap:function(e){var n=oe.isFunction(e);return this.each(function(t){oe(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!te.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||oe.css(e,"display"))},oe.expr.filters.visible=function(e){return!oe.expr.filters.hidden(e)};var qn=/%20/g,Vn=/\[\]$/,Zn=/\r?\n/g,Xn=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,n){var t,r=[],o=function(e,n){n=oe.isFunction(n)?n():null==n?"":n,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)};if(void 0===n&&(n=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){o(this.name,this.value)});else for(t in e)H(t,e[t],n,o);return r.join("&").replace(qn,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Kn.test(this.nodeName)&&!Xn.test(e)&&(this.checked||!Ae.test(e))}).map(function(e,n){var t=oe(this).val();return null==t?null:oe.isArray(t)?oe.map(t,function(e){return{name:n.name,value:e.replace(Zn,"\r\n")}}):{name:n.name,value:t.replace(Zn,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||j()}:W;var Yn=0,Qn={},et=oe.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Qn)Qn[e](void 0,!0)}),te.cors=!!et&&"withCredentials"in et,et=te.ajax=!!et,et&&oe.ajaxTransport(function(e){if(!e.crossDomain||te.cors){var n;return{send:function(t,r){var o,a=e.xhr(),i=++Yn;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest");for(o in t)void 0!==t[o]&&a.setRequestHeader(o,t[o]+"");a.send(e.hasContent&&e.data||null),n=function(t,o){var u,c,l;if(n&&(o||4===a.readyState))if(delete Qn[i],n=void 0,a.onreadystatechange=oe.noop,o)4!==a.readyState&&a.abort();else{l={},u=a.status,"string"==typeof a.responseText&&(l.text=a.responseText);try{c=a.statusText}catch(s){c=""}u||!e.isLocal||e.crossDomain?1223===u&&(u=204):u=l.text?200:404}l&&r(u,c,l,a.getAllResponseHeaders())},e.async?4===a.readyState?setTimeout(n):a.onreadystatechange=Qn[i]=n:n()},abort:function(){n&&n(void 0,!0)}}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var n,t=me.head||oe("head")[0]||me.documentElement;return{send:function(r,o){n=me.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||o(200,"success"))},t.insertBefore(n,t.firstChild)},abort:function(){n&&n.onload(void 0,!0)}}}});var nt=[],tt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=nt.pop()||oe.expando+"_"+Nn++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(n,t,r){var o,a,i,u=n.jsonp!==!1&&(tt.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&tt.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=oe.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(tt,"$1"+o):n.jsonp!==!1&&(n.url+=(Dn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return i||oe.error(o+" was not called"),i[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){i=arguments},r.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=t.jsonpCallback,nt.push(o)),i&&oe.isFunction(a)&&a(i[0]),i=a=void 0}),"script"):void 0}),oe.parseHTML=function(e,n,t){if(!e||"string"!=typeof e)return null;"boolean"==typeof n&&(t=n,n=!1),n=n||me;var r=fe.exec(e),o=!t&&[];return r?[n.createElement(r[1])]:(r=oe.buildFragment([e],n,o),o&&o.length&&oe(o).remove(),oe.merge([],r.childNodes))};var rt=oe.fn.load;oe.fn.load=function(e,n,t){if("string"!=typeof e&&rt)return rt.apply(this,arguments);var r,o,a,i=this,u=e.indexOf(" ");
return u>=0&&(r=oe.trim(e.slice(u,e.length)),e=e.slice(0,u)),oe.isFunction(n)?(t=n,n=void 0):n&&"object"==typeof n&&(a="POST"),i.length>0&&oe.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,i.html(r?oe("<div>").append(oe.parseHTML(e)).find(r):e)}).complete(t&&function(e,n){i.each(t,o||[e.responseText,n,e])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,n){oe.fn[n]=function(e){return this.on(n,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(n){return e===n.elem}).length};var ot=e.document.documentElement;oe.offset={setOffset:function(e,n,t){var r,o,a,i,u,c,l,s=oe.css(e,"position"),f=oe(e),d={};"static"===s&&(e.style.position="relative"),u=f.offset(),a=oe.css(e,"top"),c=oe.css(e,"left"),l=("absolute"===s||"fixed"===s)&&oe.inArray("auto",[a,c])>-1,l?(r=f.position(),i=r.top,o=r.left):(i=parseFloat(a)||0,o=parseFloat(c)||0),oe.isFunction(n)&&(n=n.call(e,t,u)),null!=n.top&&(d.top=n.top-u.top+i),null!=n.left&&(d.left=n.left-u.left+o),"using"in n?n.using.call(e,d):f.css(d)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(n){oe.offset.setOffset(this,e,n)});var n,t,r={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return n=a.documentElement,oe.contains(n,o)?(typeof o.getBoundingClientRect!==ye&&(r=o.getBoundingClientRect()),t=q(a),{top:r.top+(t.pageYOffset||n.scrollTop)-(n.clientTop||0),left:r.left+(t.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):r},position:function(){if(this[0]){var e,n,t={top:0,left:0},r=this[0];return"fixed"===oe.css(r,"position")?n=r.getBoundingClientRect():(e=this.offsetParent(),n=this.offset(),oe.nodeName(e[0],"html")||(t=e.offset()),t.top+=oe.css(e[0],"borderTopWidth",!0),t.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:n.top-t.top-oe.css(r,"marginTop",!0),left:n.left-t.left-oe.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ot;e&&!oe.nodeName(e,"html")&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||ot})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var t=/Y/.test(n);oe.fn[e]=function(r){return Fe(this,function(e,r,o){var a=q(e);return void 0===o?a?n in a?a[n]:a.document.documentElement[r]:e[r]:void(a?a.scrollTo(t?oe(a).scrollLeft():o,t?o:oe(a).scrollTop()):e[r]=o)},e,r,arguments.length,null)}}),oe.each(["top","left"],function(e,n){oe.cssHooks[n]=b(te.pixelPosition,function(e,t){return t?(t=nn(e,n),rn.test(t)?oe(e).position()[n]+"px":t):void 0})}),oe.each({Height:"height",Width:"width"},function(e,n){oe.each({padding:"inner"+e,content:n,"":"outer"+e},function(t,r){oe.fn[r]=function(r,o){var a=arguments.length&&(t||"boolean"!=typeof r),i=t||(r===!0||o===!0?"margin":"border");return Fe(this,function(n,t,r){var o;return oe.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?oe.css(n,t,i):oe.style(n,t,r,i)},n,a?r:void 0,a,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var at=e.jQuery,it=e.$;return oe.noConflict=function(n){return e.$===oe&&(e.$=it),n&&e.jQuery===oe&&(e.jQuery=at),oe},typeof n===ye&&(e.jQuery=e.$=oe),oe});var PS={};!function(e){"use strict";e.arrayMap=function(e){return function(n){for(var t=n.length,r=new Array(t),o=0;t>o;o++)r[o]=e(n[o]);return r}},e.arrayBind=function(e){return function(n){for(var t=[],r=0,o=e.length;o>r;r++)Array.prototype.push.apply(t,n(e[r]));return t}},e.concatArray=function(e){return function(n){return e.concat(n)}},e.intAdd=function(e){return function(n){return e+n|0}},e.intMul=function(e){return function(n){return e*n|0}},e.numAdd=function(e){return function(n){return e+n}},e.numMul=function(e){return function(n){return e*n}},e.intDiv=function(e){return function(n){return e/n|0}},e.intMod=function(e){return function(n){return e%n}},e.numDiv=function(e){return function(n){return e/n}},e.numSub=function(e){return function(n){return e-n}},e.refEq=function(e){return function(n){return e===n}},e.unsafeCompareImpl=function(e){return function(n){return function(t){return function(r){return function(o){return o>r?e:r>o?t:n}}}}},e.topInt=2147483647,e.bottomInt=-2147483648,e.boolOr=function(e){return function(n){return e||n}},e.boolAnd=function(e){return function(n){return e&&n}},e.boolNot=function(e){return!e},e.showIntImpl=function(e){return e.toString()},e.showNumberImpl=function(e){return e===(0|e)?e+".0":e.toString()},e.showCharImpl=function(e){var n=e.charCodeAt(0);if(32>n||127===n){switch(e){case"":return"'\\a'";case"\b":return"'\\b'";case"\f":return"'\\f'";case"\n":return"'\\n'";case"\r":return"'\\r'";case"	":return"'\\t'";case"\x0B":return"'\\v'"}return"'\\"+n.toString(10)+"'"}return"'"===e||"\\"===e?"'\\"+e+"'":"'"+e+"'"},e.showStringImpl=function(e){var n=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(t,r){switch(t){case'"':case"\\":return"\\"+t;case"":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\x0B":return"\\v"}var o=r+1,a=n>o&&e[o]>="0"&&e[o]<="9"?"\\&":"";return"\\"+t.charCodeAt(0).toString(10)+a})+'"'},e.showArrayImpl=function(e){return function(n){for(var t=[],r=0,o=n.length;o>r;r++)t[r]=e(n[r]);return"["+t.join(",")+"]"}}}(PS.Prelude=PS.Prelude||{}),function(e){"use strict";var n=PS.Prelude,t=function(){function e(){}return e.value=new e,e}(),r=function(){function e(){}return e.value=new e,e}(),o=function(){function e(){}return e.value=new e,e}(),a=function(e){this.compose=e},i=function(e,n){this["__superclass_Prelude.Semigroupoid_0"]=e,this.id=n},u=function(e){this.map=e},c=function(e,n){this["__superclass_Prelude.Functor_0"]=e,this.apply=n},l=function(e,n){this["__superclass_Prelude.Apply_0"]=e,this.pure=n},s=function(e,n){this["__superclass_Prelude.Apply_0"]=e,this.bind=n},f=function(e,n){this["__superclass_Prelude.Applicative_0"]=e,this["__superclass_Prelude.Bind_1"]=n},d=function(e){this.append=e},v=function(e,n,t,r){this.add=e,this.mul=n,this.one=t,this.zero=r},m=function(e,n){this["__superclass_Prelude.Semiring_0"]=e,this.sub=n},h=function(e,n,t){this["__superclass_Prelude.Semiring_0"]=e,this.div=n,this.mod=t},p=function(e,n){this["__superclass_Prelude.ModuloSemiring_1"]=e,this["__superclass_Prelude.Ring_0"]=n},g=function(e){this["__superclass_Prelude.DivisionRing_0"]=e},w=function(e){this.eq=e},_=function(e,n){this["__superclass_Prelude.Eq_0"]=e,this.compare=n},$=function(e,n){this.bottom=e,this.top=n},C=function(e,n,t,r){this["__superclass_Prelude.Bounded_0"]=e,this.conj=n,this.disj=t,this.not=r},S=function(e){this.show=e},y=function(e){return e.zero},P=n.unsafeCompareImpl(t.value)(o.value)(r.value),T={},b=function(e){return e.top},E=function(e){return e.sub},x=function(e){return E(e)},F=new S(n.showStringImpl),A=new S(n.showNumberImpl),N=new S(n.showIntImpl),D=new S(n.showCharImpl),M=new S(function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Prelude line 842, column 3 - line 843, column 3: "+[e.constructor.name])}),L=function(e){return e.show},O=function(e){return new S(n.showArrayImpl(L(e)))},I=new v(n.numAdd,n.numMul,1,0),R=new v(n.intAdd,n.intMul,1,0),k=new a(function(e){return function(n){return function(t){return e(n(t))}}}),U=new d(n.concatArray),G=new m(function(){return I},n.numSub),B=function(e){return e.pure},J=function(e){return B(e)},z=!0,H=function(e){return e.one},W=function(e){return e.not},j=function(e){return e.mul},q=function(e){return j(e)},V=new h(function(){return I},n.numDiv,function(e){return function(e){return 0}}),Z=new h(function(){return R},n.intDiv,n.intMod),X=function(e){return e.mod},K=function(e){return e.map},Y=function(e){return K(e)},Q=function(e){return e.id},ee=new u(n.arrayMap),ne=function(e){return function(n){return function(t){return e(t)(n)}}},te=new w(n.refEq),re=new _(function(){return te},P),oe=new w(n.refEq),ae=new _(function(){return oe},P),ie=function(e){return e.eq},ue=function(e){return ie(e)},ce=new p(function(){return V},function(){return G}),le=new g(function(){return ce}),se=function(e){return e.div},fe=function(e){return e.disj},de=function(e){return function(n){return e}},ve=function(e){return e.conj},me=function(e){return e.compose},he=function(e){return e.compare},pe=function(e){return function(n){return function(r){var o=he(e)(n)(r);return o instanceof t?!0:!1}}},ge=new i(function(){return k},function(e){return e}),we=new $(n.bottomInt,n.topInt),_e=new $(!1,!0),$e=function(e){return e.bottom},Ce=new C(function(){return _e},n.boolAnd,n.boolOr,n.boolNot),Se=function(e){return function(n){return function(t){return W(Ce)(ue(e)(n)(t))}}},ye=function(e){return e.bind},Pe=function(e,n,t){return ye(e["__superclass_Prelude.Bind_1"]())(t)(function(t){return J(e["__superclass_Prelude.Applicative_0"]())(n(t))})},Te=function(e){return ye(e)},be=function(e){return e.apply},Ee=function(e){return be(e)},xe=function(e){return function(n){return function(t){return Ee(e["__superclass_Prelude.Apply_0"]())(B(e)(n))(t)}}},Fe=function(e){return e.append},Ae=function(e){return Fe(e)},Ne=function(e){return Fe(e)},De=function(e){return function(n){return function(t){return ye(e["__superclass_Prelude.Bind_1"]())(n)(function(n){return ye(e["__superclass_Prelude.Bind_1"]())(t)(function(t){return J(e["__superclass_Prelude.Applicative_0"]())(n(t))})})}}},Me=new f(function(){return Ie},function(){return Le}),Le=new s(function(){return Oe},n.arrayBind),Oe=new c(function(){return ee},De(Me)),Ie=new l(function(){return Oe},function(e){return[e]}),Re=function(e){return e.add},ke=function(e){return Re(e)};e.LT=t,e.GT=r,e.EQ=o,e.Show=S,e.BooleanAlgebra=C,e.Bounded=$,e.Ord=_,e.Eq=w,e.DivisionRing=p,e.Num=g,e.Ring=m,e.ModuloSemiring=h,e.Semiring=v,e.Semigroup=d,e.Monad=f,e.Bind=s,e.Applicative=l,e.Apply=c,e.Functor=u,e.Category=i,e.Semigroupoid=a,e.show=L,e.not=W,e.disj=fe,e.conj=ve,e.bottom=$e,e.top=b,e.unsafeCompare=P,e["<"]=pe,e.compare=he,e["/="]=Se,e["=="]=ue,e.eq=ie,e["-"]=x,e.sub=E,e.mod=X,e.div=se,e["*"]=q,e["+"]=ke,e.one=H,e.mul=j,e.zero=y,e.add=Re,e["++"]=Ae,e["<>"]=Ne,e.append=Fe,e.ap=De,e.liftM1$_$_$=Pe,e["return"]=J,e[">>="]=Te,e.bind=ye,e.liftA1=xe,e.pure=B,e["<*>"]=Ee,e.apply=be,e["<$>"]=Y,e.map=K,e.id=Q,e.compose=me,e.otherwise=z,e["const"]=de,e.flip=ne,e.unit=T,e.semigroupoidFn=k,e.categoryFn=ge,e.functorArray=ee,e.applyArray=Oe,e.applicativeArray=Ie,e.bindArray=Le,e.monadArray=Me,e.semigroupArray=U,e.semiringInt=R,e.semiringNumber=I,e.ringNumber=G,e.moduloSemiringInt=Z,e.moduloSemiringNumber=V,e.divisionRingNumber=ce,e.numNumber=le,e.eqInt=oe,e.eqNumber=te,e.ordInt=ae,e.ordNumber=re,e.boundedBoolean=_e,e.boundedInt=we,e.booleanAlgebraBoolean=Ce,e.showBoolean=M,e.showInt=N,e.showNumber=A,e.showChar=D,e.showString=F,e.showArray=O}(PS.Prelude=PS.Prelude||{}),function(e){"use strict";var n=(PS.Prelude,function(e,n){this["__superclass_Prelude.Semigroup_0"]=e,this.mempty=n}),t=function(e){return e.mempty};e.Monoid=n,e.mempty=t}(PS["Data.Monoid"]=PS["Data.Monoid"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Control.Alt"],PS["Control.Alternative"],PS["Control.Extend"],PS["Control.MonadPlus"],PS["Control.Plus"],PS["Data.Functor.Invariant"],PS["Data.Monoid"],function(){function e(){}return e.value=new e,e}()),r=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),o=function(e){return new n.Show(function(o){if(o instanceof r)return"Just ("+(n.show(e)(o.value0)+")");if(o instanceof t)return"Nothing";throw new Error("Failed pattern match at Data.Maybe line 290, column 3 - line 291, column 3: "+[o.constructor.name])})},a=function(e){return function(n){return function(o){if(o instanceof t)return e;if(o instanceof r)return n(o.value0);throw new Error("Failed pattern match at Data.Maybe line 27, column 1 - line 28, column 1: "+[e.constructor.name,n.constructor.name,o.constructor.name])}}},i=function(e,n,o){if(o instanceof t)return e;if(o instanceof r)return n(o.value0);throw new Error("Failed pattern match at Data.Maybe line 27, column 1 - line 28, column 1: "+[e.constructor.name,n.constructor.name,o.constructor.name])},u=a(!1)(n["const"](!0)),c=new n.Functor(function(e){return function(n){return n instanceof r?new r(e(n.value0)):t.value}}),l=function(e){return a(e)(n.id(n.categoryFn))},s=new n.Apply(function(){return c},function(e){return function(o){if(e instanceof r)return n["<$>"](c)(e.value0)(o);if(e instanceof t)return t.value;throw new Error("Failed pattern match at Data.Maybe line 122, column 3 - line 123, column 3: "+[e.constructor.name,o.constructor.name])}});e.Nothing=t,e.Just=r,e.isJust=u,e.fromMaybe=l,e.maybe=a,e.maybe$_$_$=i,e.functorMaybe=c,e.applyMaybe=s,e.showMaybe=o}(PS["Data.Maybe"]=PS["Data.Maybe"]||{}),function(e){"use strict";e.fail=function(e){throw new Error(e)},e.undef=function(){throw new Error("Encountered undefined")},e.unsafeCoerce=function(e){return e},e.mapE$_$_$=function(e,n){return function(){for(var t=new Array(n.length),r=0;r<n.length;r++)t[r]=e(n[r])();return t}},e.mapE_$_$_$=function(e,n){return function(){for(var t=0;t<n.length;t++)e(n[t])()}},e.mapEBreak_$_$_$=function(e,n,t){return function(){for(var r=0;r<t.length;r++){e(t[r])();var o=n(r)();if(o)break}}},e.alert=function(e){return function(){return window.alert(e),{}}}}(PS.Extensions=PS.Extensions||{}),function(e){"use strict";e.traverseArrayImpl=function(){function e(e){this.fn=e}function n(e){return function(n){return new o(e,n)}}function t(e){for(var n=[];e!==r;)n.push(e.head),e=e.tail;return n}var r={},o=function(e,n){this.head=e,this.tail=n};return function(o){return function(a){return function(i){return function(u){var c=function(e,t){return o(a(n)(u(e)))(t)},l=function(n,t,r){if(0===t)return n;var o=r[t-1];return new e(function(){return l(c(o,n),t-1,r)})};return function(n){for(var o=l(i(r),n.length,n);o instanceof e;)o=o.fn();return a(t)(o)}}}}}}()}(PS["Data.Traversable"]=PS["Data.Traversable"]||{}),function(e){"use strict";e.foldrArray=function(e){return function(n){return function(t){for(var r=n,o=t.length,a=o-1;a>=0;a--)r=e(t[a])(r);return r}}},e.foldlArray=function(e){return function(n){return function(t){for(var r=n,o=t.length,a=0;o>a;a++)r=e(r)(t[a]);return r}}}}(PS["Data.Foldable"]=PS["Data.Foldable"]||{}),function(e){"use strict";var n=PS.Prelude,t=function(e){return function(t){return function(r){return n["<*>"](e)(n["<$>"](e["__superclass_Prelude.Functor_0"]())(n["const"](n.id(n.categoryFn)))(t))(r)}}},r=function(e){return function(t){return function(r){return function(o){return n["<*>"](e)(n["<$>"](e["__superclass_Prelude.Functor_0"]())(t)(r))(o)}}}};e.lift2=r,e["*>"]=t}(PS["Control.Apply"]=PS["Control.Apply"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Control.Comonad"],PS["Control.Extend"],PS["Data.Monoid"]),r=function(e){return e},o=function(e){return new n.Semigroup(function(t){return function(r){return n.disj(e)(t)(r)}})},a=function(e){return e},i=function(e){return new t.Monoid(function(){return o(e)},n.bottom(e["__superclass_Prelude.Bounded_0"]()))};e.Disj=r,e.runDisj=a,e.semigroupDisj=o,e.monoidDisj=i}(PS["Data.Monoid.Disj"]=PS["Data.Monoid.Disj"]||{}),function(e){"use strict";var n=PS["Data.Foldable"],t=PS.Prelude,r=(PS["Control.Apply"],PS["Data.Maybe"],PS["Data.Maybe.First"],PS["Data.Maybe.Last"],PS["Data.Monoid"]),o=(PS["Data.Monoid.Additive"],PS["Data.Monoid.Conj"],PS["Data.Monoid.Disj"]),a=(PS["Data.Monoid.Dual"],PS["Data.Monoid.Endo"],PS["Data.Monoid.Multiplicative"],function(e,n,t){this.foldMap=e,this.foldl=n,this.foldr=t}),i=function(e){return e.foldr},u=function(e){return e.foldl},c=function(e,n){return u(e)(t["+"](n))(t.zero(n))},l=function(e){return function(n){return function(o){return function(a){return i(e)(function(e){return function(r){return t["<>"](n["__superclass_Prelude.Semigroup_0"]())(o(e))(r)}})(r.mempty(n))(a)}}}},s=new a(function(e){return l(s)(e)},n.foldlArray,n.foldrArray),f=function(e){return e.foldMap},d=function(e){return function(n){return function(t){return function(r){return o.runDisj(f(e)(o.monoidDisj(n))(function(e){return o.Disj(t(e))})(r))}}}},v=function(e,n,r){return d(e)(t.booleanAlgebraBoolean)(t["=="](n)(r))};e.Foldable=a,e.elem$_$_$=v,e.sum$_$_$=c,e.any=d,e.foldMapDefaultR=l,e.foldMap=f,e.foldl=u,e.foldr=i,e.foldableArray=s}(PS["Data.Foldable"]=PS["Data.Foldable"]||{}),function(e){"use strict";var n=PS["Data.Traversable"],t=PS.Prelude,r=PS["Data.Foldable"],o=(PS["Data.Maybe"],PS["Data.Maybe.First"],PS["Data.Maybe.Last"],PS["Data.Monoid.Additive"],PS["Data.Monoid.Conj"],PS["Data.Monoid.Disj"],PS["Data.Monoid.Dual"],PS["Data.Monoid.Multiplicative"],function(e,n,t,r){this["__superclass_Data.Foldable.Foldable_1"]=e,this["__superclass_Prelude.Functor_0"]=n,this.sequence=t,this.traverse=r}),a=function(e){return e.traverse},i=function(e){return function(n){return function(r){return a(e)(n)(t.id(t.categoryFn))(r)}}},u=new o(function(){return r.foldableArray},function(){return t.functorArray},function(e){return i(u)(e)},function(e){return n.traverseArrayImpl(t.apply(e["__superclass_Prelude.Apply_0"]()))(t.map(e["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]()))(t.pure(e))}),c=function(e){return e.sequence};e.Traversable=o,e.sequenceDefault=i,e.sequence=c,e.traverse=a,e.traversableArray=u}(PS["Data.Traversable"]=PS["Data.Traversable"]||{}),function(e){"use strict";e.returnE=function(e){return function(){return e}},e.bindE=function(e){return function(n){return function(){return n(e())()}}},e.runPure=function(e){return e()}}(PS["Control.Monad.Eff"]=PS["Control.Monad.Eff"]||{}),function(e){"use strict";var n=PS["Control.Monad.Eff"],t=PS.Prelude,r=new t.Monad(function(){return i},function(){return o}),o=new t.Bind(function(){return a},n.bindE),a=new t.Apply(function(){return u},t.ap(r)),i=new t.Applicative(function(){return a},n.returnE),u=new t.Functor(t.liftA1(i));e.functorEff=u,e.applyEff=a,e.applicativeEff=i,e.bindEff=o,e.monadEff=r,e.runPure=n.runPure}(PS["Control.Monad.Eff"]=PS["Control.Monad.Eff"]||{}),function(e){"use strict";e.range=function(e){return function(n){for(var t=e>n?-1:1,r=[],o=e,a=0;o!==n;o+=t)r[a++]=o;return r[a]=o,r}},e.range$_$_$=function(e,n){for(var t=e>n?-1:1,r=[],o=e,a=0;o!==n;o+=t)r[a++]=o;return r[a]=o,r},e.replicate$_$_$=function(e,n){if(1>e)return[];for(var t=new Array(e),r=0;e>r;r++)t[r]=n;return t},e.length=function(e){return e.length},e.cons=function(e){return function(n){return[e].concat(n)}},e["uncons'"]=function(e){return function(n){return function(t){return 0===t.length?e({}):n(t[0])(t.slice(1))}}},e.concat=function(e){for(var n=[],t=0,r=e.length;r>t;t++)for(var o=e[t],a=0,i=o.length;i>a;a++)n.push(o[a]);return n},e.filter=function(e){return function(n){return n.filter(e)}},e.filter$_$_$=function(e,n){return n.filter(e)},e.sortImpl$_$_$=function(e,n){return n.slice().sort(function(n,t){return e(n)(t)})},e.slice=function(e){return function(n){return function(t){return t.slice(e,n)}}},e.slice$_$_$=function(e,n,t){return t.slice(e,n)},e.zipWith$_$_$=function(e,n,t){for(var r=n.length<t.length?n.length:t.length,o=new Array(r),a=0;r>a;a++)o[a]=e(n[a])(t[a]);return o}}(PS["Data.Array"]=PS["Data.Array"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Control.Biapplicative"],PS["Control.Biapply"],PS["Control.Comonad"],PS["Control.Extend"],PS["Control.Lazy"],PS["Data.Bifoldable"],PS["Data.Bifunctor"],PS["Data.Bitraversable"],PS["Data.Foldable"]),r=(PS["Data.Functor.Invariant"],PS["Data.Maybe"],PS["Data.Maybe.First"],PS["Data.Monoid"],PS["Data.Traversable"]),o=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),a=function(e){return function(n){return e(n.value0)(n.value1)}},i=new n.Functor(function(e){return function(n){return new o(n.value0,e(n.value1))}}),u=new t.Foldable(function(e){return function(e){return function(n){return e(n.value1)}}},function(e){return function(n){return function(t){return e(n)(t.value1)}}},function(e){return function(n){return function(t){return e(t.value1)(n)}}}),c=new r.Traversable(function(){return u},function(){return i},function(e){return function(t){return n["<$>"](e["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(o.create(t.value0))(t.value1)}},function(e){return function(t){return function(r){return n["<$>"](e["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(o.create(r.value0))(t(r.value1))}}});e.Tuple=o,e.uncurry=a,e.functorTuple=i,e.foldableTuple=u,e.traversableTuple=c}(PS["Data.Tuple"]=PS["Data.Tuple"]||{}),function(e){"use strict";e.unsafeThrow=function(e){throw new Error(e)}}(PS["Data.Maybe.Unsafe"]=PS["Data.Maybe.Unsafe"]||{}),function(e){"use strict";var n=PS["Data.Maybe.Unsafe"],t=(PS.Prelude,PS["Data.Maybe"]),r=function(e){if(e instanceof t.Just)return e.value0;if(e instanceof t.Nothing)return n.unsafeThrow("Data.Maybe.Unsafe.fromJust called on Nothing");throw new Error("Failed pattern match at Data.Maybe.Unsafe line 11, column 1 - line 12, column 1: "+[e.constructor.name])};e.fromJust=r,e.unsafeThrow=n.unsafeThrow}(PS["Data.Maybe.Unsafe"]=PS["Data.Maybe.Unsafe"]||{}),function(e){"use strict";var n=PS["Data.Array"],t=PS.Prelude,r=(PS["Control.Alt"],PS["Control.Alternative"],PS["Control.Lazy"],PS["Control.MonadPlus"],PS["Control.Plus"],PS["Data.Foldable"],PS["Data.Functor.Invariant"],PS["Data.Maybe"]),o=(PS["Data.Monoid"],PS["Data.Traversable"],PS["Data.Tuple"],PS["Data.Maybe.Unsafe"],n.cons),a=n.range,i=n["uncons'"](t["const"](r.Nothing.value))(function(e){return function(n){return new r.Just({head:e,tail:n})}}),u=function(e,r){var o=function(n){return function(r){var o=e(n)(r);if(o instanceof t.GT)return 1;if(o instanceof t.EQ)return 0;if(o instanceof t.LT)return-1;throw new Error("Failed pattern match at Data.Array line 417, column 15 - line 422, column 1: "+[o.constructor.name])}};return n.sortImpl$_$_$(o,r)},c=function(e){return[e]},l=function(e){return 0===n.length(e)},s=function(e,r,o){return n["uncons'"](function(n){return t["return"](e["__superclass_Prelude.Applicative_0"]())(o)})(function(n){return function(a){return t[">>="](e["__superclass_Prelude.Bind_1"]())(r(o)(n))(function(n){return s(e,r,n)(a)})}})},f=t.flip(t.bind(t.bindArray)),d=function(e){return f(function(n){return r.maybe$_$_$([],c,e(n))})};e.foldM$_$_$=s,e.sortBy$_$_$=u,e.mapMaybe=d,e.concatMap=f,e.uncons=i,e[":"]=o,e["null"]=l,e[".."]=a,e.singleton=c,e.zipWith$_$_$=n.zipWith$_$_$,e.slice$_$_$=n.slice$_$_$,e.filter$_$_$=n.filter$_$_$,e.concat=n.concat,e.length=n.length,e.replicate$_$_$=n.replicate$_$_$,e.range$_$_$=n.range$_$_$}(PS["Data.Array"]=PS["Data.Array"]||{}),function(e){"use strict";e.abs=Math.abs,e.atan2=function(e){return function(n){return Math.atan2(e,n)}},e.atan2$_$_$=function(e,n){return Math.atan2(e,n)},e.cos=Math.cos,e.floor=Math.floor,e.max=function(e){return function(n){return Math.max(e,n)}},e.max$_$_$=function(e,n){return Math.max(e,n)},e.min=function(e){return function(n){return Math.min(e,n)}},e.min$_$_$=function(e,n){return Math.min(e,n)},e.round=Math.round,e.sin=Math.sin,e.sqrt=Math.sqrt,e.pi=Math.PI}(PS.Math=PS.Math||{}),function(e){"use strict";var n=PS.Math;e.pi=n.pi,e.sqrt=n.sqrt,e.sin=n.sin,e.round=n.round,e.min$_$_$=n.min$_$_$,e.max$_$_$=n.max$_$_$,e.floor=n.floor,e.cos=n.cos,e.atan2$_$_$=n.atan2$_$_$,e.abs=n.abs}(PS.Math=PS.Math||{}),function(e){"use strict";var n=PS.Extensions,t=PS.Prelude,r=PS["Data.Traversable"],o=(PS["Control.Monad.Eff"],PS["Data.Array"]),a=PS.Math,i=function(e){if(e>0)return 1;if(0>e)return-1;if(t.otherwise)return 0;throw new Error("Failed pattern match at Extensions line 35, column 1 - line 36, column 1: "+[e.constructor.name])},u=function(e,n){var t=e%n,r=i(t)===-i(n);if(r)return t+n|0;if(!r)return t;throw new Error("Failed pattern match at Extensions line 31, column 18 - line 32, column 21: "+[r.constructor.name])},c=function(e,n){return e-a.floor(e/n)*n},l=function(e,n,o){return r.sequence(r.traversableArray)(e["__superclass_Prelude.Applicative_0"]())(t.map(t.functorArray)(n)(o))},s=function(e,n){var t=e>n;if(t)return[];if(!t)return o.range$_$_$(e,n);throw new Error("Failed pattern match at Extensions line 27, column 14 - line 30, column 1: "+[t.constructor.name])},f=function(e,n,r){return t[">>="](e)(n)(t["const"](r))};e.mapM$_$_$=l,e.modFloat$_$_$=c,e.signum=i,e.modInt$_$_$=u,e.hRange$_$_$=s,e.bindConst$_$_$=f,e.alert=n.alert,e.mapEBreak_$_$_$=n.mapEBreak_$_$_$,e.mapE_$_$_$=n.mapE_$_$_$,e.mapE$_$_$=n.mapE$_$_$,e.unsafeCoerce=n.unsafeCoerce,e.undef=n.undef,e.fail=n.fail}(PS.Extensions=PS.Extensions||{}),function(e){"use strict";e.parseJSONImpl=function(e,n,t){try{return n(JSON.parse(t))}catch(r){return e(r.toString())}},e.unsafeFromForeign=function(e){return e},e.typeOf=function(e){return typeof e},e.tagOf=function(e){return Object.prototype.toString.call(e).slice(8,-1)},e.isNull=function(e){return null===e},e.isUndefined=function(e){return void 0===e},e.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(PS["Data.Foreign"]=PS["Data.Foreign"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Control.Alt"],PS["Control.Extend"],PS["Data.Bifoldable"],PS["Data.Bifunctor"],PS["Data.Bitraversable"],PS["Data.Foldable"],PS["Data.Monoid"],PS["Data.Traversable"],function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}()),r=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),o=new n.Functor(function(e){return function(n){if(n instanceof t)return new t(n.value0);if(n instanceof r)return new r(e(n.value0));throw new Error("Failed pattern match at Data.Either line 53, column 3 - line 54, column 3: "+[e.constructor.name,n.constructor.name])}}),a=function(e){return function(n){return function(o){if(o instanceof t)return e(o.value0);if(o instanceof r)return n(o.value0);throw new Error("Failed pattern match at Data.Either line 29, column 1 - line 30, column 1: "+[e.constructor.name,n.constructor.name,o.constructor.name])}}},i=function(e,n,o){if(o instanceof t)return e(o.value0);if(o instanceof r)return n(o.value0);throw new Error("Failed pattern match at Data.Either line 29, column 1 - line 30, column 1: "+[e.constructor.name,n.constructor.name,o.constructor.name])},u=new n.Apply(function(){return o},function(e){return function(a){if(e instanceof t)return new t(e.value0);if(e instanceof r)return n["<$>"](o)(e.value0)(a);throw new Error("Failed pattern match at Data.Either line 93, column 3 - line 94, column 3: "+[e.constructor.name,a.constructor.name])}}),c=new n.Bind(function(){return u},a(function(e){return function(n){return new t(e)}})(function(e){return function(n){return n(e)}})),l=new n.Applicative(function(){return u},r.create),s=new n.Monad(function(){return l},function(){return c});e.Left=t,e.Right=r,e.either=a,e.either$_$_$=i,e.functorEither=o,e.applyEither=u,e.applicativeEither=l,e.bindEither=c,e.monadEither=s}(PS["Data.Either"]=PS["Data.Either"]||{}),function(e){"use strict";e.runFn1=function(e){return function(n){return e(n)}},e.runFn2=function(e){return function(n){return function(t){return e(n,t)}}},e.runFn4=function(e){return function(n){return function(t){return function(r){return function(o){return e(n,t,r,o)}}}}}}(PS["Data.Function"]=PS["Data.Function"]||{}),function(e){"use strict";var n=PS["Data.Function"];PS.Prelude;e.runFn4=n.runFn4,e.runFn2=n.runFn2,e.runFn1=n.runFn1}(PS["Data.Function"]=PS["Data.Function"]||{}),function(e){"use strict";e.fromNumberImpl=function(e){return function(n){return function(t){return(0|t)===t?e(t):n}}},e.toNumber=function(e){return e}}(PS["Data.Int"]=PS["Data.Int"]||{}),function(e){"use strict";e.orImpl=function(e){return function(n){return e|n}}}(PS["Data.Int.Bits"]=PS["Data.Int.Bits"]||{}),function(e){"use strict";var n=PS["Data.Int.Bits"],t=n.orImpl;e[".|."]=t}(PS["Data.Int.Bits"]=PS["Data.Int.Bits"]||{}),function(e){"use strict";var n=PS["Data.Int"],t=PS.Prelude,r=(PS["Data.Int.Bits"],PS["Data.Maybe"]),o=PS["Data.Maybe.Unsafe"],a=PS.Math,i=n.fromNumberImpl(r.Just.create)(r.Nothing.value),u=function(e){if(e>=n.toNumber(t.top(t.boundedInt)))return t.top(t.boundedInt);if(e<=n.toNumber(t.bottom(t.boundedInt)))return t.bottom(t.boundedInt);if(t.otherwise)return o.fromJust(i(e));throw new Error("Failed pattern match at Data.Int line 49, column 1 - line 56, column 1: "+[e.constructor.name])},c=function(e){return u(a.round(e))},l=function(e){return u(a.floor(e))};e.round=c,e.floor=l,e.fromNumber=i,e.toNumber=n.toNumber}(PS["Data.Int"]=PS["Data.Int"]||{}),function(e){"use strict";e._indexOf=function(e){return function(n){return function(t){return function(r){var o=r.indexOf(t);return-1===o?n:e(o)}}}},e.length=function(e){return e.length},e.take$_$_$=function(e,n){return n.substr(0,e)},e.trim=function(e){return e.trim()},e.joinWith$_$_$=function(e,n){return n.join(e)}}(PS["Data.String"]=PS["Data.String"]||{}),function(e){"use strict";var n=PS["Data.String"],t=(PS.Prelude,PS["Data.Char"],PS["Data.Maybe"]),r=(PS["Data.Monoid"],PS["Data.String.Unsafe"],function(e){return 0===n.length(e)}),o=n._indexOf(t.Just.create)(t.Nothing.value),a=function(e,n){return t.isJust(o(e)(n))};e["null"]=r,e.indexOf=o,e.contains$_$_$=a,e.joinWith$_$_$=n.joinWith$_$_$,e.trim=n.trim,e.take$_$_$=n.take$_$_$,e.length=n.length}(PS["Data.String"]=PS["Data.String"]||{}),function(e){"use strict";var n=PS["Data.Foreign"],t=PS.Prelude,r=PS["Data.Either"],o=PS["Data.Maybe"],a=(PS["Data.Function"],PS["Data.Int"]),a=PS["Data.Int"],i=(PS["Data.String"],function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}()),u=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),c=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),l=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),s=function(e){return function(o){return n.tagOf(o)===e?t.pure(r.applicativeEither)(n.unsafeFromForeign(o)):new r.Left(new i(e,n.tagOf(o)))}},f=new t.Show(function(e){if(e instanceof i)return"Type mismatch: expected "+(e.value0+(", found "+e.value1));if(e instanceof u)return"Error at array index "+(t.show(t.showInt)(e.value0)+(": "+t.show(f)(e.value1)));if(e instanceof c)return"Error at property "+(t.show(t.showString)(e.value0)+(": "+t.show(f)(e.value1)));if(e instanceof l)return"JSON error: "+e.value0;throw new Error("Failed pattern match at Data.Foreign line 54, column 3 - line 55, column 3: "+[e.constructor.name])}),d=s("String"),v=s("Number"),m=function(e){var u=r.Left.create(new i("Int",n.tagOf(e))),c=function(e){return o.maybe$_$_$(u,t.pure(r.applicativeEither),a.fromNumber(e))};return r.either$_$_$(t["const"](u),c,v(e))},h=s("Boolean"),p=function(e){return n.isArray(e)?t.pure(r.applicativeEither)(n.unsafeFromForeign(e)):new r.Left(new i("array",n.tagOf(e)))},g=function(e){return n.parseJSONImpl(function(e){return r.Left.create(l.create(e))},r.Right.create,e)};e.TypeMismatch=i,e.ErrorAtIndex=u,e.ErrorAtProperty=c,e.JSONError=l,e.readArray=p,e.readInt=m,e.readNumber=v,e.readBoolean=h,e.readString=d,e.unsafeReadTagged=s,e.parseJSON=g,e.showForeignError=f,e.isUndefined=n.isUndefined,e.isNull=n.isNull,e.tagOf=n.tagOf,e.typeOf=n.typeOf}(PS["Data.Foreign"]=PS["Data.Foreign"]||{}),function(e){"use strict";e.unsafeReadPropImpl=function(e,n,t,r){return null==r?e:n(r[t])},e.unsafeHasOwnProperty=function(e,n){return Object.prototype.hasOwnProperty.call(n,e)},e.unsafeHasProperty=function(e,n){return e in n}}(PS["Data.Foreign.Index"]=PS["Data.Foreign.Index"]||{}),function(e){"use strict";var n=PS["Data.Foreign.Index"],t=PS.Prelude,r=PS["Data.Either"],o=PS["Data.Foreign"],a=(PS["Data.Function"],PS["Data.Int"],
function(e,n,t,r){this.errorAt=e,this.hasOwnProperty=n,this.hasProperty=t,this.ix=r}),i=function(e){return function(a){return n.unsafeReadPropImpl(new r.Left(new o.TypeMismatch("object",o.typeOf(a))),t.pure(r.applicativeEither),e,a)}},u=i,c=function(e){return e.ix},l=function(e){return c(e)},s=function(e){return function(t){return o.isNull(t)?!1:o.isUndefined(t)?!1:"object"===o.typeOf(t)||"function"===o.typeOf(t)?n.unsafeHasProperty(e,t):!1}},f=function(e){return e.hasProperty},d=function(e){return function(t){return o.isNull(t)?!1:o.isUndefined(t)?!1:"object"===o.typeOf(t)||"function"===o.typeOf(t)?n.unsafeHasOwnProperty(e,t):!1}},v=new a(o.ErrorAtProperty.create,d,s,t.flip(u)),m=function(e){return e.hasOwnProperty},h=function(e){return e.errorAt};e.Index=a,e.errorAt=h,e.hasOwnProperty=m,e.hasProperty=f,e["!"]=l,e.ix=c,e.prop=u,e.indexString=v}(PS["Data.Foreign.Index"]=PS["Data.Foreign.Index"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Foreign"],o=PS["Data.Either"],a=function(e){return e},i=function(e){return e},u=function(e){return function(i){return r.isNull(i)||r.isUndefined(i)?n.pure(o.applicativeEither)(t.Nothing.value):n["<$>"](o.functorEither)(function(e){return a(t.Just.create(e))})(e(i))}};e.NullOrUndefined=a,e.readNullOrUndefined=u,e.runNullOrUndefined=i}(PS["Data.Foreign.NullOrUndefined"]=PS["Data.Foreign.NullOrUndefined"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Array"],r=PS["Data.Either"],o=PS["Data.Foreign"],a=PS["Data.Foreign.Index"],i=(PS["Data.Foreign.Null"],PS["Data.Foreign.NullOrUndefined"]),u=(PS["Data.Foreign.Undefined"],PS["Data.Int"],PS["Data.Traversable"]),c=function(e){this.read=e},l=new c(o.readString),s=function(e){return e.read},f=function(e,t){return n[">>="](r.bindEither)(o.parseJSON(t))(s(e))},d=function(e){return function(n){return function(t){return r.either$_$_$(function(e){return r.Left.create(n(e))},r.Right.create,s(e)(t))}}},v=function(e,n,t){return r.either$_$_$(function(e){return r.Left.create(n(e))},r.Right.create,s(e)(t))},m=function(e,t,o,i){return n[">>="](r.bindEither)(a["!"](t)(i)(o))(d(e)(a.errorAt(t)(o)))},h=new c(o.readNumber),p=function(e){return new c(i.readNullOrUndefined(s(e)))},g=new c(o.readInt),w=new c(function(e){return n["return"](r.applicativeEither)(e)}),_=new c(o.readBoolean),$=function(e){return new c(function(a){var i=function(n){return function(t){return v(e,o.ErrorAtIndex.create(n),t)}},c=function(e){return u.sequence(u.traversableArray)(r.applicativeEither)(t.zipWith$_$_$(i,t.range$_$_$(0,t.length(e)),e))};return n[">>="](r.bindEither)(o.readArray(a))(c)})};e.IsForeign=c,e.readProp$_$_$=m,e.readWith=d,e.readWith$_$_$=v,e.readJSON$_$_$=f,e.read=s,e.foreignIsForeign=w,e.stringIsForeign=l,e.booleanIsForeign=_,e.numberIsForeign=h,e.intIsForeign=g,e.arrayIsForeign=$,e.nullOrUndefinedIsForeign=p}(PS["Data.Foreign.Class"]=PS["Data.Foreign.Class"]||{}),function(e){"use strict";e.readInt$_$_$=function(e,n){return parseInt(n,e)}}(PS.Global=PS.Global||{}),function(e){"use strict";var n=PS.Global;e.readInt$_$_$=n.readInt$_$_$}(PS.Global=PS.Global||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS.Extensions,o=PS["Data.Foreign"],a=PS["Data.Foreign.Class"],i=PS["Data.Either"],u=(PS["Data.Int.Bits"],PS["Data.Int"]),c=(PS["Data.Maybe.Unsafe"],PS.Math,PS.Global),l=PS["Data.Foreign.Index"],s=function(){function e(e,n,t,r){this.value0=e,this.value1=n,this.value2=t,this.value3=r}return e.create=function(n){return function(t){return function(r){return function(o){return new e(n,t,r,o)}}}},e}(),f=function(){function e(e,n,t,r){this.value0=e,this.value1=n,this.value2=t,this.value3=r}return e.create=function(n){return function(t){return function(r){return function(o){return new e(n,t,r,o)}}}},e}(),d=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),v=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),m=new n.Show(function(e){return"Color4I "+(n.show(n.showInt)(e.value0)+(" "+(n.show(n.showInt)(e.value1)+(" "+(n.show(n.showInt)(e.value2)+(" "+n.show(n.showNumber)(e.value3)))))))}),h=function(e){var r=i.Left.create(new o.TypeMismatch("Color3I",o.tagOf(e))),a=function(e){var o=c.readInt$_$_$(16,e),a=u.fromNumber(o);if(a instanceof t.Nothing)return r;if(a instanceof t.Just){var l=new d(a.value0>>16&255,a.value0>>8&255,255&a.value0);return n["return"](i.applicativeEither)(l)}throw new Error("Failed pattern match at ConeCanvas.Color line 53, column 8 - line 57, column 3: "+[a.constructor.name])};return i.either$_$_$(n["const"](r),a,o.readString(e))},p=function(e){return[e.value0,e.value1,e.value2,e.value3]},g=function(e){if(4===e.length){var n=u.toNumber(e[3])/255;return new s(e[0],e[1],e[2],n)}return r.fail("ConeModel>>color4IfromArray: Wrong array size")},w=function(e){return"rgba("+(n.show(n.showInt)(e.value0)+(", "+(n.show(n.showInt)(e.value1)+(", "+(n.show(n.showInt)(e.value2)+(", "+(n.show(n.showNumber)(e.value3)+")")))))))},_=function(e){var n=function(e){return function(e){return e/255}(u.toNumber(e))};return new f(n(e.value0),n(e.value1),n(e.value2),e.value3)},$=function(e){return 3===e.length?new v(e[0],e[1],e[2]):r.fail("ConeModel>>color3fromArray: Wrong array size")},C=new a.IsForeign(h),S=function(e){i.Left.create(new o.TypeMismatch("Color4I",o.tagOf(e)));return n.bind(i.bindEither)(a.readProp$_$_$(C,l.indexString,"rgb",e))(function(t){return n.bind(i.bindEither)(a.readProp$_$_$(a.numberIsForeign,l.indexString,"ambiance",e))(function(e){return n["return"](i.applicativeEither)(new s(t.value0,t.value1,t.value2,e))})})},y=new a.IsForeign(S),P=new a.IsForeign(function(e){return n["<$>"](i.functorEither)(_)(S(e))});e.Color4=f,e.Color4I=s,e.Color3=v,e.Color3I=d,e.color4IToColor4=_,e.color4toArray=p,e.color4IasFillStyle=w,e.readColor4I=S,e.color4IfromArray=g,e.color3fromArray=$,e.readColor3I=h,e.color3IIsForeign=C,e.showColor4I=m,e.color4IIsForeign=y,e.color4IsForeign=P}(PS["ConeCanvas.Color"]=PS["ConeCanvas.Color"]||{}),function(e){"use strict";e.newSTRef=function(e){return function(){return{value:e}}},e.readSTRef=function(e){return function(){return e.value}},e.modifySTRef$_$_$=function(e,n){return function(){return e.value=n(e.value)}},e.writeSTRef$_$_$=function(e,n){return function(){return e.value=n}}}(PS["Control.Monad.ST"]=PS["Control.Monad.ST"]||{}),function(e){"use strict";var n=PS["Control.Monad.ST"];PS.Prelude,PS["Control.Monad.Eff"];e.writeSTRef$_$_$=n.writeSTRef$_$_$,e.modifySTRef$_$_$=n.modifySTRef$_$_$,e.readSTRef=n.readSTRef,e.newSTRef=n.newSTRef}(PS["Control.Monad.ST"]=PS["Control.Monad.ST"]||{}),function(e){"use strict";e.error=function(e){return new Error(e)},e.throwException=function(e){return function(){throw e}}}(PS["Control.Monad.Eff.Exception"]=PS["Control.Monad.Eff.Exception"]||{}),function(e){"use strict";var n=PS["Control.Monad.Eff.Exception"];PS.Prelude,PS["Data.Maybe"],PS["Control.Monad.Eff"];e.throwException=n.throwException,e.error=n.error}(PS["Control.Monad.Eff.Exception"]=PS["Control.Monad.Eff.Exception"]||{}),function(e){"use strict";e.random=Math.random}(PS["Control.Monad.Eff.Random"]=PS["Control.Monad.Eff.Random"]||{}),function(e){"use strict";var n=PS["Control.Monad.Eff.Random"],t=(PS.Prelude,PS["Control.Monad.Eff"],PS["Data.Int"]),r=function(e,r){return function(){var o=n.random(),a=(t.toNumber(r)-t.toNumber(e)+1)*o+t.toNumber(e);return t.floor(a)}};e.randomInt$_$_$=r}(PS["Control.Monad.Eff.Random"]=PS["Control.Monad.Eff.Random"]||{}),function(e){"use strict";e.nowImpl=function(e){return function(){return e(new Date)}},e.jsDateMethod=function(e,n){return n[e]()}}(PS["Data.Date"]=PS["Data.Date"]||{}),function(e){"use strict";var n=PS["Data.Date"],t=(PS.Prelude,PS["Control.Monad.Eff"],PS["Data.Enum"],PS["Data.Function"],PS["Data.Maybe"],PS["Data.Time"],PS.Global,function(e){return e}),r=function(e){return n.jsDateMethod("getTime",e)},o=n.nowImpl(t);e.now=o,e.toEpochMilliseconds=r}(PS["Data.Date"]=PS["Data.Date"]||{}),function(e){"use strict";e.unsafeIndex$_$_$=function(e,n){return e[n]}}(PS["Data.Array.Unsafe"]=PS["Data.Array.Unsafe"]||{}),function(e){"use strict";var n=PS["Data.Array.Unsafe"],t=(PS.Prelude,PS["Data.Array"]),r=function(e){return t.slice$_$_$(1,t.length(e),e)},o=function(e){return n.unsafeIndex$_$_$(e,0)};e.tail=r,e.head=o}(PS["Data.Array.Unsafe"]=PS["Data.Array.Unsafe"]||{}),function(e){"use strict";e.runSTArray=function(e){return e},e.emptySTArray=function(){return[]},e.pushAllSTArray$_$_$=function(e,n){return function(){return e.push.apply(e,n)}}}(PS["Data.Array.ST"]=PS["Data.Array.ST"]||{}),function(e){"use strict";var n=PS["Data.Array.ST"],t=(PS.Prelude,PS["Control.Monad.Eff"],PS["Control.Monad.ST"],PS["Data.Maybe"],function(e,t){return n.pushAllSTArray$_$_$(e,[t])});e.pushSTArray$_$_$=t,e.emptySTArray=n.emptySTArray,e.runSTArray=n.runSTArray}(PS["Data.Array.ST"]=PS["Data.Array.ST"]||{}),function(e){"use strict";var n=(PS.Prelude,PS["Data.Maybe"]),t=(PS["Data.Tuple"],PS["Data.Array.ST"]),r=(PS["Data.Traversable"],PS["Control.Monad.Eff"]),o=PS["Control.Monad.ST"],a=function(e){this.unfoldr=e},i=function(e){return e.unfoldr},u=new a(function(e){return function(a){return r.runPure(t.runSTArray(function(){var r=t.emptySTArray(),i=o.newSTRef(a)();return function(){for(;!function(){var a=o.readSTRef(i)(),u=e(a);if(u instanceof n.Nothing)return!0;if(u instanceof n.Just)return t.pushSTArray$_$_$(r,u.value0.value0)(),o.writeSTRef$_$_$(i,u.value0.value1)(),!1;throw new Error("Failed pattern match at Data.Unfoldable line 35, column 7 - line 41, column 5: "+[u.constructor.name])}(););return{}}(),r}))}});e.Unfoldable=a,e.unfoldr=i,e.unfoldableArray=u}(PS["Data.Unfoldable"]=PS["Data.Unfoldable"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Control.Alt"],PS["Control.Alternative"],PS["Control.Lazy"],PS["Control.MonadPlus"],PS["Control.Plus"],PS["Data.Foldable"]),r=PS["Data.Maybe"],o=PS["Data.Monoid"],a=PS["Data.Traversable"],i=PS["Data.Tuple"],u=PS["Data.Unfoldable"],c=function(){function e(){}return e.value=new e,e}(),l=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),s=l.create,f=function(e){if(e instanceof c)return r.Nothing.value;if(e instanceof l)return new r.Just({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List line 273, column 1 - line 274, column 1: "+[e.constructor.name])},d=function(e){return u.unfoldr(e)(function(e){return n["<$>"](r.functorMaybe)(function(e){return new i.Tuple(e.head,e.tail)})(f(e))})},v=function(e){if(e instanceof c)return r.Nothing.value;if(e instanceof l)return new r.Just(e.value1);throw new Error("Failed pattern match at Data.List line 254, column 1 - line 255, column 1: "+[e.constructor.name])},m=function(e){return new l(e,c.value)},h=function(e){return new n.Show(function(t){if(t instanceof c)return"Nil";if(t instanceof l)return"Cons ("+(n.show(e)(t.value0)+(") ("+(n.show(h(e))(t.value1)+")")));throw new Error("Failed pattern match at Data.List line 727, column 3 - line 728, column 3: "+[t.constructor.name])})},p=new n.Semigroup(function(e){return function(t){if(e instanceof c)return t;if(e instanceof l)return new l(e.value0,n["<>"](p)(e.value1)(t));throw new Error("Failed pattern match at Data.List line 751, column 3 - line 752, column 3: "+[e.constructor.name,t.constructor.name])}}),g=function(){var e=function(e){return function(n){for(var t=e,r=n;;){if(r instanceof c)return t;{if(!(r instanceof l))throw new Error("Failed pattern match at Data.List line 371, column 1 - line 379, column 1: "+[t.constructor.name,r.constructor.name]);var o=new l(r.value0,t),a=r.value1;t=o,r=a}}}};return e(c.value)}(),w=function(){var e=function(e){return function(n){return function(t){for(var r=e,o=n,a=t;;){if(0===o)return g(r);if(a instanceof c)return g(r);{if(!(a instanceof l))throw new Error("Failed pattern match at Data.List line 493, column 1 - line 502, column 1: "+[r.constructor.name,o.constructor.name,a.constructor.name]);var i=new l(a.value0,r),u=o-1,s=a.value1;r=i,o=u,a=s}}}}};return e(c.value)}(),_=function(e,t){var r=function(e){return function(r){for(var o=e,a=r;;){if(0>=o)return a;{if(!n.otherwise)throw new Error("Failed pattern match at Data.List line 151, column 1 - line 157, column 1: "+[o.constructor.name,a.constructor.name]);var i=o-1,u=new l(t,a);o=i,a=u}}}};return r(e)(c.value)},$=function(e){return e instanceof c?!0:!1},C=function(e){for(var n=e;;){if(n instanceof l&&n.value1 instanceof c)return new r.Just(n.value0);{if(!(n instanceof l))return r.Nothing.value;var t=n.value1;n=t}}},S=function(e){return function(n){for(var t=e,o=n;;){if(t instanceof c)return r.Nothing.value;if(t instanceof l&&0===o)return new r.Just(t.value0);{if(!(t instanceof l))throw new Error("Failed pattern match at Data.List line 284, column 1 - line 285, column 1: "+[t.constructor.name,o.constructor.name]);var a=t.value1,i=o-1;t=a,o=i}}}},y=S,P=function(e){if(e instanceof c)return r.Nothing.value;if(e instanceof l)return new r.Just(e.value0);throw new Error("Failed pattern match at Data.List line 239, column 1 - line 240, column 1: "+[e.constructor.name])},T=new n.Functor(function(e){return function(n){var t=function(n){return function(t){for(var r=n,o=t;;){if(r instanceof c)return o;{if(!(r instanceof l))throw new Error("Failed pattern match at Data.List line 758, column 3 - line 764, column 1: "+[r.constructor.name,o.constructor.name]);var a=r.value1,i=new l(e(r.value0),o);r=a,o=i}}}};return g(t(n)(c.value))}}),b=function(e){return d(e)},E=function(e){return t.foldr(e)(l.create)(c.value)},x=function(e){return E(e)},F=new t.Foldable(function(e){return function(r){return t.foldl(F)(function(t){return function(o){return n.append(e["__superclass_Prelude.Semigroup_0"]())(t)(r(o))}})(o.mempty(e))}},function(){var e=function(e){return function(n){return function(t){for(var r=e,o=n,a=t;;){if(a instanceof c)return o;{if(!(a instanceof l))throw new Error("Failed pattern match at Data.List line 767, column 3 - line 771, column 3: "+[r.constructor.name,o.constructor.name,a.constructor.name]);var i=r,u=r(o)(a.value0),s=a.value1;r=i,o=u,a=s}}}}};return e}(),function(e){return function(n){return function(r){if(r instanceof c)return n;if(r instanceof l)return e(r.value0)(t.foldr(F)(e)(n)(r.value1));throw new Error("Failed pattern match at Data.List line 765, column 3 - line 766, column 3: "+[e.constructor.name,n.constructor.name,r.constructor.name])}}}),A=t.foldl(F)(function(e){return function(n){return e+1|0}})(0),N=new a.Traversable(function(){return F},function(){return T},function(e){return function(t){if(t instanceof c)return n.pure(e)(c.value);if(t instanceof l)return n["<*>"](e["__superclass_Prelude.Apply_0"]())(n["<$>"](e["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(l.create)(t.value0))(a.sequence(N)(e)(t.value1));throw new Error("Failed pattern match at Data.List line 784, column 3 - line 785, column 3: "+[t.constructor.name])}},function(e){return function(t){return function(r){if(r instanceof c)return n.pure(e)(c.value);if(r instanceof l)return n["<*>"](e["__superclass_Prelude.Apply_0"]())(n["<$>"](e["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(l.create)(t(r.value0)))(a.traverse(N)(e)(t)(r.value1));throw new Error("Failed pattern match at Data.List line 782, column 3 - line 783, column 3: "+[t.constructor.name,r.constructor.name])}}}),D=function(e){return new n.Eq(function(t){return function(r){var o=function(t){return function(r){return function(o){for(var a=t,i=r,u=o;;){if(!u)return!1;if(a instanceof c&&i instanceof c)return u;{if(!(a instanceof l&&i instanceof l))return!1;var s=a.value1,f=i.value1,d=u&&n["=="](e)(i.value0)(a.value0);a=s,i=f,u=d}}}}};return o(t)(r)(!0)}})},M=function(e,n){for(var t=e,r=n;;){if(0===t)return r;if(r instanceof c)return c.value;{if(!(r instanceof l))throw new Error("Failed pattern match at Data.List line 512, column 1 - line 513, column 1: "+[t.constructor.name,r.constructor.name]);var o=t-1,a=r.value1;t=o,r=a}}},L=function(e){return function(t){if(t instanceof c)return c.value;if(t instanceof l)return n["<>"](p)(e(t.value0))(O(e,t.value1));throw new Error("Failed pattern match at Data.List line 387, column 1 - line 388, column 1: "+[e.constructor.name,t.constructor.name])}},O=function(e,t){if(t instanceof c)return c.value;if(t instanceof l)return n["<>"](p)(e(t.value0))(O(e,t.value1));throw new Error("Failed pattern match at Data.List line 387, column 1 - line 388, column 1: "+[e.constructor.name,t.constructor.name])},I=new n.Apply(function(){return T},function(e){return function(t){if(e instanceof c)return c.value;if(e instanceof l)return n["<>"](p)(n["<$>"](T)(e.value0)(t))(n["<*>"](I)(e.value1)(t));throw new Error("Failed pattern match at Data.List line 788, column 3 - line 789, column 3: "+[e.constructor.name,t.constructor.name])}}),R=new n.Bind(function(){return I},n.flip(L)),k=function(e){return n[">>="](R)(e)(n.id(n.categoryFn))},U=new n.Applicative(function(){return I},function(e){return new l(e,c.value)});e.Nil=c,e.Cons=l,e.fromList=b,e.toList=x,e.drop$_$_$=M,e.take=w,e.concatMap=L,e.concatMap$_$_$=O,e.concat=k,e.reverse=g,e.index=S,e["!!"]=y,e.uncons=f,e.tail=v,e.last=C,e.head=P,e[":"]=s,e.length=A,e["null"]=$,e.replicate$_$_$=_,e.singleton=m,e.fromFoldable=E,e.toUnfoldable=d,e.showList=h,e.eqList=D,e.semigroupList=p,e.functorList=T,e.foldableList=F,e.traversableList=N,e.applyList=I,e.applicativeList=U,e.bindList=R}(PS["Data.List"]=PS["Data.List"]||{}),function(e){"use strict";var n="undefined"==typeof module?void 0:module.require,t=void 0===n?void 0:n("util");e.traceAny=function(e){return function(n){return void 0!==t?console.log(t.inspect(e,{depth:null,colors:!0})):console.log(e),n({})}},e.traceAny$_$_$=function(e,n){return void 0!==t?console.log(t.inspect(e,{depth:null,colors:!0})):console.log(e),n({})}}(PS["Debug.Trace"]=PS["Debug.Trace"]||{}),function(e){"use strict";var n=PS["Debug.Trace"],t=PS.Prelude,r=function(e){return function(r){return n.traceAny$_$_$(r,function(n){return t.pure(e)(t.unit)})}},o=function(e){return r(e)},a=n.traceAny;e.traceA=o,e.traceAnyA=r,e.trace=a,e.traceAny$_$_$=n.traceAny$_$_$}(PS["Debug.Trace"]=PS["Debug.Trace"]||{}),function(e){"use strict";e.getCanvasElementByIdImpl=function(e,n,t){return function(){var r=document.getElementById(e);return r&&r instanceof HTMLCanvasElement?n(r):t}},e.getContext2D=function(e){return function(){return e.getContext("2d")}},e.getCanvasWidth=function(e){return function(){return e.width}},e.getCanvasHeight=function(e){return function(){return e.height}},e.setFillStyle$_$_$=function(e,n){return function(){return n.fillStyle=e,n}},e.clearRect=function(e){return function(n){return function(){return e.clearRect(n.x,n.y,n.w,n.h),e}}},e.clearRect$_$_$=function(e,n){return function(){return e.clearRect(n.x,n.y,n.w,n.h),e}},e.setTextAlignImpl$_$_$=function(e,n){return function(){return e.textAlign=n,e}},e.font=function(e){return function(){return e.font}},e.setFont$_$_$=function(e,n){return function(){return n.font=e,n}},e.drawImage=function(e){return function(n){return function(t){return function(r){return function(){return e.drawImage(n,t,r),e}}}}},e.drawImageScale$_$_$=function(e,n,t,r,o,a){return function(){return e.drawImage(n,t,r,o,a),e}}}(PS["Graphics.Canvas"]=PS["Graphics.Canvas"]||{}),function(e){"use strict";var n=PS["Graphics.Canvas"],t=PS.Prelude,r=(PS["Data.ArrayBuffer.Types"],PS["Data.Function"],PS["Data.Maybe"]),o=(PS["Control.Monad.Eff"],PS["Control.Monad.Eff.Exception.Unsafe"],function(){function e(){}return e.value=new e,e}()),a=function(){function e(){}return e.value=new e,e}(),i=function(){function e(){}return e.value=new e,e}(),u=function(){function e(){}return e.value=new e,e}(),c=function(){function e(){}return e.value=new e,e}(),l=new t.Show(function(e){if(e instanceof o)return"left";if(e instanceof a)return"right";if(e instanceof i)return"center";if(e instanceof u)return"start";if(e instanceof c)return"end";throw new Error("Failed pattern match at Graphics.Canvas line 383, column 3 - line 384, column 3: "+[e.constructor.name])}),s=function(e,r){return n.setTextAlignImpl$_$_$(e,t.show(l)(r))},f=function(e){return n.getCanvasElementByIdImpl(e,r.Just.create,r.Nothing.value)};e.AlignLeft=o,e.AlignRight=a,e.AlignCenter=i,e.AlignStart=u,e.AlignEnd=c,e.setTextAlign$_$_$=s,e.getCanvasElementById=f,e.showTextAlign=l,e.drawImageScale$_$_$=n.drawImageScale$_$_$,e.setFont$_$_$=n.setFont$_$_$,e.clearRect$_$_$=n.clearRect$_$_$,e.setFillStyle$_$_$=n.setFillStyle$_$_$,e.getCanvasHeight=n.getCanvasHeight,e.getCanvasWidth=n.getCanvasWidth,e.getContext2D=n.getContext2D}(PS["Graphics.Canvas"]=PS["Graphics.Canvas"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Either"],o=(PS["Data.ArrayBuffer.Types"],PS["Control.Monad.Eff"]),a=(PS["Control.Monad.Eff.Exception"],PS["Control.Monad.Eff.Random"],PS["Control.Monad.ST"],PS["Data.Date"],PS["Data.List"]),i=(PS["Data.Foreign"],PS["Data.Foreign.Class"]),u=PS["Data.Foreign.NullOrUndefined"],c=(PS.DOM,PS["ConeCanvas.Color"],PS["Graphics.Canvas"],PS["Data.Foreign.Index"]),l=PS["Data.Foldable"],s=function(){function e(){}return e.value=new e,e}(),f=function(){function e(){}return e.value=new e,e}(),d=function(){function e(){}return e.value=new e,e}(),v=function(){function e(){}return e.value=new e,e}(),m=function(){function e(){}return e.value=new e,e}(),h=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),p=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),g=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),w=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),_=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),$=function(){function e(){}return e.value=new e,e}(),C=function(){function e(){}return e.value=new e,e}(),S=function(){function e(){}return e.value=new e,e}(),y=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),P=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),T=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),b=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),E=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),x=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),F=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),A=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),N=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),D=function(){function e(){}return e.value=new e,e}(),M=function(){function e(){}return e.value=new e,e}(),L=function(){function e(){}return e.value=new e,e}(),O=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),I=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),R=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),k=function(){function e(){}return e.value=new e,e}(),U=function(){function e(){}return e.value=new e,e}(),G=function(e,n,t,r,o,a,i,u,c,l,s,f,d,v,m,h,p){this["__superclass_Data.Foreign.Class.IsForeign_2"]=e,this["__superclass_Prelude.Eq_0"]=n,this["__superclass_Prelude.Show_1"]=t,this.actions=r,this.color=o,this.comment=a,this.entryId=i,this.hidden=u,this.iconName=c,this.isLeaf=l,this.label=s,this.makeHiddenLeaf=f,this.makeHiddenNode=d,this.parentActions=v,this.primaryLink=m,this.stlName=h,this.targetUri=p},B=function(e){return e.targetUri},J=function(e){return e.stlName},z=function(e,n){return n},H=function(e,n){return n.value0},W=function(e){return e.primaryLink},j=function(e){return e.parentActions},q=function(e){return e.makeHiddenNode},V=function(e){return e.makeHiddenLeaf},Z=function(e){return e.label},X=function(e){return e.isLeaf},K=function(e,n){return X(e)(n.value0.entry)},Y=function(e,t){if(K(e,t))return n["return"](o.applicativeEff)(a.Nil.value);if(t.value0.children instanceof r.Right)return n["return"](o.applicativeEff)(t.value0.children.value0);if(t.value0.children instanceof r.Left)return t.value0.children.value0(t.value0.nodeId);throw new Error("Failed pattern match at ConeCanvas.ConeModel line 207, column 55 - line 212, column 1: "+[t.value0.children.constructor.name])},Q=function(e){return new i.IsForeign(function(s){return n.bind(r.bindEither)(i.read(e["__superclass_Data.Foreign.Class.IsForeign_2"]())(s))(function(f){return n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.intIsForeign),c.indexString,"nodeId",s)))(function(d){return n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.intIsForeign),c.indexString,"firstInd",s)))(function(v){return n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.arrayIsForeign(Q(e))),c.indexString,"children",s)))(function(e){var i=function(){if(e instanceof t.Nothing)return new r.Left(function(e){return n["return"](o.applicativeEff)(a.toList(l.foldableArray)([]))});if(e instanceof t.Just)return new r.Right(a.toList(l.foldableArray)(e.value0));throw new Error("Failed pattern match at ConeCanvas.ConeModel line 219, column 17 - line 221, column 48: "+[e.constructor.name])}();return n["return"](r.applicativeEither)(new h({entry:f,nodeId:function(){if(d instanceof t.Nothing)return 0;if(d instanceof t.Just)return d.value0;throw new Error("Failed pattern match at ConeCanvas.ConeModel line 225, column 27 - line 228, column 13: "+[d.constructor.name])}(),firstInd:function(){if(v instanceof t.Nothing)return 0;if(v instanceof t.Just)return v.value0;throw new Error("Failed pattern match at ConeCanvas.ConeModel line 228, column 27 - line 231, column 13: "+[v.constructor.name])}(),children:i}))})})})})})},ee=function(e){return e.iconName},ne=function(e){return e.hidden},te=function(e){return new n.Eq(function(t){return function(r){return n["=="](e)(t.content)(r.content)}})},re=function(e){return new n.Eq(function(t){return function(r){var o=0!==t.value0.nodeId||0!==r.value0.nodeId;if(o)return t.value0.nodeId===r.value0.nodeId;if(!o)return n["=="](e)(t.value0.entry)(r.value0.entry);throw new Error("Failed pattern match at ConeCanvas.ConeModel line 236, column 9 - line 240, column 1: "+[o.constructor.name])}})},oe=function(e){return e.entryId},ae=function(e){return e.comment},ie=function(e){return e.color},ue=function(e){return e.actions};e.TDClockwise=s,e.TDAntiClockwise=f,e.TDShortest=d,e.AnimMoveLeft=w,e.AnimMoveRight=_,e.AnimTurnToFirst=$,e.AnimMoveUp=C,e.AnimMoveDown=S,e.AnimClockwork=y,e.AnimTransformLeft=P,e.AnimTransformRight=T,e.AnimTransformUp=b,e.AnimTransformDown=E,e.AnimTransformIntro=x,e.AnimTransformExtro=F,e.AnimTransformShiftToZero=A,e.AnimTransformReplace=N,e.AnimCut=D,e.AnimCopy=M,e.AnimPaste=L,e.AnimGlobalView=O,e.AnimZoom=I,e.AnimPause=R,e.AnimNull=k,e.OSCurrent=p,e.OSParent=g,e.ConeNode=h,e.PrimaryLinkAction=U,e.OuterLabel=v,e.Browser=m,e.ConeEntry=G,e.runConeZip$_$_$=z,e.nodeGetChildren$_$_$=Y,e.nodeIsLeaf$_$_$=K,e.runConeNode$_$_$=H,e.makeHiddenNode=q,e.makeHiddenLeaf=V,e.hidden=ne,e.parentActions=j,e.actions=ue,e.isLeaf=X,e.primaryLink=W,e.color=ie,e.stlName=J,e.iconName=ee,e.comment=ae,e.targetUri=B,e.label=Z,e.entryId=oe,e.isForeignConeNode=Q,e.eqConeNode=re,e.eqConeZip=te}(PS["ConeCanvas.ConeModel"]=PS["ConeCanvas.ConeModel"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Either"],o=PS["Data.List"],a=(PS["Data.Traversable"],PS["Data.Foldable"]),i=PS["Data.Array"],u=PS["ConeCanvas.ConeModel"],c=PS.Extensions,l=PS["Control.Monad.Eff"],s=function(e,n){return u.runConeNode$_$_$(e,n.content)},f=function(e){return e.content},d=function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.content=new u.ConeNode(function(){var n={};for(var t in e.content.value0)e.content.value0.hasOwnProperty(t)&&(n[t]=e.content.value0[t]);return n.children=function(){if(e.content.value0.children instanceof r.Left)return new r.Right(o.Nil.value);if(e.content.value0.children instanceof r.Right)return new r.Right(o.Nil.value);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 502, column 40 - line 504, column 65: "+[e.content.value0.children.constructor.name])}(),n}()),n},v=function(e){var n=o.tail(e);return n instanceof t.Just?n.value0:o.Nil.value},m=function(e,n){if(n instanceof u.OSCurrent)return n.value0;if(n instanceof u.OSParent)return n.value0;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 593, column 1 - line 594, column 1: "+[n.constructor.name])},h=function(e,t){if(0>e)return e+t|0;if(e>=t)return e-t;if(n.otherwise)return e;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 675, column 1 - line 678, column 27: "+[e.constructor.name,t.constructor.name])},p=function(e){return e.value0.entry},g=function(e){return p(f(e))},w=function(e){if(e instanceof u.OSCurrent)return g(e.value0);if(e instanceof u.OSParent)return g(e.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 626, column 1 - line 627, column 1: "+[e.constructor.name])},_=function(e,n){return{content:n,before:o.Nil.value,after:o.Nil.value,parents:o.Nil.value}},$=function(e){var n=o.uncons(e);return n instanceof t.Just?new o.Cons(n.value0.head,o.Nil.value):o.Nil.value},C=function(e){var t=o["null"](e.before);if(t)return e;if(!t){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);return r.before=o.Nil.value,r.after=n["++"](o.semigroupList)(e.after)(o.reverse(e.before)),r}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 160, column 3 - line 165, column 1: "+[t.constructor.name])},S=function(e){if(e instanceof u.OSCurrent)return new u.OSCurrent(C(e.value0));if(e instanceof u.OSParent)return new u.OSParent(C(e.value0));throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 605, column 1 - line 606, column 1: "+[e.constructor.name])},y=function(e,r){var a=n["++"](o.semigroupList)(o.reverse(e.before))(n["++"](o.semigroupList)(new o.Cons(e.content,o.Nil.value))(e.after)),i=r>=0&&o.length(a)>r;if(i){var u=o.length(e.before)===r;if(u)return new t.Just(e);if(!u){var c=o["!!"](a)(r);if(c instanceof t.Nothing)return t.Nothing.value;if(c instanceof t.Just)return new t.Just(function(){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.content=c.value0,n.before=o.reverse(o.take(r)(a)),n.after=o.take(o.length(a)-(r+1|0))(o.drop$_$_$(r+1|0,a)),n}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 208, column 22 - line 213, column 104: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 206, column 15 - line 213, column 104: "+[u.constructor.name])}if(!i)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 205, column 5 - line 215, column 3: "+[i.constructor.name])},P=function(e,n){if(e instanceof u.OSCurrent){var r=y(e.value0,n);if(r instanceof t.Just)return new t.Just(new u.OSCurrent(r.value0));if(r instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 598, column 38 - line 601, column 1: "+[r.constructor.name])}return t.Nothing.value},T=function(e){return(o.length(e.before)+1|0)+o.length(e.after)|0},b=function(e){if(0===T(e))return new u.OSParent(e);if(n.otherwise)return new u.OSCurrent(e);
throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 578, column 1 - line 582, column 1: "+[e.constructor.name])},E=function(e){return e instanceof u.OSCurrent?T(e.value0):0},x=function(e){var n=o.uncons(e.after);return n instanceof t.Just?t.Just.create(function(){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.content=n.value0.head,t.before=o[":"](e.content)(e.before),t.after=n.value0.tail,t}()):t.Nothing.value},F=function(e){if(T(e)<=2)return t.Nothing.value;var r=o.reverse(e.before),a=n["++"](o.semigroupList)(e.after)($(r)),i=o.uncons(a);return i instanceof t.Just?t.Just.create(function(){var t=o["null"](e.before);if(t){var u={};for(var c in e)e.hasOwnProperty(c)&&(u[c]=e[c]);return u.before=o.Nil.value,u.after=n["++"](o.semigroupList)(i.value0.tail)($(a)),u}if(!t){var l={};for(var s in e)e.hasOwnProperty(s)&&(l[s]=e[s]);return l.before=o[":"](i.value0.head)(o.reverse(v(r))),l.after=i.value0.tail,l}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 454, column 44 - line 458, column 53: "+[t.constructor.name])}()):t.Nothing.value},A=function(e){return o["null"](e.parents)},N=function(e){if(A(e)||T(e)<=2)return t.Nothing.value;var r=o.reverse(e.after),a=n["++"](o.semigroupList)(e.before)($(r)),i=o.uncons(a);return i instanceof t.Just?new t.Just(function(){var t=o["null"](e.after);if(t){var u={};for(var c in e)e.hasOwnProperty(c)&&(u[c]=e[c]);return u.before=n["++"](o.semigroupList)(i.value0.tail)($(a)),u.after=o.Nil.value,u}if(!t){var l={};for(var s in e)e.hasOwnProperty(s)&&(l[s]=e[s]);return l.before=i.value0.tail,l.after=o[":"](i.value0.head)(o.reverse(v(r))),l}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 439, column 42 - line 443, column 90: "+[t.constructor.name])}()):t.Nothing.value},D=function(e,n){return u.nodeIsLeaf$_$_$(e,n.content)},M=function(e,n,r){return D(e,r)?t.Nothing.value:t.Just.create({content:n,before:o.Nil.value,after:o.Nil.value,parents:o[":"]({left:r.before,center:p(r.content),centerNodeId:u.runConeNode$_$_$(e,r.content).nodeId,right:r.after})(r.parents)})},L=function(e,n){return A(n)?t.Nothing.value:n.before instanceof o.Nil?t.Just.create(function(){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.content=e,t.before=o.reverse(o[":"](n.content)(n.after)),t.after=o.Nil.value,t}()):t.Just.create(function(){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.content=e,t.before=n.before,t.after=o[":"](n.content)(n.after),t}())},O=function(e,n){return A(n)?t.Nothing.value:t.Just.create(function(){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.content=e,t.before=o[":"](n.content)(n.before),t.after=n.after,t}())},I=function(e){return o.length(e.before)},R=function(e){var a=o.uncons(e.parents);if(a instanceof t.Just){var i=n["++"](o.semigroupList)(o.reverse(e.before))(n["++"](o.semigroupList)(new o.Cons(e.content,o.Nil.value))(e.after));return t.Just.create({content:new u.ConeNode({entry:a.value0.head.center,nodeId:a.value0.head.centerNodeId,firstInd:I(e),children:new r.Right(i)}),before:a.value0.head.left,after:a.value0.head.right,parents:a.value0.tail})}return t.Nothing.value},k=function(e){return t.maybe$_$_$(e,k,R(e))},U=function(e,t){var i=function(t){return function(t){return 1+function(){if(t.value0.children instanceof r.Left)return 0;if(t.value0.children instanceof r.Right)return a.sum$_$_$(o.foldableList,n.semiringInt)(n["<$>"](o.functorList)(i(e))(t.value0.children.value0));throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 100, column 9 - line 105, column 1: "+[t.value0.children.constructor.name])}()|0}},c=k(t);return i(e)(u.runConeZip$_$_$(e,c).content)},G=function(e){if(e instanceof u.OSCurrent){var n=R(e.value0);if(n instanceof t.Just)return new t.Just(new u.OSCurrent(n.value0));if(n instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 611, column 28 - line 614, column 1: "+[n.constructor.name])}if(e instanceof u.OSParent)return new t.Just(new u.OSCurrent(e.value0));throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 611, column 1 - line 614, column 1: "+[e.constructor.name])},B=function(e){return e instanceof u.OSCurrent?I(e.value0):0},J=function(e){var r=function(e){var a=o.length(e.before);return t.maybe$_$_$(new o.Cons(a,o.Nil.value),function(e){return n["++"](o.semigroupList)(r(e))(o.singleton(a))},R(e))},a=o.tail(r(e));if(a instanceof t.Just)return a.value0;if(a instanceof t.Nothing)return o.Nil.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 524, column 29 - line 527, column 3: "+[a.constructor.name])},z=function(e){if(e instanceof u.OSCurrent)return J(e.value0);if(e instanceof u.OSParent)return J(e.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 670, column 1 - line 671, column 1: "+[e.constructor.name])},H=function(e){return e.content.value0.firstInd},W=function(e){var r=n["++"](o.semigroupList)(o.reverse(e.before))(n["++"](o.semigroupList)(new o.Cons(e.content,o.Nil.value))(e.after)),a=o.uncons(r);if(a instanceof t.Just){var i={};for(var u in e)e.hasOwnProperty(u)&&(i[u]=e[u]);return i.content=a.value0.head,i.before=o.Nil.value,i.after=a.value0.tail,i}return e},j=function(e){return t.fromMaybe(W(e))(x(e))},q=function(e,n){var r=T(n),o=function(e){return function(n){var r=i.uncons(e);return r instanceof t.Just?i[":"](j(r.value0.head))(e):e}};return a.foldl(a.foldableArray)(o)([n])(c.hRange$_$_$(0,r-2))},V=function(e,n){var r=function(r){return function(a){if(r>=0&&o.length(a)>r){var i=o["!!"](a)(r);if(i instanceof t.Just)return t.Just.create({content:i.value0,before:o.reverse(o.take(r)(a)),after:o.take(o.length(a)-(r+1|0))(o.drop$_$_$(r+1|0,a)),parents:o[":"]({left:n.before,center:g(n),centerNodeId:u.runConeNode$_$_$(e,n.content).nodeId,right:n.after})(n.parents)});if(i instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 251, column 9 - line 262, column 7: "+[i.constructor.name])}return t.Nothing.value}};return function(){var t=u.nodeGetChildren$_$_$(e,n.content)(),o=s(e,n).firstInd;return r(o)(t)}},Z=function(e,r,a){if(a instanceof o.Nil)return n["return"](l.applicativeEff)(new t.Just(k(r)));var i=function(r){return function(a){if(r instanceof t.Nothing)return n["return"](l.applicativeEff)(t.Nothing.value);if(r instanceof t.Just){var u=o.uncons(a);if(u instanceof t.Just&&u.value0.tail instanceof o.Nil)return n["return"](l.applicativeEff)(y(r.value0,u.value0.head));if(u instanceof t.Just){var c=y(r.value0,u.value0.head);if(c instanceof t.Nothing)return n["return"](l.applicativeEff)(t.Nothing.value);if(c instanceof t.Just)return function(){var n=V(e,c.value0)();return i(n)(u.value0.tail)()};throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 548, column 17 - line 553, column 13: "+[c.constructor.name])}if(u instanceof t.Nothing)return n["return"](l.applicativeEff)(t.Nothing.value);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 544, column 9 - line 555, column 1: "+[u.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 537, column 1 - line 538, column 1: "+[r.constructor.name,a.constructor.name])}};return function(){var n=V(e,k(r))();return i(n)(a)()}},X=function(e,o,a){var u=function(o){return function(a){if(0>a)return n["return"](l.applicativeEff)(new r.Right(a));if(0===a)return n["return"](l.applicativeEff)(new r.Left(o));if(n.otherwise){var c=function(e){return function(t){if(e instanceof r.Left)return n["return"](l.applicativeEff)(new r.Left(e.value0));if(e instanceof r.Right){if(0===e.value0)return n["return"](l.applicativeEff)(new r.Left(t));if(n.otherwise)return u(t)(e.value0)}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 125, column 13 - line 126, column 13: "+[e.constructor.name,t.constructor.name])}};return function(){var n=V(e,o)(),u=function(){if(n instanceof t.Nothing)return[];if(n instanceof t.Just)return q(e,n.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 120, column 24 - line 123, column 9: "+[n.constructor.name])}();return i.foldM$_$_$(l.monadEff,c,new r.Right(a-1))(u)()}}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 106, column 1 - line 129, column 1: "+[o.constructor.name,a.constructor.name])}},c=k(o);return function(){var e=u(c)(a-1)();if(e instanceof r.Right)return t.Nothing.value;if(e instanceof r.Left)return new t.Just(e.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 110, column 7 - line 113, column 3: "+[e.constructor.name])}},K=function(e,r){return r instanceof u.OSCurrent?function(){var n=V(e,r.value0)();if(n instanceof t.Just)return new t.Just(new u.OSCurrent(n.value0));if(n instanceof t.Nothing){var o=D(e,r.value0);if(o)return t.Nothing.value;if(!o)return new t.Just(new u.OSParent(r.value0));throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 622, column 52 - line 622, column 113: "+[o.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 620, column 29 - line 623, column 1: "+[n.constructor.name])}:n["return"](l.applicativeEff)(t.Nothing.value)},Y=function(e){var r=n["++"](o.semigroupList)(o.reverse(e.before))(e.after),a=h(I(e),o.length(r)),i=!o["null"](r);if(i){var u=a>=0;if(u){var c=o["!!"](r)(a);if(c instanceof t.Nothing)return t.Nothing.value;if(c instanceof t.Just)return t.Just.create(function(){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.content=c.value0,n.before=o.reverse(o.take(a)(r)),n.after=o.take(o.length(r)-(a+1|0))(o.drop$_$_$(a+1|0,r)),n}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 378, column 22 - line 385, column 17: "+[c.constructor.name])}if(!u){var l=o["!!"](r)(o.length(r)-1);if(l instanceof t.Nothing)return t.Nothing.value;if(l instanceof t.Just)return t.Just.create(function(){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.content=l.value0,n.before=o.reverse(o.take(o.length(r)-1)(r)),n.after=o.Nil.value,n}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 385, column 22 - line 392, column 9: "+[l.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 377, column 13 - line 392, column 9: "+[u.constructor.name])}if(!i)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 375, column 5 - line 393, column 3: "+[i.constructor.name])},Q=function(e){if(e instanceof u.OSCurrent){var n=Y(e.value0);if(n instanceof t.Just)return new t.Just(new u.OSCurrent(n.value0));if(n instanceof t.Nothing){var r=R(e.value0);if(r instanceof t.Just)return new t.Just(new u.OSParent(d(r.value0)));if(r instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 663, column 21 - line 666, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 660, column 5 - line 666, column 1: "+[n.constructor.name])}if(e instanceof u.OSParent)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 659, column 1 - line 666, column 1: "+[e.constructor.name])},ee=function(e){var r=n["++"](o.semigroupList)(o.reverse(e.before))(e.after),a=I(e),i=a-1,u=!o["null"](r);if(u){var c=i>=0;if(c){var l=o["!!"](r)(i);if(l instanceof t.Nothing)return t.Nothing.value;if(l instanceof t.Just)return t.Just.create(function(){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.content=l.value0,n.before=o.reverse(o.take(i)(r)),n.after=o.take(o.length(r)-(i+1|0))(o.drop$_$_$(i+1|0,r)),n}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 350, column 22 - line 357, column 17: "+[l.constructor.name])}if(!c){var s=o["!!"](r)(o.length(r)-1);if(s instanceof t.Nothing)return t.Nothing.value;if(s instanceof t.Just)return t.Just.create(function(){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.content=s.value0,n.before=o.reverse(o.take(o.length(r)-1)(r)),n.after=o.Nil.value,n}());throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 357, column 22 - line 364, column 9: "+[s.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 349, column 13 - line 364, column 9: "+[c.constructor.name])}if(!u)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 347, column 5 - line 365, column 3: "+[u.constructor.name])},ne=function(e,r){var a=T(r)<2||u.nodeIsLeaf$_$_$(e,f(j(r)));if(a)return n["return"](l.applicativeEff)(t.Nothing.value);if(!a){var i=f(r),c=ee(r);if(c instanceof t.Nothing)return n["return"](l.applicativeEff)(t.Nothing.value);if(c instanceof t.Just){var s=j(c.value0);return function(){var n=u.nodeGetChildren$_$_$(e,f(s))(),r=o["null"](n);if(r)return M(e,i,s);if(!r){var a=V(e,s)();if(a instanceof t.Nothing)return t.Nothing.value;if(a instanceof t.Just)return O(i,a.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 477, column 29 - line 483, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 473, column 21 - line 483, column 1: "+[r.constructor.name])}}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 468, column 17 - line 483, column 1: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 465, column 5 - line 483, column 1: "+[a.constructor.name])},te=function(e){var n=R(e);if(n instanceof t.Nothing)return t.Nothing.value;if(n instanceof t.Just){var r=A(n.value0);if(r)return t.Nothing.value;if(!r){var o=f(e),a=ee(e);if(a instanceof t.Nothing)return L(o,d(n.value0));if(a instanceof t.Just){var i=R(a.value0);if(i instanceof t.Nothing)return t.Nothing.value;if(i instanceof t.Just)return L(o,i.value0);throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 494, column 37 - line 498, column 1: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 492, column 20 - line 498, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 488, column 11 - line 498, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 485, column 5 - line 498, column 1: "+[n.constructor.name])},re=function(e){if(e instanceof u.OSCurrent){var n=ee(e.value0);if(n instanceof t.Just)return new t.Just(new u.OSCurrent(n.value0));if(n instanceof t.Nothing){var r=R(e.value0);if(r instanceof t.Just)return new t.Just(new u.OSParent(d(r.value0)));if(r instanceof t.Nothing)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 653, column 25 - line 656, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 650, column 5 - line 656, column 1: "+[n.constructor.name])}if(e instanceof u.OSParent)return t.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeZipper line 649, column 1 - line 656, column 1: "+[e.constructor.name])};e.normalizePos$_$_$=h,e.selGetPath=z,e.selDeleteFillFromRight=Q,e.selDeleteFillFromLeft=re,e.selGetEntry=w,e.selDown$_$_$=K,e.selUp=G,e.selShiftToZero=S,e.selSetSel$_$_$=P,e.selGetPos$_$_$=m,e.selGetPosition=B,e.selNumLevel=E,e.selFromPos=b,e.coneSetPath$_$_$=Z,e.coneGetPath=J,e.tailList=v,e.headList=$,e.withEmptyChildren=d,e.coneMoveUp=te,e.coneMoveDown$_$_$=ne,e.coneMoveRight=F,e.coneMoveLeft=N,e.coneDeleteFillFromRight=Y,e.coneDeleteFillFromLeft=ee,e.coneInsertBelow$_$_$=M,e.coneInsertBefore$_$_$=L,e.coneInsertAfter$_$_$=O,e.coneNumLevel=T,e.coneIsLeaf$_$_$=D,e.coneGetFirstBelow=H,e.coneIsRoot=A,e.coneDown$_$_$=V,e.coneRoot=k,e.coneUp=R,e.coneSetPos$_$_$=y,e.coneGetPosition=I,e.coneRight=j,e.coneFirst=W,e.coneShiftToZero=C,e.coneNext=x,e.getAllInLevel$_$_$=q,e.getZipFromIndex$_$_$=X,e.countLoadedNodes$_$_$=U,e.nodeGetEntry=p,e.zipGetEntry=g,e.zipGetNodeRec$_$_$=s,e.zipGetNode=f,e.makeZipper$_$_$=_}(PS["ConeCanvas.ConeZipper"]=PS["ConeCanvas.ConeZipper"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.Function"],PS["Data.Monoid"],function(e,t,r){var o=n.compare(e)(t)(r);if(o instanceof n.LT)return t;if(o instanceof n.EQ)return t;if(o instanceof n.GT)return r;throw new Error("Failed pattern match at Data.Ord line 60, column 3 - line 67, column 1: "+[o.constructor.name])});e.min$_$_$=t}(PS["Data.Ord"]=PS["Data.Ord"]||{}),function(e){"use strict";var n=function(){function e(){}return e.value=new e,e}();e.Proxy=n}(PS["Type.Proxy"]=PS["Type.Proxy"]||{}),function(e){"use strict";var n=(PS["Type.Proxy"],function(e){this.sized=e}),t=function(e){return e.sized},r=new n(function(e){return 4});e.Sized=n,e.sized=t,e.s4=r}(PS["Data.TypeNat"]=PS["Data.TypeNat"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Array"],r=PS["Data.Monoid"],o=PS["Data.Foldable"],a=(PS["Data.TypeNat"],PS["Control.Apply"]),i=PS.Math,u=(PS["Type.Proxy"],PS.Extensions,function(e){return e}),c=new n.Functor(function(e){return function(t){return n.map(n.functorArray)(e)(t)}}),l=new o.Foldable(function(e){return function(t){return function(a){return o.foldr(l)(function(r){return function(o){return n["<>"](e["__superclass_Prelude.Semigroup_0"]())(t(r))(o)}})(r.mempty(e))(a)}}},function(e){return function(n){return function(t){return o.foldl(o.foldableArray)(e)(n)(t)}}},function(e){return function(n){return function(t){return o.foldr(o.foldableArray)(e)(n)(t)}}}),s=function(e){return o.foldl(l)(n["+"](n.semiringNumber))(0)(n["<$>"](c)(function(e){return e*e})(e))},f=function(e){return i.sqrt(s(e))},d=function(e){var t=1/f(e);return n["<$>"](c)(function(e){return e*t})(e)},v=new n.Apply(function(){return c},function(e){return function(n){return t.zipWith$_$_$(function(e){return function(n){return e(n)}},e,n)}}),m=function(e){return a.lift2(v)(n["-"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.Ring_0"]()))},h=function(e,t){return d(m(n.numNumber)(e)(t))};e.normalize=d,e.vlength=f,e.vlengthSquared=s,e.direction$_$_$=h,e.vSub=m,e.toArray=u,e.functorVec=c,e.applyVec=v,e.foldableVector=l}(PS["Data.Vector"]=PS["Data.Vector"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.Vector"],PS["Data.TypeNat"],PS["Data.Array"]),r=(PS["Data.Array.Unsafe"],PS["Data.Maybe.Unsafe"],PS.Extensions),o=function(e){if(3===t.length(e))return e;if(n.otherwise)return r.fail("Vector3>>vec3': wrong array length!");throw new Error("Failed pattern match at Data.Vector3 line 31, column 1 - line 34, column 1: "+[e.constructor.name])},a=function(e,n,t){return[e,n,t]},i=function(e){return e[2]},u=function(e){return e[1]},c=function(e){return e[0]},l=function(e,t,o){return 3===t.length&&3===o.length?[n["-"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.Ring_0"]())(n["*"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[1])(o[2]))(n["*"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[2])(o[1])),n["-"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.Ring_0"]())(n["*"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[2])(o[0]))(n["*"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[0])(o[2])),n["-"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.Ring_0"]())(n["*"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[0])(o[1]))(n["*"](e["__superclass_Prelude.DivisionRing_0"]()["__superclass_Prelude.ModuloSemiring_1"]()["__superclass_Prelude.Semiring_0"]())(t[1])(o[0]))]:r.fail("Vector3>>cross: impossible!")};e.cross$_$_$=l,e.get3Z=i,e.get3Y=u,e.get3X=c,e["vec3'"]=o,e.vec3$_$_$=a}(PS["Data.Vector3"]=PS["Data.Vector3"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.Foreign"],PS["Data.Foreign.Class"]),r=PS["Data.Foreign.Index"],o=PS["Data.Array"],a=(PS["Data.Vector"],PS["Data.Vector3"]),i=(PS["Data.TypeNat"],PS["ConeCanvas.ConeModel"],PS["ConeCanvas.Color"]),u=PS["Data.Either"],c={prefsName:"standardPrefs",backColor:new i.Color4(1,1,1,1),textColor:new i.Color4I(0,0,0,1),textureFrameColor:new i.Color4(0,0,0,.3),fontStyle:"40px Arial, sans-serif",massiveColor:new i.Color4(.9,.9,1,1),rectColor:new i.Color4(.9,.9,1,1),labelTextBackground:!0,alwaysGreyTextBack:!1,labelIconBackground:!1,lightDirection:[-.5,-1,-.3],lightAmbient:new i.Color4(.2,.2,.2,1),lightDiffuse:new i.Color4(.5,.7,.7,1),lightDiffuseEdit:new i.Color4(1,.5,.5,1),lightSpecular:new i.Color4(1,1,1,1),materialAmbient:new i.Color4(1,1,1,1),materialDiffuse:new i.Color4(46/256,99/256,191/256,1),materialSpecular:new i.Color4(1,1,1,1),shininess:16,maxTextLength:40,angleSelectFactor:10,angleSelectAddX:0,angleSelectAddY:0,desiredZoomHint:5.5,aniTimeLR:500,aniTimeUD:600,aniTimeT:1500,aniTimeF:4e3,cursorKeys:!0,fixedFrameTime:0,coneHeight:2.5,windowsRatio:.6666666,labelRatio:1.5,cameraDistZ:10,upperOffset:0,controlAreaInitialVisible:!0,minChildSize:30,minIconSize:150,minLabelSize:350,keyEventsFromWindow:!0,labelEllipticalFactor:.5},l=function(e,c){var l=[{selector:"backColor",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.backColor=e,n}())})}}},{selector:"textColor",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.textColor=e,n}())})}}},{selector:"textureFrameColor",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.textureFrameColor=e,n}())})}}},{selector:"fontStyle",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.stringIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.fontStyle=e,n}())})}}},{selector:"massiveColor",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.massiveColor=e,n}())})}}},{selector:"rectColor",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.rectColor=e,n}())})}}},{selector:"labelTextBackground",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.booleanIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.labelTextBackground=e,n}())})}}},{selector:"alwaysGreyTextBack",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.booleanIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.alwaysGreyTextBack=e,n}())})}}},{selector:"labelIconBackground",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.booleanIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.labelIconBackground=e,n}())})}}},{selector:"lightDirection",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.arrayIsForeign(t.numberIsForeign))(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.lightDirection=a["vec3'"](e),n}())})}}},{selector:"lightAmbient",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.lightAmbient=e,n}())})}}},{selector:"lightDiffuse",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.lightDiffuse=e,n}())})}}},{selector:"lightDiffuseEdit",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.lightDiffuseEdit=e,n}())})}}},{selector:"lightSpecular",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.lightSpecular=e,n}())})}}},{selector:"materialAmbient",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.materialAmbient=e,n}())})}}},{selector:"materialDiffuse",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.materialDiffuse=e,n}())})}}},{selector:"materialSpecular",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(i.color4IsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.materialSpecular=e,n}())})}}},{selector:"shininess",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.shininess=e,n}())})}}},{selector:"maxTextLength",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.intIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.maxTextLength=e,n}())})}}},{selector:"angleSelectFactor",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.angleSelectFactor=e,n}())})}}},{selector:"angleSelectAddX",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.angleSelectAddX=e,n}())})}}},{selector:"angleSelectAddY",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.angleSelectAddY=e,n}())})}}},{selector:"desiredZoomHint",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.desiredZoomHint=e,n}())})}}},{selector:"aniTimeLR",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.aniTimeLR=e,n}())})}}},{selector:"aniTimeUD",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.aniTimeUD=e,n}())})}}},{selector:"aniTimeT",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.aniTimeT=e,n}())})}}},{selector:"aniTimeF",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.aniTimeF=e,n}())})}}},{selector:"fixedFrameTime",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.intIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.fixedFrameTime=e,n}())})}}},{selector:"windowsRatio",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.windowsRatio=e,n}())})}}},{selector:"labelRatio",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.labelRatio=e,n}())})}}},{selector:"cameraDistZ",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.cameraDistZ=e,n}())})}}},{selector:"coneHeight",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.coneHeight=e,n}())})}}},{selector:"upperOffset",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.upperOffset=e,n}())})}}},{selector:"cursorKeys",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.booleanIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.cursorKeys=e,n}())})}}},{selector:"controlAreaInitialVisible",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.booleanIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.controlAreaInitialVisible=e,n}())})}}},{selector:"minChildSize",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.minChildSize=e,n}())})}}},{selector:"minIconSize",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.minIconSize=e,n}())})}}},{selector:"minLabelSize",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.minLabelSize=e,n}())})}}},{
selector:"keyEventsFromWindow",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.booleanIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.keyEventsFromWindow=e,n}())})}}},{selector:"labelEllipticalFactor",setter:function(e){return function(r){return n[">>="](u.bindEither)(t.read(t.numberIsForeign)(e))(function(e){return n["return"](u.applicativeEither)(function(){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.labelEllipticalFactor=e,n}())})}}}],s=n.map(n.functorArray)(function(e){return function(t){return function(o){var a=r.hasProperty(r.indexString)(e.selector)(o);if(a)return n.bind(u.bindEither)(r.ix(r.indexString)(o)(e.selector))(function(n){return e.setter(n)(t)});if(!a)return n["return"](u.applicativeEither)(t);throw new Error("Failed pattern match at ConeCanvas.Preferences line 172, column 21 - line 176, column 40: "+[a.constructor.name])}}})(l);return n.bind(u.bindEither)(t.readJSON$_$_$(t.foreignIsForeign,e))(function(e){return n.bind(u.bindEither)(o.foldM$_$_$(u.monadEither,function(n){return function(t){return t(n)(e)}},c)(s))(function(e){return n["return"](u.applicativeEither)(e)})})};e.parsePrefs$_$_$=l,e.standardPrefs=c}(PS["ConeCanvas.Preferences"]=PS["ConeCanvas.Preferences"]||{}),function(e){"use strict";var n=PS.Prelude,t=function(e){return new n.Show(function(t){return"{x: "+(n.show(e)(t.x)+(", y: "+(n.show(e)(t.y)+(", z: "+(n.show(e)(t.z)+"}")))))})},r=function(e){return new n.Show(function(r){return"{leftTopFront: "+(n.show(t(e))(r.leftTopFront)+(", rightBottomRear:"+(n.show(t(e))(r.rightBottomRear)+"};")))})},o=function(e){return new n.Eq(function(t){return function(r){return n["=="](e)(t.x)(r.x)&&n["=="](e)(t.y)(r.y)&&n["=="](e)(t.z)(r.z)}})},a=function(e){return new n.Ord(function(){return o(e["__superclass_Prelude.Eq_0"]())},function(t){return function(r){var o=n.compare(e)(t.x)(r.x);if(o instanceof n.GT)return n.GT.value;if(o instanceof n.LT)return n.LT.value;if(o instanceof n.EQ){var a=n.compare(e)(t.y)(r.y);if(a instanceof n.GT)return n.GT.value;if(a instanceof n.LT)return n.LT.value;if(a instanceof n.EQ){var i=n.compare(e)(t.z)(r.z);if(i instanceof n.GT)return n.GT.value;if(i instanceof n.LT)return n.LT.value;if(i instanceof n.EQ)return n.EQ.value;throw new Error("Failed pattern match at ConeCanvas.GeometryTypes line 54, column 23 - line 59, column 1: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.GeometryTypes line 51, column 19 - line 59, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.GeometryTypes line 48, column 9 - line 59, column 1: "+[o.constructor.name])}})};e.showPoint3=t,e.eqPoint3=o,e.ordPoint3=a,e.showCuboid=r}(PS["ConeCanvas.GeometryTypes"]=PS["ConeCanvas.GeometryTypes"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Control.Monad.Eff"],r=PS["Control.Monad.ST"],o=PS["Data.Maybe"],a=(PS["Graphics.Canvas"],PS["Debug.Trace"]),i=(PS["Data.ArrayBuffer.Types"],PS["ConeCanvas.ConeModel"],PS["ConeCanvas.Preferences"]),u=(PS["ConeCanvas.GeometryTypes"],PS["Data.List"],function(){function e(){}return e.value=new e,e}()),c=function(){function e(){}return e.value=new e,e}(),l=function(){function e(){}return e.value=new e,e}(),s=function(){function e(){}return e.value=new e,e}(),f=function(){function e(){}return e.value=new e,e}(),d=function(){function e(){}return e.value=new e,e}(),v=function(){function e(){}return e.value=new e,e}(),m=function(){function e(){}return e.value=new e,e}(),h=function(){function e(){}return e.value=new e,e}(),p=function(){function e(){}return e.value=new e,e}(),g=function(){function e(){}return e.value=new e,e}(),w=function(){function e(){}return e.value=new e,e}(),_=function(){function e(){}return e.value=new e,e}(),$=function(){function e(){}return e.value=new e,e}(),C=function(){function e(){}return e.value=new e,e}(),S=function(){function e(){}return e.value=new e,e}(),y=function(){function e(){}return e.value=new e,e}(),P=function(){function e(){}return e.value=new e,e}(),T=function(){function e(){}return e.value=new e,e}(),b=function(){function e(){}return e.value=new e,e}(),E=function(){function e(){}return e.value=new e,e}(),x=function(){function e(){}return e.value=new e,e}(),F=function(){function e(){}return e.value=new e,e}(),A=function(){function e(){}return e.value=new e,e}(),N=function(){function e(){}return e.value=new e,e}(),D=function(){function e(){}return e.value=new e,e}(),M=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),L=function(){function e(){}return e.value=new e,e}(),O=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),I=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),R=function(){function e(){}return e.value=new e,e}(),k=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),U=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),G=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),B=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),J=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),z=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),H=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),W=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),j=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),q=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),V=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),Z=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),X=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),K=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),Y=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),Q=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),ee=function(){function e(){}return e.value=new e,e}(),ne=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),te=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),re=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),oe=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),ae=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),ie=function(){function e(e,n,t,r,o,a){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=o,this.value5=a}return e.create=function(n){return function(t){return function(r){return function(o){return function(a){return function(i){return new e(n,t,r,o,a,i)}}}}}},e}(),ue=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),ce=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),le=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),se=function(){function e(){}return e.value=new e,e}(),fe=function(){function e(){}return e.value=new e,e}(),de=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),ve=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),me=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),he=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),pe=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),ge=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),we=function(e,n){return(e-1)/n-1},_e=function(e,n,t){return r.writeSTRef$_$_$(n.value0,t)},$e=function(e,n){return(e+1)*n+1},Ce=function(e,n){return r.readSTRef(n.value0)},Se=function(e,o){return n["<$>"](t.functorEff)(ge.create)(r.newSTRef(o))},ye=function(e,n,t){return r.modifySTRef$_$_$(n.value0,t)},Pe=function(e){return e.value0},Te=function(){var e=r.newSTRef(!1)();return{selectableHot:u.value,pressed:"",needRepaint:e,angleSelect:{x:0,y:0},zoomControl:-1,zoom:1,currentMaxZoom:7,showControl:!0,showIndex:!1,editMode:!1}},be=function(e,u,c,l,s,f,d,v){return function(){var e=Te(),l=r.newSTRef(o.Nothing.value)();return{selectionModel:u,guiStyle:c,animateStartTime:0,animatePaintRef:l,canvas:o.Nothing.value,hasFocus:!1,iconNames:s,stlNames:f,labelSelection:[],state:fe.value,commandQueue:[],counter:0,prefs:i.standardPrefs,callback:n["return"](t.applicativeEff)(n.unit),keyCallback:function(e){return function(e){return function(e){return function(e){return function(e){return n["return"](t.applicativeEff)(!0)}}}}},cycleCallback:n["return"](t.applicativeEff)(n.unit),modelChangedCallback:o.Nothing.value,selectedChangedCallback:o.Nothing.value,loadIconCallback:function(e){return function(e){return n["return"](t.applicativeEff)(n.unit)}},loadSTLCallback:function(e){return function(e){return n["return"](t.applicativeEff)(n.unit)}},alertCallback:function(e){return a.trace("Alert: "+e)(function(e){return n["return"](t.applicativeEff)(n.unit)})},copySelection:L.value,controlState:e,isPainting:!1,windowSize:{x:0,y:0},bindings:d,frontend:v,benchmark:o.Nothing.value,demoMode:!1}}};e.KLeft=c,e.KRight=l,e.KUp=s,e.KDown=f,e.KMoveLeft=d,e.KMoveRight=v,e.KMoveUp=m,e.KMoveDown=h,e.KFirst=p,e.KSetFirst=g,e.KCut=w,e.KCopy=_,e.KPaste=$,e.KLink=C,e.KClockwork=S,e.KGlobal=y,e.KUnglobal=P,e.KZoomNormal=T,e.KZoomOut=b,e.KBench=E,e.KToggleDemo=x,e.KToggleControl=F,e.KToggleIndex=A,e.KEditModeOn=N,e.KEditModeOff=D,e.CommandingTurn=Z,e.CommandingUpDown=X,e.CommandingTrans=K,e.CommandingClockwork=Y,e.CommandingGlobal=Q,e.CommandingNothing=ee,e.CILabel=O,e.CISuperLabel=I,e.CIMainLabel=R,e.CICard=k,e.CIAngel=U,e.CIZoom=G,e.CITurn=B,e.OSNormal=fe,e.OSTurnMouse=de,e.OSAnimate=ve,e.OSAngle=me,e.OSZoom=he,e.SHNavigate=u,e.SingleSelection=M,e.NoSelection=L,e.TOFade=J,e.TOTurn=z,e.TOSizeChange=H,e.TPAim=W,e.TPIntro=j,e.TPLift=q,e.TPTransOp=V,e.AniMoveLeft=ne,e.AniMoveRight=te,e.AniMoveUp=re,e.AniMoveDown=oe,e.AniTransform=ae,e.AniClockwork=ie,e.AniGlobalView=ue,e.AniZoom=ce,e.AniPause=le,e.AniNull=se,e.ConeFront=pe,e.PaintRef=ge,e.emptyControlState=Te,e.zoomControl$_$_$=we,e.realZoom$_$_$=$e,e.emptyPaintState$_$_$=be,e.getConeFront=Pe,e.newPaintRef$_$_$=Se,e.writePaintRef$_$_$=_e,e.modifyPaintRef$_$_$=ye,e.readPaintRef$_$_$=Ce}(PS["ConeCanvas.ConeControlTypes"]=PS["ConeCanvas.ConeControlTypes"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Array"],r=PS["Data.Maybe"],o=PS["Data.Either"],a=PS["Data.List"],i=PS["Data.Int"],u=PS["Data.Ord"],c=PS["Debug.Trace"],l=PS.Math,s=PS["ConeCanvas.ConeModel"],f=PS["ConeCanvas.ConeZipper"],d=PS["ConeCanvas.ConeControlTypes"],v=(PS["ConeCanvas.GeometryTypes"],PS.Extensions),m=PS["Control.Monad.Eff"],h=function(e,r,o,i,u,c,l,s,m,h){var p=function(e){var t=f.normalizePos$_$_$(e,c),o=f.normalizePos$_$_$(t+s|0,l);return new d.TPTransOp(new d.TOTurn(m,{index:o,ngon:l},h),new d.TPAim(n["++"](a.semigroupList)(r)(new a.Cons(t,a.Nil.value))))},g=n["<$>"](n.functorArray)(p)(v.hRange$_$_$(o+i|0,((o+i|0)+u|0)-1)),w=c!==l;if(w)return t[":"](new d.TPTransOp(new d.TOSizeChange(l,m),new d.TPAim(r)))(g);if(!w)return g;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 648, column 5 - line 653, column 3: "+[w.constructor.name])},p=function(e,i,u){var c=function(u){return function(c){var l=f.coneGetPosition(i),v=f.coneNumLevel(i),m=f.coneNumLevel(u),p=m-1,g=v-1,w=f.zipGetNode(i),_=h(e,a.Nil.value,c,0,p-c,p,m,1,!0,s.TDClockwise.value),$=h(e,a.Nil.value,c,-c,c,p,m,0,!0,s.TDClockwise.value),C=s.makeHiddenNode(e)(f.nodeGetEntry(w)),S=s.makeHiddenLeaf(e)(f.nodeGetEntry(w)),y=new s.ConeNode({entry:S,nodeId:0,firstInd:0,children:new o.Right(a.Nil.value)}),P=new s.ConeNode({entry:C,nodeId:0,firstInd:0,children:new o.Right(a[":"](w)(a.replicate$_$_$(v-1,y)))}),T=new d.TPLift(!0,{path:a.Nil.value,pos:{index:0,ngon:v},model:P,transforms:[new d.TPTransOp(new d.TOSizeChange(m,!0),new d.TPAim(a.Nil.value))]}),b=new d.TPTransOp(new d.TOFade(r.Nothing.value),new d.TPAim(a[":"](c)(a[":"](l)(a.Nil.value)))),E=h(e,a[":"](c)(a.Nil.value),l,1,v-(l+1|0),v,g,0,!0,s.TDClockwise.value),x=h(e,a[":"](c)(a.Nil.value),l,-l,l,v,g,1,!0,s.TDClockwise.value),F=n["++"](n.semigroupArray)(t[":"](T)(t[":"](b)(x)))(n["++"](n.semigroupArray)(E)(n["++"](n.semigroupArray)($)(_)));return F}},l=f.coneUp(i);if(l instanceof r.Nothing)return r.Nothing.value;if(l instanceof r.Just){var v=c(u)(f.coneGetPosition(l.value0));return new r.Just({transPrims:v,transAim:new s.OSCurrent(u)})}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 584, column 5 - line 589, column 3: "+[l.constructor.name])},g=function(e,t){if(t instanceof s.OSParent)return n["return"](m.applicativeEff)(r.Nothing.value);if(t instanceof s.OSCurrent)return c.trace("transformUp!")(function(o){return function(){var o=f.coneDown$_$_$(e,t.value0)();if(o instanceof r.Nothing)return c.trace("transformUp: target not found")(function(e){return n["return"](m.applicativeEff)(r.Nothing.value)})();if(o instanceof r.Just){var a=f.coneMoveUp(o.value0);if(a instanceof r.Just){var i=p(e,o.value0,a.value0);return c.traceAny$_$_$(i,function(e){return n["return"](m.applicativeEff)(i)})()}if(a instanceof r.Nothing)return c.trace("transformUp: aim not found")(function(e){return n["return"](m.applicativeEff)(r.Nothing.value)})();throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 576, column 13 - line 582, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 573, column 5 - line 582, column 1: "+[o.constructor.name])}});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 570, column 1 - line 571, column 1: "+[t.constructor.name])},w=function(e,i,u){var c=function(u){var c=f.coneGetPosition(i),l=f.coneNumLevel(i),v=f.coneNumLevel(u),m=v-1,p=f.normalizePos$_$_$(f.coneGetPosition(u)-1,v),g=l-1,w=f.zipGetNode(i),_=f.normalizePos$_$_$(c+1|0,l),$=h(e,a[":"](_)(a.Nil.value),p,-p,p+1|0,m,v,-1,!0,s.TDAntiClockwise.value),C=h(e,a[":"](_)(a.Nil.value),p,1,m-(p+1|0),m,v,0,!0,s.TDAntiClockwise.value),S=s.makeHiddenNode(e)(f.nodeGetEntry(w)),y=s.makeHiddenLeaf(e)(f.nodeGetEntry(w)),P=new s.ConeNode({entry:y,nodeId:0,firstInd:0,children:new o.Right(a.Nil.value)}),T=new s.ConeNode({entry:S,nodeId:0,firstInd:0,children:new o.Right(a[":"](w)(a.replicate$_$_$(l-1,P)))}),b=new d.TPLift(!1,{path:a.Nil.value,pos:{index:0,ngon:l},model:T,transforms:[new d.TPTransOp(new d.TOSizeChange(v,!0),new d.TPAim(a.Nil.value))]}),E=new d.TPTransOp(new d.TOFade(r.Nothing.value),new d.TPAim(a[":"](c)(a.Nil.value))),x=h(e,a.Nil.value,c,1,l-(c+1|0),l,g,-1,!0,s.TDAntiClockwise.value),F=h(e,a.Nil.value,c,-c,c,l,g,0,!0,s.TDAntiClockwise.value);return n["++"](n.semigroupArray)(t[":"](b)(t[":"](E)(F)))(n["++"](n.semigroupArray)(x)(n["++"](n.semigroupArray)($)(C)))},l=f.coneUp(u);if(l instanceof r.Just){var v=c(u);return new r.Just({transPrims:v,transAim:new s.OSCurrent(l.value0)})}if(l instanceof r.Nothing)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 521, column 5 - line 527, column 3: "+[l.constructor.name])},_=function(e,t){if(t instanceof s.OSParent)return n["return"](m.applicativeEff)(r.Nothing.value);if(t instanceof s.OSCurrent)return function(){var n=f.coneMoveDown$_$_$(e,t.value0)();if(n instanceof r.Nothing)return r.Nothing.value;if(n instanceof r.Just)return w(e,t.value0,n.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 515, column 5 - line 519, column 1: "+[n.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 512, column 1 - line 513, column 1: "+[t.constructor.name])},$=function(e){return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:d.AniNull.value})},C=function(e,t){for(var r=e,o=t;;){if(o instanceof d.TPAim&&o.value0 instanceof a.Cons&&o.value0.value1 instanceof a.Nil){if(o.value0.value0===r)return!0;if(n.otherwise)return!1}if(o instanceof d.TPAim)return!1;if(o instanceof d.TPIntro)return!1;if(o instanceof d.TPLift)return!1;{if(!(o instanceof d.TPTransOp))throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 788, column 1 - line 790, column 1: "+[r.constructor.name,o.constructor.name]);var i=r,u=o.value1;r=i,o=u}}},S=function(e){for(var t=e;;){if(t instanceof d.TPAim){if(a["null"](t.value0))return!0;if(n.otherwise)return!1}if(t instanceof d.TPIntro)return!1;if(t instanceof d.TPLift)return!1;{if(!(t instanceof d.TPTransOp))throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 797, column 1 - line 799, column 1: "+[t.constructor.name]);var r=t.value1;t=r}}},y=function(e){return function(n){for(var t=e,o=n;;){if(o instanceof d.TPTransOp&&o.value0 instanceof d.TOTurn){var a=C(t,o.value1);if(a)return new r.Just(new d.TOTurn(o.value0.value0,o.value0.value1,o.value0.value2));if(!a)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 747, column 51 - line 750, column 1: "+[a.constructor.name])}{if(!(o instanceof d.TPTransOp))return r.Nothing.value;var i=t,u=o.value1;t=i,o=u}}}},P=function(e){for(var n=e;;){if(n instanceof d.TPTransOp&&n.value0 instanceof d.TOSizeChange){var t=S(n.value1);if(t)return new r.Just({l:n.value0.value0,r:n.value0.value1});if(!t)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 779, column 51 - line 782, column 1: "+[t.constructor.name])}{if(!(n instanceof d.TPTransOp))return r.Nothing.value;var o=n.value1;n=o}}},T=function(e,n){var t=f.coneGetPath(e),o=function(){var e=a.last(t);if(e instanceof r.Nothing)return[];if(e instanceof r.Just)return[new d.TPTransOp(new d.TOFade(new r.Just(!0)),new d.TPAim(a.singleton(e.value0)))];throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 475, column 23 - line 478, column 5: "+[e.constructor.name])}();return{transPrims:o,transAim:new s.OSParent(n)}},b=function(e){for(var n=e;;){if(!(n instanceof d.TPTransOp)){if(n instanceof d.TPAim)return r.Nothing.value;if(n instanceof d.TPIntro)return r.Nothing.value;if(n instanceof d.TPLift)return new r.Just(n);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 833, column 1 - line 834, column 1: "+[n.constructor.name])}var t=n.value1;n=t}},E=function(e){if(e instanceof d.TPTransOp){var t=E(e.value1);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return new r.Just(new d.TPTransOp(e.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 823, column 38 - line 826, column 1: "+[t.constructor.name])}if(e instanceof d.TPAim)return r.Nothing.value;if(e instanceof d.TPIntro)return r.Nothing.value;if(e instanceof d.TPLift){if(a["null"](e.value1.path))return new r.Just(e);if(n.otherwise)return r.Nothing.value}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 823, column 1 - line 826, column 1: "+[e.constructor.name])},x=function(e){return{level:f.coneNumLevel(e),pos:f.coneGetPosition(e),path:f.coneGetPath(e)}},F=function(e,n,o){var i=x(n),u=function(){var e=a.last(f.coneGetPath(n));return e instanceof r.Just&&e.value0-1<0?i.level-1:e instanceof r.Just?e.value0-1:i.level-1}(),c=t[":"](new d.TPTransOp(new d.TOTurn(!0,{index:f.normalizePos$_$_$(u+2|0,i.level),ngon:i.level},s.TDClockwise.value),new d.TPAim(a.singleton(u))))(h(e,a.Nil.value,i.pos,1,i.level-1,i.level,i.level,1,!0,s.TDClockwise.value));return{transPrims:c,transAim:new s.OSCurrent(o)}},A=function(e,n){if(n instanceof s.OSParent)return r.Nothing.value;if(n instanceof s.OSCurrent){var t=f.coneMoveLeft(n.value0);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return r.Just.create(F(e,n.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 299, column 5 - line 303, column 1: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 297, column 1 - line 298, column 1: "+[n.constructor.name])},N=function(e,n,o){var i=x(n),u=function(){var e=a.last(f.coneGetPath(n));return e instanceof r.Just&&(e.value0+1|0)<i.level?e.value0+1|0:0}(),c=t[":"](new d.TPTransOp(new d.TOTurn(!0,{index:f.normalizePos$_$_$(u-2,i.level),ngon:i.level},s.TDAntiClockwise.value),new d.TPAim(a.singleton(u))))(h(e,a.Nil.value,i.pos,1,i.level-1,i.level,i.level,-1,!0,s.TDAntiClockwise.value));return{transPrims:c,transAim:new s.OSCurrent(o)}},D=function(e,n){if(n instanceof s.OSParent)return r.Nothing.value;if(n instanceof s.OSCurrent){var t=f.coneMoveRight(n.value0);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return r.Just.create(N(e,n.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 330, column 5 - line 334, column 1: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 328, column 1 - line 329, column 1: "+[n.constructor.name])},M=function(e){for(var n=e;;){if(!(n instanceof d.TPTransOp)){if(n instanceof d.TPAim)return r.Nothing.value;if(n instanceof d.TPLift)return r.Nothing.value;if(n instanceof d.TPIntro)return new r.Just(n);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 816, column 1 - line 817, column 1: "+[n.constructor.name])}var t=n.value1;n=t}},L=function(e){if(e instanceof d.TPTransOp){var t=L(e.value1);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return new r.Just(new d.TPTransOp(e.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 805, column 34 - line 808, column 1: "+[t.constructor.name])}if(e instanceof d.TPAim)return r.Nothing.value;if(e instanceof d.TPLift)return r.Nothing.value;if(e instanceof d.TPIntro){if(a["null"](e.value0.path))return new r.Just(e);if(n.otherwise)return r.Nothing.value}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 805, column 1 - line 808, column 1: "+[e.constructor.name])},O=function(e,n){var t=f.coneNumLevel(e),o=new d.TPTransOp(new d.TOFade(new r.Just(!1)),new d.TPIntro({path:a.Nil.value,pos:{index:0,ngon:t+1|0},model:n,transforms:[]}));return{oldSize:t,newSize:t+1|0,position:f.coneGetPosition(e),trans:o}},I=function(e,o,i,u){if(o instanceof s.OSCurrent){var c=O(o.value0,i),l=h(e,a.Nil.value,c.position,-c.position,c.position,c.oldSize,c.newSize,0,!0,s.TDClockwise.value),f=h(e,a.Nil.value,c.position,0,c.oldSize-c.position,c.oldSize,c.newSize,1,!0,s.TDClockwise.value);t[":"](c.trans)(n["++"](n.semigroupArray)(l)(f));return{transPrims:[c.trans],transAim:new s.OSCurrent(u)}}if(o instanceof s.OSParent){var v=new d.TPTransOp(new d.TOFade(new r.Just(!1)),new d.TPIntro({path:a.Nil.value,pos:{index:0,ngon:1},model:i,transforms:[]}));return{transPrims:[v],transAim:new s.OSCurrent(u)}}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 411, column 1 - line 423, column 1: "+[o.constructor.name,i.constructor.name,u.constructor.name])},R=function(e,n,t){if(n instanceof s.OSCurrent){var o=f.coneInsertBefore$_$_$(t,n.value0);if(o instanceof r.Nothing)return r.Nothing.value;if(o instanceof r.Just)return r.Just.create(I(e,new s.OSCurrent(n.value0),t,o.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 402, column 5 - line 405, column 1: "+[o.constructor.name])}if(n instanceof s.OSParent){var a=f.coneInsertBelow$_$_$(e,t,n.value0);if(a instanceof r.Nothing)return r.Nothing.value;if(a instanceof r.Just)return r.Just.create(I(e,new s.OSParent(n.value0),t,a.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 406, column 5 - line 410, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 401, column 1 - line 405, column 1: "+[n.constructor.name,t.constructor.name])},k=function(e,o,i,u){if(o instanceof s.OSCurrent){var c=O(o.value0,i),l=h(e,a.Nil.value,c.position,-c.position,c.position+1|0,c.oldSize,c.newSize,-1,!0,s.TDAntiClockwise.value),f=h(e,a.Nil.value,c.position,1,c.oldSize-(c.position+1|0),c.oldSize,c.newSize,0,!0,s.TDAntiClockwise.value),v=t[":"](c.trans)(n["++"](n.semigroupArray)(l)(f));return{transPrims:v,transAim:new s.OSCurrent(u)}}if(o instanceof s.OSParent){var m=new d.TPTransOp(new d.TOFade(new r.Just(!1)),new d.TPIntro({path:a.Nil.value,pos:{index:0,ngon:1},model:i,transforms:[]}));return{transPrims:[m],transAim:new s.OSCurrent(u)}}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 363, column 1 - line 373, column 1: "+[o.constructor.name,i.constructor.name,u.constructor.name])},U=function(e,n,t){if(n instanceof s.OSCurrent){var o=f.coneInsertAfter$_$_$(t,n.value0);if(o instanceof r.Nothing)return r.Nothing.value;if(o instanceof r.Just)return r.Just.create(k(e,new s.OSCurrent(n.value0),t,o.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 354, column 5 - line 357, column 1: "+[o.constructor.name])}if(n instanceof s.OSParent){var a=f.coneInsertBelow$_$_$(e,t,n.value0);if(a instanceof r.Nothing)return r.Nothing.value;if(a instanceof r.Just)return r.Just.create(k(e,new s.OSParent(n.value0),t,a.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 358, column 5 - line 362, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 353, column 1 - line 357, column 1: "+[n.constructor.name,t.constructor.name])},G=function(e){for(var n=e;;){if(n instanceof d.TPTransOp&&n.value0 instanceof d.TOFade)return new r.Just(new d.TOFade(n.value0.value0));{if(!(n instanceof d.TPTransOp))return r.Nothing.value;var t=n.value1;n=t}}},B=function(e){return function(n){for(var t=e,o=n;;){if(o instanceof d.TPTransOp&&o.value0 instanceof d.TOFade){var a=C(t,o.value1);if(a)return new r.Just(new d.TOFade(o.value0.value0));if(!a)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 755, column 53 - line 758, column 1: "+[a.constructor.name])}{if(!(o instanceof d.TPTransOp))return r.Nothing.value;var i=t,u=o.value1;t=i,o=u}}}},J=function(e){var n=f.coneGetPath(e),t=f.coneNumLevel(e),o=a.last(n);if(o instanceof r.Just)return{path:n,selected:f.coneGetPosition(e),oldSize:t,newSize:t-1,trans:new d.TPTransOp(new d.TOFade(new r.Just(!0)),new d.TPAim(a.singleton(o.value0)))};if(o instanceof r.Nothing)return v.fail("ConeTransforms>>getExtroParas: Empty path");throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 462, column 8 - line 472, column 1: "+[o.constructor.name])},z=function(e,r,o){if(o instanceof s.OSCurrent){var i=J(r),u=h(e,a.Nil.value,i.selected,-i.selected,i.selected,i.oldSize,i.newSize,1,!0,s.TDClockwise.value),c=h(e,a.Nil.value,i.selected,1,i.oldSize-(i.selected+1|0),i.oldSize,i.newSize,0,!0,s.TDClockwise.value),l=t[":"](i.trans)(n["++"](n.semigroupArray)(u)(c));return{transPrims:l,transAim:new s.OSCurrent(o.value0)}}if(o instanceof s.OSParent)return T(r,o.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 444, column 1 - line 454, column 1: "+[r.constructor.name,o.constructor.name])},H=function(e,n){if(n instanceof s.OSCurrent){var t=f.selDeleteFillFromLeft(n);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return new r.Just(z(e,n.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 438, column 5 - line 441, column 1: "+[t.constructor.name])}if(n instanceof s.OSParent)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 437, column 1 - line 441, column 1: "+[n.constructor.name])},W=function(e,r,o){if(o instanceof s.OSCurrent){var i=J(r),u=h(e,a.Nil.value,i.selected,-i.selected,i.selected,i.oldSize,i.newSize,0,!0,s.TDAntiClockwise.value),c=h(e,a.Nil.value,i.selected,1,i.oldSize-(i.selected+1|0),i.oldSize,i.newSize,-1,!0,s.TDAntiClockwise.value),l=t[":"](i.trans)(n["++"](n.semigroupArray)(u)(c));return{transPrims:l,transAim:new s.OSCurrent(o.value0)}}if(o instanceof s.OSParent)return T(r,o.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 494, column 1 - line 504, column 1: "+[r.constructor.name,o.constructor.name])},j=function(e,n){if(n instanceof s.OSCurrent){var t=f.selDeleteFillFromRight(n);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just)return new r.Just(W(e,n.value0,t.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 488, column 5 - line 491, column 1: "+[t.constructor.name])}if(n instanceof s.OSParent)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 487, column 1 - line 491, column 1: "+[n.constructor.name])},q=function(e){return function(n){if(n instanceof d.TPAim){var t=a.uncons(n.value0);if(t instanceof r.Just){var o=t.value0.head===e;if(o)return new r.Just(new d.TPAim(t.value0.tail));if(!o)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 729, column 74 - line 732, column 45: "+[o.constructor.name])}return r.Nothing.value}if(n instanceof d.TPIntro){var i=a.uncons(n.value0.path);if(i instanceof r.Just){var u=i.value0.head===e;if(u)return new r.Just(new d.TPIntro(function(){var e={};for(var t in n.value0)n.value0.hasOwnProperty(t)&&(e[t]=n.value0[t]);return e.path=i.value0.tail,e}()));if(!u)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 734, column 82 - line 737, column 53: "+[u.constructor.name])}return r.Nothing.value}if(n instanceof d.TPTransOp){var c=V(e,n.value1);if(c instanceof r.Nothing)return r.Nothing.value;if(c instanceof r.Just)return new r.Just(new d.TPTransOp(n.value0,c.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 738, column 44 - line 741, column 1: "+[c.constructor.name])}if(n instanceof d.TPLift){var l=a.uncons(n.value1.path);return l instanceof r.Just?new r.Just(new d.TPLift(n.value0,function(){var e={};for(var t in n.value1)n.value1.hasOwnProperty(t)&&(e[t]=n.value1[t]);return e.path=l.value0.tail,e}())):r.Nothing.value}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 728, column 1 - line 733, column 1: "+[e.constructor.name,n.constructor.name])}},V=function(e,n){if(n instanceof d.TPAim){var t=a.uncons(n.value0);if(t instanceof r.Just){var o=t.value0.head===e;if(o)return new r.Just(new d.TPAim(t.value0.tail));if(!o)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 729, column 74 - line 732, column 45: "+[o.constructor.name])}return r.Nothing.value}if(n instanceof d.TPIntro){var i=a.uncons(n.value0.path);if(i instanceof r.Just){var u=i.value0.head===e;
if(u)return new r.Just(new d.TPIntro(function(){var e={};for(var t in n.value0)n.value0.hasOwnProperty(t)&&(e[t]=n.value0[t]);return e.path=i.value0.tail,e}()));if(!u)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 734, column 82 - line 737, column 53: "+[u.constructor.name])}return r.Nothing.value}if(n instanceof d.TPTransOp){var c=V(e,n.value1);if(c instanceof r.Nothing)return r.Nothing.value;if(c instanceof r.Just)return new r.Just(new d.TPTransOp(n.value0,c.value0));throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 738, column 44 - line 741, column 1: "+[c.constructor.name])}if(n instanceof d.TPLift){var l=a.uncons(n.value1.path);return l instanceof r.Just?new r.Just(new d.TPLift(n.value0,function(){var e={};for(var t in n.value1)n.value1.hasOwnProperty(t)&&(e[t]=n.value1[t]);return e.path=l.value0.tail,e}())):r.Nothing.value}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 728, column 1 - line 733, column 1: "+[e.constructor.name,n.constructor.name])},Z=function(e,n){return{progress:n.progress,transforms:t.mapMaybe(q(e))(n.transforms)}},X=function(e){return{progress:e,transforms:[]}},K=function(e,t,o){var i={l:a.uncons(t),r:a.uncons(o)};return i.l instanceof r.Just&&i.r instanceof r.Just&&n["=="](e)(i.l.value0.head)(i.r.value0.head)?a[":"](i.l.value0.head)(K(e,i.l.value0.tail,i.r.value0.tail)):a.Nil.value},Y=function(e,t){var o=n["=="](a.eqList(n.eqInt))(e)(t);if(o)return r.Nothing.value;if(!o){var i=K(n.eqInt,e,t);return r.Just.create(a.take(u.min$_$_$(n.ordInt,a.length(t),a.length(i)+2|0))(e))}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 281, column 5 - line 287, column 1: "+[o.constructor.name])},Q=function(e,t){var r=f.selNumLevel(e),o=l.max$_$_$(1,i.toNumber(r)/(2*t.prefs.desiredZoomHint)),a=u.min$_$_$(n.ordNumber,o,t.controlState.currentMaxZoom);return{x:t.controlState.zoom,y:a}},ee=function(e,t,o){if(o instanceof s.AnimMoveLeft){var i=f.selGetPosition(t.selectionModel),u=i-o.value0,v=f.selNumLevel(t.selectionModel),h=function(){if(0>u)return v+u|0;if(u>v-1)return u-v;if(n.otherwise)return u;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 89, column 5 - line 96, column 1: "+[])}();return n["return"](m.applicativeEff)({condNewSelection:f.selSetSel$_$_$(t.selectionModel,h),newAnim:new d.AniMoveLeft(100,o.value0)})}if(o instanceof s.AnimMoveRight){var i=f.selGetPosition(t.selectionModel),u=i+o.value0|0,v=f.selNumLevel(t.selectionModel),h=function(){if(0>u)return v+u|0;if(u>v-1)return u-v;if(n.otherwise)return u;throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 97, column 5 - line 104, column 1: "+[])}();return n["return"](m.applicativeEff)({condNewSelection:f.selSetSel$_$_$(t.selectionModel,h),newAnim:new d.AniMoveRight(100,o.value0)})}if(o instanceof s.AnimTurnToFirst){var C=f.selGetPosition(t.selectionModel),S=0===C;if(S)return $(e);if(!S){var v=f.selNumLevel(t.selectionModel),y=(v/2|0)>=C;if(y)return n["return"](m.applicativeEff)({condNewSelection:f.selSetSel$_$_$(t.selectionModel,0),newAnim:new d.AniMoveLeft(100,C)});if(!y)return n["return"](m.applicativeEff)({condNewSelection:f.selSetSel$_$_$(t.selectionModel,0),newAnim:new d.AniMoveRight(100,v-C)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 109, column 21 - line 112, column 1: "+[y.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 106, column 8 - line 112, column 1: "+[S.constructor.name])}if(o instanceof s.AnimMoveUp){var P=f.selUp(t.selectionModel);if(P instanceof r.Just){var T=Q(P.value0,t);return n["return"](m.applicativeEff)({condNewSelection:new r.Just(P.value0),newAnim:new d.AniMoveUp(100,T.x,T.y)})}if(P instanceof r.Nothing)return $(e);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 113, column 5 - line 119, column 1: "+[P.constructor.name])}if(o instanceof s.AnimMoveDown)return function(){var n=f.selDown$_$_$(e,t.selectionModel)();if(n instanceof r.Just){var o=Q(n.value0,t);return{condNewSelection:new r.Just(n.value0),newAnim:new d.AniMoveDown(100,o.x,o.y)}}if(n instanceof r.Nothing)return $(e)();throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 121, column 5 - line 128, column 1: "+[n.constructor.name])};if(o instanceof s.AnimClockwork){var b=f.selGetPos$_$_$(e,t.selectionModel),E=f.coneGetPath(b);return function(){var n=f.coneSetPath$_$_$(e,b,o.value0)();if(n instanceof r.Nothing)return $(e)();if(n instanceof r.Just){var a=f.selFromPos(n.value0),i=Q(a,t),u=Y(E,o.value0);if(u instanceof r.Nothing)return $(e)();if(u instanceof r.Just)return{condNewSelection:new r.Just(t.selectionModel),newAnim:new d.AniClockwork(100,E,o.value0,u.value0,i.x,i.y)};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 139, column 45 - line 143, column 1: "+[u.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 132, column 5 - line 143, column 1: "+[n.constructor.name])}}if(o instanceof s.AnimTransformLeft&&o.value0 instanceof r.Nothing){var x=A(e,t.selectionModel);if(x instanceof r.Nothing)return $(e);if(x instanceof r.Just)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,x.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 144, column 5 - line 147, column 1: "+[x.constructor.name])}if(o instanceof s.AnimTransformLeft&&o.value0 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return $(e);if(t.selectionModel instanceof s.OSCurrent)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,F(e,t.selectionModel.value0,o.value0.value0))});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 148, column 5 - line 152, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimTransformRight&&o.value0 instanceof r.Nothing){var M=D(e,t.selectionModel);if(M instanceof r.Nothing)return $(e);if(M instanceof r.Just)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,M.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 153, column 5 - line 156, column 1: "+[M.constructor.name])}if(o instanceof s.AnimTransformRight&&o.value0 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return $(e);if(t.selectionModel instanceof s.OSCurrent)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,N(e,t.selectionModel.value0,o.value0.value0))});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 157, column 5 - line 162, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimTransformIntro&&o.value2 instanceof r.Nothing){var L=f.zipGetNode(o.value1),O=function(){if(o.value0)return U(e,t.selectionModel,L);if(!o.value0)return R(e,t.selectionModel,L);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 164, column 21 - line 167, column 5: "+[o.value0.constructor.name])}();if(O instanceof r.Nothing)return $(e);if(O instanceof r.Just)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,O.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 167, column 8 - line 170, column 1: "+[O.constructor.name])}if(o instanceof s.AnimTransformIntro&&o.value2 instanceof r.Just){var L=f.zipGetNode(o.value1),G=function(){if(o.value0)return k(e,t.selectionModel,L,o.value2.value0);if(!o.value0)return I(e,t.selectionModel,L,o.value2.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 172, column 17 - line 175, column 5: "+[o.value0.constructor.name])}();return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,G)})}if(o instanceof s.AnimTransformExtro&&o.value1 instanceof r.Nothing){var O=function(){if(o.value0)return H(e,t.selectionModel);if(!o.value0)return j(e,t.selectionModel);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 178, column 21 - line 181, column 5: "+[o.value0.constructor.name])}();if(O instanceof r.Nothing)return $(e);if(O instanceof r.Just)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,O.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 181, column 8 - line 184, column 1: "+[O.constructor.name])}if(o instanceof s.AnimTransformExtro&&o.value1 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return $(e);if(t.selectionModel instanceof s.OSCurrent){var G=function(){if(o.value0)return z(e,t.selectionModel.value0,o.value1.value0);if(!o.value0)return W(e,t.selectionModel.value0,o.value1.value0);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 187, column 37 - line 190, column 25: "+[o.value0.constructor.name])}();return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,G)})}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 185, column 5 - line 192, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimGlobalView)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniGlobalView(100,o.value0)});if(o instanceof s.AnimZoom&&o.value0 instanceof r.Just){var B=Q(t.selectionModel,t),J=l.abs(B.x-o.value0.value0)>.01;if(J)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniZoom(100,B.x,o.value0.value0)});if(!J)return $(e);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 196, column 13 - line 199, column 1: "+[J.constructor.name])}if(o instanceof s.AnimZoom&&o.value0 instanceof r.Nothing){var q=Q(t.selectionModel,t),V=l.abs(q.x-q.y)>.01;if(V)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniZoom(100,q.x,q.y)});if(!V)return $(e);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 202, column 13 - line 205, column 1: "+[V.constructor.name])}if(o instanceof s.AnimPause)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniPause(o.value0)});if(o instanceof s.AnimNull)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:d.AniNull.value});if(o instanceof s.AnimCut){if(t.selectionModel instanceof s.OSCurrent){var Z=f.coneIsRoot(t.selectionModel.value0);if(Z)return $(e);if(!Z)return function(){var o=(n["<$>"](m.functorEff)(a.length)(s.nodeGetChildren$_$_$(e,f.zipGetNode(t.selectionModel.value0)))(),H(e,t.selectionModel));if(o instanceof r.Just)return{condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,o.value0)};if(o instanceof r.Nothing)return $(e)();throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 219, column 34 - line 222, column 29: "+[o.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 210, column 13 - line 223, column 9: "+[Z.constructor.name])}return $(e)}if(o instanceof s.AnimCopy)return $(e);if(o instanceof s.AnimPaste){if(t.copySelection instanceof d.NoSelection)return $(e);if(t.copySelection instanceof d.SingleSelection){var L=f.zipGetNode(f.selGetPos$_$_$(e,t.copySelection.value0)),X=U(e,t.selectionModel,L);if(X instanceof r.Just)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,X.value0)});if(X instanceof r.Nothing)return $(e);throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 230, column 16 - line 234, column 1: "+[X.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 226, column 5 - line 234, column 1: "+[t.copySelection.constructor.name])}if(o instanceof s.AnimTransformUp&&o.value0 instanceof r.Nothing)return function(){var n=g(e,t.selectionModel)();if(n instanceof r.Nothing)return c.trace("toAnimate AnimTransformUp: transformUp returns Nothing")(function(n){return $(e)})();if(n instanceof r.Just)return{condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,n.value0)};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 236, column 5 - line 239, column 1: "+[n.constructor.name])};if(o instanceof s.AnimTransformUp&&o.value0 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return c.trace("toAnimate AnimTransformUp: parentSelection")(function(n){return $(e)});if(t.selectionModel instanceof s.OSCurrent){var K=p(e,t.selectionModel.value0,o.value0.value0);if(K instanceof r.Nothing)return c.trace("toAnimate AnimTransformUp: transformUp' returns Nothing")(function(n){return $(e)});if(K instanceof r.Just)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,K.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 243, column 13 - line 246, column 1: "+[K.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 240, column 5 - line 246, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimTransformDown&&o.value0 instanceof r.Nothing)return function(){var n=_(e,t.selectionModel)();if(n instanceof r.Nothing)return $(e)();if(n instanceof r.Just)return{condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,n.value0)};throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 248, column 5 - line 251, column 1: "+[n.constructor.name])};if(o instanceof s.AnimTransformDown&&o.value0 instanceof r.Just){if(t.selectionModel instanceof s.OSParent)return $(e);if(t.selectionModel instanceof s.OSCurrent){var ee=w(e,t.selectionModel.value0,o.value0.value0);if(ee instanceof r.Nothing)return $(e);if(ee instanceof r.Just)return n["return"](m.applicativeEff)({condNewSelection:r.Nothing.value,newAnim:new d.AniTransform(100,ee.value0)});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 255, column 13 - line 259, column 1: "+[ee.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 252, column 5 - line 259, column 1: "+[t.selectionModel.constructor.name])}if(o instanceof s.AnimTransformReplace)return n["return"](m.applicativeEff)({condNewSelection:new r.Just(new s.OSCurrent(o.value0)),newAnim:d.AniNull.value});if(o instanceof s.AnimTransformShiftToZero&&o.value0 instanceof r.Nothing)return n["return"](m.applicativeEff)({condNewSelection:new r.Just(f.selShiftToZero(t.selectionModel)),newAnim:d.AniNull.value});if(o instanceof s.AnimTransformShiftToZero&&o.value0 instanceof r.Just)return n["return"](m.applicativeEff)({condNewSelection:new r.Just(new s.OSCurrent(o.value0.value0)),newAnim:d.AniNull.value});throw new Error("Failed pattern match at ConeCanvas.ConeTransforms line 88, column 1 - line 96, column 1: "+[t.constructor.name,o.constructor.name])},ne=function(e,n){return{progress:e,transforms:n}};e.commonPrefix$_$_$=K,e.getLiftBase=b,e.getLift=E,e.getIntroBase=M,e.getIntro=L,e.isHeadAim=S,e.isIndexAim$_$_$=C,e.getSizeChange=P,e["getFade'"]=G,e.getFade=B,e.getTurn=y,e.filterTransform$_$_$=Z,e.buildTransform$_$_$=ne,e.emptyTransform=X,e.turnMany$_$_$=h,e.transformUp$_$_$=g,e.transformDown$_$_$=_,e.transformExtroR$_$_$=j,e.transformIntroL$_$_$=R,e.transformExtroL$_$_$=H,e.transformIntroR$_$_$=U,e.transformRight$_$_$=D,e.transformLeft$_$_$=A,e.toAnimate$_$_$=ee}(PS["ConeCanvas.ConeTransforms"]=PS["ConeCanvas.ConeTransforms"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Control.Monad.ST"],r=PS["Control.Monad.Eff.Exception"],o=PS["Control.Monad.Eff.Random"],a=PS["Data.Date"],i=(PS["Data.Time"],PS["Data.Maybe"]),u=PS["Data.Array"],c=PS["Data.Array.Unsafe"],l=PS.Math,l=PS.Math,s=PS["Control.Apply"],f=PS["Data.Int"],d=PS["Data.List"],v=PS["Debug.Trace"],m=PS["ConeCanvas.ConeModel"],h=PS["ConeCanvas.ConeZipper"],p=PS["ConeCanvas.ConeTransforms"],g=PS["ConeCanvas.ConeControlTypes"],w=(PS["ConeCanvas.Preferences"],PS["ConeCanvas.GeometryTypes"]),_=PS.Extensions,$=PS["Control.Monad.Eff"],C=PS["Data.Foldable"],S=function(e,n){var t=function(e){return l.min$_$_$(l.max$_$_$(e,-.5),.5)},r=e.rightBottomRear.y-e.leftTopFront.y,o=(n-e.leftTopFront.y)/r,a=o-.5;return 2*-t(a)},y=40,P=function(e){var n=e/100,t=n*n*n*(10+n*(6*n-15));return 100*t},T=function(e,t,r,o){return function(){var a=g.readPaintRef$_$_$(e,t)(),u=n["/="](d.eqList(n.eqInt))(h.selGetPath(o))(h.selGetPath(r));if(u){if(a.selectedChangedCallback instanceof i.Nothing)return n.unit;if(a.selectedChangedCallback instanceof i.Just)return a.selectedChangedCallback.value0(r)();throw new Error("Failed pattern match at ConeCanvas.ConeControl line 168, column 14 - line 171, column 9: "+[a.selectedChangedCallback.constructor.name])}if(!u)return n.unit;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 167, column 5 - line 175, column 1: "+[u.constructor.name])}},b=function(e,t,r){return function(){var o=g.readPaintRef$_$_$(e,t)();if(o.isPainting)return n.unit;if(!o.isPainting)return g.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.isPainting=!0,n})(),g.getConeFront(o.frontend).paintIt(t)(r)(),g.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.isPainting=!1,n})(),n.unit;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 535, column 5 - line 543, column 1: "+[o.isPainting.constructor.name])}},E=function(e,n,t){return function(){var r=g.readPaintRef$_$_$(e,n)();if(t){var o=r.controlState.zoomControl>=1;if(o)return!1;if(!o){var a=l.min$_$_$(r.controlState.zoomControl+.02,1);return g.modifyPaintRef$_$_$(e,n,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoomControl=a,n.zoom=g.realZoom$_$_$(a,e.controlState.currentMaxZoom),n}(),n})(),b(e,n,g.CommandingNothing.value)(),!0}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 731, column 13 - line 742, column 9: "+[o.constructor.name])}if(!t){var i=r.controlState.zoomControl<=-1;if(i)return!1;if(!i){var a=l.max$_$_$(r.controlState.zoomControl-.02,-1);return g.modifyPaintRef$_$_$(e,n,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoomControl=a,n.zoom=g.realZoom$_$_$(a,e.controlState.currentMaxZoom),n}(),n})(),b(e,n,g.CommandingNothing.value)(),!0}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 743, column 13 - line 755, column 1: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 729, column 5 - line 755, column 1: "+[t.constructor.name])}},x=function(e,t,r){return function(){var o=g.readPaintRef$_$_$(e,t)();return function(){return o.state instanceof g.OSTurnMouse?g.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSTurnMouse(r,o.state.value1,o.state.value2),n}):o.state instanceof g.OSAngle?g.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAngle(o.state.value0,r),n}):o.state instanceof g.OSZoom?g.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSZoom(o.state.value0,r.y),n}):n["return"]($.applicativeEff)(o)}()(),!0}},F=function(e,r,a,c){var l=n["return"]($.applicativeEff)({ani:[],isHandled:!1}),s=n["return"]($.applicativeEff)({ani:[],isHandled:!0}),f=d.toList(C.foldableArray)([2,1,4,0]),p=d.toList(C.foldableArray)([0]),w=[m.AnimMoveDown.value,m.AnimMoveDown.value,new m.AnimMoveLeft(3),new m.AnimMoveRight(3),m.AnimMoveUp.value,m.AnimMoveUp.value,new m.AnimMoveLeft(1),new m.AnimMoveLeft(1),new m.AnimMoveRight(2),new m.AnimClockwork(f),new m.AnimClockwork(p),new m.AnimClockwork(f),new m.AnimClockwork(p),m.AnimMoveDown.value,m.AnimMoveDown.value,new m.AnimMoveLeft(3),new m.AnimMoveRight(3),m.AnimMoveUp.value,m.AnimMoveUp.value,new m.AnimMoveLeft(1),new m.AnimMoveLeft(1),new m.AnimMoveRight(2)];return function(){var f=g.readPaintRef$_$_$(e,a)(),d=function(){if(r instanceof g.KLeft){if(!f.prefs.cursorKeys)return n["return"]($.applicativeEff)({ani:[new m.AnimMoveLeft(1)],isHandled:!0});if(n.otherwise)return n["return"]($.applicativeEff)({ani:[new m.AnimMoveRight(1)],isHandled:!0})}if(r instanceof g.KRight){if(!f.prefs.cursorKeys)return n["return"]($.applicativeEff)({ani:[new m.AnimMoveRight(1)],isHandled:!0});if(n.otherwise)return n["return"]($.applicativeEff)({ani:[new m.AnimMoveLeft(1)],isHandled:!0})}if(r instanceof g.KMoveLeft){if(f.prefs.cursorKeys)return n["return"]($.applicativeEff)({ani:[new m.AnimTransformLeft(i.Nothing.value)],isHandled:!0});if(n.otherwise)return n["return"]($.applicativeEff)({ani:[new m.AnimTransformRight(i.Nothing.value)],isHandled:!0})}if(r instanceof g.KMoveRight){if(!f.prefs.cursorKeys)return n["return"]($.applicativeEff)({ani:[new m.AnimTransformLeft(i.Nothing.value)],isHandled:!0});if(n.otherwise)return n["return"]($.applicativeEff)({ani:[new m.AnimTransformRight(i.Nothing.value)],isHandled:!0})}if(r instanceof g.KUp){if(!f.prefs.cursorKeys)return n["return"]($.applicativeEff)({ani:[m.AnimMoveUp.value],isHandled:!0});if(n.otherwise)return n["return"]($.applicativeEff)({ani:[m.AnimMoveDown.value],isHandled:!0})}if(r instanceof g.KDown){if(f.prefs.cursorKeys)return n["return"]($.applicativeEff)({ani:[m.AnimMoveUp.value],isHandled:!0});if(n.otherwise)return n["return"]($.applicativeEff)({ani:[m.AnimMoveDown.value],isHandled:!0})}if(r instanceof g.KMoveUp)return n["return"]($.applicativeEff)({ani:[m.AnimMoveUp.value,new m.AnimTransformUp(i.Nothing.value)],isHandled:!0});if(r instanceof g.KMoveDown)return n["return"]($.applicativeEff)({ani:[new m.AnimTransformDown(i.Nothing.value),m.AnimMoveDown.value],isHandled:!0});if(r instanceof g.KFirst)return n["return"]($.applicativeEff)({ani:[m.AnimTurnToFirst.value],isHandled:!0});if(r instanceof g.KSetFirst)return n["return"]($.applicativeEff)({ani:[new m.AnimTransformShiftToZero(i.Nothing.value)],isHandled:!0});if(r instanceof g.KCut)return n["return"]($.applicativeEff)({ani:[m.AnimCut.value],isHandled:!0});if(r instanceof g.KCopy)return n["return"]($.applicativeEff)({ani:[m.AnimCopy.value],isHandled:!0});if(r instanceof g.KPaste)return n["return"]($.applicativeEff)({ani:[m.AnimPaste.value],isHandled:!0});if(r instanceof g.KLink){if(f.selectionModel instanceof m.OSParent)return s;if(f.selectionModel instanceof m.OSCurrent){var d=u.uncons(u.filter$_$_$(function(e){return e.actionType instanceof m.PrimaryLinkAction?!0:!1},m.actions(e)(h.zipGetEntry(f.selectionModel.value0))));if(d instanceof i.Nothing)return l;if(d instanceof i.Just)return function(){return d.value0.head.action(c)(),l()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 782, column 59 - line 791, column 15: "+[d.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 779, column 52 - line 791, column 15: "+[f.selectionModel.constructor.name])}if(r instanceof g.KClockwork){if(f.selectionModel instanceof m.OSParent)return s;if(f.selectionModel instanceof m.OSCurrent){var p=h.countLoadedNodes$_$_$(e,h.selGetPos$_$_$(e,f.selectionModel));return function(){var n=o.randomInt$_$_$(0,p-1)(),t=h.getZipFromIndex$_$_$(e,h.selGetPos$_$_$(e,f.selectionModel),n)();if(t instanceof i.Nothing)return v.traceA($.applicativeEff)("ConeControl>>keyAction: KClockwork random index not found!")(),l();if(t instanceof i.Just){var r=h.coneGetPath(t.value0);return{ani:[new m.AnimClockwork(r)],isHandled:!0}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 797, column 59 - line 804, column 15: "+[t.constructor.name])}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 791, column 53 - line 804, column 15: "+[f.selectionModel.constructor.name])}if(r instanceof g.KGlobal)return n["return"]($.applicativeEff)({ani:[new m.AnimGlobalView(!1)],isHandled:!0});if(r instanceof g.KUnglobal)return n["return"]($.applicativeEff)({ani:[new m.AnimGlobalView(!0)],isHandled:!0});if(r instanceof g.KZoomNormal)return n["return"]($.applicativeEff)({ani:[new m.AnimZoom(i.Nothing.value)],isHandled:!0});if(r instanceof g.KZoomOut)return n["return"]($.applicativeEff)({ani:[new m.AnimZoom(new i.Just(1))],isHandled:!0});if(r instanceof g.KBench)return function(){return g.modifyPaintRef$_$_$(e,a,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.benchmark=new i.Just({runtime:0,cycles:0}),n})(),{ani:w,isHandled:!0}};if(r instanceof g.KToggleDemo)return function(){return g.modifyPaintRef$_$_$(e,a,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.demoMode=!e.demoMode,n})(),{ani:[],isHandled:!0}};if(r instanceof g.KToggleControl)return function(){return g.modifyPaintRef$_$_$(e,a,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.showControl=!e.controlState.showControl,n}(),n})(),t.writeSTRef$_$_$(f.controlState.needRepaint,!0)(),{ani:[],isHandled:!0}};if(r instanceof g.KToggleIndex)return function(){return g.modifyPaintRef$_$_$(e,a,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.showIndex=!e.controlState.showIndex,n}(),n})(),t.writeSTRef$_$_$(f.controlState.needRepaint,!0)(),{ani:[],isHandled:!0}};if(r instanceof g.KEditModeOn)return function(){return g.modifyPaintRef$_$_$(e,a,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.editMode=!0,n}(),n})(),t.writeSTRef$_$_$(f.controlState.needRepaint,!0)(),s()};if(r instanceof g.KEditModeOff)return function(){return g.modifyPaintRef$_$_$(e,a,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.editMode=!1,n}(),n})(),t.writeSTRef$_$_$(f.controlState.needRepaint,!0)(),s()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 759, column 12 - line 842, column 5: "+[r.constructor.name])}()();return function(){var t=u.uncons(d.ani);if(t instanceof i.Just)return function(){return g.modifyPaintRef$_$_$(e,a,function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.commandQueue=n["++"](n.semigroupArray)(e.commandQueue)(d.ani),t})(),n.unit};if(t instanceof i.Nothing)return n["return"]($.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 842, column 5 - line 849, column 5: "+[t.constructor.name])}()(),d.isHandled}},A=function(e,t,r){if(e===t)return i.Nothing.value;if(n.otherwise){var o=e-t,a=function(){var e=l.abs(f.toNumber(o))>f.toNumber(r)/2;if(e){var n=o>0;if(n)return-(r-o);if(!n)return r+o|0;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 663, column 25 - line 666, column 21: "+[n.constructor.name])}if(!e)return o;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 661, column 20 - line 667, column 9: "+[e.constructor.name])}();return new i.Just(function(){var e=0>a;if(e)return new m.AnimMoveRight(-a);if(!e)return new m.AnimMoveLeft(a);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 667, column 18 - line 669, column 48: "+[e.constructor.name])}())}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 657, column 1 - line 672, column 1: "+[e.constructor.name,t.constructor.name,r.constructor.name])},N=function(){var e=a.now(),n=a.toEpochMilliseconds(e);return n},D=function(e,t,o){var a=function(t){return function(r){var o=d.uncons(r);if(o instanceof i.Nothing)return n["return"]($.applicativeEff)([]);if(o instanceof i.Just)return function(){var n=h.coneDown$_$_$(e,t)();if(n instanceof i.Nothing)return[];if(n instanceof i.Just){var r=h.coneSetPos$_$_$(n.value0,o.value0.head);if(r instanceof i.Nothing)return[];if(r instanceof i.Just){var c=h.coneGetFirstBelow(t),l=h.coneNumLevel(r.value0),s=A(c,o.value0.head,l),f=a(r.value0)(o.value0.tail)();if(s instanceof i.Just){var v=d["null"](o.value0.tail);if(v)return[s.value0];if(!v)return u[":"](s.value0)(u[":"](m.AnimMoveDown.value)(f));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 648, column 47 - line 650, column 85: "+[v.constructor.name])}if(s instanceof i.Nothing){var p=d["null"](o.value0.tail);if(p)return[];if(!p)return u[":"](m.AnimMoveDown.value)(f);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 652, column 48 - line 654, column 81: "+[p.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 646, column 29 - line 656, column 1: "+[s.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 639, column 21 - line 656, column 1: "+[r.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 636, column 13 - line 656, column 1: "+[n.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 632, column 32 - line 656, column 1: "+[o.constructor.name])}},c=h.coneGetPath(t),l=d.drop$_$_$(d.length(c),o),s=d.take(d.length(c))(o),f=n["/="](d.eqList(n.eqInt))(s)(c);if(f)return r.throwException(r.error("ConeControl*>getAnimationTo_ pathes don't match! superPath: "+(n.show(d.showList(n.showInt))(c)+(" initialPath: "+n.show(d.showList(n.showInt))(s)))));if(!f)return a(t)(l);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 627, column 8 - line 631, column 3: "+[f.constructor.name])},M=function(e,t,o,a,c){return function(){var o=g.readPaintRef$_$_$(e,t)();if(o.state instanceof g.OSAnimate)return!0;if(a instanceof i.Just&&a.value0 instanceof g.CILabel){var l=h.selNumLevel(o.selectionModel),s=h.selGetPosition(o.selectionModel),f=A(s,a.value0.value0,l);return f instanceof i.Just?(g.modifyPaintRef$_$_$(e,t,function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.commandQueue=n["++"](n.semigroupArray)(e.commandQueue)([f.value0]),t})(),!0):!0}if(a instanceof i.Just&&a.value0 instanceof g.CIMainLabel)return!0;if(a instanceof i.Just&&a.value0 instanceof g.CISuperLabel)return g.modifyPaintRef$_$_$(e,t,function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.commandQueue=n["++"](n.semigroupArray)(e.commandQueue)(u.replicate$_$_$(a.value0.value0,m.AnimMoveUp.value)),t})(),!0;if(a instanceof i.Just&&a.value0 instanceof g.CICard){var p=h.selUp(o.selectionModel);v.traceA($.applicativeEff)("CICard pathTo:"+n.show(d.showList(n.showInt))(a.value0.value0))();var _=function(){if(p instanceof i.Just&&p.value0 instanceof m.OSCurrent)return D(e,p.value0.value0,a.value0.value0);if(p instanceof i.Just&&p.value0 instanceof m.OSParent)return r.throwException(r.error("ConeControl*>pressedButton: impossible"));if(p instanceof i.Nothing)return function(){var n=D(e,h.selGetPos$_$_$(e,o.selectionModel),a.value0.value0)();return u[":"](m.AnimMoveDown.value)(n)};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 585, column 37 - line 593, column 29: "+[p.constructor.name])}()();return g.modifyPaintRef$_$_$(e,t,function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.commandQueue=n["++"](n.semigroupArray)(e.commandQueue)(_),t})(),!0}if(a instanceof i.Just&&a.value0 instanceof g.CIZoom)return g.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSZoom(a.value0.value0,c.y),
n})(),v.traceA($.applicativeEff)("buttonPressed CIZoom y: "+(n.show(n.showNumber)(c.y)+(" rect: "+n.show(w.showCuboid(n.showNumber))(a.value0.value0))))(),!0;if(a instanceof i.Just&&a.value0 instanceof g.CIAngel)return g.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAngle(a.value0.value0,{x:c.x,y:c.y}),n})(),v.traceA($.applicativeEff)("buttonPressed CIAngel x: "+(n.show(n.showNumber)(c.x)+(" y: "+(n.show(n.showNumber)(c.y)+(" rect: "+n.show(w.showCuboid(n.showNumber))(a.value0.value0))))))(),!0;if(a instanceof i.Just&&a.value0 instanceof g.CITurn){var C={x:a.value0.value0.leftTopFront.x+(a.value0.value0.rightBottomRear.x-a.value0.value0.leftTopFront.x)/2,y:a.value0.value0.rightBottomRear.y+(a.value0.value0.leftTopFront.y-a.value0.value0.rightBottomRear.y)/2};return g.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSTurnMouse({x:c.x,y:c.y},{x:c.x,y:c.y},C),n})(),v.traceA($.applicativeEff)("buttonPressed CITurn x: "+(n.show(n.showNumber)(c.x)+(" y: "+(n.show(n.showNumber)(c.y)+(" rect: "+n.show(w.showCuboid(n.showNumber))(a.value0.value0))))))(),!0}return!0}},L=function(e,t,r){if(t&&r)return{p1:function(){var n=60>e;if(n)return 100;if(!n)return 2.5*(40-(e-60));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 462, column 13 - line 462, column 66: "+[n.constructor.name])}(),p2:function(){var n=e>70;if(n)return 0;if(!n){var t=30>e;if(t)return 100;if(!t)return 2.5*(40-(e-30));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 464, column 9 - line 464, column 62: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 463, column 13 - line 464, column 62: "+[n.constructor.name])}(),p3:function(){var n=e>40;if(n)return 0;if(!n)return 2.5*(40-e);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 465, column 14 - line 465, column 56: "+[n.constructor.name])}()};if(t&&!r)return{p1:function(){var n=40>e;if(n)return 100;if(!n)return 1.6*(60-(e-40));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 467, column 13 - line 467, column 66: "+[n.constructor.name])}(),p2:function(){var n=e>60;if(n)return 0;if(!n)return 1.6*(60-e);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 468, column 13 - line 468, column 55: "+[n.constructor.name])}(),p3:0};if(!t&&r)return{p1:100,p2:function(){var n=40>e;if(n)return 100;if(!n)return 1.6*(60-(e-40));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 472, column 13 - line 472, column 66: "+[n.constructor.name])}(),p3:function(){var n=e>60;if(n)return 0;if(!n)return 1.6*(60-e);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 473, column 13 - line 473, column 55: "+[n.constructor.name])}()};if(n.otherwise)return{p1:100,p2:100-e,p3:0};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 460, column 1 - line 476, column 1: "+[e.constructor.name,t.constructor.name,r.constructor.name])},O=function(e,n,t){var r=l.atan2$_$_$(n.x,n.y),o=l.atan2$_$_$(e.x,e.y),a=r-o,i=-(100*a*f.toNumber(t))/(2*l.pi);return i},I=function(e){return function(n){return function(t){var r=100-100*(n-t)/e;return r}}},R=function(e){return I(e.aniTimeT)},k=function(e){return I(e.aniTimeUD)},U=function(e,n){return I(e.aniTimeLR*f.toNumber(n))},G=function(e,n){return I(e.aniTimeLR*(n/100))},B=function(e){return I(e.aniTimeF)},J=function(e,n){var t=function(e){return l.min$_$_$(l.max$_$_$(e,-.5),.5)},r=e.rightBottomRear.y-e.leftTopFront.y,o=(n.y-e.leftTopFront.y)/r,a=o-.5,i=e.rightBottomRear.x-e.leftTopFront.x,u=(n.x-e.leftTopFront.x)/i,c=u-.5;return{x:2*t(c),y:2*-t(a)}},z=function(e,n){var t=l.atan2$_$_$(n.x,n.y),r=l.atan2$_$_$(e.x,e.y);return t-r},H=function(e,n,t){var r=h.selGetPosition(t),o=h.selNumLevel(t),a=z(e,n),i=a/(2*l.pi)*f.toNumber(o),u=i-l.round(i),c=function(){var e=u>0;if(e)return 1;if(!e)return-1;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 497, column 22 - line 498, column 5: "+[e.constructor.name])}(),s=100*l.abs(u),d=r+f.round(i)|0,v=_.modInt$_$_$(d,o);return{selectedIndex:v,percentage:s,direction:c}},W=function(e,r,o,a){return function(){var o=g.readPaintRef$_$_$(e,r)();return function(){if(o.state instanceof g.OSTurnMouse){var u=H({x:a.x-o.state.value2.x,y:-(a.y-o.state.value2.y)},{x:o.state.value1.x-o.state.value2.x,y:-(o.state.value1.y-o.state.value2.y)},o.selectionModel),c=h.selSetSel$_$_$(o.selectionModel,u.selectedIndex);if(c instanceof i.Just)return function(){var n=N();return g.modifyPaintRef$_$_$(e,r,function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.selectionModel=c.value0,t.state=function(){var e=u.direction>0;if(e)return new g.OSAnimate(new g.AniMoveLeft(u.percentage,1));if(!e)return new g.OSAnimate(new g.AniMoveRight(u.percentage,1));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 685, column 56 - line 687, column 88: "+[e.constructor.name])}(),t.animateStartTime=n,t})(),T(e,r,c.value0,o.selectionModel)()};if(c instanceof i.Nothing)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n})(),n.unit};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 679, column 17 - line 693, column 7: "+[c.constructor.name])}if(o.state instanceof g.OSAngle)return s["*>"]($.applyEff)(g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n}))(n["return"]($.applicativeEff)(n.unit));if(o.state instanceof g.OSZoom)return s["*>"]($.applyEff)(g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n}))(n["return"]($.applicativeEff)(n.unit));var l=""!==o.controlState.pressed;if(l)return function(){return t.writeSTRef$_$_$(o.controlState.needRepaint,!0)(),g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.pressed="",n}(),n})(),n.unit};if(!l)return n["return"]($.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 697, column 12 - line 703, column 3: "+[l.constructor.name])}()(),!0}},j=function(e,r,o,a){var s=function(n){return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n})(),t.writeSTRef$_$_$(n.animatePaintRef,i.Nothing.value)(),b(e,r,g.CommandingNothing.value)()}};return function(){var w=g.readPaintRef$_$_$(e,r)();return t.writeSTRef$_$_$(w.animatePaintRef,new i.Just(o))(),function(){if(w.state instanceof g.OSTurnMouse){var C=O({x:w.state.value0.x-w.state.value2.x,y:-(w.state.value0.y-w.state.value2.y)},{x:w.state.value1.x-w.state.value2.x,y:-(w.state.value1.y-w.state.value2.y)},h.selNumLevel(w.selectionModel));return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSTurnMouse({x:w.state.value0.x,y:w.state.value0.y},{x:w.state.value1.x,y:w.state.value1.y},{x:w.state.value2.x,y:w.state.value2.y}),n})(),b(e,r,new g.CommandingTurn(C,-1))()}}if(w.state instanceof g.OSAngle){var y=J(w.state.value0,w.state.value1),E=l.abs(y.x-w.controlState.angleSelect.x)>.01||l.abs(y.y-w.controlState.angleSelect.y)>.01;if(E)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.angleSelect=y,n}(),n})(),b(e,r,g.CommandingNothing.value)()};if(!E)return n["return"]($.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 197, column 24 - line 202, column 9: "+[E.constructor.name])}if(w.state instanceof g.OSZoom){var x=S(w.state.value0,w.state.value1),F=l.abs(w.controlState.zoomControl-x)>.01;if(F)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=g.realZoom$_$_$(x,e.controlState.currentMaxZoom),n.zoomControl=x,n}(),n})(),b(e,r,g.CommandingNothing.value)()};if(!F)return n["return"]($.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 206, column 24 - line 213, column 9: "+[F.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniMoveLeft){var A=U(w.prefs,w.state.value0.value1)(o)(w.animateStartTime),N=0>=A;if(N)return s(w);if(!N)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniMoveLeft(A,w.state.value0.value1)),n})(),b(e,r,new g.CommandingTurn(-P(A)*f.toNumber(w.state.value0.value1),w.state.value0.value1))()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 215, column 13 - line 221, column 9: "+[N.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniMoveRight){var A=U(w.prefs,w.state.value0.value1)(o)(w.animateStartTime),D=0>=A;if(D)return s(w);if(!D)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniMoveRight(A,w.state.value0.value1)),n})(),b(e,r,new g.CommandingTurn(P(A)*f.toNumber(w.state.value0.value1),w.state.value0.value1))()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 223, column 13 - line 229, column 9: "+[D.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniMoveUp){var A=k(w.prefs)(o)(w.animateStartTime),M=0>=A;if(M)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=w.state.value0.value2,n.zoomControl=g.zoomControl$_$_$(w.state.value0.value2,e.controlState.currentMaxZoom),n}(),n})(),t.writeSTRef$_$_$(w.animatePaintRef,i.Nothing.value)(),b(e,r,g.CommandingNothing.value)()};if(!M){var I=w.state.value0.value1+(w.state.value0.value1-w.state.value0.value2)*-(100-A)/100,z=P(A);return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniMoveUp(A,w.state.value0.value1,w.state.value0.value2)),n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=I,n.zoomControl=g.zoomControl$_$_$(I,e.controlState.currentMaxZoom),n}(),n})(),b(e,r,new g.CommandingUpDown(-z))()}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 231, column 13 - line 251, column 9: "+[M.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniMoveDown){var A=k(w.prefs)(o)(w.animateStartTime),H=0>=A;if(H)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=w.state.value0.value2,n.zoomControl=g.zoomControl$_$_$(w.state.value0.value2,e.controlState.currentMaxZoom),n}(),n})(),t.writeSTRef$_$_$(w.animatePaintRef,i.Nothing.value)(),b(e,r,g.CommandingNothing.value)()};if(!H){var I=w.state.value0.value1+(w.state.value0.value1-w.state.value0.value2)*-(100-A)/100,z=P(A);return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniMoveDown(A,w.state.value0.value1,w.state.value0.value2)),n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=I,n.zoomControl=g.zoomControl$_$_$(I,e.controlState.currentMaxZoom),n}(),n})(),b(e,r,new g.CommandingUpDown(z))()}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 253, column 12 - line 273, column 9: "+[H.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniZoom){var A=k(w.prefs)(o)(w.animateStartTime),W=0>=A;if(W)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=w.state.value0.value2,n.zoomControl=g.zoomControl$_$_$(w.state.value0.value2,e.controlState.currentMaxZoom),n}(),n})(),t.writeSTRef$_$_$(w.animatePaintRef,i.Nothing.value)(),b(e,r,g.CommandingNothing.value)()};if(!W){var I=w.state.value0.value1+(w.state.value0.value1-w.state.value0.value2)*-(100-A)/100;return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniZoom(A,w.state.value0.value1,w.state.value0.value2)),n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=I,n.zoomControl=g.zoomControl$_$_$(I,e.controlState.currentMaxZoom),n}(),n})(),b(e,r,g.CommandingNothing.value)()}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 275, column 13 - line 292, column 9: "+[W.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniTransform){var A=R(w.prefs)(o)(w.animateStartTime),j=0>=A;if(j)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n.selectionModel=w.state.value0.value1.transAim,n})(),t.writeSTRef$_$_$(w.animatePaintRef,i.Nothing.value)(),b(e,r,g.CommandingNothing.value)(),T(e,r,w.state.value0.value1.transAim,w.selectionModel)(),w.callback()};if(!j)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniTransform(A,w.state.value0.value1)),n})(),b(e,r,new g.CommandingTrans(p.buildTransform$_$_$(P(A),w.state.value0.value1.transPrims)))()};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 294, column 13 - line 310, column 9: "+[j.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniClockwork){var A=B(w.prefs)(o)(w.animateStartTime),q=0>=A;if(q){var V=h.selGetPos$_$_$(e,w.selectionModel);return function(){var o=h.coneSetPath$_$_$(e,V,w.state.value0.value2)();if(o instanceof i.Nothing)return v.trace("AniClockwork finished but can't set path: "+n.show(d.showList(n.showInt))(w.state.value0.value2))(function(e){return s(w)})();if(o instanceof i.Just){var a=h.selFromPos(o.value0);return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n.selectionModel=a,n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=w.state.value0.value5,n.zoomControl=g.zoomControl$_$_$(w.state.value0.value5,e.controlState.currentMaxZoom),n}(),n})(),t.writeSTRef$_$_$(w.animatePaintRef,i.Nothing.value)(),T(e,r,a,w.selectionModel)(),b(e,r,g.CommandingNothing.value)()}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 316, column 21 - line 332, column 17: "+[o.constructor.name])}}if(!q){var I=w.state.value0.value4+(w.state.value0.value4-w.state.value0.value5)*-(100-A)/100,z=P(A),Z=n["/="](d.eqList(n.eqInt))(w.state.value0.value2)(w.state.value0.value3),X=n["/="](d.eqList(n.eqInt))(w.state.value0.value1)(w.state.value0.value3),K=L(A,X,Z);return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniClockwork(A,w.state.value0.value1,w.state.value0.value2,w.state.value0.value3,w.state.value0.value4,w.state.value0.value5)),n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.zoom=I,n.zoomControl=g.zoomControl$_$_$(I,e.controlState.currentMaxZoom),n}(),n})(),b(e,r,new g.CommandingClockwork({ccTotal:z,ccFirst:P(K.p1),ccSecond:P(K.p2),ccThird:P(K.p3),ccFrom:w.state.value0.value1,ccTo:w.state.value0.value2,ccUpper:w.state.value0.value3}))()}}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 312, column 13 - line 351, column 9: "+[q.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniGlobalView)return v.trace("AniGlobalView: "+n.show(n.showBoolean)(w.state.value0.value1))(function(t){var a=l.max$_$_$(G(w.prefs,w.state.value0.value0)(o)(w.animateStartTime),0);return function(){return function(){var t=v.trace("newN: "+n.show(n.showNumber)(a))(function(e){return 0===a});if(t){if(w.state.value0.value1)return s(w);if(!w.state.value0.value1){var o=0===w.state.value0.value0;if(o)return n["return"]($.applicativeEff)(n.unit);if(!o)return function(){return b(e,r,new g.CommandingGlobal(P(100-a),w.state.value0.value1))(),n.unit};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 356, column 30 - line 362, column 17: "+[o.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 354, column 22 - line 362, column 17: "+[w.state.value0.value1.constructor.name])}if(!t)return b(e,r,new g.CommandingGlobal(P(100-a),w.state.value0.value1));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 353, column 13 - line 363, column 13: "+[t.constructor.name])}()(),function(){var t=u.uncons(w.commandQueue);return t instanceof i.Just&&t.value0.head instanceof m.AnimGlobalView&&t.value0.head.value0&&w.state.value0.value1===!1?function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniGlobalView(100-a,!0)),n.animateStartTime=o,n.commandQueue=c.tail(w.commandQueue),n})(),n.unit}:t instanceof i.Just&&w.state.value0.value1===!1?function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(new g.AniGlobalView(100-a,!0)),n.animateStartTime=o,n})(),n.unit}:n["return"]($.applicativeEff)(n.unit)}()(),n.unit}});if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniPause){var Y=w.animateStartTime+w.state.value0.value0>o;if(Y)return function(){return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=g.OSNormal.value,n})(),t.writeSTRef$_$_$(w.animatePaintRef,i.Nothing.value)(),n.unit};if(!Y)return n["return"]($.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 379, column 13 - line 387, column 9: "+[Y.constructor.name])}if(w.state instanceof g.OSAnimate&&w.state.value0 instanceof g.AniNull)return s(w);if(w.state instanceof g.OSNormal)return function(){var l=t.readSTRef(w.controlState.needRepaint)();!function(){var o=a||l;if(o)return function(){return t.writeSTRef$_$_$(w.animatePaintRef,i.Nothing.value)(),b(e,r,g.CommandingNothing.value)()};if(!o)return n["return"]($.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.ConeControl line 390, column 13 - line 394, column 13: "+[o.constructor.name])}()();var s=function(){var t=u.uncons(w.commandQueue);if(t instanceof i.Nothing)return n["return"]($.applicativeEff)(i.Nothing.value);if(t instanceof i.Just)return function(){!function(){return t.value0.head instanceof m.AnimCopy?_.bindConst$_$_$($.bindEff,g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.copySelection=new g.SingleSelection(w.selectionModel),n}),n["return"]($.applicativeEff)(n.unit)):t.value0.head instanceof m.AnimCut?_.bindConst$_$_$($.bindEff,g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.copySelection=new g.SingleSelection(w.selectionModel),n}),n["return"]($.applicativeEff)(n.unit)):n["return"]($.applicativeEff)(n.unit)}()();var o=p.toAnimate$_$_$(e,w,t.value0.head)();return new i.Just(o)};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 395, column 17 - line 404, column 13: "+[t.constructor.name])}()();if(s instanceof i.Just&&s.value0.condNewSelection instanceof i.Nothing&&s.value0.newAnim instanceof g.AniNull)return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.commandQueue=c.tail(w.commandQueue),n})(),n.unit;if(s instanceof i.Just&&s.value0.condNewSelection instanceof i.Nothing)return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(s.value0.newAnim),n.animateStartTime=o,n.commandQueue=c.tail(w.commandQueue),n})(),n.unit;if(s instanceof i.Just&&s.value0.condNewSelection instanceof i.Just)return g.modifyPaintRef$_$_$(e,r,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.state=new g.OSAnimate(s.value0.newAnim),n.animateStartTime=o,n.selectionModel=s.value0.condNewSelection.value0,n.commandQueue=c.tail(w.commandQueue),n})(),T(e,r,s.value0.condNewSelection.value0,w.selectionModel)();if(s instanceof i.Nothing)return n.unit;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 404, column 13 - line 426, column 5: "+[s.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.ConeControl line 186, column 5 - line 426, column 5: "+[w.state.constructor.name])}()(),n.unit}},q=function(e,t,r,o,a,u,c,l){return function(){var f=g.emptyPaintState$_$_$(e,t,r,"ConeCanvas",a,u,c,l)(),d=g.newPaintRef$_$_$(e,f)(),v={startup:function(e){return g.getConeFront(l).startCanvas(d)(e)},setModel:function(t){return function(){var r=(g.readPaintRef$_$_$(e,d)(),[new m.AnimZoom(i.Nothing.value)]);g.modifyPaintRef$_$_$(e,d,function(e){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);return o.selectionModel=t,o.commandQueue=n["++"](n.semigroupArray)(e.commandQueue)(r),o})();var o=N();return j(e,d,o,!0)(),n.unit}},getModel:function(){var n=g.readPaintRef$_$_$(e,d)();return n.selectionModel},selectPath:function(t){return function(){var r=g.readPaintRef$_$_$(e,d)();if(r.selectionModel instanceof m.OSParent)return!1;if(r.selectionModel instanceof m.OSCurrent){var o=h.coneSetPath$_$_$(e,r.selectionModel.value0,t)();if(o instanceof i.Nothing)return!1;if(o instanceof i.Just)return g.modifyPaintRef$_$_$(e,d,function(e){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);return o.commandQueue=n["++"](n.semigroupArray)(r.commandQueue)([new m.AnimClockwork(t)]),o})(),!0;throw new Error("Failed pattern match at ConeCanvas.ConeControl line 116, column 35 - line 122, column 68: "+[o.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeControl line 112, column 27 - line 122, column 68: "+[r.selectionModel.constructor.name])}},selectedPath:function(){var n=g.readPaintRef$_$_$(e,d)();return h.coneGetPath(h.selGetPos$_$_$(e,n.selectionModel))},modelChanged:function(t){return function(){return g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.modelChangedCallback=new i.Just(t),n})(),n.unit}},selectedChanged:function(t){return function(){return g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.selectedChangedCallback=new i.Just(t),n})(),n.unit}},animate:function(t){return function(){g.modifyPaintRef$_$_$(e,d,function(e){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);return r.commandQueue=n["++"](n.semigroupArray)(e.commandQueue)(t),r})();var r=N();return j(e,d,r,!0)(),n.unit}},animateFinishedCallback:function(t){return function(){return g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.callback=t,n})(),n.unit}},keyCallback:function(t){return function(){return g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.keyCallback=t,n})(),n.unit}},alertCallback:function(t){return function(){return g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.alertCallback=t,n})(),n.unit}},loadIconCallback:function(t){return s["*>"]($.applyEff)(g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.loadIconCallback=t,n}))(n["return"]($.applicativeEff)(n.unit))},loadSTLCallback:function(t){return s["*>"]($.applyEff)(g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.loadSTLCallback=t,n}))(n["return"]($.applicativeEff)(n.unit))},cycleCallback:function(t){return s["*>"]($.applyEff)(g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.cycleCallback=t,n}))(n["return"]($.applicativeEff)(n.unit))}};return function(){if(o instanceof i.Nothing)return n["return"]($.applicativeEff)(n.unit);if(o instanceof i.Just)return s["*>"]($.applyEff)(g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.prefs=o.value0,n}))(n["return"]($.applicativeEff)(n.unit));throw new Error("Failed pattern match at ConeCanvas.ConeControl line 157, column 5 - line 160, column 5: "+[o.constructor.name])}()(),g.modifyPaintRef$_$_$(e,d,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.controlState=function(){var n={};for(var t in e.controlState)e.controlState.hasOwnProperty(t)&&(n[t]=e.controlState[t]);return n.showControl=e.prefs.controlAreaInitialVisible,n}(),n})(),v}};e.getMillisecondsTime=N,e.stepTime=y,e.keyAction$_$_$=F,e.scrollNotified$_$_$=E,e.motionNotified$_$_$=x,e.releasedButton$_$_$=W,e.pressedButton$_$_$=M,e.animateFunc$_$_$=j,e.initConeCanvas$_$_$=q}(PS["ConeCanvas.ConeControl"]=PS["ConeCanvas.ConeControl"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.Maybe"],PS["Data.Either"]),r=PS["Data.List"],o=PS["Data.Traversable"],a=PS["Data.String"],i=PS["ConeCanvas.ConeModel"],u=PS["Control.Monad.Eff"],c=PS["Data.Foldable"],l=function(e){return function(a){return function(s){return function(f){return function(){var d=i.nodeGetChildren$_$_$(e,f)(),v=o.sequence(r.traversableList)(u.applicativeEff)(n.map(r.functorList)(l(e)(a)(s))(d))(),m=r.concat(v),h=a(f.value0.entry)(s),p=r["null"](m);if(p)return r.toList(c.foldableArray)([new i.ConeNode({entry:f.value0.entry,nodeId:0,firstInd:0,children:new t.Right(r.Nil.value)})]);if(!p){var g=!h;if(g)return m;if(!g)return r.toList(c.foldableArray)([new i.ConeNode({entry:f.value0.entry,nodeId:0,firstInd:0,children:new t.Right(m)})]);throw new Error("Failed pattern match at ConeCanvas.ConeFilter line 32, column 13 - line 37, column 1: "+[g.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.ConeFilter line 29, column 5 - line 37, column 1: "+[p.constructor.name])}}}}},s=function(e){return l(e)(function(n){return function(t){return a.contains$_$_$(t,i.label(e)(n))}})};e.filterContainsString=s,e.filterConeNode=l}(PS["ConeCanvas.ConeFilter"]=PS["ConeCanvas.ConeFilter"]||{}),function(e){"use strict";e.rotateSTX$_$_$=function(e,n){return function(){var t=Math.cos(e),r=Math.sin(e),o=n[4]*t+n[8]*r,a=n[5]*t+n[9]*r,i=n[6]*t+n[10]*r,u=n[7]*t+n[11]*r,c=n[4]*-r+n[8]*t,l=n[5]*-r+n[9]*t,s=n[6]*-r+n[10]*t,f=n[7]*-r+n[11]*t;n[4]=o,n[5]=a,n[6]=i,n[7]=u,n[8]=c,n[9]=l,n[10]=s,n[11]=f}},e.rotateSTY$_$_$=function(e,n){return function(){var t=Math.cos(e),r=Math.sin(e),o=n[0]*t+n[8]*-r,a=n[1]*t+n[9]*-r,i=n[2]*t+n[10]*-r,u=n[3]*t+n[11]*-r,c=n[0]*r+n[8]*t,l=n[1]*r+n[9]*t,s=n[2]*r+n[10]*t,f=n[3]*r+n[11]*t;n[0]=o,n[1]=a,n[2]=i,n[3]=u,n[8]=c,n[9]=l,n[10]=s,n[11]=f}},e.translateST$_$_$=function(e,n){return function(){for(var t=0;4>t;t++)n[t+12]+=n[t]*e[0]+n[t+4]*e[1]+n[t+8]*e[2]}},e.scaleST3$_$_$=function(e,n,t,r){return function(){r[0]=r[0]*e,r[1]=r[1]*e,r[2]=r[2]*e,r[3]=r[3]*e,r[4]=r[4]*n,r[5]=r[5]*n,r[6]=r[6]*n,r[7]=r[7]*n,r[8]=r[8]*t,r[9]=r[9]*t,r[10]=r[10]*t,r[11]=r[11]*t}}}(PS["Data.ST.Matrix4"]=PS["Data.ST.Matrix4"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.TypeNat"],r=PS["Data.Array"],o=(PS["Data.Maybe.Unsafe"],PS["Type.Proxy"]),a=PS.Extensions,i=function(e){return e},u=function(e){return e},c=function(e,a){var u=t.sized(e)(o.Proxy.value);return i(r.concat(n["<$>"](n.functorArray)(function(e){return n["<$>"](n.functorArray)(function(n){return a(e)(n)})(r.range$_$_$(0,u-1))})(r.range$_$_$(0,u-1))))},l=function(e){return c(e,function(e){return function(n){var t=e===n;if(t)return 1;if(!t)return 0;throw new Error("Failed pattern match at Data.Matrix line 85, column 31 - line 88, column 1: "+[t.constructor.name])}})},s=function(e,i){var u=t.sized(e)(o.Proxy.value),c=u*u|0;if(c===r.length(i))return i;if(n.otherwise)return a.fail("Matrix>>fromArray: Wrong array length!");throw new Error("Failed pattern match at Data.Matrix line 107, column 6 - line 111, column 1: "+[c.constructor.name])};e.Mat=i,e.toArray=u,e.fromArray$_$_$=s,e["identity'"]=l,e.generate$_$_$=c}(PS["Data.Matrix"]=PS["Data.Matrix"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.TypeNat"],PS["Data.Matrix"],PS["Data.Vector3"]),r=(PS["Data.Vector4"],PS["Data.Vector"]),o=PS["Data.Maybe"],a=(PS.Math,PS.Extensions),i=function(e,n,t,r){if(3===e.length&&16===n.length&&16===t.length&&4===r.length){var i=[n[0]*e[0]+n[4]*e[1]+n[8]*e[2]+n[12],n[1]*e[0]+n[5]*e[1]+n[9]*e[2]+n[13],n[2]*e[0]+n[6]*e[1]+n[10]*e[2]+n[14],n[3]*e[0]+n[7]*e[1]+n[11]*e[2]+n[15]];if(4===i.length){var u=[t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],-i[2]];if(4===u.length){var c=0===u[3];if(c)return o.Nothing.value;if(!c){var l=1/u[3],s=u[2]*l,f=u[1]*l,d=u[0]*l;return new o.Just([(.5*d+.5)*r[2]+r[0],(.5*f+.5)*r[3]+r[1],.5*(1+s)])}throw new Error("Failed pattern match at Data.Matrix4 line 396, column 21 - line 410, column 17: "+[c.constructor.name])}return a.fail("Matrix4>>project: Impossible!")}return a.fail("Matrix4>>project: Impossible!")}return a.fail("Matrix4>>project: Impossible!")},u=function(e,n){return 16===e.length&&4===n.length?[e[0]*n[0]+e[4]*n[1]+e[8]*n[2]+e[12]*n[3],e[1]*n[0]+e[5]*n[1]+e[9]*n[2]+e[13]*n[3],e[2]*n[0]+e[6]*n[1]+e[10]*n[2]+e[14]*n[3],e[3]*n[0]+e[7]*n[1]+e[11]*n[2]+e[15]*n[3]]:a.fail("Matrix4>>mulMatVect: Impossible!")},c=function(e,n){return 16===e.length&&16===n.length?[e[0]*n[0]+e[4]*n[1]+e[8]*n[2]+e[12]*n[3],e[1]*n[0]+e[5]*n[1]+e[9]*n[2]+e[13]*n[3],e[2]*n[0]+e[6]*n[1]+e[10]*n[2]+e[14]*n[3],e[3]*n[0]+e[7]*n[1]+e[11]*n[2]+e[15]*n[3],e[0]*n[4]+e[4]*n[5]+e[8]*n[6]+e[12]*n[7],e[1]*n[4]+e[5]*n[5]+e[9]*n[6]+e[13]*n[7],e[2]*n[4]+e[6]*n[5]+e[10]*n[6]+e[14]*n[7],e[3]*n[4]+e[7]*n[5]+e[11]*n[6]+e[15]*n[7],e[0]*n[8]+e[4]*n[9]+e[8]*n[10]+e[12]*n[11],e[1]*n[8]+e[5]*n[9]+e[9]*n[10]+e[13]*n[11],e[2]*n[8]+e[6]*n[9]+e[10]*n[10]+e[14]*n[11],e[3]*n[8]+e[7]*n[9]+e[11]*n[10]+e[15]*n[11],e[0]*n[12]+e[4]*n[13]+e[8]*n[14]+e[12]*n[15],e[1]*n[12]+e[5]*n[13]+e[9]*n[14]+e[13]*n[15],e[2]*n[12]+e[6]*n[13]+e[10]*n[14]+e[14]*n[15],e[3]*n[12]+e[7]*n[13]+e[11]*n[14]+e[15]*n[15]]:a.fail("Matrix4>>mulM: Impossible!")},l=function(e,n,t,r,o,a){var i=-2/(a-o),u=2/(r-t),c=2/(n-e),l=-(a+o)/(a-o),s=-(r+t)/(r-t),f=-(n+e)/(n-e);return[c,0,0,0,0,u,0,0,0,0,i,0,f,s,l,1]},s=function(e,n,t,r){return l(e,n,t,r,-1,1)},f=function(e,o,i){if(3===e.length){var u=r.direction$_$_$(e,o);
if(3===u.length){var l=r.normalize(t.cross$_$_$(n.numNumber,i,u));if(3===l.length){var s=r.normalize(t.cross$_$_$(n.numNumber,u,l));if(3===s.length){var f=[1,0,0,0,0,1,0,0,0,0,1,0,-e[0],-e[1],-e[2],1],d=[l[0],s[0],u[0],0,l[1],s[1],u[1],0,l[2],s[2],u[2],0,0,0,0,1];return c(d,f)}return a.fail("Matrix4>>makeRotate: Impossible!")}return a.fail("Matrix4>>makeRotate: Impossible!")}return a.fail("Matrix4>>makeRotate: Impossible!")}return a.fail("Matrix4>>makeLookAt: Impossible!")},d=function(e,n,t,r,o,a){return[2*o/(n-e),0,0,0,0,2*o/(r-t),0,0,(n+e)/(n-e),(r+t)/(r-t),-(a+o)/(a-o),-1,0,0,-2*a*o/(a-o),0]},v=function(e){if(16===e.length){var n=e[10]*e[15]-e[11]*e[14],t=e[9]*e[15]-e[11]*e[13],r=e[9]*e[14]-e[10]*e[13],i=e[8]*e[15]-e[11]*e[12],u=e[8]*e[14]-e[10]*e[12],c=e[8]*e[13]-e[9]*e[12],l=e[2]*e[7]-e[3]*e[6],s=e[1]*e[7]-e[3]*e[5],f=e[1]*e[6]-e[2]*e[5],d=e[0]*e[7]-e[3]*e[4],v=e[0]*e[6]-e[2]*e[4],m=e[0]*e[5]-e[1]*e[4],h=m*n-v*t+d*r+f*i-s*u+l*c,p=0===h;if(p)return o.Nothing.value;if(!p){var g=1/h;return o.Just.create([(e[5]*n-e[6]*t+e[7]*r)*g,(-e[1]*n+e[2]*t-e[3]*r)*g,(e[13]*l-e[14]*s+e[15]*f)*g,(-e[9]*l+e[10]*s-e[11]*f)*g,(-e[4]*n+e[6]*i-e[7]*u)*g,(e[0]*n-e[2]*i+e[3]*u)*g,(-e[12]*l+e[14]*d-e[15]*v)*g,(e[8]*l-e[10]*d+e[11]*v)*g,(e[4]*t-e[5]*i+e[7]*c)*g,(-e[0]*t+e[1]*i-e[3]*c)*g,(e[12]*s-e[13]*d+e[15]*m)*g,(-e[8]*s+e[9]*d-e[11]*m)*g,(-e[4]*r+e[5]*u-e[6]*c)*g,(e[0]*r-e[1]*u+e[2]*c)*g,(-e[12]*f+e[13]*v-e[14]*m)*g,(e[8]*f-e[9]*v+e[10]*m)*g])}throw new Error("Failed pattern match at Data.Matrix4 line 85, column 8 - line 104, column 1: "+[p.constructor.name])}return a.fail("Matrix4>>inverse: Impossible!")},m=function(e,n,t,r){if(3===e.length&&4===r.length){var i=c(t,n),l=v(i);if(l instanceof o.Nothing)return o.Nothing.value;if(l instanceof o.Just){var s=[(e[0]-r[0])/r[2]*2-1,(e[1]-r[1])/r[3]*2-1,2*e[2]-1,1],f=u(l.value0,s);if(4===f.length){var d=0===f[3];if(d)return o.Nothing.value;if(!d){var m=1/f[3];return new o.Just([f[0]*m,f[1]*m,f[2]*m])}throw new Error("Failed pattern match at Data.Matrix4 line 436, column 29 - line 440, column 25: "+[d.constructor.name])}return a.fail("Matrix4>>unProject: Impossible!")}throw new Error("Failed pattern match at Data.Matrix4 line 427, column 8 - line 441, column 1: "+[l.constructor.name])}return a.fail("Matrix4>>unProject: Impossible!")},h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e.mulMatVect$_$_$=u,e.unProject$_$_$=m,e.project$_$_$=i,e.makeLookAt$_$_$=f,e.mulM$_$_$=c,e.makeOrtho2D$_$_$=s,e.makeOrtho$_$_$=l,e.makeFrustum$_$_$=d,e.inverse=v,e.identity=h}(PS["Data.Matrix4"]=PS["Data.Matrix4"]||{}),function(e){"use strict";e.copyImpl=function(e){return function(){var n=e.slice();return n}},e.copyToSTMat$_$_$=function(e,n){return function(){for(var t=0;t<e.length;t++)n[t]=e[t];return{}}}}(PS["Data.ST.Matrix"]=PS["Data.ST.Matrix"]||{}),function(e){"use strict";var n=PS["Data.ST.Matrix"],t=PS.Prelude,r=PS["Control.Monad.Eff"],o=(PS["Control.Monad.ST"],PS["Data.TypeNat"],PS["Data.Array.ST"],PS["Control.Apply"],PS["Data.Matrix"]),a=function(e){return e},i=n.copyImpl,u=function(e){var n=o["identity'"](e);return t["<$>"](r.functorEff)(a)(i(o.toArray(n)))},c=n.copyImpl,l=function(e,n){return function(){var t=c(n)();return o.fromArray$_$_$(e,t)}};e.STMat=a,e["identityST'"]=u,e.fromSTMat$_$_$=l,e.thaw=i,e.freeze=c,e.copyToSTMat$_$_$=n.copyToSTMat$_$_$}(PS["Data.ST.Matrix"]=PS["Data.ST.Matrix"]||{}),function(e){"use strict";var n=PS["Data.ST.Matrix4"];PS.Prelude,PS["Data.TypeNat"],PS["Data.Matrix4"],PS["Data.ST.Matrix"],PS["Control.Monad.Eff"],PS["Control.Monad.ST"];e.scaleST3$_$_$=n.scaleST3$_$_$,e.translateST$_$_$=n.translateST$_$_$,e.rotateSTY$_$_$=n.rotateSTY$_$_$,e.rotateSTX$_$_$=n.rotateSTX$_$_$}(PS["Data.ST.Matrix4"]=PS["Data.ST.Matrix4"]||{}),function(e){"use strict";e.shaderBindings_=function(e){return function(){for(var n={},t=gl.getProgramParameter(e,gl.ACTIVE_UNIFORMS),r=0;t>r;r+=1){var o=gl.getActiveUniform(e,r),a=gl.getUniformLocation(e,o.name),i={};i.uLocation=a,i.uName=o.name,i.uType=o.type,n[o.name]=i}for(var u=gl.getProgramParameter(e,gl.ACTIVE_ATTRIBUTES),c=0;u>c;c+=1){var l=gl.getActiveAttrib(e,c),s=gl.getAttribLocation(e,l.name);gl.enableVertexAttribArray(s);var f={};switch(f.aLocation=s,f.aName=l.name,f.aItemType=l.type,l.type){case gl.FLOAT_VEC2:f.aItemSize=2;break;case gl.FLOAT_VEC3:f.aItemSize=3;break;case gl.FLOAT_VEC4:f.aItemSize=4;break;default:LOG("Unsupported attribute type: "+l.type),f.aItemSize=1}n[l.name]=f}return n}},e.initGL_=function(e,n){return function(){var t=document.getElementById(e);try{gl=t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}catch(r){return!1}return gl?!0:(gl=null,!1)}},e.getCanvasWidth_=function(e){return function(){var n=document.getElementById(e);return n.width}},e.getCanvasHeight_=function(e){return function(){var n=document.getElementById(e);return n.height}},e.requestAnimationFrame_=function(e){if("undefined"==typeof n)var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();return function(){return n(e)}},e.bufferData__=function(e,n,t){return function(){gl.bufferData(e,n,t)}}}(PS["Graphics.WebGL"]=PS["Graphics.WebGL"]||{}),function(e){"use strict";e.runWebGl_=function(e){return e}}(PS["Control.Monad.Eff.WebGL"]=PS["Control.Monad.Eff.WebGL"]||{}),function(e){"use strict";var n=PS["Control.Monad.Eff.WebGL"];PS["Control.Monad.Eff"];e.runWebGl_=n.runWebGl_}(PS["Control.Monad.Eff.WebGL"]=PS["Control.Monad.Eff.WebGL"]||{}),function(e){"use strict";e.activeTexture_=function(e){return function(){gl.activeTexture(e)}},e.attachShader_=function(e,n){return function(){gl.attachShader(e,n)}},e.bindAttribLocation_=function(e,n,t){return function(){gl.bindAttribLocation(e,n,t)}},e.bindBuffer_=function(e,n){return function(){gl.bindBuffer(e,n)}},e.bindFramebuffer_=function(e,n){return function(){gl.bindFramebuffer(e,n)}},e.bindTexture_=function(e,n){return function(){gl.bindTexture(e,n)}},e.blendFunc_=function(e,n){return function(){gl.blendFunc(e,n)}},e.bufferSubData_=function(e,n,t){return function(){gl.bufferSubData(e,n,t)}},e.checkFramebufferStatus_=function(e){return function(){var n=gl.checkFramebufferStatus(e);if(void 0===n)throw"Undefined in  checkFramebufferStatus";return n}},e.clear_=function(e){return function(){gl.clear(e)}},e.clearColor_=function(e,n,t,r){return function(){gl.clearColor(e,n,t,r)}},e.clearDepth_=function(e){return function(){gl.clearDepth(e)}},e.colorMask_=function(e,n,t,r){return function(){gl.colorMask(e,n,t,r)}},e.compileShader_=function(e){return function(){gl.compileShader(e)}},e.createBuffer_=function(){return function(){var e=gl.createBuffer();if(void 0===e)throw"Undefined in  createBuffer";return e}},e.createFramebuffer_=function(){return function(){var e=gl.createFramebuffer();if(void 0===e)throw"Undefined in  createFramebuffer";return e}},e.createProgram_=function(){return function(){var e=gl.createProgram();if(void 0===e)throw"Undefined in  createProgram";return e}},e.createShader_=function(e){return function(){var n=gl.createShader(e);if(void 0===n)throw"Undefined in  createShader";return n}},e.createTexture_=function(){return function(){var e=gl.createTexture();if(void 0===e)throw"Undefined in  createTexture";return e}},e.depthFunc_=function(e){return function(){gl.depthFunc(e)}},e.disable_=function(e){return function(){gl.disable(e)}},e.disableVertexAttribArray_=function(e){return function(){gl.disableVertexAttribArray(e)}},e.drawArrays_=function(e,n,t){return function(){gl.drawArrays(e,n,t)}},e.drawElements_=function(e,n,t,r){return function(){gl.drawElements(e,n,t,r)}},e.enable_=function(e){return function(){gl.enable(e)}},e.enableVertexAttribArray_=function(e){return function(){gl.enableVertexAttribArray(e)}},e.framebufferTexture2D_=function(e,n,t,r,o){return function(){gl.framebufferTexture2D(e,n,t,r,o)}},e.generateMipmap_=function(e){return function(){gl.generateMipmap(e)}},e.getProgramParameter_=function(e,n){return function(){var t=gl.getProgramParameter(e,n);if(void 0===t)throw"Undefined in  getProgramParameter";return t}},e.getShaderParameter_=function(e,n){return function(){var t=gl.getShaderParameter(e,n);if(void 0===t)throw"Undefined in  getShaderParameter";return t}},e.getShaderInfoLog_=function(e){return function(){var n=gl.getShaderInfoLog(e);if(void 0===n)throw"Undefined in  getShaderInfoLog";return n}},e.linkProgram_=function(e){return function(){gl.linkProgram(e)}},e.pixelStorei_=function(e,n){return function(){gl.pixelStorei(e,n)}},e.shaderSource_=function(e,n){return function(){gl.shaderSource(e,n)}},e.texImage2D_=function(e,n,t,r,o,a,i,u,c){return function(){gl.texImage2D(e,n,t,r,o,a,i,u,c)}},e.texParameteri_=function(e,n,t){return function(){gl.texParameteri(e,n,t)}},e.uniform1f_=function(e,n){return function(){gl.uniform1f(e,n)}},e.uniform1i_=function(e,n){return function(){gl.uniform1i(e,n)}},e.uniform2fv_=function(e,n){return function(){gl.uniform2fv(e,n)}},e.uniform3fv_=function(e,n){return function(){gl.uniform3fv(e,n)}},e.uniform4fv_=function(e,n){return function(){gl.uniform4fv(e,n)}},e.uniformMatrix2fv_=function(e,n,t){return function(){gl.uniformMatrix2fv(e,n,t)}},e.uniformMatrix3fv_=function(e,n,t){return function(){gl.uniformMatrix3fv(e,n,t)}},e.uniformMatrix4fv_=function(e,n,t){return function(){gl.uniformMatrix4fv(e,n,t)}},e.useProgram_=function(e){return function(){gl.useProgram(e)}},e.vertexAttribPointer_=function(e,n,t,r,o,a){return function(){gl.vertexAttribPointer(e,n,t,r,o,a)}},e.viewport_=function(e,n,t,r){return function(){gl.viewport(e,n,t,r)}}}(PS["Graphics.WebGLRaw"]=PS["Graphics.WebGLRaw"]||{}),function(e){"use strict";var n=PS["Graphics.WebGLRaw"],t=(PS["Control.Monad.Eff"],PS["Control.Monad.Eff.WebGL"],PS["Data.ArrayBuffer.Types"],PS["Data.Function"],PS.Prelude,0),r=35633,o=33635,a=32820,i=32819,u=5123,c=5121,l=37441,s=37440,f=37443,d=3317,v=5,m=6,h=4,p=10243,g=10242,w=10241,_=10240,$=34073,C=34071,S=34069,y=34074,P=34072,T=34070,b=34067,E=3553,x=33984,F=1024,A=36128,N=35044,D=768,M=776,L=770,O=3089,I=6408,R=6407,k=32823,U=0,G=3333,B=769,J=771,z=775,H=773,W=32770,j=32772,q=1,V=517,Z=512,X=9728,K=35661,Y=6410,Q=6409,ee=35714,ne=3,te=2,re=1,oe=9985,ae=9729,ie=513,ue=515,ce=516,le=518,se=36160,fe=35632,de=35666,ve=35665,me=35664,he=35676,pe=35675,ge=35674,we=5126,_e=514,$e=34963,Ce=35048,Se=774,ye=772,Pe=2929,Te=33306,be=256,Ee=36096,xe=2884,Fe=32769,Ae=32771,Ne=35713,De=16384,Me=36064,Le=33071,Oe=35670,Ie=32969,Re=32971,ke=32968,Ue=32970,Ge=32773,Be=3042,Je=34962,ze=519,He=6406;e._UNPACK_COLORSPACE_CONVERSION_WEBGL=f,e._UNPACK_PREMULTIPLY_ALPHA_WEBGL=l,e._UNPACK_FLIP_Y_WEBGL=s,e._DEPTH_STENCIL_ATTACHMENT=Te,e._STENCIL_ATTACHMENT=A,e._DEPTH_ATTACHMENT=Ee,e._COLOR_ATTACHMENT0=Me,e._FRAMEBUFFER=se,e._COMPILE_STATUS=Ne,e._FLOAT_MAT4=he,e._FLOAT_MAT3=pe,e._FLOAT_MAT2=ge,e._BOOL=Oe,e._FLOAT_VEC4=de,e._FLOAT_VEC3=ve,e._FLOAT_VEC2=me,e._CLAMP_TO_EDGE=Le,e._TEXTURE0=x,e._TEXTURE_CUBE_MAP_NEGATIVE_Z=y,e._TEXTURE_CUBE_MAP_POSITIVE_Z=$,e._TEXTURE_CUBE_MAP_NEGATIVE_Y=P,e._TEXTURE_CUBE_MAP_POSITIVE_Y=C,e._TEXTURE_CUBE_MAP_NEGATIVE_X=T,e._TEXTURE_CUBE_MAP_POSITIVE_X=S,e._TEXTURE_CUBE_MAP=b,e._TEXTURE_WRAP_T=p,e._TEXTURE_WRAP_S=g,e._TEXTURE_MIN_FILTER=w,e._TEXTURE_MAG_FILTER=_,e._LINEAR_MIPMAP_NEAREST=oe,e._LINEAR=ae,e._NEAREST=X,e._ALWAYS=ze,e._GEQUAL=le,e._NOTEQUAL=V,e._GREATER=ce,e._LEQUAL=ue,e._EQUAL=_e,e._LESS=ie,e._NEVER=Z,e._LINK_STATUS=ee,e._MAX_COMBINED_TEXTURE_IMAGE_UNITS=K,e._VERTEX_SHADER=r,e._FRAGMENT_SHADER=fe,e._UNSIGNED_SHORT_5_6_5=o,e._UNSIGNED_SHORT_5_5_5_1=a,e._UNSIGNED_SHORT_4_4_4_4=i,e._LUMINANCE_ALPHA=Y,e._LUMINANCE=Q,e._RGBA=I,e._RGB=R,e._ALPHA=He,e._FLOAT=we,e._UNSIGNED_SHORT=u,e._UNSIGNED_BYTE=c,e._PACK_ALIGNMENT=G,e._UNPACK_ALIGNMENT=d,e._POLYGON_OFFSET_FILL=k,e._SCISSOR_TEST=O,e._DEPTH_TEST=Pe,e._BLEND=Be,e._CULL_FACE=xe,e._TEXTURE_2D=E,e._DYNAMIC_DRAW=Ce,e._STATIC_DRAW=N,e._ELEMENT_ARRAY_BUFFER=$e,e._ARRAY_BUFFER=Je,e._BLEND_COLOR=Ge,e._ONE_MINUS_CONSTANT_ALPHA=j,e._CONSTANT_ALPHA=Ae,e._ONE_MINUS_CONSTANT_COLOR=W,e._CONSTANT_COLOR=Fe,e._BLEND_SRC_ALPHA=Re,e._BLEND_DST_ALPHA=Ue,e._BLEND_SRC_RGB=Ie,e._BLEND_DST_RGB=ke,e._SRC_ALPHA_SATURATE=M,e._ONE_MINUS_DST_COLOR=z,e._DST_COLOR=Se,e._ONE_MINUS_DST_ALPHA=H,e._DST_ALPHA=ye,e._ONE_MINUS_SRC_ALPHA=J,e._SRC_ALPHA=L,e._ONE_MINUS_SRC_COLOR=B,e._SRC_COLOR=D,e._ONE=q,e._ZERO=t,e._TRIANGLE_FAN=m,e._TRIANGLE_STRIP=v,e._TRIANGLES=h,e._LINE_STRIP=ne,e._LINE_LOOP=te,e._LINES=re,e._POINTS=U,e._COLOR_BUFFER_BIT=De,e._STENCIL_BUFFER_BIT=F,e._DEPTH_BUFFER_BIT=be,e.viewport_=n.viewport_,e.vertexAttribPointer_=n.vertexAttribPointer_,e.useProgram_=n.useProgram_,e.uniformMatrix4fv_=n.uniformMatrix4fv_,e.uniformMatrix3fv_=n.uniformMatrix3fv_,e.uniformMatrix2fv_=n.uniformMatrix2fv_,e.uniform4fv_=n.uniform4fv_,e.uniform3fv_=n.uniform3fv_,e.uniform2fv_=n.uniform2fv_,e.uniform1i_=n.uniform1i_,e.uniform1f_=n.uniform1f_,e.texParameteri_=n.texParameteri_,e.texImage2D_=n.texImage2D_,e.shaderSource_=n.shaderSource_,e.pixelStorei_=n.pixelStorei_,e.linkProgram_=n.linkProgram_,e.getShaderInfoLog_=n.getShaderInfoLog_,e.getShaderParameter_=n.getShaderParameter_,e.getProgramParameter_=n.getProgramParameter_,e.generateMipmap_=n.generateMipmap_,e.framebufferTexture2D_=n.framebufferTexture2D_,e.enableVertexAttribArray_=n.enableVertexAttribArray_,e.enable_=n.enable_,e.drawElements_=n.drawElements_,e.drawArrays_=n.drawArrays_,e.disableVertexAttribArray_=n.disableVertexAttribArray_,e.disable_=n.disable_,e.depthFunc_=n.depthFunc_,e.createTexture_=n.createTexture_,e.createShader_=n.createShader_,e.createProgram_=n.createProgram_,e.createFramebuffer_=n.createFramebuffer_,e.createBuffer_=n.createBuffer_,e.compileShader_=n.compileShader_,e.colorMask_=n.colorMask_,e.clearDepth_=n.clearDepth_,e.clearColor_=n.clearColor_,e.clear_=n.clear_,e.checkFramebufferStatus_=n.checkFramebufferStatus_,e.bufferSubData_=n.bufferSubData_,e.blendFunc_=n.blendFunc_,e.bindTexture_=n.bindTexture_,e.bindFramebuffer_=n.bindFramebuffer_,e.bindBuffer_=n.bindBuffer_,e.bindAttribLocation_=n.bindAttribLocation_,e.attachShader_=n.attachShader_,e.activeTexture_=n.activeTexture_}(PS["Graphics.WebGLRaw"]=PS["Graphics.WebGLRaw"]||{}),function(e){"use strict";e.asUint8Array=function(e){var n=new Uint8Array(e);return n},e.asUint16Array=function(e){var n=new Uint16Array(e);return n},e.asFloat32Array=function(e){var n=new Float32Array(e);return n},e.newUint8Array=function(e){var n=new Uint8Array(e);return n},e.asArray=function(e){var n=Array.prototype.slice.call(e);return n},e.length=function(e){return e.length}}(PS["Data.TypedArray"]=PS["Data.TypedArray"]||{}),function(e){"use strict";var n=PS["Data.TypedArray"];PS["Data.ArrayBuffer.Types"],PS["Data.Maybe"],PS.Prelude;e.asArray=n.asArray,e.newUint8Array=n.newUint8Array,e.asFloat32Array=n.asFloat32Array,e.asUint16Array=n.asUint16Array,e.asUint8Array=n.asUint8Array}(PS["Data.TypedArray"]=PS["Data.TypedArray"]||{}),function(e){"use strict";var n=PS["Graphics.WebGL"],t=PS.Prelude,r=PS["Control.Monad.Eff.WebGL"],o=PS["Graphics.WebGLRaw"],a=(PS["Data.ArrayBuffer.Types"],PS["Data.TypedArray"]),i=(PS["Control.Monad.Eff"],PS["Data.Foldable"]),u=PS["Data.Maybe"],c=PS["Data.Array.Unsafe"],l=PS["Data.Array"],s=PS["Data.Either"],f=PS["Data.Int.Bits"],d=PS["Data.Function"],v=PS.Extensions,m=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),h=function(){function e(){}return e.value=new e,e}(),p=function(){function e(){}return e.value=new e,e}(),g=function(){function e(){}return e.value=new e,e}(),w=function(){function e(){}return e.value=new e,e}(),_=function(){function e(){}return e.value=new e,e}(),$=function(){function e(){}return e.value=new e,e}(),C=function(){function e(){}return e.value=new e,e}(),S=function(){function e(){}return e.value=new e,e}(),y=function(){function e(){}return e.value=new e,e}(),P=function(){function e(){}return e.value=new e,e}(),T=function(){function e(){}return e.value=new e,e}(),b=function(){function e(){}return e.value=new e,e}(),E=function(){function e(){}return e.value=new e,e}(),x=function(){function e(){}return e.value=new e,e}(),F=function(){function e(){}return e.value=new e,e}(),A=function(){function e(){}return e.value=new e,e}(),N=function(){function e(){}return e.value=new e,e}(),D=function(){function e(){}return e.value=new e,e}(),M=function(){function e(){}return e.value=new e,e}(),L=function(){function e(){}return e.value=new e,e}(),O=function(){function e(){}return e.value=new e,e}(),I=function(){function e(){}return e.value=new e,e}(),R=function(){function e(){}return e.value=new e,e}(),k=function(){function e(){}return e.value=new e,e}(),U=function(){function e(){}return e.value=new e,e}(),G=function(){function e(){}return e.value=new e,e}(),B=function(){function e(){}return e.value=new e,e}(),J=function(){function e(){}return e.value=new e,e}(),z=function(){function e(){}return e.value=new e,e}(),H=function(){function e(){}return e.value=new e,e}(),W=function(){function e(){}return e.value=new e,e}(),j=function(){function e(){}return e.value=new e,e}(),q=function(){function e(){}return e.value=new e,e}(),V=function(){function e(){}return e.value=new e,e}(),Z=function(){function e(){}return e.value=new e,e}(),X=function(){function e(){}return e.value=new e,e}(),K=function(){function e(){}return e.value=new e,e}(),Y=function(){function e(){}return e.value=new e,e}(),Q=function(){function e(){}return e.value=new e,e}(),ee=function(){function e(){}return e.value=new e,e}(),ne=function(){function e(){}return e.value=new e,e}(),te=function(){function e(){}return e.value=new e,e}(),re=function(){function e(){}return e.value=new e,e}(),oe=function(){function e(){}return e.value=new e,e}(),ae=function(){function e(){}return e.value=new e,e}(),ie=function(){function e(){}return e.value=new e,e}(),ue=function(){function e(){}return e.value=new e,e}(),ce=d.runFn4(o.viewport_),le=function(e){return o.vertexAttribPointer_(e.aLocation,e.aItemSize,o._FLOAT,!1,0,0)},se=function(e,n){if(e.uType===o._BOOL){var r=function(e){if(e)return 1;if(!e)return 0;throw new Error("Failed pattern match at Graphics.WebGL line 282, column 7 - line 283, column 7: "+[e.constructor.name])};return o.uniform1i_(e.uLocation,r(n))}if(t.otherwise)return v.fail("WebGL>>setUniformBoolean: Called for not boolean uniform!");throw new Error("Failed pattern match at Graphics.WebGL line 279, column 1 - line 286, column 1: "+[e.constructor.name,n.constructor.name])},fe=function(e,t,o,a){var i={canvasName:e};return function(){var u=n.initGL_(e,t)();if(u)return r.runWebGl_(a(i))();if(!u)return o("Unable to initialize WebGL. Your browser may not support it.")();throw new Error("Failed pattern match at Graphics.WebGL line 140, column 3 - line 143, column 5: "+[u.constructor.name])}},de=d.runFn1(n.requestAnimationFrame_),ve=function(e){if(e instanceof g)return o._POINTS;if(e instanceof w)return o._LINES;if(e instanceof _)return o._LINE_STRIP;if(e instanceof $)return o._LINE_LOOP;if(e instanceof C)return o._TRIANGLES;if(e instanceof S)return o._TRIANGLE_STRIP;if(e instanceof y)return o._TRIANGLE_FAN;throw new Error("Failed pattern match at Graphics.WebGL line 479, column 1 - line 480, column 1: "+[e.constructor.name])},me=function(e){if(e instanceof P)return o._DEPTH_BUFFER_BIT;if(e instanceof T)return o._STENCIL_BUFFER_BIT;if(e instanceof b)return o._COLOR_BUFFER_BIT;throw new Error("Failed pattern match at Graphics.WebGL line 458, column 1 - line 459, column 1: "+[e.constructor.name])},he=function(e,n){var t=function(){if(e instanceof h)return o._FRAGMENT_SHADER;if(e instanceof p)return o._VERTEX_SHADER;throw new Error("Failed pattern match at Graphics.WebGL line 401, column 25 - line 404, column 3: "+[e.constructor.name])}();return function(){var e=o.createShader_(t)();o.shaderSource_(e,n)(),o.compileShader_(e)();var r=o.getShaderParameter_(e,o._COMPILE_STATUS)();if(r)return new s.Left(e);if(!r){var a=o.getShaderInfoLog_(e)();return new s.Right(a)}throw new Error("Failed pattern match at Graphics.WebGL line 408, column 3 - line 414, column 1: "+[r.constructor.name])}},pe=function(e,t){return function(){var r=o.createBuffer_()();o.bindBuffer_(o._ARRAY_BUFFER,r)();var i=a.asFloat32Array(e);return n.bufferData__(o._ARRAY_BUFFER,i,t)(),{webGLBuffer:r,bufferType:o._ARRAY_BUFFER,bufferSize:l.length(e)}}},ge=function(e){return pe(e,o._DYNAMIC_DRAW)},we=function(e){return pe(e,o._STATIC_DRAW)},_e=function(e,n){return function(){var t=o.createProgram_()();o.attachShader_(t,n)(),o.attachShader_(t,e)(),o.linkProgram_(t)();var r=o.getProgramParameter_(t,o._LINK_STATUS)();if(r)return o.useProgram_(t)(),new u.Just(t);if(!r)return u.Nothing.value;throw new Error("Failed pattern match at Graphics.WebGL line 421, column 3 - line 431, column 1: "+[r.constructor.name])}},$e=function(e,t,r){return function(){var o=he(h.value,e.value0)();if(o instanceof s.Right)return t("Can't compile fragment shader: "+o.value0)();if(o instanceof s.Left){var a=he(p.value,e.value1)();if(a instanceof s.Right)return t("Can't compile vertex shader: "+a.value0)();if(a instanceof s.Left){var i=_e(o.value0,a.value0)();if(i instanceof u.Nothing)return t("Can't init shaders")();if(i instanceof u.Just){var c=n.shaderBindings_(i.value0)();return r(function(){var e={};for(var n in c)c.hasOwnProperty(n)&&(e[n]=c[n]);return e.webGLProgram=i.value0,e}())()}throw new Error("Failed pattern match at Graphics.WebGL line 202, column 13 - line 210, column 1: "+[i.constructor.name])}throw new Error("Failed pattern match at Graphics.WebGL line 198, column 7 - line 210, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at Graphics.WebGL line 194, column 3 - line 210, column 1: "+[o.constructor.name])}},Ce=function(e){return n.getCanvasWidth_(e.canvasName)},Se=function(e){return n.getCanvasHeight_(e.canvasName)},ye=function(e){if(e instanceof E)return o._NEVER;if(e instanceof x)return o._ALWAYS;if(e instanceof F)return o._LESS;if(e instanceof A)return o._EQUAL;if(e instanceof N)return o._LEQUAL;if(e instanceof D)return o._GREATER;if(e instanceof M)return o._GEQUAL;if(e instanceof L)return o._NOTEQUAL;throw new Error("Failed pattern match at Graphics.WebGL line 338, column 1 - line 339, column 1: "+[e.constructor.name])},Pe=function(e,n,r){return function(){o.bindBuffer_(e.bufferType,e.webGLBuffer)();var i=a.asFloat32Array(r);return o.bufferSubData_(e.bufferType,n,i)(),t.unit}},Te=function(e){return o.enableVertexAttribArray_(e.aLocation)},be=function(e,n){return o.drawElements_(ve(e),n,o._UNSIGNED_SHORT,0)},Ee=function(e){return o.disableVertexAttribArray_(e.aLocation)},xe=function(e){return o.depthFunc_(ye(e))},Fe={alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,preferLowPowerToHighPerformance:!1,failIfMajorPerformanceCaveat:!1},Ae=d.runFn4(o.colorMask_),Ne=d.runFn1(o.clearDepth_),De=d.runFn4(o.clearColor_),Me=function(e){return o.clear_(i.foldl(i.foldableArray)(f[".|."])(0)(t.map(t.functorArray)(me)(e)))},Le=function(e){if(e instanceof O)return o._BLEND;if(e instanceof I)return o._DEPTH_TEST;if(e instanceof R)return o._CULL_FACE;if(e instanceof k)return o._POLYGON_OFFSET_FILL;if(e instanceof U)return o._SCISSOR_TEST;throw new Error("Failed pattern match at Graphics.WebGL line 443, column 1 - line 444, column 1: "+[e.constructor.name])},Oe=function(e){return o.disable_(Le(e))},Ie=function(e){return o.enable_(Le(e))},Re=function(e){if(e instanceof G)return o._ARRAY_BUFFER;if(e instanceof B)return o._ELEMENT_ARRAY_BUFFER;throw new Error("Failed pattern match at Graphics.WebGL line 492, column 1 - line 493, column 1: "+[e.constructor.name])},ke=function(e,t,r,a,i){var u=Re(t);return function(){var e=o.createBuffer_()();o.bindBuffer_(u,e)();var t=r(a);return n.bufferData__(u,t,i)(),{webGLBuffer:e,bufferType:u,bufferSize:l.length(a)}}},Ue=function(e,n,t,r){return ke(e,n,t,r,o._STATIC_DRAW)},Ge=function(e){if(e instanceof J)return o._ZERO;if(e instanceof z)return o._ONE;if(e instanceof H)return o._SRC_COLOR;if(e instanceof W)return o._ONE_MINUS_SRC_COLOR;if(e instanceof j)return o._DST_COLOR;if(e instanceof q)return o._ONE_MINUS_DST_COLOR;if(e instanceof V)return o._SRC_ALPHA;if(e instanceof Z)return o._ONE_MINUS_SRC_ALPHA;if(e instanceof X)return o._DST_ALPHA;if(e instanceof K)return o._ONE_MINUS_DST_ALPHA;if(e instanceof re)return o._CONSTANT_COLOR;if(e instanceof oe)return o._ONE_MINUS_CONSTANT_COLOR;if(e instanceof ae)return o._CONSTANT_ALPHA;if(e instanceof ie)return o._ONE_MINUS_CONSTANT_ALPHA;if(e instanceof Y)return o._SRC_ALPHA_SATURATE;if(e instanceof ue)return o._BLEND_COLOR;if(e instanceof Q)return o._BLEND_DST_RGB;if(e instanceof ee)return o._BLEND_SRC_RGB;if(e instanceof ne)return o._BLEND_DST_ALPHA;if(e instanceof te)return o._BLEND_SRC_ALPHA;throw new Error("Failed pattern match at Graphics.WebGL line 520, column 1 - line 521, column 1: "+[e.constructor.name])},Be=function(e,n){return o.blendFunc_(Ge(e),Ge(n))},Je=function(e,n){return function(){return o.bindBuffer_(e.bufferType,e.webGLBuffer)(),le(n)()}},ze=function(e,n,t){return function(){return Je(n,t)(),o.drawArrays_(ve(e),0,n.bufferSize/t.aItemSize|0)()}},He=function(e){return o.bindBuffer_(e.bufferType,e.webGLBuffer)},We=function(e,n,t){return o.bindAttribLocation_(e,n,t)},je=a.asFloat32Array,qe=function(e,n){if(e.uType===o._FLOAT)return o.uniform1f_(e.uLocation,c.head(n));if(e.uType===o._FLOAT_MAT4)return o.uniformMatrix4fv_(e.uLocation,!1,je(n));if(e.uType===o._FLOAT_MAT3)return o.uniformMatrix3fv_(e.uLocation,!1,je(n));if(e.uType===o._FLOAT_MAT2)return o.uniformMatrix2fv_(e.uLocation,!1,je(n));if(e.uType===o._FLOAT_VEC4)return o.uniform4fv_(e.uLocation,je(n));if(e.uType===o._FLOAT_VEC3)return o.uniform3fv_(e.uLocation,je(n));if(e.uType===o._FLOAT_VEC2)return o.uniform2fv_(e.uLocation,je(n));if(t.otherwise)return v.fail("WebGL>>setUniformFloats: Called for non float uniform!");throw new Error("Failed pattern match at Graphics.WebGL line 268, column 1 - line 278, column 1: "+[e.constructor.name,n.constructor.name])};e.BLEND=O,e.DEPTH_TEST=I,e.CULL_FACE=R,e.POLYGON_OFFSET_FILL=k,e.SCISSOR_TEST=U,e.ZERO=J,e.ONE=z,e.SRC_COLOR=H,e.ONE_MINUS_SRC_COLOR=W,e.DST_COLOR=j,e.ONE_MINUS_DST_COLOR=q,e.SRC_ALPHA=V,e.ONE_MINUS_SRC_ALPHA=Z,e.DST_ALPHA=X,e.ONE_MINUS_DST_ALPHA=K,e.SRC_ALPHA_SATURATE=Y,e.BLEND_DST_RGB=Q,e.BLEND_SRC_RGB=ee,e.BLEND_DST_ALPHA=ne,e.BLEND_SRC_ALPHA=te,e.CONSTANT_COLOR=re,e.ONE_MINUS_CONSTANT_COLOR=oe,e.CONSTANT_ALPHA=ae,e.ONE_MINUS_CONSTANT_ALPHA=ie,e.BLEND_COLOR=ue,e.POINTS=g,e.LINES=w,e.LINE_STRIP=_,e.LINE_LOOP=$,e.TRIANGLES=C,e.TRIANGLE_STRIP=S,e.TRIANGLE_FAN=y,e.DEPTH_BUFFER_BIT=P,e.STENCIL_BUFFER_BIT=T,e.COLOR_BUFFER_BIT=b,e.NEVER=E,e.ALWAYS=x,e.LESS=F,e.EQUAL=A,e.LEQUAL=N,e.GREATER=D,e.GEQUAL=M,e.NOTEQUAL=L,e.ARRAY_BUFFER=G,e.ELEMENT_ARRAY_BUFFER=B,e.Shaders=m,e.requestAnimationFrame=de,e.colorMask=Ae,e.clearDepth=Ne,e.clearColor=De,e.clear=Me,e.enable=Ie,e.disable=Oe,e.getCanvasHeight=Se,e.getCanvasWidth=Ce,e.viewport=ce,e.blendFunc$_$_$=Be,e.depthFunc=xe,e.drawElements$_$_$=be,e.drawArr$_$_$=ze,e.disableVertexAttribArray=Ee,e.enableVertexAttribArray=Te,e.vertexPointer=le,e.bindAttribLocation$_$_$=We,e.bindBuf=He,e.bindBufAndSetVertexAttr$_$_$=Je,e.setUniformBoolean$_$_$=se,e.setUniformFloats$_$_$=qe,e.fillBuffer$_$_$=Pe,e.makeBufferFloatDyn=ge,e.makeBufferFloat=we,e.makeBuffer$_$_$=Ue,e.withShaders$_$_$=$e,e.runWebGLAttr$_$_$=fe,e.defContextAttributes=Fe}(PS["Graphics.WebGL"]=PS["Graphics.WebGL"]||{}),function(e){"use strict";e.peekSTArrayImplUnsafe=function(e,n){return function(){return e[n]}},e.pokeSTArray=function(e,n,t){return function(){var r=n>=0&&n<e.length;return r&&(e[n]=t),r}},e.pokeAllSTArray=function(e,n,t){return function(){var r=t.length,o=n>=0&&n+t.length<=e.length;if(o)for(var a=0;r>a;a++)e[a+n]=t[a];return o}},e.pushAllSTArray=function(e,n){return function(){return e.push.apply(e,n)}},e.copyImpl=function(e){return function(){return e.slice()}}}(PS["Data.STSequence"]=PS["Data.STSequence"]||{}),function(e){"use strict";var n=PS["Data.STSequence"],t=PS.Prelude,r=PS["Control.Monad.ST"],o=PS["Data.Array"],a=PS["Control.Monad.Eff"],i=(PS["Data.Function"],PS["Data.Int"]),u=PS["Data.Maybe"],c=PS.Extensions,l=c.unsafeCoerce,s=function(e){return function(){var n=r.readSTRef(e.fillCounter)();return o.slice$_$_$(0,n,l(e.buffer))}},f=n.copyImpl,d=function(e){return function(){var t=r.readSTRef(e.fillCounter)(),o=0===t;if(o)return u.Nothing.value;if(!o){var a=n.peekSTArrayImplUnsafe(e.buffer,t-1)();return n.pokeSTArray(e.buffer,t-1,c.undef)(),r.modifySTRef$_$_$(e.fillCounter,function(e){return e-1})(),new u.Just(a)}throw new Error("Failed pattern match at Data.STSequence line 172, column 5 - line 181, column 1: "+[o.constructor.name])}},v=function(e){return r.readSTRef(e.fillCounter)},m=function(e,r){return function(){var o=v(e)(),i=r>=0&&o>r;if(i)return t.liftM1$_$_$(a.monadEff,u.Just.create,n.peekSTArrayImplUnsafe(e.buffer,r))();if(!i)return u.Nothing.value;throw new Error("Failed pattern match at Data.STSequence line 214, column 5 - line 218, column 1: "+[i.constructor.name])}},h=function(e,t,r){return function(){var o=v(e)(),a=t>=0&&o>t;if(a)return n.pokeSTArray(e.buffer,t,r)(),!0;if(!a)return!1;throw new Error("Failed pattern match at Data.STSequence line 231, column 5 - line 235, column 21: "+[a.constructor.name])}},p=function(e){return function(){var n=r.readSTRef(e.fillCounter)();return m(e,n-1)()}},g=30,w=function(e){var n=i.round(.7*i.toNumber(o.length(e)));return function(){var a=f(t["++"](t.semigroupArray)(e)(o.replicate$_$_$(n,c.undef)))(),i=r.newSTRef(o.length(e))();return{buffer:a,fillCounter:i}}},_=function(e){return function(){var n=f(o.replicate$_$_$(e,c.undef))(),t=r.newSTRef(0)();return{buffer:n,fillCounter:t}}},$=function(){var e=f(o.replicate$_$_$(g,c.undef))(),n=r.newSTRef(0)();return{buffer:e,fillCounter:n}},C=function(e){return o.length(l(e.buffer))},S=function(e,t){return function(){var a=r.readSTRef(e.fillCounter)(),u=C(e);return function(){var r=u>a;if(r)return n.pokeSTArray(e.buffer,a,t);if(!r){var l=i.round(.7*i.toNumber(u));return function(){return n.pushAllSTArray(e.buffer,o.replicate$_$_$(l,c.undef))(),n.pokeSTArray(e.buffer,a,t)()}}throw new Error("Failed pattern match at Data.STSequence line 158, column 5 - line 165, column 5: "+[r.constructor.name])}()(),r.modifySTRef$_$_$(e.fillCounter,function(e){return e+1|0})(),e}},y=function(e,t){return function(){var a=v(e)(),u=o.length(t),l=a+u|0;return function(){var r=C(e)>=l;if(r)return n.pokeAllSTArray(e.buffer,a,t);if(!r){var u=i.round(1.7*i.toNumber(l)),s=u-C(e);return function(){return n.pushAllSTArray(e.buffer,o.replicate$_$_$(s,c.undef))(),n.pokeAllSTArray(e.buffer,a,t)()}}throw new Error("Failed pattern match at Data.STSequence line 186, column 5 - line 194, column 5: "+[r.constructor.name])}()(),r.writeSTRef$_$_$(e.fillCounter,l)(),e}};e.poke$_$_$=h,e.last=p,e.peek$_$_$=m,e.pushAll$_$_$=y,e.pop=d,e.push$_$_$=S,e.length=v,e.toArray=s,e.fromArray=w,e.emptyWithBufferSize=_,e.empty=$}(PS["Data.STSequence"]=PS["Data.STSequence"]||{}),function(e){"use strict";e["new"]=function(){return{}},e.peekImpl=function(e){return function(n){return function(t){return function(r){return function(){return{}.hasOwnProperty.call(t,r)?e(t[r]):n}}}}},e.poke$_$_$=function(e,n,t){return function(){return e[n]=t,e}}}(PS["Data.StrMap.ST"]=PS["Data.StrMap.ST"]||{}),function(e){"use strict";var n=PS["Data.StrMap.ST"],t=(PS.Prelude,PS["Control.Monad.Eff"],PS["Control.Monad.ST"],PS["Data.Maybe"]),r=n.peekImpl(t.Just.create)(t.Nothing.value);e.peek=r,e.poke$_$_$=n.poke$_$_$,e["new"]=n["new"]}(PS["Data.StrMap.ST"]=PS["Data.StrMap.ST"]||{}),function(e){"use strict";var n=PS["Graphics.WebGL"],t=new n.Shaders("precision mediump float;\n\n  varying vec4 vFinalColor;\n\n  varying vec2 vTextureCoord;\n  varying float fogFactor;\n\n  uniform float uTexAmbiance;\n  uniform sampler2D uSampler;\n\n  uniform bool uUseTexture;\n  uniform bool uSimple;\n  uniform bool uUseTextureFrame;\n  uniform vec4 uTextureFrameColor;\n\n  void main(void)\n  {\n        vec4 fog_color = vec4(1,1,1,0);\n        if (uSimple) {\n            gl_FragColor = vFinalColor;\n        } else {\n            if (uUseTexture) {\n                vec4 texel = texture2D (uSampler, vTextureCoord);\n                if (uUseTextureFrame && texel.a < 1.0) {\n                    vec4 texelColor = mix(uTextureFrameColor, texel, texel.a * uTexAmbiance);\n                    gl_FragColor = mix(fog_color, texelColor, fogFactor);\n                } else {\n                    vec4 texelColor = vec4(texel.r, texel.g, texel.b, texel.a * uTexAmbiance);\n                    gl_FragColor = mix(fog_color, texelColor, fogFactor);\n                }\n            } else {\n                vec4 frag_color = vFinalColor;\n                gl_FragColor = mix(fog_color, frag_color, fogFactor);\n            }\n        }\n  }\n  ","\n  precision mediump float;\n  attribute vec3 aVertexPosition;\n  attribute vec3 aVertexNormal;\n\n  attribute vec2 aTextureCoord;\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  uniform mat3 uNMatrix;\n\n  uniform float uShininess;   //shininness\n  uniform vec3 uLightDirection;  //light direction\n\n  uniform vec4 uLightAmbient;      //light ambient property\n  uniform vec4 uLightDiffuse;      //light diffuse property\n  uniform vec4 uLightSpecular;     //light specular property\n\n  uniform vec4 uMaterialAmbient;  //object ambient property\n  uniform vec4 uMaterialDiffuse;   //object diffuse property\n  uniform vec4 uMaterialSpecular;  //object specular property\n\n  uniform float uScale;\n\n  varying vec4 vFinalColor;\n  varying vec2 vTextureCoord;\n  varying float fogFactor;\n\n  uniform bool uUseTexture;\n  uniform bool uSimple;\n\n\nvoid main(void) {\n\n    vec4 vertex = uMVMatrix * vec4(aVertexPosition, 1.0);\n    float distance = length(vertex);\n    fogFactor =  clamp ((18.0 - distance) / 9.0, 0.7, 1.0);\n        //fogFactor = (end - z) / (end - start)\n\n    gl_Position = uPMatrix * vertex;\n\n    if (uUseTexture) {\n      vTextureCoord = aTextureCoord;\n    }\n    else if (uSimple) {\n      vFinalColor = uMaterialAmbient;\n    }\n    else\n    {\n      //Transformed normal position\n      vec3 N = uNMatrix * aVertexNormal;\n\n      //Normalize light to calculate lambertTerm\n      vec3 L = normalize(uLightDirection);\n\n      //Lambert's cosine law\n      float lambertTerm = dot(N * uScale,-L);\n\n      //Ambient Term\n      vec4 Ia = uLightAmbient * uMaterialAmbient;\n\n      //Diffuse Term\n      vec4 Id = vec4(0.0,0.0,0.0,1.0);\n\n      //Specular Term\n      vec4 Is = vec4(0.0,0.0,0.0,1.0);\n\n      if(lambertTerm > 0.0) //only if lambertTerm is positive\n      {\n          Id = uLightDiffuse * uMaterialDiffuse * lambertTerm; //add diffuse term\n\n          vec3 eyeVec = -vec3(vertex.xyz);\n          vec3 E = normalize(eyeVec);\n          vec3 R = reflect(L, N * uScale);\n          float specular = pow(max(dot(R, E), 0.0), uShininess );\n\n          Is = uLightSpecular * uMaterialSpecular * specular; //add specular term\n      }\n\n      //Final color\n      vFinalColor = Ia + Id + Is;\n      vFinalColor.a = uMaterialAmbient.a;\n\n    }\n}\n  ");
e.shaders=t}(PS["ConeCanvas.Frontend.Shaders"]=PS["ConeCanvas.Frontend.Shaders"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Foldable"],r=PS["Data.List"],o=PS["Data.Maybe"],a=PS["Data.Maybe.Unsafe"],i=(PS["Data.Monoid"],PS["Data.Traversable"]),u=PS["Data.Tuple"],c=function(){function e(){}return e.value=new e,e}(),l=function(){function e(e,n,t,r){this.value0=e,this.value1=n,this.value2=t,this.value3=r}return e.create=function(n){return function(t){return function(r){return function(o){return new e(n,t,r,o)}}}},e}(),s=function(){function e(e,n,t,r,o,a,i){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=o,this.value5=a,this.value6=i}return e.create=function(n){return function(t){return function(r){return function(o){return function(a){return function(i){return function(u){return new e(n,t,r,o,a,i,u)}}}}}}},e}(),f=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),d=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),v=function(){function e(e,n,t,r,o,a){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=o,this.value5=a}return e.create=function(n){return function(t){return function(r){return function(o){return function(a){return function(i){return new e(n,t,r,o,a,i)}}}}}},e}(),m=function(){function e(e,n,t,r,o,a){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=o,this.value5=a}return e.create=function(n){return function(t){return function(r){return function(o){return function(a){return function(i){return new e(n,t,r,o,a,i)}}}}}},e}(),h=function(){function e(e,n,t,r,o,a){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=o,this.value5=a}return e.create=function(n){return function(t){return function(r){return function(o){return function(a){return function(i){return new e(n,t,r,o,a,i)}}}}}},e}(),p=function(){function e(e,n,t,r){this.value0=e,this.value1=n,this.value2=t,this.value3=r}return e.create=function(n){return function(t){return function(r){return function(o){return new e(n,t,r,o)}}}},e}(),g=function(e){if(e instanceof c)return r.Nil.value;if(e instanceof l)return n["++"](r.semigroupList)(g(e.value0))(n["++"](r.semigroupList)(n.pure(r.applicativeList)(e.value2))(g(e.value3)));if(e instanceof s)return n["++"](r.semigroupList)(g(e.value0))(n["++"](r.semigroupList)(n.pure(r.applicativeList)(e.value2))(n["++"](r.semigroupList)(g(e.value3))(n["++"](r.semigroupList)(n.pure(r.applicativeList)(e.value5))(g(e.value6)))));throw new Error("Failed pattern match at Data.Map line 311, column 1 - line 312, column 1: "+[e.constructor.name])},w=function(e){if(e instanceof c)return r.Nil.value;if(e instanceof l)return n["++"](r.semigroupList)(w(e.value0))(n["++"](r.semigroupList)(n.pure(r.applicativeList)(new u.Tuple(e.value1,e.value2)))(w(e.value3)));if(e instanceof s)return n["++"](r.semigroupList)(w(e.value0))(n["++"](r.semigroupList)(n.pure(r.applicativeList)(new u.Tuple(e.value1,e.value2)))(n["++"](r.semigroupList)(w(e.value3))(n["++"](r.semigroupList)(n.pure(r.applicativeList)(new u.Tuple(e.value4,e.value5)))(w(e.value6)))));throw new Error("Failed pattern match at Data.Map line 290, column 1 - line 291, column 1: "+[e.constructor.name])},_=function(e){return function(n){return new l(c.value,e,n,c.value)}},$=function(e,t,r){var a=e,i=t,u=r;e:for(;;){var f=n.compare(a);if(u instanceof c)return o.Nothing.value;if(u instanceof l){var d=f(i)(u.value1);if(d instanceof n.EQ)return new o.Just(u.value2);if(d instanceof n.LT){var v=a,m=i,h=u.value0;a=v,i=m,u=h;continue e}var v=a,m=i,h=u.value3;a=v,i=m,u=h}else{if(!(u instanceof s))throw new Error("Failed pattern match at Data.Map line 121, column 6 - line 143, column 1: "+[u.constructor.name]);var p=f(i)(u.value1);if(p instanceof n.EQ)return new o.Just(u.value2);var g=f(i)(u.value4);if(g instanceof n.EQ)return new o.Just(u.value5);if(p instanceof n.LT){var v=a,m=i,h=u.value0;a=v,i=m,u=h;continue e}if(g instanceof n.GT){var v=a,m=i,h=u.value6;a=v,i=m,u=h;continue e}var v=a,m=i,h=u.value3;a=v,i=m,u=h}}},C=function(e,n,t){return o.isJust($(e,n,t))},S=new n.Functor(function(e){return function(t){if(t instanceof c)return c.value;if(t instanceof l)return new l(n.map(S)(e)(t.value0),t.value1,e(t.value2),n.map(S)(e)(t.value3));if(t instanceof s)return new s(n.map(S)(e)(t.value0),t.value1,e(t.value2),n.map(S)(e)(t.value3),t.value4,e(t.value5),n.map(S)(e)(t.value6));throw new Error("Failed pattern match at Data.Map line 62, column 3 - line 63, column 3: "+[e.constructor.name,t.constructor.name])}}),y=function(e,n,t){var o=e,a=n,i=t;e:for(;;){if(a instanceof r.Nil)return i;if(a instanceof r.Cons){if(a.value0 instanceof f){var u=o,c=a.value1,p=new l(i,a.value0.value0,a.value0.value1,a.value0.value2);o=u,a=c,i=p;continue e}if(a.value0 instanceof d){var u=o,c=a.value1,p=new l(a.value0.value0,a.value0.value1,a.value0.value2,i);o=u,a=c,i=p;continue e}if(a.value0 instanceof v){var u=o,c=a.value1,p=new s(i,a.value0.value0,a.value0.value1,a.value0.value2,a.value0.value3,a.value0.value4,a.value0.value5);o=u,a=c,i=p;continue e}if(a.value0 instanceof m){var u=o,c=a.value1,p=new s(a.value0.value0,a.value0.value1,a.value0.value2,i,a.value0.value3,a.value0.value4,a.value0.value5);o=u,a=c,i=p;continue e}if(a.value0 instanceof h){var u=o,c=a.value1,p=new s(a.value0.value0,a.value0.value1,a.value0.value2,a.value0.value3,a.value0.value4,a.value0.value5,i);o=u,a=c,i=p;continue e}throw new Error("Failed pattern match at Data.Map line 156, column 3 - line 163, column 1: "+[a.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map line 154, column 1 - line 155, column 1: "+[a.constructor.name,i.constructor.name])}},P=function(e){var t=function(n){return function(t){var o=n,a=t;e:for(;;){if(o instanceof r.Nil)return new l(a.value0,a.value1,a.value2,a.value3);if(o instanceof r.Cons){if(o.value0 instanceof f)return y(e,o.value1,new s(a.value0,a.value1,a.value2,a.value3,o.value0.value0,o.value0.value1,o.value0.value2));if(o.value0 instanceof d)return y(e,o.value1,new s(o.value0.value0,o.value0.value1,o.value0.value2,a.value0,a.value1,a.value2,a.value3));if(o.value0 instanceof v){var i=o.value1,u=new p(new l(a.value0,a.value1,a.value2,a.value3),o.value0.value0,o.value0.value1,new l(o.value0.value2,o.value0.value3,o.value0.value4,o.value0.value5));o=i,a=u;continue e}if(o.value0 instanceof m){var i=o.value1,u=new p(new l(o.value0.value0,o.value0.value1,o.value0.value2,a.value0),a.value1,a.value2,new l(a.value3,o.value0.value3,o.value0.value4,o.value0.value5));o=i,a=u;continue e}if(o.value0 instanceof h){var i=o.value1,u=new p(new l(o.value0.value0,o.value0.value1,o.value0.value2,o.value0.value3),o.value0.value4,o.value0.value5,new l(a.value0,a.value1,a.value2,a.value3));o=i,a=u;continue e}throw new Error("Failed pattern match at Data.Map line 197, column 5 - line 205, column 1: "+[o.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map line 195, column 3 - line 196, column 3: "+[o.constructor.name,a.constructor.name])}}},o=n.compare(e),a=function(a){return function(i){return function(u){return function(g){var w=a,_=i,$=u,C=g;e:for(;;){if(C instanceof c)return t(w)(new p(c.value,_,$,c.value));if(C instanceof l){var S=o(_)(C.value1);if(S instanceof n.EQ)return y(e,w,new l(C.value0,_,$,C.value3));if(S instanceof n.LT){var P=new r.Cons(new f(C.value1,C.value2,C.value3),w),T=_,b=$,E=C.value0;w=P,_=T,$=b,C=E;continue e}var P=new r.Cons(new d(C.value0,C.value1,C.value2),w),T=_,b=$,E=C.value3;w=P,_=T,$=b,C=E}else{if(!(C instanceof s))throw new Error("Failed pattern match at Data.Map line 173, column 3 - line 174, column 3: "+[w.constructor.name,_.constructor.name,$.constructor.name,C.constructor.name]);var x=o(_)(C.value1);if(x instanceof n.EQ)return y(e,w,new s(C.value0,_,$,C.value3,C.value4,C.value5,C.value6));var F=o(_)(C.value4);if(F instanceof n.EQ)return y(e,w,new s(C.value0,C.value1,C.value2,C.value3,_,$,C.value6));if(x instanceof n.LT){var P=new r.Cons(new v(C.value1,C.value2,C.value3,C.value4,C.value5,C.value6),w),T=_,b=$,E=C.value0;w=P,_=T,$=b,C=E;continue e}if(x instanceof n.GT){if(F instanceof n.LT){var P=new r.Cons(new m(C.value0,C.value1,C.value2,C.value4,C.value5,C.value6),w),T=_,b=$,E=C.value3;w=P,_=T,$=b,C=E;continue e}var P=new r.Cons(new h(C.value0,C.value1,C.value2,C.value3,C.value4,C.value5),w),T=_,b=$,E=C.value6;w=P,_=T,$=b,C=E;continue e}var P=new r.Cons(new h(C.value0,C.value1,C.value2,C.value3,C.value4,C.value5),w),T=_,b=$,E=C.value6;w=P,_=T,$=b,C=E}}}}}};return a(r.Nil.value)},T=new t.Foldable(function(e){return function(n){return function(o){return t.foldMap(r.foldableList)(e)(n)(g(o))}}},function(e){return function(n){return function(o){return t.foldl(r.foldableList)(e)(n)(g(o))}}},function(e){return function(n){return function(o){return t.foldr(r.foldableList)(e)(n)(g(o))}}}),b=c.value,E=function(e){var t=function(n){return function(t){for(var o=n,i=t;;){if(o instanceof r.Nil)return i;if(o instanceof r.Cons&&o.value0 instanceof f&&o.value0.value2 instanceof c&&i instanceof c)return y(e,o.value1,new l(c.value,o.value0.value0,o.value0.value1,c.value));if(o instanceof r.Cons&&o.value0 instanceof d&&o.value0.value0 instanceof c&&i instanceof c)return y(e,o.value1,new l(c.value,o.value0.value1,o.value0.value2,c.value));if(o instanceof r.Cons&&o.value0 instanceof f&&o.value0.value2 instanceof l){var u=o.value1,p=new s(i,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);o=u,i=p}else{if(!(o instanceof r.Cons&&o.value0 instanceof d&&o.value0.value0 instanceof l))return o instanceof r.Cons&&o.value0 instanceof f&&o.value0.value2 instanceof s?y(e,o.value1,new l(new l(i,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new l(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6))):o instanceof r.Cons&&o.value0 instanceof d&&o.value0.value0 instanceof s?y(e,o.value1,new l(new l(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new l(o.value0.value0.value6,o.value0.value1,o.value0.value2,i))):o instanceof r.Cons&&o.value0 instanceof v&&o.value0.value2 instanceof c&&o.value0.value5 instanceof c&&i instanceof c?y(e,o.value1,new s(c.value,o.value0.value0,o.value0.value1,c.value,o.value0.value3,o.value0.value4,c.value)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value0 instanceof c&&o.value0.value5 instanceof c&&i instanceof c?y(e,o.value1,new s(c.value,o.value0.value1,o.value0.value2,c.value,o.value0.value3,o.value0.value4,c.value)):o instanceof r.Cons&&o.value0 instanceof h&&o.value0.value0 instanceof c&&o.value0.value3 instanceof c&&i instanceof c?y(e,o.value1,new s(c.value,o.value0.value1,o.value0.value2,c.value,o.value0.value4,o.value0.value5,c.value)):o instanceof r.Cons&&o.value0 instanceof v&&o.value0.value2 instanceof l?y(e,o.value1,new l(new s(i,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value0 instanceof l?y(e,o.value1,new l(new s(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,i),o.value0.value3,o.value0.value4,o.value0.value5)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value5 instanceof l?y(e,o.value1,new l(o.value0.value0,o.value0.value1,o.value0.value2,new s(i,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3))):o instanceof r.Cons&&o.value0 instanceof h&&o.value0.value3 instanceof l?y(e,o.value1,new l(o.value0.value0,o.value0.value1,o.value0.value2,new s(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,i))):o instanceof r.Cons&&o.value0 instanceof v&&o.value0.value2 instanceof s?y(e,o.value1,new s(new l(i,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new l(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value0 instanceof s?y(e,o.value1,new s(new l(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new l(o.value0.value0.value6,o.value0.value1,o.value0.value2,i),o.value0.value3,o.value0.value4,o.value0.value5)):o instanceof r.Cons&&o.value0 instanceof m&&o.value0.value5 instanceof s?y(e,o.value1,new s(o.value0.value0,o.value0.value1,o.value0.value2,new l(i,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new l(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6))):o instanceof r.Cons&&o.value0 instanceof h&&o.value0.value3 instanceof s?y(e,o.value1,new s(o.value0.value0,o.value0.value1,o.value0.value2,new l(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new l(o.value0.value3.value6,o.value0.value4,o.value0.value5,i))):a.unsafeThrow("Impossible case in 'up'");var u=o.value1,p=new s(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,i);o=u,i=p}}}},o=function(e){return function(n){for(var o=e,i=n;;){if(i instanceof l&&i.value0 instanceof c&&i.value3 instanceof c)return t(o)(c.value);if(i instanceof l){var u=new r.Cons(new d(i.value0,i.value1,i.value2),o),f=i.value3;o=u,i=f}else{if(i instanceof s&&i.value0 instanceof c&&i.value3 instanceof c&&i.value6 instanceof c)return t(new r.Cons(new d(c.value,i.value1,i.value2),o))(c.value);if(!(i instanceof s)){if(i instanceof c)return a.unsafeThrow("Impossible case in 'removeMaxNode'");throw new Error("Failed pattern match at Data.Map line 259, column 3 - line 260, column 3: "+[o.constructor.name,i.constructor.name])}var u=new r.Cons(new h(i.value0,i.value1,i.value2,i.value3,i.value4,i.value5),o),f=i.value6;o=u,i=f}}}},i=function(e){for(var n=e;;){if(n instanceof l&&n.value3 instanceof c)return{key:n.value1,value:n.value2};if(n instanceof l){var t=n.value3;n=t}else{if(n instanceof s&&n.value6 instanceof c)return{key:n.value4,value:n.value5};if(!(n instanceof s)){if(n instanceof c)return a.unsafeThrow("Impossible case in 'maxNode'");throw new Error("Failed pattern match at Data.Map line 251, column 3 - line 252, column 3: "+[n.constructor.name])}var t=n.value6;n=t}}},u=function(a){return function(u){return function(p){var g=a,w=u,_=p;e:for(;;){if(_ instanceof c)return y(e,g,c.value);if(_ instanceof l&&_.value0 instanceof c&&_.value3 instanceof c&&n["=="](e["__superclass_Prelude.Eq_0"]())(w)(_.value1))return t(g)(c.value);if(_ instanceof l){if(n["=="](e["__superclass_Prelude.Eq_0"]())(w)(_.value1)){var $=i(_.value0);return o(new r.Cons(new f($.key,$.value,_.value3),g))(_.value0)}if(n["<"](e)(w)(_.value1)){var C=new r.Cons(new f(_.value1,_.value2,_.value3),g),S=w,P=_.value0;g=C,w=S,_=P;continue e}if(n.otherwise){var C=new r.Cons(new d(_.value0,_.value1,_.value2),g),S=w,P=_.value3;g=C,w=S,_=P;continue e}}if(_ instanceof s&&_.value0 instanceof c&&_.value3 instanceof c&&_.value6 instanceof c){if(n["=="](e["__superclass_Prelude.Eq_0"]())(w)(_.value1))return y(e,g,new l(c.value,_.value4,_.value5,c.value));if(n["=="](e["__superclass_Prelude.Eq_0"]())(w)(_.value4))return y(e,g,new l(c.value,_.value1,_.value2,c.value))}if(_ instanceof s){if(n["=="](e["__superclass_Prelude.Eq_0"]())(w)(_.value1)){var $=i(_.value0);return o(new r.Cons(new v($.key,$.value,_.value3,_.value4,_.value5,_.value6),g))(_.value0)}if(n["=="](e["__superclass_Prelude.Eq_0"]())(w)(_.value4)){var $=i(_.value3);return o(new r.Cons(new m(_.value0,_.value1,_.value2,$.key,$.value,_.value6),g))(_.value3)}if(n["<"](e)(w)(_.value1)){var C=new r.Cons(new v(_.value1,_.value2,_.value3,_.value4,_.value5,_.value6),g),S=w,P=_.value0;g=C,w=S,_=P;continue e}if(n["<"](e)(_.value1)(w)&&n["<"](e)(w)(_.value4)){var C=new r.Cons(new m(_.value0,_.value1,_.value2,_.value4,_.value5,_.value6),g),S=w,P=_.value3;g=C,w=S,_=P;continue e}if(n.otherwise){var C=new r.Cons(new h(_.value0,_.value1,_.value2,_.value3,_.value4,_.value5),g),S=w,P=_.value6;g=C,w=S,_=P;continue e}}throw new Error("Failed pattern match at Data.Map line 209, column 3 - line 210, column 3: "+[g.constructor.name,w.constructor.name,_.constructor.name])}}}};return u(r.Nil.value)},x=function(e){return function(n){return function(t){return function(r){var a=n($(e,t,r));if(a instanceof o.Nothing)return E(e)(t)(r);if(a instanceof o.Just)return P(e)(t)(a.value0)(r);throw new Error("Failed pattern match at Data.Map line 268, column 15 - line 273, column 1: "+[a.constructor.name])}}}},F=function(e,n,t,r){var a=n($(e,t,r));if(a instanceof o.Nothing)return E(e)(t)(r);if(a instanceof o.Just)return P(e)(t)(a.value0)(r);throw new Error("Failed pattern match at Data.Map line 268, column 15 - line 273, column 1: "+[a.constructor.name])},A=function(e){return function(n){return function(a){return function(i){var u=function(t){return function(r){return F(e,function(e){return o.Just.create(o.maybe$_$_$(r.value1,n(r.value1),e))},r.value0,t)}};return t.foldl(r.foldableList)(u)(i)(w(a))}}}},N=function(e){return A(e)(n["const"])},D=function(e){return new i.Traversable(function(){return T},function(){return S},function(t){return i.traverse(D(e))(t)(n.id(n.categoryFn))},function(o){return function(a){return function(c){return t.foldr(r.foldableList)(function(t){return function(r){return n["<*>"](o["__superclass_Prelude.Apply_0"]())(n["<$>"](o["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(N(e))(t))(r)}})(n.pure(o)(b))(n["<$>"](r.functorList)(n["<$>"](o["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(u.uncurry(_)))(n["<$>"](r.functorList)(i.traverse(u.traversableTuple)(o)(a))(w(c))))}}})},M=function(e,n,t,r){return F(e,o.maybe(o.Nothing.value)(n),t,r)};e.unionWith=A,e.union=N,e.values=g,e.update$_$_$=M,e.alter=x,e.alter$_$_$=F,e.member$_$_$=C,e["delete"]=E,e.toList=w,e.lookup$_$_$=$,e.insert=P,e.singleton=_,e.empty=b,e.functorMap=S,e.foldableMap=T,e.traversableMap=D}(PS["Data.Map"]=PS["Data.Map"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.Foldable"],PS["Data.List"],PS["Data.Monoid"],PS["Data.Map"]),r=(PS["Control.Monad.Eff"],PS["Control.Monad.ST"],PS["Control.Monad.Rec.Class"],PS["Data.Array"],PS["Data.Array.ST"],PS["Data.Array.Unsafe"],PS["Data.List"],PS["Data.Either"],PS["Data.Foldable"],PS["Data.Unfoldable"],function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}()),o=function(e,n,r){return t.member$_$_$(e,n,r.value0)},a=function(e){return function(o){return function(a){return new r(t.insert(e)(o)(n.unit)(a.value0))}}},i=function(e,o,a){return new r(t.insert(e)(o)(n.unit)(a.value0))},u=new r(t.empty),c=function(e){return function(n){return function(o){return new r(t["delete"](e)(n)(o.value0))}}};e["delete"]=c,e.member$_$_$=o,e.insert=a,e.insert$_$_$=i,e.empty=u}(PS["Data.Set"]=PS["Data.Set"]||{}),function(e){"use strict";e.unbindFramebuffer_=function(e){return function(){gl.bindFramebuffer(e,null)}},e.readPixels__=function(e,n,t,r,o,a,i){return function(){gl.readPixels(e,n,t,r,o,a,i)}}}(PS["Graphics.WebGLFramebuffer"]=PS["Graphics.WebGLFramebuffer"]||{}),function(e){"use strict";e.asArrayBufferView_=function(e){return e},e.texImage2DNull_=function(e,n,t,r,o,a,i,u){return function(){gl.texImage2D(e,n,t,r,o,a,i,u,null)}},e.bindTexture__=function(e){return function(){gl.bindTexture(e,null)}},e.texSubImage2D__=function(e,n,t,r,o,a,i){return function(){gl.texSubImage2D(e,n,t,r,o,a,i)}}}(PS["Graphics.WebGLTexture"]=PS["Graphics.WebGLTexture"]||{}),function(e){"use strict";var n=PS.Prelude,t=function(e,t,r){if(t)return r;if(!t)return n["return"](e["__superclass_Prelude.Applicative_0"]())(n.unit);throw new Error("Failed pattern match at Control.Monad line 9, column 1 - line 10, column 1: "+[t.constructor.name,r.constructor.name])};e.when$_$_$=t}(PS["Control.Monad"]=PS["Control.Monad"]||{}),function(e){"use strict";var n=PS["Graphics.WebGLTexture"],t=PS.Prelude,r=(PS["Control.Monad.Eff.WebGL"],PS["Graphics.WebGL"],PS["Graphics.WebGLRaw"]),o=(PS["Data.Int.Bits"],PS["Control.Monad.Eff"]),a=PS["Control.Monad"],i=PS.Extensions,u=(PS["Graphics.Canvas"],PS["Data.Function"]),c=PS["Data.TypedArray"],l=(PS["Data.ArrayBuffer.Types"],function(){function e(){}return e.value=new e,e}()),s=function(){function e(){}return e.value=new e,e}(),f=function(){function e(){}return e.value=new e,e}(),d=function(){function e(){}return e.value=new e,e}(),v=function(){function e(){}return e.value=new e,e}(),m=function(){function e(){}return e.value=new e,e}(),h=function(){function e(){}return e.value=new e,e}(),p=function(){function e(){}return e.value=new e,e}(),g=function(){function e(){}return e.value=new e,e}(),w=function(){function e(){}return e.value=new e,e}(),_=function(){function e(){}return e.value=new e,e}(),$=function(){function e(){}return e.value=new e,e}(),C=function(){function e(){}return e.value=new e,e}(),S=function(){function e(){}return e.value=new e,e}(),y=function(){function e(){}return e.value=new e,e}(),P=function(){function e(){}return e.value=new e,e}(),T=function(){function e(){}return e.value=new e,e}(),b=function(){function e(){}return e.value=new e,e}(),E=function(){function e(){}return e.value=new e,e}(),x=function(){function e(){}return e.value=new e,e}(),F=function(){function e(){}return e.value=new e,e}(),A=function(){function e(){}return e.value=new e,e}(),N=function(){function e(){}return e.value=new e,e}(),D=function(){function e(){}return e.value=new e,e}(),M=function(){function e(){}return e.value=new e,e}(),L=function(){function e(){}return e.value=new e,e}(),O=function(){function e(){}return e.value=new e,e}(),I=function(){function e(){}return e.value=new e,e}(),R=function(){function e(){}return e.value=new e,e}(),k=function(){function e(){}return e.value=new e,e}(),U=function(){function e(){}return e.value=new e,e}(),G=function(){function e(){}return e.value=new e,e}(),B=u.runFn2(r.uniform1i_),J=function(e){if(e instanceof l)return r._UNSIGNED_BYTE;if(e instanceof s)return r._RGBA;if(e instanceof f)return r._FLOAT;if(e instanceof d)return r._UNSIGNED_SHORT_5_6_5;if(e instanceof v)return r._UNSIGNED_SHORT_4_4_4_4;if(e instanceof m)return r._UNSIGNED_SHORT_5_5_5_1;throw new Error("Failed pattern match at Graphics.WebGLTexture line 102, column 1 - line 103, column 1: "+[e.constructor.name])},z=function(e){if(e instanceof h)return r._TEXTURE_2D;if(e instanceof p)return r._TEXTURE_CUBE_MAP;throw new Error("Failed pattern match at Graphics.WebGLTexture line 128, column 1 - line 129, column 1: "+[e.constructor.name])},H=function(e){if(e instanceof g)return r._TEXTURE_MIN_FILTER;if(e instanceof w)return r._TEXTURE_MAG_FILTER;if(e instanceof _)return r._TEXTURE_WRAP_S;if(e instanceof $)return r._TEXTURE_WRAP_T;throw new Error("Failed pattern match at Graphics.WebGLTexture line 139, column 1 - line 140, column 1: "+[e.constructor.name])},W=function(e,n,t){return r.texParameteri_(z(e),H(n),t)},j=function(e){if(e instanceof C)return r._NEAREST;if(e instanceof S)return r._LINEAR;if(e instanceof y)return r._LINEAR_MIPMAP_NEAREST;throw new Error("Failed pattern match at Graphics.WebGLTexture line 156, column 1 - line 157, column 1: "+[e.constructor.name])},q=function(e){if(e instanceof C)return r._NEAREST;if(e instanceof S)return r._LINEAR;if(e instanceof y)return r._LINEAR;throw new Error("Failed pattern match at Graphics.WebGLTexture line 151, column 1 - line 152, column 1: "+[e.constructor.name])},V=function(e){if(e instanceof P)return r._TEXTURE_2D;if(e instanceof T)return r._TEXTURE_CUBE_MAP_POSITIVE_X;if(e instanceof b)return r._TEXTURE_CUBE_MAP_NEGATIVE_X;if(e instanceof E)return r._TEXTURE_CUBE_MAP_POSITIVE_Y;if(e instanceof x)return r._TEXTURE_CUBE_MAP_NEGATIVE_Y;if(e instanceof F)return r._TEXTURE_CUBE_MAP_POSITIVE_Z;if(e instanceof A)return r._TEXTURE_CUBE_MAP_NEGATIVE_Z;throw new Error("Failed pattern match at Graphics.WebGLTexture line 71, column 1 - line 72, column 1: "+[e.constructor.name])},Z=function(e){return n.bindTexture__(V(e))},X=function(e){if(e instanceof N)return r._PACK_ALIGNMENT;if(e instanceof D)return r._UNPACK_ALIGNMENT;if(e instanceof M)return r._UNPACK_FLIP_Y_WEBGL;if(e instanceof L)return r._UNPACK_PREMULTIPLY_ALPHA_WEBGL;if(e instanceof O)return r._UNPACK_COLORSPACE_CONVERSION_WEBGL;throw new Error("Failed pattern match at Graphics.WebGLTexture line 117, column 1 - line 118, column 1: "+[e.constructor.name])},K=function(e,n){return r.pixelStorei_(X(e),n)},Y=function(e){if(e instanceof I)return r._ALPHA;if(e instanceof R)return r._LUMINANCE;if(e instanceof k)return r._LUMINANCE_ALPHA;if(e instanceof U)return r._RGB;if(e instanceof G)return r._RGBA;throw new Error("Failed pattern match at Graphics.WebGLTexture line 87, column 1 - line 88, column 1: "+[e.constructor.name])},Q=function(e,t,r,o,a,i,u){return n.texImage2DNull_(V(e),t,Y(r),o,a,0,Y(i),J(u))},ee=function(e,n,t,o,a,i,u,c){return r.texImage2D_(V(e),n,Y(t),o,a,0,Y(i),J(u),c)},ne=function(e,t,r,o,a,i,u){return n.texSubImage2D__(V(e),t,r,o,Y(a),J(i),u)},te=function(){var e=r.createTexture_()();return e},re=function(e,n){return r.bindTexture_(V(e),n)},oe=function(e,n,a,i,u,c,s){return function(){return re(P.value,e)(),W(h.value,w.value,q(c))(),W(h.value,g.value,j(c))(),K(M.value,0)(),K(L.value,0)(),ne(P.value,0,n,a,G.value,l.value,s)(),function(){return c instanceof y?r.generateMipmap_(r._TEXTURE_2D):t["return"](o.applicativeEff)(t.unit)}()(),Z(P.value)()}},ae=function(e,n,i){return function(){var u=te();return re(P.value,u)(),W(h.value,w.value,q(i))(),W(h.value,g.value,j(i))(),a.when$_$_$(o.monadEff,1===(1&(e|n)),function(){return W(h.value,_.value,r._CLAMP_TO_EDGE)(),W(h.value,$.value,r._CLAMP_TO_EDGE)()})(),Q(P.value,0,G.value,e,n,G.value,l.value)(),function(){return i instanceof y?r.generateMipmap_(r._TEXTURE_2D):t["return"](o.applicativeEff)(t.unit)}()(),Z(P.value)(),u}},ie=function(e,i,u){return function(){var s=te(),f=c.newUint8Array(4*(e*i|0)|0);return re(P.value,s)(),W(h.value,w.value,q(u))(),W(h.value,g.value,j(u))(),a.when$_$_$(o.monadEff,1===(1&(e|i)),function(){return W(h.value,_.value,r._CLAMP_TO_EDGE)(),W(h.value,$.value,r._CLAMP_TO_EDGE)()})(),ee(P.value,0,G.value,e,i,G.value,l.value,n.asArrayBufferView_(f))(),function(){return u instanceof y?r.generateMipmap_(r._TEXTURE_2D):t["return"](o.applicativeEff)(t.unit)}()(),Z(P.value)(),s}},ue=function(e){if(e<r._MAX_COMBINED_TEXTURE_IMAGE_UNITS)return r.activeTexture_(r._TEXTURE0+e|0);if(t.otherwise)return i.fail("WebGLTexture>>activeTexture: wrong argument!");throw new Error("Failed pattern match at Graphics.WebGLTexture line 274, column 1 - line 277, column 1: "+[e.constructor.name])},ce=function(e,n,t,r,o){return function(){return ue(n)(),re(P.value,e)(),B(t.uLocation)(r)(),o(),Z(P.value)()}};e.NEAREST=C,e.LINEAR=S,e.MIPMAP=y,e.TEXTURE_MIN_FILTER=g,e.TEXTURE_MAG_FILTER=w,e.TEXTURE_WRAP_S=_,e.TEXTURE_WRAP_T=$,e.TTEXTURE_2D=h,e.TTEXTURE_CUBE_MAP=p,e.PACK_ALIGNMENT=N,e.UNPACK_ALIGNMENT=D,e.UNPACK_FLIP_Y_WEBGL=M,e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=L,e.UNPACK_COLORSPACE_CONVERSION_WEBGL=O,e.UNSIGNED_BYTE=l,e.RGBA=s,e.FLOAT=f,e.UNSIGNED_SHORT_5_6_5=d,e.UNSIGNED_SHORT_4_4_4_4=v,e.UNSIGNED_SHORT_5_5_5_1=m,e.IF_ALPHA=I,e.IF_LUMINANCE=R,e.IF_LUMINANCE_ALPHA=k,e.IF_RGB=U,e.IF_RGBA=G,e.TEXTURE_2D=P,e.TEXTURE_CUBE_MAP_POSITIVE_X=T,e.TEXTURE_CUBE_MAP_NEGATIVE_X=b,e.TEXTURE_CUBE_MAP_POSITIVE_Y=E,e.TEXTURE_CUBE_MAP_NEGATIVE_Y=x,e.TEXTURE_CUBE_MAP_POSITIVE_Z=F,e.TEXTURE_CUBE_MAP_NEGATIVE_Z=A,e.targetTypeToConst=V,e.newTextureInit$_$_$=ie,e.newTexture$_$_$=ae,e.createTexture=te,e.handleSubLoad2D$_$_$=oe,e.unbindTexture=Z,e.bindTexture$_$_$=re,e.activeTexture=ue,e.withTexture2D$_$_$=ce}(PS["Graphics.WebGLTexture"]=PS["Graphics.WebGLTexture"]||{}),function(e){"use strict";var n=PS["Graphics.WebGLFramebuffer"],t=(PS.Prelude,PS["Control.Monad.Eff.WebGL"],PS["Graphics.WebGLRaw"]),r=PS["Graphics.WebGLTexture"],o=(PS["Control.Monad.Eff"],PS["Data.ArrayBuffer.Types"],PS["Data.TypedArray"]),a=PS["Data.Function"],i=function(){function e(){}return e.value=new e,e}(),u=function(){function e(){}return e.value=new e,e}(),c=function(){function e(){}return e.value=new e,e}(),l=function(){function e(){}return e.value=new e,e}(),s=n.unbindFramebuffer_(t._FRAMEBUFFER),f=function(e,r,a,i,u){var c=o.asUint8Array(o.asArray(u));return function(){return n.readPixels__(e,r,a,i,t._RGBA,t._UNSIGNED_BYTE,c)(),c}},d=function(){var e=t.createFramebuffer_()();return e},v=a.runFn1(t.checkFramebufferStatus_),m=function(e){return t.bindFramebuffer_(t._FRAMEBUFFER,e)},h=function(e){if(e instanceof i)return t._COLOR_ATTACHMENT0;if(e instanceof u)return t._DEPTH_ATTACHMENT;if(e instanceof c)return t._STENCIL_ATTACHMENT;if(e instanceof l)return t._DEPTH_STENCIL_ATTACHMENT;throw new Error("Failed pattern match at Graphics.WebGLFramebuffer line 60, column 1 - line 61, column 1: "+[e.constructor.name])},p=function(e,n,o){return t.framebufferTexture2D_(t._FRAMEBUFFER,h(e),r.targetTypeToConst(n),o,0)};e.COLOR_ATTACHMENT0=i,e.DEPTH_ATTACHMENT=u,e.STENCIL_ATTACHMENT=c,e.DEPTH_STENCIL_ATTACHMENT=l,e.readPixels$_$_$=f,e.framebufferTexture2D$_$_$=p,e.unbindFramebuffer=s,e.bindFramebuffer=m,e.checkFramebufferStatus=v,e.createFramebuffer=d}(PS["Graphics.WebGLFramebuffer"]=PS["Graphics.WebGLFramebuffer"]||{}),function(e){"use strict";var n=(PS["Data.Generic"],PS.Prelude),t=(PS["Data.Either"],PS["Data.Maybe"]),r=(PS["Data.Tuple"],PS["Data.Traversable"],PS["Data.Foldable"],PS["Data.Array"]),o=PS["Data.String"],a=PS["Type.Proxy"],i=(PS["Data.Monoid"],function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}()),u=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),c=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),l=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),s=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),f=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),d=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),v=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),m=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),h=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),p=function(){function e(){}return e.value=new e,e}(),g=function(){function e(){}return e.value=new e,e}(),w=function(e,n,t){this.fromSpine=e,this.toSignature=n,this.toSpine=t},_=function(e){return e.toSpine},$=function(e){return e.toSignature},C=function(e,t){if(t instanceof i){var a=function(e){return function(n){if(!e)return n;if(e)return"("+(n+")");throw new Error("Failed pattern match at Data.Generic line 240, column 9 - line 241, column 9: "+[e.constructor.name,n.constructor.name])}},m=r["null"](t.value1);if(m)return t.value0;if(!m)return a(e>10)(t.value0+(" "+o.joinWith$_$_$(" ",n.map(n.functorArray)(function(e){return C(11,e(n.unit))})(t.value1))));throw new Error("Failed pattern match at Data.Generic line 237, column 5 - line 240, column 3: "+[m.constructor.name])}if(t instanceof u)return"{"+(o.joinWith$_$_$(", ",n.map(n.functorArray)(function(e){
return e.recLabel+(": "+C(0,e.recValue(n.unit)))})(t.value0))+"}");if(t instanceof l)return n.show(n.showBoolean)(t.value0);if(t instanceof s)return n.show(n.showInt)(t.value0);if(t instanceof c)return n.show(n.showNumber)(t.value0);if(t instanceof f)return n.show(n.showString)(t.value0);if(t instanceof d)return n.show(n.showChar)(t.value0);if(t instanceof v)return"["+(o.joinWith$_$_$(", ",n.map(n.functorArray)(function(e){return C(0,e(n.unit))})(t.value0))+"]");throw new Error("Failed pattern match at Data.Generic line 236, column 1 - line 243, column 1: "+[e.constructor.name,t.constructor.name])},S=new w(function(e){return e instanceof c?new t.Just(e.value0):t.Nothing.value},function(e){return p.value},function(e){return new c(e)}),y=new w(function(e){return e instanceof s?new t.Just(e.value0):t.Nothing.value},function(e){return g.value},function(e){return new s(e)}),P=function(e,n){return C(0,_(e)(n))},T=function(e){return e.fromSpine};a.Proxy.value;e.SigProd=m,e.SigRecord=h,e.SigNumber=p,e.SigInt=g,e.SProd=i,e.SRecord=u,e.SNumber=c,e.SBoolean=l,e.SInt=s,e.SString=f,e.SChar=d,e.SArray=v,e.Generic=w,e.gShow$_$_$=P,e.fromSpine=T,e.toSignature=$,e.toSpine=_,e.genericNumber=S,e.genericInt=y}(PS["Data.Generic"]=PS["Data.Generic"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.ArrayBuffer.Types"],PS["Data.ST.Matrix4"],PS["Data.STSequence"]),r=PS["Data.StrMap.ST"],o=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.Shaders"],PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.ST"],PS["Data.Maybe"]),a=(PS["Data.Set"],PS["Graphics.Canvas"],PS["Graphics.WebGL"],PS["Graphics.WebGLFramebuffer"],PS["Graphics.WebGLTexture"],PS.Math),i=(PS["Control.Monad.Eff"],PS["Data.Generic"]),u=(PS["ConeCanvas.GeometryTypes"],function(e){return e}),c=function(){function e(){}return e.value=new e,e}(),l=function(){function e(){}return e.value=new e,e}(),s=function(){function e(){}return e.value=new e,e}(),f=function(){function e(){}return e.value=new e,e}(),d=function(){function e(){}return e.value=new e,e}(),v=function(){function e(){}return e.value=new e,e}(),m=1.5*a.pi,h=.3,p=function(e){return e},g=5,w=g/5,_={cacheIndex:-1,row:0,column:0},$=new i.Generic(function(e){return e instanceof i.SProd&&"ConeCanvas.Frontend.DrawTypes3d.TextureAdmin"===e.value0&&1===e.value1.length?n.apply(o.applyMaybe)(new o.Just(u))(function(e){return e instanceof i.SRecord&&8===e.value0.length?n.apply(o.applyMaybe)(n.apply(o.applyMaybe)(n.apply(o.applyMaybe)(n.apply(o.applyMaybe)(n.apply(o.applyMaybe)(n.apply(o.applyMaybe)(n.apply(o.applyMaybe)(n.apply(o.applyMaybe)(new o.Just(function(e){return function(n){return function(t){return function(r){return function(o){return function(a){return function(i){return function(u){return{iconLoadNum:e,iconLoadTimeMax:n,iconLoadTimeMin:t,iconLoadTimeSum:r,textTextureLoadNum:o,textTextureLoadTimeMax:a,textTextureLoadTimeMin:i,textTextureLoadTimeSum:u}}}}}}}}}))(i.fromSpine(i.genericInt)(e.value0[0].recValue(n.unit))))(i.fromSpine(i.genericNumber)(e.value0[1].recValue(n.unit))))(i.fromSpine(i.genericNumber)(e.value0[2].recValue(n.unit))))(i.fromSpine(i.genericNumber)(e.value0[3].recValue(n.unit))))(i.fromSpine(i.genericInt)(e.value0[4].recValue(n.unit))))(i.fromSpine(i.genericNumber)(e.value0[5].recValue(n.unit))))(i.fromSpine(i.genericNumber)(e.value0[6].recValue(n.unit))))(i.fromSpine(i.genericNumber)(e.value0[7].recValue(n.unit))):o.Nothing.value}(e.value1[0](n.unit))):o.Nothing.value},function(e){return new i.SigProd("ConeCanvas.Frontend.DrawTypes3d.TextureAdmin",[{sigConstructor:"ConeCanvas.Frontend.DrawTypes3d.TextureAdmin",sigValues:[function(e){return new i.SigRecord([{recLabel:"iconLoadNum",recValue:function(e){return i.toSignature(i.genericInt)(i.anyProxy)}},{recLabel:"iconLoadTimeMax",recValue:function(e){return i.toSignature(i.genericNumber)(i.anyProxy)}},{recLabel:"iconLoadTimeMin",recValue:function(e){return i.toSignature(i.genericNumber)(i.anyProxy)}},{recLabel:"iconLoadTimeSum",recValue:function(e){return i.toSignature(i.genericNumber)(i.anyProxy)}},{recLabel:"textTextureLoadNum",recValue:function(e){return i.toSignature(i.genericInt)(i.anyProxy)}},{recLabel:"textTextureLoadTimeMax",recValue:function(e){return i.toSignature(i.genericNumber)(i.anyProxy)}},{recLabel:"textTextureLoadTimeMin",recValue:function(e){return i.toSignature(i.genericNumber)(i.anyProxy)}},{recLabel:"textTextureLoadTimeSum",recValue:function(e){return i.toSignature(i.genericNumber)(i.anyProxy)}}])}]}])},function(e){return new i.SProd("ConeCanvas.Frontend.DrawTypes3d.TextureAdmin",[function(n){return new i.SRecord([{recLabel:"iconLoadNum",recValue:function(n){return i.toSpine(i.genericInt)(e.iconLoadNum)}},{recLabel:"iconLoadTimeMax",recValue:function(n){return i.toSpine(i.genericNumber)(e.iconLoadTimeMax)}},{recLabel:"iconLoadTimeMin",recValue:function(n){return i.toSpine(i.genericNumber)(e.iconLoadTimeMin)}},{recLabel:"iconLoadTimeSum",recValue:function(n){return i.toSpine(i.genericNumber)(e.iconLoadTimeSum)}},{recLabel:"textTextureLoadNum",recValue:function(n){return i.toSpine(i.genericInt)(e.textTextureLoadNum)}},{recLabel:"textTextureLoadTimeMax",recValue:function(n){return i.toSpine(i.genericNumber)(e.textTextureLoadTimeMax)}},{recLabel:"textTextureLoadTimeMin",recValue:function(n){return i.toSpine(i.genericNumber)(e.textTextureLoadTimeMin)}},{recLabel:"textTextureLoadTimeSum",recValue:function(n){return i.toSpine(i.genericNumber)(e.textTextureLoadTimeSum)}}])}])}),C=new n.Eq(function(e){return function(n){return e instanceof c&&n instanceof c?!0:e instanceof l&&n instanceof l?!0:e instanceof s&&n instanceof s?!0:!1}}),S=new n.Eq(function(e){return function(n){return e instanceof f&&n instanceof f?!0:e instanceof d&&n instanceof d?!0:e instanceof v&&n instanceof v?!0:!1}}),y={iconLoadTimeSum:0,iconLoadTimeMax:0,iconLoadTimeMin:0,iconLoadNum:0,textTextureLoadTimeSum:0,textTextureLoadTimeMax:0,textTextureLoadTimeMin:0,textTextureLoadNum:0},P=function(){var e=t.emptyWithBufferSize(1e3)(),n=t.emptyWithBufferSize(1e3)(),o=t.emptyWithBufferSize(1e3)(),a=t.emptyWithBufferSize(1e3)(),i=t.emptyWithBufferSize(1e3)(),u=t.emptyWithBufferSize(1e3)(),c=r["new"](),l=r["new"]();return{iconCache:c,iconTextures:e,lastIconTexture:_,iconLoad:n,iconPreload:o,iconTextureWidth:128,iconTextureHeight:128,iconCacheColumns:8,iconCacheRows:8,textTextures:a,textTextureCache:l,lastTextTexture:_,textLoad:i,textPreload:u,textTextureWidth:320,textTextureWidthP2:512,textTextureHeight:64,textTextureHeightP2:64,textCacheColumns:2,textCacheRows:16,textureAdmin:y}},T={x:0,y:0,z:0},b=1;e.DTCone=f,e.DTLeaf=d,e.DTFloatLabel=v,e.InsideFrustum=c,e.OutsideFrustum=l,e.AboveFrustum=s,e.TextureAdmin=u,e.runTextureAdmin=p,e.emptyTextureAdmin=y,e.initialTexturePos=_,e.emptyTextureCache=P,e.labelHeightFactor=w,e.labelWidthFactor=g,e.coosTop=T,e.startAngleConst=m,e.sphereRadius=h,e.coneRadius=b,e.genericTextureAdimin=$,e.eqFrustumVerdict=C,e.eqDrawTag=S}(PS["ConeCanvas.Frontend.DrawTypes3d"]=PS["ConeCanvas.Frontend.DrawTypes3d"]||{}),function(e){"use strict";var n=(PS.Prelude,PS["Data.TypeNat"],PS["Data.Matrix"],PS["Data.Maybe"]),t=PS.Extensions,r=function(e){if(16===e.length){var r=e[10]*e[15]-e[11]*e[14],o=e[9]*e[15]-e[11]*e[13],a=e[9]*e[14]-e[10]*e[13],i=e[8]*e[15]-e[11]*e[12],u=e[8]*e[14]-e[10]*e[12],c=e[8]*e[13]-e[9]*e[12],l=e[2]*e[7]-e[3]*e[6],s=e[1]*e[7]-e[3]*e[5],f=e[1]*e[6]-e[2]*e[5],d=e[0]*e[7]-e[3]*e[4],v=e[0]*e[6]-e[2]*e[4],m=e[0]*e[5]-e[1]*e[4],h=m*r-v*o+d*a+f*i-s*u+l*c,p=0===h;if(p)return n.Nothing.value;if(!p){var g=1/h;return n.Just.create([(e[5]*r-e[6]*o+e[7]*a)*g,(e[6]*i-e[4]*r-e[7]*u)*g,(e[4]*o-e[5]*i+e[7]*c)*g,(e[2]*o-e[1]*r-e[3]*a)*g,(e[0]*r-e[2]*i+e[3]*u)*g,(e[1]*i-e[0]*o-e[3]*c)*g,(e[13]*l-e[14]*s+e[15]*f)*g,(e[14]*d-e[12]*l-e[15]*v)*g,(e[12]*s-e[13]*d+e[15]*m)*g])}throw new Error("Failed pattern match at Data.Matrix3 line 51, column 6 - line 66, column 1: "+[p.constructor.name])}return t.fail("Matrix4>>normalFromMat4: Impossible!")};e.normalFromMat4=r}(PS["Data.Matrix3"]=PS["Data.Matrix3"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.TypeNat"],r=PS["Data.Vector3"],o=PS["Graphics.WebGL"],a=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["Data.Int"]),i=PS["Data.Matrix"],u=PS["Data.Matrix3"],c=PS["Data.Matrix4"],l=PS["Data.Maybe"],s=PS["Data.ST.Matrix"],f=(PS["Data.ST.Matrix4"],PS.Extensions),d=PS.Math,v=PS["Control.Monad.Eff"],m=PS["ConeCanvas.ConeModel"],h=function(e,r,a,c){return function(){var e=s.fromSTMat$_$_$(t.s4,r.bindings.mvMatrix)();return o.setUniformFloats$_$_$(r.bindings.uMVMatrix,i.toArray(e))(),function(){if(c){var t=function(){var n=u.normalFromMat4(e);if(n instanceof l.Nothing)return f.fail("ConeView3D setMVMatrix: no inverse of MV matrix");if(n instanceof l.Just)return n.value0;throw new Error("Failed pattern match at ConeCanvas.Frontend.Matrix line 119, column 23 - line 122, column 9: "+[n.constructor.name])}();return o.setUniformFloats$_$_$(r.bindings.uNMatrix,i.toArray(t))}if(!c)return n["return"](v.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.Matrix line 118, column 5 - line 124, column 5: "+[c.constructor.name])}()(),o.setUniformFloats$_$_$(r.bindings.uScale,[a])(),r.bindings.mvMatrix}},p=function(e,n){var t=c.makeOrtho2D$_$_$(-2.5,2.5,-2.5,2.5);return function(){return o.setUniformFloats$_$_$(n.bindings.uPMatrix,i.toArray(t))(),s.copyToSTMat$_$_$(t,n.bindings.pMatrix)(),o.setUniformFloats$_$_$(n.bindings.uMVMatrix,i.toArray(c.identity))(),s.copyToSTMat$_$_$(c.identity,n.bindings.mvMatrix)(),o.disable(o.DEPTH_TEST.value)(),h(e,n,1,!0)(),n.bindings.mvMatrix}},g=function(e,n,r){return function(){var e=s.fromSTMat$_$_$(t.s4,n.bindings.mvMatrix)(),o=r(n.bindings.mvMatrix)();return s.copyToSTMat$_$_$(e,n.bindings.mvMatrix)(),o}},w=function(e){var n=function(){return e.guiStyle instanceof m.OuterLabel?a.toNumber(e.windowSize.x)/a.toNumber(e.windowSize.y):e.prefs.labelRatio*(a.toNumber(e.windowSize.x)/a.toNumber(e.windowSize.y))}();return n},_=7.5,$=10,C=-5,S=function(e,n){var t=C+2.5,o=c.makeLookAt$_$_$(r.vec3$_$_$(0,C,-n.prefs.cameraDistZ),r.vec3$_$_$(0,t,0),r.vec3$_$_$(0,1,0));return function(){return s.copyToSTMat$_$_$(o,n.bindings.mvMatrix)(),n.bindings.mvMatrix}},y=function(e,n,t){var r=_*n.prefs.windowsRatio,a=d.sqrt(n.prefs.cameraDistZ*n.prefs.cameraDistZ+C*C),u=a+$/2,l=a-$/2,f=l/a*_,v=l/a*C+n.prefs.upperOffset,m=l/a*r,h=v+f,p={f1:-m/2,f2:m/2,f3:v,f4:h,f5:l,f6:u},g=c.makeFrustum$_$_$(p.f1/n.controlState.zoom,p.f2/n.controlState.zoom,p.f3/n.controlState.zoom,p.f4/n.controlState.zoom,p.f5,p.f6+t);return function(){o.setUniformFloats$_$_$(n.bindings.uPMatrix,i.toArray(g))(),s.copyToSTMat$_$_$(g,n.bindings.pMatrix)();var t=S(e,n)();return o.enable(o.DEPTH_TEST.value)(),t}};e.setPerspectiveLabel$_$_$=p,e.setMVMatrix$_$_$=h,e.initialMVMatrix$_$_$=S,e.setPerspective$_$_$=y,e.getPerspectiveRatio=w,e.preservingMatrix$_$_$=g}(PS["ConeCanvas.Frontend.Matrix"]=PS["ConeCanvas.Frontend.Matrix"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS.Math,o=PS["Data.Int"],a=PS["Data.ST.Matrix4"],i=PS["Data.Vector"],u=PS["Graphics.WebGL"],c=(PS["Data.ArrayBuffer.Types"],PS.Extensions),l=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Matrix"]),s=PS["Data.STSequence"],f=PS["ConeCanvas.Color"],d=PS["Control.Monad.Eff"],v=[0,0,0],m=60,h=function(e,r,o,i,c,s,d,v,m){var h=function(){return o.condColor instanceof t.Just?[o.condColor.value0.value0,o.condColor.value0.value1,o.condColor.value0.value2,o.fade]:f.color4toArray(r.prefs.massiveColor)}();return l.preservingMatrix$_$_$(e,r,function(t){return function(){return a.translateST$_$_$([-i,-c,s],r.bindings.mvMatrix)(),a.scaleST3$_$_$(v,v,v,r.bindings.mvMatrix)(),l.setMVMatrix$_$_$(e,r,v*m,!0)(),u.setUniformBoolean$_$_$(r.bindings.uUseTexture,!1)(),u.setUniformBoolean$_$_$(r.bindings.uSimple,!1)(),u.enableVertexAttribArray(r.bindings.aVertexNormal)(),u.disableVertexAttribArray(r.bindings.aTextureCoord)(),u.setUniformFloats$_$_$(r.bindings.uMaterialAmbient,h)(),u.setUniformFloats$_$_$(r.bindings.uMaterialDiffuse,h)(),u.setUniformFloats$_$_$(r.bindings.uMaterialSpecular,h)(),u.bindBufAndSetVertexAttr$_$_$(r.bindings.nBufferCone,r.bindings.aVertexNormal)(),u.drawArr$_$_$(u.TRIANGLE_FAN.value,r.bindings.vBufferCone,r.bindings.aVertexPosition)(),n.unit}})},p=function(e,n,t){if(3===e.length&&3===n.length&&3===t.length){var r=t[2]-e[2],o=t[1]-e[1],a=t[0]-e[0],u=n[2]-e[2],l=n[1]-e[1],s=n[0]-e[0];return i.toArray(i.normalize([l*r-u*o,u*a-s*r,s*o-l*a]))}return c.fail("WebGLHelpers>>calcNormal: Wrong array size!")},g=function(e){var a=2*r.pi/o.toNumber(m),i=r.sin(a),c=r.cos(a),l=function(r){return function(o){return function(a){return function(u){return function(f){return function(h){if(a>m){var g=[-u,-e,f];if(h instanceof t.Just)return function(){return s.pushAll$_$_$(o,p(g,v,h.value0))(),n.unit};if(h instanceof t.Nothing)return n["return"](d.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.Cone line 97, column 13 - line 102, column 9: "+[h.constructor.name])}if(n.otherwise){var g=[-u,-e,f];return function(){return s.pushAll$_$_$(r,g)(),function(){if(h instanceof t.Just)return function(){return s.pushAll$_$_$(o,p(g,v,h.value0))(),n.unit};if(h instanceof t.Nothing)return n["return"](d.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.Cone line 105, column 13 - line 110, column 13: "+[h.constructor.name])}()(),l(r)(o)(a+1|0)(c*u-i*f)(i*u+c*f)(new t.Just(g))()}}throw new Error("Failed pattern match at ConeCanvas.Frontend.Cone line 94, column 5 - line 113, column 1: "+[r.constructor.name,o.constructor.name,a.constructor.name,u.constructor.name,f.constructor.name,h.constructor.name])}}}}}};return function(){var e=s.empty(),n=s.empty();s.pushAll$_$_$(e,v)(),s.pushAll$_$_$(n,[0,0,0])(),l(e)(n)(0)(1)(0)(t.Nothing.value)();var r=s.toArray(e)(),o=s.toArray(n)(),a=u.makeBufferFloat(r)(),i=u.makeBufferFloat(o)();return{vBuffer:a,nBuffer:i}}};e.calcNormal$_$_$=p,e.prepareConeXZ=g,e.drawConeXZ$_$_$=h}(PS["ConeCanvas.Frontend.Cone"]=PS["ConeCanvas.Frontend.Cone"]||{}),function(e){"use strict";e.fillText2$_$_$=function(e,n,t,r,o){return function(){return e.fillText(n,t,r,o),e}},e.setTextBaseline$_$_$=function(e,n){return function(){return n.textBaseline=e,n}}}(PS["ConeCanvas.Frontend.Text"]=PS["ConeCanvas.Frontend.Text"]||{}),function(e){"use strict";var n=PS["ConeCanvas.Frontend.Text"],t=(PS.Prelude,PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["Control.Monad.Eff"],PS["Data.Maybe"]),r=PS.Extensions,o=PS["Graphics.Canvas"],a=PS["ConeCanvas.Color"],i=function(e,i,u){return function(){var e=o.getCanvasElementById("textureCanvas")();if(e instanceof t.Nothing)return r.fail("Card>>makeTextTexture: missing hidden canvas: textureCanvas")();if(e instanceof t.Just){var c=o.getContext2D(e.value0)(),l=o.getCanvasWidth(e.value0)(),s=o.getCanvasHeight(e.value0)();return n.setTextBaseline$_$_$("bottom",c)(),o.setTextAlign$_$_$(c,o.AlignCenter.value)(),o.setFont$_$_$(i.prefs.fontStyle,c)(),o.clearRect$_$_$(c,{x:0,y:0,w:l,h:s})(),o.setFillStyle$_$_$(a.color4IasFillStyle(i.prefs.textColor),c)(),n.fillText2$_$_$(c,u,l/2,s-6,l-6)(),e.value0}throw new Error("Failed pattern match at ConeCanvas.Frontend.Text line 35, column 3 - line 50, column 1: "+[e.constructor.name])}};e.makeText$_$_$=i}(PS["ConeCanvas.Frontend.Text"]=PS["ConeCanvas.Frontend.Text"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.ST.Matrix4"],r=PS["Data.STSequence"],o=PS["Data.StrMap.ST"],a=(PS["Data.Vector"],PS["Graphics.WebGLAll"],PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"]),i=PS["ConeCanvas.Frontend.Matrix"],u=PS["ConeCanvas.Frontend.Text"],c=PS["Control.Monad.ST"],l=(PS["Data.ArrayBuffer.Types"],PS["Data.Int"]),s=PS["Data.Maybe"],f=PS["Data.TypedArray"],d=PS.Extensions,v=PS.Math,m=PS["Graphics.Canvas"],h=PS["Control.Monad.Eff"],p=PS["Graphics.WebGL"],g=PS["Graphics.WebGLTexture"],w=PS["ConeCanvas.Color"],_=PS["ConeCanvas.ConeControl"],$=function(){var e=p.makeBufferFloatDyn([0,0,1,0,1,1,0,1])(),t=p.makeBuffer$_$_$(n.moduloSemiringInt,p.ELEMENT_ARRAY_BUFFER.value,f.asUint16Array,[0,1,2,0,2,3])(),r=p.makeBufferFloat([0,0,0,1,0,0,1,1,0,0,1,0])();return{textureCoords:e,vertexIndices:t,vertexCoos:r}},C=function(e){return function(){var n=m.getCanvasElementById("iconCanvas")();if(n instanceof s.Nothing)return d.fail("Card>>makeIcon: missing hidden canvas: iconCanvas")();if(n instanceof s.Just){var t=m.getContext2D(n.value0)(),r=m.getCanvasWidth(n.value0)(),o=m.getCanvasHeight(n.value0)();return m.clearRect$_$_$(t,{x:0,y:0,w:r,h:o})(),m.drawImageScale$_$_$(t,e,0,0,r,o)(),n.value0}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 316, column 5 - line 326, column 1: "+[n.constructor.name])}},S=function(e,t){return function(){var o=r.peek$_$_$(e.textTextures,t.cacheIndex)();if(o instanceof s.Nothing)return d.fail("Textures>>lookupTextTexturePos: textureIndex invalid: "+n.show(n.showInt)(t.cacheIndex))();if(o instanceof s.Just)return{x1:l.toNumber(t.column)/l.toNumber(e.textCacheColumns),x2:(l.toNumber(t.column)+l.toNumber(e.textTextureWidth)/l.toNumber(e.textTextureWidthP2))/l.toNumber(e.textCacheColumns),y1:l.toNumber(t.row)/l.toNumber(e.textCacheRows),y2:(l.toNumber(t.row)+l.toNumber(e.textTextureHeight)/l.toNumber(e.textTextureHeightP2))/l.toNumber(e.textCacheRows),texture:o.value0};throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 119, column 5 - line 130, column 1: "+[o.constructor.name])}},y=function(e,t){return function(){var o=r.peek$_$_$(e.iconTextures,t.cacheIndex)();if(o instanceof s.Nothing)return d.fail("Textures>>lookupIconTexturePos: textureIndex invalid: "+n.show(n.showInt)(t.cacheIndex))();if(o instanceof s.Just)return{x1:l.toNumber(t.column)/l.toNumber(e.iconCacheColumns),x2:l.toNumber(t.column+1|0)/l.toNumber(e.iconCacheColumns),y1:l.toNumber(t.row)/l.toNumber(e.iconCacheRows),y2:l.toNumber(t.row+1|0)/l.toNumber(e.iconCacheRows),texture:o.value0};throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 156, column 5 - line 165, column 1: "+[o.constructor.name])}},P=function(e,t,a,i){return function(){var e=c.readSTRef(t.bindings.textureRef)(),u=o.peek(e.textTextureCache)(a)();if(u instanceof s.Just&&u.value0 instanceof s.Just){var l=S(e,u.value0.value0)();return i(l)()}if(u instanceof s.Just&&u.value0 instanceof s.Nothing)return n.unit;if(u instanceof s.Nothing)return r.push$_$_$(e.textLoad,a)(),o.poke$_$_$(e.textTextureCache,a,s.Nothing.value)(),n.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 106, column 3 - line 116, column 1: "+[u.constructor.name])}},T=function(e){var t=function(){var n=g.newTextureInit$_$_$(e.textCacheColumns*e.textTextureWidthP2|0,e.textCacheRows*e.textTextureHeightP2|0,g.MIPMAP.value)();r.push$_$_$(e.textTextures,n)();var t=r.length(e.textTextures)();return{cacheIndex:t-1,row:0,column:0}},o=e.lastTextTexture.cacheIndex<0;if(o)return t;if(!o){var a=e.lastTextTexture.column<e.textCacheColumns-1;if(a)return n["return"](h.applicativeEff)(function(){var n={};for(var t in e.lastTextTexture)e.lastTextTexture.hasOwnProperty(t)&&(n[t]=e.lastTextTexture[t]);return n.column=e.lastTextTexture.column+1|0,n}());if(!a){var i=e.lastTextTexture.row<e.textCacheRows-1;if(i)return n["return"](h.applicativeEff)(function(){var n={};for(var t in e.lastTextTexture)e.lastTextTexture.hasOwnProperty(t)&&(n[t]=e.lastTextTexture[t]);return n.column=0,n.row=e.lastTextTexture.row+1|0,n}());if(!i)return t;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 277, column 18 - line 280, column 3: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 275, column 14 - line 280, column 3: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 273, column 8 - line 280, column 3: "+[o.constructor.name])},b=function(e){var t=function(){var n=g.newTextureInit$_$_$(e.iconCacheColumns*e.iconTextureWidth|0,e.iconCacheRows*e.iconTextureHeight|0,g.LINEAR.value)();r.push$_$_$(e.iconTextures,n)();var t=r.length(e.iconTextures)();return{cacheIndex:t-1,row:0,column:0}},o=e.lastIconTexture.cacheIndex<0;if(o)return t;if(!o){var a=e.lastIconTexture.column<e.iconCacheColumns-1;if(a)return n["return"](h.applicativeEff)(function(){var n={};for(var t in e.lastIconTexture)e.lastIconTexture.hasOwnProperty(t)&&(n[t]=e.lastIconTexture[t]);return n.column=e.lastIconTexture.column+1|0,n}());if(!a){var i=e.lastIconTexture.row<e.iconCacheRows-1;if(i)return n["return"](h.applicativeEff)(function(){var n={};for(var t in e.lastIconTexture)e.lastIconTexture.hasOwnProperty(t)&&(n[t]=e.lastIconTexture[t]);return n.column=0,n.row=e.lastIconTexture.row+1|0,n}());if(!i)return t;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 333, column 18 - line 336, column 3: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 331, column 14 - line 336, column 3: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 329, column 8 - line 336, column 3: "+[o.constructor.name])},E=function(e,t,a,i){var u=function(e){return function(){var o=c.readSTRef(t.bindings.textureRef)();return r.push$_$_$(o.iconLoad,{name:a,image:e})(),n.unit}};return function(){var e=c.readSTRef(t.bindings.textureRef)(),r=o.peek(e.iconCache)(a)();if(r instanceof s.Just&&r.value0 instanceof s.Just){var l=y(e,r.value0.value0)();return i(l)()}if(r instanceof s.Just&&r.value0 instanceof s.Nothing)return n.unit;if(r instanceof s.Nothing)return o.poke$_$_$(e.iconCache,a,s.Nothing.value)(),t.loadIconCallback(a)(u)(),n.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 136, column 5 - line 145, column 3: "+[r.constructor.name])}},x=function(e,n,r,o,a,u,c,l,s){return i.preservingMatrix$_$_$(e,n,function(f){return function(){t.translateST$_$_$([o,-(a+c),0],n.bindings.mvMatrix)(),t.scaleST3$_$_$(u,c,1,n.bindings.mvMatrix)(),i.setMVMatrix$_$_$(e,n,s,!1)();var f=[r.x1,r.y2,r.x2,r.y2,r.x2,r.y1,r.x1,r.y1];return p.fillBuffer$_$_$(n.bindings.textureCoords,0,f)(),p.setUniformBoolean$_$_$(n.bindings.uUseTexture,!0)(),p.setUniformBoolean$_$_$(n.bindings.uSimple,!1)(),p.setUniformFloats$_$_$(n.bindings.uTexAmbiance,[l])(),p.disableVertexAttribArray(n.bindings.aVertexNormal)(),p.enableVertexAttribArray(n.bindings.aTextureCoord)(),p.bindBufAndSetVertexAttr$_$_$(n.bindings.vertexCoos,n.bindings.aVertexPosition)(),p.bindBufAndSetVertexAttr$_$_$(n.bindings.textureCoords,n.bindings.aTextureCoord)(),g.withTexture2D$_$_$(r.texture,0,n.bindings.uSampler,0,function(){return p.bindBuf(n.bindings.vertexIndices)(),p.colorMask(!0)(!0)(!0)(!1)(),p.drawElements$_$_$(p.TRIANGLES.value,6)(),p.colorMask(!0)(!0)(!0)(!0)()})()}})},F=function(e,n,r,o,a,u,c,l,f){if(r instanceof s.Just)return x(e,n,r.value0,o,a,u,c,l,f);if(r instanceof s.Nothing)return i.preservingMatrix$_$_$(e,n,function(r){return function(){return t.translateST$_$_$([o,-(a+c),0],n.bindings.mvMatrix)(),t.scaleST3$_$_$(u,c,1,n.bindings.mvMatrix)(),i.setMVMatrix$_$_$(e,n,f,!1)(),p.setUniformFloats$_$_$(n.bindings.uMaterialAmbient,w.color4toArray(n.prefs.rectColor))(),p.setUniformBoolean$_$_$(n.bindings.uUseTexture,!1)(),p.setUniformBoolean$_$_$(n.bindings.uSimple,!0)(),p.drawArr$_$_$(p.LINE_LOOP.value,n.bindings.vertexCoos,n.bindings.aVertexPosition)()}});throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 83, column 5 - line 100, column 1: "+[r.constructor.name])},A=function(e,t){return function(){var a=c.readSTRef(t.bindings.textureRef)(),i=r.last(a.textLoad)();if(i instanceof s.Nothing)return!1;if(i instanceof s.Just){var l=u.makeText$_$_$(e,t,i.value0)(),f=T(a)(),v=r.peek$_$_$(a.textTextures,f.cacheIndex)();if(v instanceof s.Nothing)return d.fail("Textures>>constructTextTexture: Index failure: "+n.show(n.showInt)(f.cacheIndex))();if(v instanceof s.Just)return g.bindTexture$_$_$(g.TEXTURE_2D.value,v.value0)(),g.handleSubLoad2D$_$_$(v.value0,a.textTextureWidthP2*f.column|0,a.textTextureHeightP2*f.row|0,a.textTextureWidth,a.textTextureHeight,g.MIPMAP.value,l)(),g.unbindTexture(g.TEXTURE_2D.value)(),r.pop(a.textLoad)(),o.poke$_$_$(a.textTextureCache,i.value0,new s.Just(f))(),c.modifySTRef$_$_$(t.bindings.textureRef,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.lastTextTexture=f,n})(),!0;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 256, column 13 - line 270, column 1: "+[v.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 250, column 5 - line 270, column 1: "+[i.constructor.name])}},N=function(e,t){return function(){var e=c.readSTRef(t.bindings.textureRef)(),a=r.last(e.iconLoad)();if(a instanceof s.Nothing)return!1;if(a instanceof s.Just){var i=b(e)(),u=r.peek$_$_$(e.iconTextures,i.cacheIndex)();if(u instanceof s.Nothing)return d.fail("Textures>>constructIconTexture: Index failure: "+n.show(n.showInt)(i.cacheIndex))();if(u instanceof s.Just){var l=C(a.value0.image)();return g.bindTexture$_$_$(g.TEXTURE_2D.value,u.value0)(),g.handleSubLoad2D$_$_$(u.value0,e.iconTextureWidth*i.column|0,e.iconTextureHeight*i.row|0,e.iconTextureWidth,e.iconTextureHeight,g.MIPMAP.value,l)(),g.unbindTexture(g.TEXTURE_2D.value)(),r.pop(e.iconLoad)(),o.poke$_$_$(e.iconCache,a.value0.name,new s.Just(i))(),c.modifySTRef$_$_$(t.bindings.textureRef,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.lastIconTexture=i,n})(),!0}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 298, column 13 - line 313, column 1: "+[u.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 293, column 5 - line 313, column 1: "+[a.constructor.name])}},D=function(e,t,o,i,u,l){return function(){var s=e,f=t,d=o,m=i,p=u,g=l;e:for(;;){var w=_.getMillisecondsTime(),$=w-m>d;if($)return g;if(!$){var C=function(){if(p)return A(s,f);if(!p)return N(s,f);throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 194, column 26 - line 197, column 13: "+[p.constructor.name])}()(),S=_.getMillisecondsTime(),y=S-w;!function(){var e=p&&C;if(e)return function(){return c.modifySTRef$_$_$(f.bindings.textureRef,function(e){var n=a.runTextureAdmin(e.textureAdmin),t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.textureAdmin=function(){var e=0===n.textTextureLoadNum;if(e)return a.TextureAdmin(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.textTextureLoadTimeSum=y,e.textTextureLoadTimeMax=y,e.textTextureLoadTimeMin=y,e.textTextureLoadNum=1,e}());if(!e)return a.TextureAdmin(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.textTextureLoadTimeSum=n.textTextureLoadTimeSum+y,e.textTextureLoadTimeMax=v.max$_$_$(n.textTextureLoadTimeMax,y),e.textTextureLoadTimeMin=v.min$_$_$(n.textTextureLoadTimeMin,y),e.textTextureLoadNum=n.textTextureLoadNum+1|0,e}());throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 205, column 33 - line 215, column 88: "+[e.constructor.name])}(),t})(),n.unit};if(!e){if(C)return function(){return c.modifySTRef$_$_$(f.bindings.textureRef,function(e){var n=a.runTextureAdmin(e.textureAdmin),t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.textureAdmin=function(){var e=0===n.iconLoadNum;if(e)return a.TextureAdmin(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.iconLoadTimeSum=y,e.iconLoadTimeMax=y,e.iconLoadTimeMin=y,e.iconLoadNum=1,e}());if(!e)return a.TextureAdmin(function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.iconLoadTimeSum=n.iconLoadTimeSum+y,e.iconLoadTimeMax=v.max$_$_$(n.iconLoadTimeMax,y),e.iconLoadTimeMin=v.min$_$_$(n.iconLoadTimeMin,y),e.iconLoadNum=n.iconLoadNum+1|0,e}());throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 223, column 37 - line 233, column 78: "+[e.constructor.name])}(),t})(),n.unit};if(!C)return n["return"](h.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 217, column 22 - line 236, column 13: "+[C.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 199, column 13 - line 236, column 13: "+[e.constructor.name])}()();var P=c.readSTRef(f.bindings.textureRef)(),T=r.length(P.textLoad)(),b=r.length(P.iconLoad)(),E=0===(T+b|0);if(E)return g||C;if(!E){var x=T>b,F=s,D=f,M=d,L=m,O=g||C;s=F,f=D,d=M,m=L,p=x,g=O;continue e}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 239, column 13 - line 245, column 1: "+[E.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 191, column 5 - line 245, column 1: "+[$.constructor.name])}}},M=function(e,t,o){return function(){var a=c.readSTRef(t.bindings.textureRef)(),i=_.getMillisecondsTime(),u=r.length(a.textLoad)(),l=r.length(a.iconLoad)();return function(){var r=0===(u+l|0);if(r)return n["return"](h.applicativeEff)(n.unit);if(!r){var a=u>l;return function(){var r=D(e,t,o,i,a,!1)();if(r)return c.writeSTRef$_$_$(t.controlState.needRepaint,!0)(),n.unit;if(!r)return n.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 176, column 13 - line 180, column 5: "+[r.constructor.name])}}throw new Error("Failed pattern match at ConeCanvas.Frontend.Textures line 171, column 5 - line 180, column 5: "+[r.constructor.name])}()(),n.unit}};e.constructTextures$_$_$=M,e.getIcon$_$_$=E,e.rectangle$_$_$=F,e.prepareTexture=$,e.drawTexture$_$_$=x,e.getTextTexture$_$_$=P}(PS["ConeCanvas.Frontend.Textures"]=PS["ConeCanvas.Frontend.Textures"]||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.Int.Bits"],PS["Control.Monad.Eff"]),r=PS["Control.Monad.ST"],o=(PS["Graphics.WebGLAll"],PS["Graphics.WebGLRaw"]),a=(PS["Data.Vector"],PS["Data.ST.Matrix4"]),i=PS["Debug.Trace"],u=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Matrix"]),c=PS["ConeCanvas.Color"],l=PS["Graphics.WebGL"],s=PS["Graphics.WebGLFramebuffer"],f=PS["Graphics.WebGLTexture"],d=function(e,n){return r.writeSTRef$_$_$(n.bindings.lastPickColor,0)},v=function(e){return e.value0<<16|e.value1<<8|e.value2},m=function(e,n,t,r,o,i,d,v){return u.preservingMatrix$_$_$(e,n,function(m){return function(){return a.translateST$_$_$([r,-(o+d),0],n.bindings.mvMatrix)(),a.scaleST3$_$_$(i,d,1,n.bindings.mvMatrix)(),u.setMVMatrix$_$_$(e,n,v,!1)(),l.disable(l.DEPTH_TEST.value)(),s.bindFramebuffer(n.bindings.pickBuffer.l)(),l.viewport(0)(0)(n.windowSize.x)(n.windowSize.y)(),s.framebufferTexture2D$_$_$(s.COLOR_ATTACHMENT0.value,f.TEXTURE_2D.value,n.bindings.pickBuffer.r)(),l.setUniformBoolean$_$_$(n.bindings.uUseTexture,!1)(),l.setUniformBoolean$_$_$(n.bindings.uSimple,!0)(),l.disableVertexAttribArray(n.bindings.aVertexNormal)(),l.disableVertexAttribArray(n.bindings.aTextureCoord)(),l.setUniformFloats$_$_$(n.bindings.uMaterialAmbient,c.color4toArray(t))(),l.bindBufAndSetVertexAttr$_$_$(n.bindings.vertexCoos,n.bindings.aVertexPosition)(),l.bindBuf(n.bindings.vertexIndices)(),l.drawElements$_$_$(l.TRIANGLES.value,6)(),s.unbindFramebuffer(),l.viewport(0)(0)(n.windowSize.x)(n.windowSize.y)(),l.enable(l.DEPTH_TEST.value)()}})},h=function(e){return new c.Color4I(e>>16&255,e>>8&255,255&e,1)},p=function(e){return function(){var r=l.getCanvasWidth(e)(),a=l.getCanvasHeight(e)(),u=s.createFramebuffer();s.bindFramebuffer(u)();var c=f.newTexture$_$_$(r,a,f.NEAREST.value)();s.framebufferTexture2D$_$_$(s.COLOR_ATTACHMENT0.value,f.TEXTURE_2D.value,c)();var d=s.checkFramebufferStatus(o._FRAMEBUFFER)();return i.traceA(t.applicativeEff)("initPickbuffer Code: "+n.show(n.showInt)(d))(),s.unbindFramebuffer(),{l:u,r:c}}},g=function(e,n){return r.modifySTRef$_$_$(n.bindings.lastPickColor,function(e){
return e+1|0})};e.resetPickColor$_$_$=d,e.getNextPickColor$_$_$=g,e.intToPickColor=h,e.pickColorToInt=v,e.paintPickColorToBuffer$_$_$=m,e.initPickbuffer=p}(PS["ConeCanvas.Frontend.Pickbuffer"]=PS["ConeCanvas.Frontend.Pickbuffer"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Int"],o=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),a=(PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Textures"]),i=PS["ConeCanvas.Frontend.Pickbuffer"],u=PS["Data.STSequence"],c=PS["Control.Monad.Eff"],l=PS["ConeCanvas.Color"],s=function(e,r,c,s,f,d){var v=function(e){if(e instanceof t.Just)return e.value0;if(e instanceof t.Nothing)return{x:0,y:0,z:0};throw new Error("Failed pattern match at ConeCanvas.Frontend.ControlArea line 116, column 7 - line 117, column 7: "+[e.constructor.name])};return function(){a.rectangle$_$_$(e,r,t.Nothing.value,s.x,-s.y,f.x,f.y,1,1)();var m=f.x*d,h=r.controlState.zoomControl*((f.y-m)/2),p=-(s.y+(h-f.y/2+m/2)),g=o.getConeFront(r.frontend);a.getIcon$_$_$(e,r,"Handle2.png",function(n){return a.drawTexture$_$_$(e,r,n,s.x,p,f.x,m,1,1)})();var w=i.getNextPickColor$_$_$(e,r)(),_=i.intToPickColor(w);i.paintPickColorToBuffer$_$_$(e,r,l.color4IToColor4(_),s.x,p,f.x,m,1)();var $=g.userToDevice(r)({x:s.x+f.x/2,y:s.y-m/2,z:1})(),C=g.userToDevice(r)({x:s.x+f.x-f.x/2,y:s.y-f.y+m/2,z:1})();return u.push$_$_$(c,{l:w,r:new o.CIZoom({leftTopFront:v($),rightBottomRear:v(C)})})(),n.unit}},f=function(e,r,c,s,f,d){var v=function(e){if(e instanceof t.Just)return e.value0;if(e instanceof t.Nothing)return{x:0,y:0,z:0};throw new Error("Failed pattern match at ConeCanvas.Frontend.ControlArea line 86, column 5 - line 87, column 5: "+[e.constructor.name])};return function(){a.rectangle$_$_$(e,r,t.Nothing.value,s.x,-s.y,f.x,f.y,1,1)();var m=f.x/4,h=s.x+f.x/2-m/2,p=r.controlState.angleSelect.x*((f.x-m)/2),g=s.x+p+f.x/2-m/2,w=m*d,_=s.y+(-(f.y/2)+w/2),$=r.controlState.angleSelect.y*((f.y-w)/2),C=s.y+($-f.y/2+w/2),S=o.getConeFront(r.frontend);a.getIcon$_$_$(e,r,"Turn.png",function(n){return a.drawTexture$_$_$(e,r,n,h,-_,m,w,1,1)})();var y=i.getNextPickColor$_$_$(e,r)(),P=i.intToPickColor(y);i.paintPickColorToBuffer$_$_$(e,r,l.color4IToColor4(P),s.x,-s.y,f.x,f.y,1)();var T=S.userToDevice(r)({x:s.x,y:s.y,z:1})(),b=S.userToDevice(r)({x:s.x+f.x,y:s.y-f.y,z:1})(),E=new o.CITurn({leftTopFront:v(T),rightBottomRear:v(b)});a.getIcon$_$_$(e,r,"Handle.png",function(n){return a.drawTexture$_$_$(e,r,n,g,-C,m,w,1,1)})();var x=i.getNextPickColor$_$_$(e,r)(),F=i.intToPickColor(x);i.paintPickColorToBuffer$_$_$(e,r,l.color4IToColor4(F),g,-C,m,w,1)();var A=S.userToDevice(r)({x:s.x+m/2,y:s.y-w/2,z:1})(),N=S.userToDevice(r)({x:s.x+f.x-m/2,y:s.y-f.y+w/2,z:1})(),D=new o.CIAngel({leftTopFront:v(A),rightBottomRear:v(N)});return u.push$_$_$(c,{l:x,r:D})(),u.push$_$_$(c,{l:y,r:E})(),n.unit}},d=function(e,t,o){var a=r.toNumber(t.windowSize.x)/r.toNumber(t.windowSize.y);if(t.controlState.showControl)return function(){return f(e,t,o,{x:1.375,y:2.48},{x:1,y:1*a},a)(),s(e,t,o,{x:2.375,y:2.48},{x:.1,y:1*a},a)()};if(!t.controlState.showControl)return n["return"](c.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.ControlArea line 34, column 5 - line 38, column 3: "+[t.controlState.showControl.constructor.name])};e.coneDrawControls2$_$_$=d}(PS["ConeCanvas.Frontend.ControlArea"]=PS["ConeCanvas.Frontend.ControlArea"]||{}),function(e){"use strict";e.asDataView=function(e){return new DataView(e)},e.getFloat32Unsafe=function(e,n,t){return e.getFloat32(n,t)}}(PS["Data.DataView"]=PS["Data.DataView"]||{}),function(e){"use strict";var n=PS["Data.DataView"];PS.Prelude,PS["Data.Function"],PS["Data.Maybe"],PS["Data.ArrayBuffer.Types"];e.getFloat32Unsafe=n.getFloat32Unsafe,e.asDataView=n.asDataView}(PS["Data.DataView"]=PS["Data.DataView"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Graphics.WebGL"],o=PS["Data.ST.Matrix4"],a=(PS["Data.ArrayBuffer.Types"],PS["Control.Monad.ST"]),i=PS["Data.StrMap.ST"],u=PS["Data.Map"],c=PS["Data.STSequence"],l=PS["Data.DataView"],s=PS["Data.Array"],f=(PS["Data.Array.Unsafe"],PS["Data.Vector3"]),d=(PS["Data.Function"],PS["Data.List"]),v=PS.Math,m=PS["Data.Int"],h=PS["Data.Foldable"],p=PS["Data.Traversable"],g=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Matrix"]),w=PS["ConeCanvas.Color"],_=PS["Control.Monad.Eff"],$=PS["ConeCanvas.GeometryTypes"],C=function(e,n,t,r){return v.min$_$_$(v.min$_$_$(v.min$_$_$(e,n),t),r)},S=function(e,n,t,r){return v.max$_$_$(v.max$_$_$(v.max$_$_$(e,n),t),r)},y=function(e,a,i,u,c,l,s,f,d,m){var h=v.abs(u.extent.maxX-u.extent.minX),p=s/(1.5*h),_=(v.abs(u.extent.maxZ-u.extent.minZ),v.abs(u.extent.maxY-u.extent.minY),function(){return i.condColor instanceof t.Just?[i.condColor.value0.value0,i.condColor.value0.value1,i.condColor.value0.value2,1]:w.color4toArray(a.prefs.massiveColor)}());return g.preservingMatrix$_$_$(e,a,function(t){return function(){return o.rotateSTX$_$_$(-v.pi/2,a.bindings.mvMatrix)(),o.scaleST3$_$_$(p,p,p,a.bindings.mvMatrix)(),g.setMVMatrix$_$_$(e,a,p,!0)(),r.setUniformBoolean$_$_$(a.bindings.uUseTexture,!1)(),r.setUniformBoolean$_$_$(a.bindings.uSimple,!1)(),r.disableVertexAttribArray(a.bindings.aTextureCoord)(),r.enableVertexAttribArray(a.bindings.aVertexNormal)(),r.setUniformFloats$_$_$(a.bindings.uMaterialAmbient,_)(),r.setUniformFloats$_$_$(a.bindings.uMaterialDiffuse,_)(),r.setUniformFloats$_$_$(a.bindings.uMaterialSpecular,_)(),r.bindBufAndSetVertexAttr$_$_$(u.normals,a.bindings.aVertexNormal)(),r.drawArr$_$_$(r.TRIANGLES.value,u.triangles,a.bindings.aVertexPosition)(),n.unit}})},P=function(e,r,o){var a=function(e){var t=m.toNumber(d.length(e.indices)),r=f.vec3$_$_$(e.normal.x/t,e.normal.y/t,e.normal.z/t);return function(){return p.traverse(d.traversableList)(_.applicativeEff)(function(e){return function(){return c.poke$_$_$(o,3*e|0,f.get3X(r))(),c.poke$_$_$(o,(3*e|0)+1|0,f.get3Y(r))(),c.poke$_$_$(o,(3*e|0)+2|0,f.get3Z(r))()}})(e.indices)(),n.unit}},i=function(o){return function(a){var i=r[(3*o|0)+2|0],c=r[(3*o|0)+1|0],l=r[3*o|0],s={x:l,y:c,z:i},f=e[(3*(o/3|0)|0)+2|0],v=e[(3*(o/3|0)|0)+1|0],m=e[3*(o/3|0)|0],h={x:m,y:v,z:f},p=u.lookup$_$_$($.ordPoint3(n.ordNumber),s,a);if(p instanceof t.Nothing)return u.insert($.ordPoint3(n.ordNumber))(s)({normal:h,indices:d.singleton(o)})(a);if(p instanceof t.Just)return u.update$_$_$($.ordPoint3(n.ordNumber),function(e){return new t.Just({normal:{x:m+p.value0.normal.x,y:v+p.value0.normal.y,z:f+p.value0.normal.z},indices:d[":"](o)(p.value0.indices)})},s,a);throw new Error("Failed pattern match at ConeCanvas.Frontend.STL line 165, column 12 - line 170, column 5: "+[p.constructor.name])}},l=h.foldr(h.foldableArray)(i)(u.empty)(s.range$_$_$(0,(s.length(r)/3|0)-1));return function(){return p.traverse(u.traversableMap($.ordPoint3(n.ordNumber)))(_.applicativeEff)(a)(l)(),n.unit}},T=function(e,n,t){var o=l.asDataView(n),a=function(e){return function(n){return function(t){return function(r){var a=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+8|0,!0),i=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+4|0,!0),u=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+0|0,!0);return function(){c.poke$_$_$(e,0+(3*r|0)|0,u)(),c.poke$_$_$(e,1+(3*r|0)|0,i)(),c.poke$_$_$(e,2+(3*r|0)|0,a)();var s=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+44|0,!0),f=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+32|0,!0),d=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+20|0,!0),v=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+40|0,!0),m=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+28|0,!0),h=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+16|0,!0),p=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+36|0,!0),g=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+24|0,!0),w=l.getFloat32Unsafe(o,(84+(50*r|0)|0)+12|0,!0);return c.poke$_$_$(n,0+(9*r|0)|0,w)(),c.poke$_$_$(n,1+(9*r|0)|0,h)(),c.poke$_$_$(n,2+(9*r|0)|0,d)(),c.poke$_$_$(n,3+(9*r|0)|0,g)(),c.poke$_$_$(n,4+(9*r|0)|0,m)(),c.poke$_$_$(n,5+(9*r|0)|0,f)(),c.poke$_$_$(n,6+(9*r|0)|0,p)(),c.poke$_$_$(n,7+(9*r|0)|0,v)(),c.poke$_$_$(n,8+(9*r|0)|0,s)(),{minX:C(t.minX,w,g,p),maxX:S(t.maxX,w,g,p),minY:C(t.minY,h,m,v),maxY:S(t.maxY,h,m,v),minZ:C(t.minZ,d,f,s),maxZ:S(t.maxZ,d,f,s)}}}}}};return function(){var n=c.fromArray(s.replicate$_$_$(3*e|0,0))(),o=c.fromArray(s.replicate$_$_$(9*e|0,0))(),i={minX:1e3,maxX:-1e3,minY:1e3,maxY:-1e3,minZ:1e3,maxZ:-1e3},u=s.foldM$_$_$(_.monadEff,a(n)(o),i)(s.range$_$_$(0,e-1))(),l=c.toArray(n)(),f=c.toArray(o)(),d=c.fromArray(s.replicate$_$_$(9*e|0,0))();P(l,f,d)();var v=c.toArray(d)(),m=r.makeBufferFloat(f)(),h=r.makeBufferFloat(v)();return{name:t,size:e,normals:h,triangles:m,extent:u}}},b=function(e,r,o,u){var c=function(e){return function(u){return 0===e?n["return"](_.applicativeEff)(n.unit):function(){var c=T(e,u,o)();return i.poke$_$_$(r.bindings.stlCache,o,new t.Just(c))(),a.writeSTRef$_$_$(r.controlState.needRepaint,!0)(),n.unit}}};return function(){var e=i.peek(r.bindings.stlCache)(o)();if(e instanceof t.Just&&e.value0 instanceof t.Just)return u(e.value0.value0)();if(e instanceof t.Just&&e.value0 instanceof t.Nothing)return n.unit;if(e instanceof t.Nothing)return i.poke$_$_$(r.bindings.stlCache,o,t.Nothing.value)(),r.loadSTLCallback(o)(c)(),n.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.STL line 81, column 5 - line 88, column 3: "+[e.constructor.name])}};e.getSTL$_$_$=b,e.drawSTL$_$_$=y,e.makeSTL$_$_$=T}(PS["ConeCanvas.Frontend.STL"]=PS["ConeCanvas.Frontend.STL"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.ST.Matrix4"],r=PS["Data.STSequence"],o=PS["Data.String"],a=PS["Data.Vector3"],i=PS["Graphics.WebGL"],u=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),c=PS["ConeCanvas.Frontend.Cone"],l=PS["ConeCanvas.Frontend.ControlArea"],s=PS["ConeCanvas.Frontend.DrawTypes3d"],f=PS["ConeCanvas.Frontend.Matrix"],d=PS["ConeCanvas.Frontend.Pickbuffer"],v=PS["ConeCanvas.Frontend.STL"],m=PS["ConeCanvas.Frontend.Textures"],h=PS["Control.Monad.ST"],p=PS["Data.Array"],g=PS["Data.Foldable"],w=PS["Data.Int"],_=PS["Data.Maybe"],$=PS["Debug.Trace"],C=PS.Extensions,S=PS.Math,y=PS["Control.Monad.Eff"],P=PS["ConeCanvas.ConeControl"],T=PS["ConeCanvas.Color"],b=PS["ConeCanvas.ConeZipper"],E=function(e){return function(t){var r=t%60!==0;if(r)return n["return"](y.applicativeEff)(!1);if(!r)return function(){var r=h.readSTRef(e.animatePaintRef)();if(r instanceof _.Nothing)return!1;if(r instanceof _.Just){var o=P.getMillisecondsTime(),a=o-r.value0>2*P.stepTime;if(a)return h.writeSTRef$_$_$(e.controlState.needRepaint,!0)(),$.trace("cancelPaint itemsDrawn: "+n.show(n.showInt)(t))(function(e){return n["return"](y.applicativeEff)(!0)})();if(!a)return!1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 140, column 21 - line 147, column 1: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 136, column 13 - line 147, column 1: "+[r.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 132, column 5 - line 147, column 1: "+[r.constructor.name])}},x=function(e,u,c,l,v,h,p,g,w,$){return f.preservingMatrix$_$_$(e,c,function(f){var C=h*s.labelWidthFactor,P=h*s.labelHeightFactor;return function(){return t.translateST$_$_$(a["vec3'"]([-v.x,-v.y,v.z]),f)(),t.rotateSTY$_$_$(S.pi+l.turnAngle,f)(),function(){if(u.condLabel instanceof _.Nothing)return n["return"](y.applicativeEff)(n.unit);if(u.condLabel instanceof _.Just){var t=!o["null"](u.condLabel.value0.label);if(t){var r=function(){var e=c.controlState.showIndex===!1;if(e)return u.condLabel.value0.label;if(!e)return n.show(n.showInt)(u.realIndex+1|0)+(" "+u.condLabel.value0.label);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 336, column 48 - line 339, column 41: "+[e.constructor.name])}(),a=function(){var e=o.length(r)>c.prefs.maxTextLength;if(e)return o.take$_$_$(c.prefs.maxTextLength-2,r)+"..";if(!e)return r;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 340, column 54 - line 343, column 37: "+[e.constructor.name])}();return function(){return function(){var e=g&&c.prefs.labelTextBackground||c.prefs.alwaysGreyTextBack;if(e)return i.setUniformBoolean$_$_$(c.bindings.uUseTextureFrame,!0);if(!e)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 344, column 41 - line 348, column 41: "+[e.constructor.name])}()(),m.getTextTexture$_$_$(e,c,a,function(n){return m.drawTexture$_$_$(e,c,n,-C/2/p,-P,C/p,P,$,u.scale*l.commandingScale)})()}}if(!t)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 334, column 31 - line 357, column 13: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 332, column 13 - line 357, column 13: "+[u.condLabel.constructor.name])}()(),function(){var e=g||c.prefs.alwaysGreyTextBack;if(e)return i.setUniformBoolean$_$_$(c.bindings.uUseTextureFrame,!1);if(!e)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 357, column 13 - line 361, column 13: "+[e.constructor.name])}()(),function(){if(l.needClickInfos)return function(){var t=d.getNextPickColor$_$_$(e,c)(),o=d.intToPickColor(t);return d.paintPickColorToBuffer$_$_$(e,c,T.color4IToColor4(o),-C/2/p,-P,C/p,P,u.scale*l.commandingScale)(),r.push$_$_$(l.ciAccu,{l:t,r:w})(),n.unit};if(!l.needClickInfos)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 361, column 13 - line 373, column 13: "+[l.needClickInfos.constructor.name])}()(),n.unit}})},F=function(e){return function(t){return function(r){return function(o){if(o.fade<1)return n["return"](y.applicativeEff)(n.unit);if(n["=="](s.eqDrawTag)(o.drawTag)(s.DTCone.value)){var a=s.coneRadius/o.scale,i=t.prefs.coneHeight/o.scale;return c.drawConeXZ$_$_$(e,t,o,o.coordinates.x,o.coordinates.y,o.coordinates.z,i,a,r.commandingScale)}if(n.otherwise)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 149, column 1 - line 162, column 1: "+[t.constructor.name,r.constructor.name,o.constructor.name])}}}},A=function(e,o,u,c,l,s,h,p,g,w){return function(){return function(){if(o.condSTLName instanceof _.Just)return f.preservingMatrix$_$_$(e,u,function(r){return function(){return t.translateST$_$_$(a["vec3'"]([-l.x,-(l.y+2*s),l.z]),r)(),t.rotateSTY$_$_$(S.pi+o.angle,r)(),v.getSTL$_$_$(e,u,o.condSTLName.value0,function(n){return v.drawSTL$_$_$(e,u,o,n,-s/h,-s,2*s/h,2*s,w,o.scale*c.commandingScale)})(),n.unit}});if(o.condSTLName instanceof _.Nothing)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 387, column 9 - line 402, column 9: "+[o.condSTLName.constructor.name])}()(),f.preservingMatrix$_$_$(e,u,function(f){return function(){return t.translateST$_$_$(a["vec3'"]([-l.x,-(l.y+s),l.z]),f)(),t.rotateSTY$_$_$(S.pi+c.turnAngle,f)(),function(){if(o.condSTLName instanceof _.Just)return n["return"](y.applicativeEff)(n.unit);if(o.condSTLName instanceof _.Nothing){if(o.condIconName instanceof _.Just)return function(){return function(){var e=p&&u.prefs.labelIconBackground;if(e)return i.setUniformBoolean$_$_$(u.bindings.uUseTextureFrame,!0);if(!e)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 410, column 37 - line 413, column 37: "+[e.constructor.name])}()(),m.getIcon$_$_$(e,u,o.condIconName.value0,function(n){return m.drawTexture$_$_$(e,u,n,-s/h,-s,2*s/h,2*s,w,o.scale*c.commandingScale)})(),n.unit};if(o.condIconName instanceof _.Nothing)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 407, column 28 - line 424, column 13: "+[o.condIconName.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 405, column 13 - line 424, column 13: "+[o.condSTLName.constructor.name])}()(),function(){if(c.needClickInfos)return function(){var t=d.getNextPickColor$_$_$(e,u)(),a=d.intToPickColor(t);return d.paintPickColorToBuffer$_$_$(e,u,T.color4IToColor4(a),-s/h,-s,2*s/h,2*s,o.scale*c.commandingScale)(),r.push$_$_$(c.ciAccu,{l:t,r:g})(),n.unit};if(!c.needClickInfos)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 424, column 13 - line 436, column 13: "+[c.needClickInfos.constructor.name])}()(),n.unit}})()}},N=function(e,t,r,o){return function(){return function(){if(o instanceof _.Nothing)return C.mapE_$_$_$(r,t);if(o instanceof _.Just)return C.mapEBreak_$_$_$(r,o.value0,t);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 125, column 5 - line 128, column 5: "+[o.constructor.name])}()(),n.unit}},D=function(e,n,t,r,o,a,i){var u=S.sin(e-n)*(o*a),c=u*S.cos(n),l=-u*S.sin(n),f=r*s.labelWidthFactor,d=function(){var e=i>.15;if(e)return 0;if(!e)return f/(10*i);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 299, column 26 - line 303, column 9: "+[e.constructor.name])}(),v=S.cos(e)*(f/1.8+d),m=S.sin(e)*(f/1.8+d);return{x:t.x+v+l,y:t.y,z:t.z+m+c}},M=function(e,r,o,a,i){var c=function(a){return function(c){var l=-(S.pi/r.prefs.angleSelectFactor)*(r.controlState.angleSelect.x+r.prefs.angleSelectAddX),d=S.pi/r.prefs.angleSelectFactor*(r.controlState.angleSelect.y+r.prefs.angleSelectAddY),v=function(){if(o.upDown>0)return 1-o.upDown/100;if(o.upDown<0)return 1+o.upDown/100;if(n.otherwise)return 1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 254, column 11 - line 296, column 1: "+[])}(),m=1+-1*v,h=function(){if(g.elem$_$_$(g.foldableArray,n.eqNumber,o.upDown)([0,100,-100]))return 1;if(o.upDown>0)return 1-v;if(n.otherwise)return 1-m;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 254, column 11 - line 296, column 1: "+[])}();r.prefs.coneHeight/i.scale;return f.preservingMatrix$_$_$(e,r,function(n){return function(){var n=f.initialMVMatrix$_$_$(e,r)();t.rotateSTX$_$_$(d*h,n)(),t.rotateSTY$_$_$(-l*h,n)();var v=u.getConeFront(r.frontend).deviceToUser(r)({x:w.toNumber(r.windowSize.x)/25,y:.995*w.toNumber(r.windowSize.y),z:.3})();if(v instanceof _.Just){var m=S.min$_$_$(3*c,.3/o.commandingScale),p=1/r.controlState.zoom,g=s.sphereRadius*p,$=g+(m-g)*h,y={x:v.value0.x+$*s.labelWidthFactor/2,y:v.value0.y-$*s.labelHeightFactor,z:v.value0.z},P=y.x+(a.x-y.x)*h,T=-y.y+(a.y- -y.y)*h,b=y.z+(a.z-y.z)*h;return x(e,i,r,o,{x:P,y:T,z:b},$,f.getPerspectiveRatio(r),!0,new u.CILabel(i.realIndex),1)()}if(v instanceof _.Nothing)return C.fail("ConeView3D>>transformToFloating: condPosition impossible")();throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 277, column 19 - line 296, column 1: "+[v.constructor.name])}})}},l=S.min$_$_$(3*a,.3/o.commandingScale),d=2===i.level,v=D(i.angle,o.turnAngle,i.coordinates,l,s.coneRadius/i.parentScale,r.prefs.labelEllipticalFactor,i.parentScale/i.scale),m=0===i.drawIndex&&2===i.level&&!o.isGlobalView&&0!==o.upDown;if(m)return c(v)(a);if(!m)return x(e,i,r,o,v,l,f.getPerspectiveRatio(r),d,new u.CILabel(i.realIndex),i.fade);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 244, column 8 - line 252, column 5: "+[m.constructor.name])},L=function(e){return function(r){return function(o){return function(i){if(n["=="](s.eqDrawTag)(i.drawTag)(s.DTLeaf.value)&&(i.level>1||o.isGlobalView)){var l=s.sphereRadius/i.scale,d=s.coneRadius/i.scale;return function(){!function(){var t=_.isJust(i.condLabel);if(t)return M(e,r,o,l,i);if(!t)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 170, column 13 - line 173, column 13: "+[t.constructor.name])}()();var t=_.isJust(i.condIconName);if(t)return A(e,i,r,o,i.coordinates,2.5*l,f.getPerspectiveRatio(r),!1,new u.CICard(i.conePath),i.fade)();if(!t)return n.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 173, column 13 - line 177, column 5: "+[t.constructor.name])}}if(n["=="](s.eqDrawTag)(i.drawTag)(s.DTLeaf.value))return n["return"](y.applicativeEff)(n.unit);if(n["=="](s.eqDrawTag)(i.drawTag)(s.DTFloatLabel.value)){var v=function(){var e=function(){if(o.upDown>0)return 1-o.upDown/100;if(o.upDown<0)return 1+o.upDown/100;if(n.otherwise)return 1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 203, column 21 - line 206, column 17: "+[])}(),t=1+-1*e,r=function(){if(g.elem$_$_$(g.foldableArray,n.eqNumber,o.upDown)([0,100,-100]))return 1;if(o.upDown>0)return 1-e;if(n.otherwise)return 1-t;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 198, column 17 - line 207, column 5: "+[])}();return r}();return f.preservingMatrix$_$_$(e,r,function(t){return function(){var t=(f.initialMVMatrix$_$_$(e,r)(),u.getConeFront(r.frontend).deviceToUser(r)({x:w.toNumber(r.windowSize.x)/25,y:.995*w.toNumber(r.windowSize.y),z:.3})());return function(){if(t instanceof _.Just){var a=1/r.controlState.zoom,c=s.sphereRadius*a;return x(e,i,r,function(){var e={};for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e.turnAngle=0,e}(),{x:t.value0.x+c*s.labelWidthFactor/2,y:-t.value0.y+c*s.labelHeightFactor,z:t.value0.z},c,f.getPerspectiveRatio(r),!0,new u.CISuperLabel(1),v*i.fade)}return $.trace("ConeView3D>>drawIt': DTFloatLabel deviceToUser failed")(function(e){return n["return"](y.applicativeEff)(n.unit)})}()(),n.unit}})}if(n.otherwise){var l=s.sphereRadius/i.scale,m=(a.vec3$_$_$(-i.coordinates.x,-i.coordinates.y,i.coordinates.z),r.prefs.coneHeight/i.scale),d=s.coneRadius/i.scale;return function(){return function(){var t=i.fade<1;if(t)return c.drawConeXZ$_$_$(e,r,i,i.coordinates.x,i.coordinates.y,i.coordinates.z,m,d,o.commandingScale);if(!t)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 215, column 13 - line 218, column 13: "+[t.constructor.name])}()(),function(){var t=i.level>1&&_.isJust(i.condLabel);if(t)return M(e,r,o,l,i);if(!t)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 218, column 13 - line 221, column 13: "+[t.constructor.name])}()(),function(){var c=i.level>0&&_.isJust(i.condIconName);if(c){var s=1.5*l;return f.preservingMatrix$_$_$(e,r,function(n){return function(){return t.rotateSTY$_$_$(o.turnAngle,n)(),t.translateST$_$_$(a.vec3$_$_$(0,0,-d),n)(),t.rotateSTY$_$_$(-o.turnAngle,n)(),t.translateST$_$_$(a.vec3$_$_$(0,0,d),n)(),A(e,i,r,o,{x:i.coordinates.x,y:i.coordinates.y+m-4*l,z:i.coordinates.z-d},s,f.getPerspectiveRatio(r),!1,new u.CICard(i.conePath),i.fade)()}})}if(!c)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 221, column 13 - line 234, column 13: "+[c.constructor.name])}()(),n.unit}}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 164, column 1 - line 236, column 1: "+[r.constructor.name,o.constructor.name,i.constructor.name])}}}},O=function(e,t,o,a){var u=function(e){return function(t){var r=n.compare(n.ordNumber)(e.coordinates.y)(t.coordinates.y);return r instanceof n.EQ?n.compare(n.ordNumber)(t.coordinates.z)(e.coordinates.z):r}};return function(){var n=r.toArray(a)(),c=p.sortBy$_$_$(u,n);return i.disable(i.BLEND.value)(),N(t,c,F(e)(t)(o),function(){if(o.isGlobalView)return _.Nothing.value;if(!o.isGlobalView)return new _.Just(E(t));throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 107, column 10 - line 107, column 84: "+[o.isGlobalView.constructor.name])}())(),i.enable(i.BLEND.value)(),N(t,c,L(e)(t)(o),function(){if(o.isGlobalView)return _.Nothing.value;if(!o.isGlobalView)return new _.Just(E(t));throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 110, column 10 - line 110, column 84: "+[o.isGlobalView.constructor.name])}())(),i.disable(i.BLEND.value)()}},I=function(e,n,t,o,a,c,s,d,v){var m=function(){return c instanceof u.CommandingTurn?c.value0:0}(),h=b.coneNumLevel(t),p=function(){return c instanceof u.CommandingNothing?!0:!1}(),g=b.coneIsRoot(t),_=2*S.pi/w.toNumber(h);return function(){var n=r.empty(),t=-(m/100)*_;return O(e,s,{ciAccu:n,turnAngle:t,commandingScale:d.commandingScale,upDown:function(){if(g)return 0;if(!g)return d.upDown;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawWebGL line 73, column 20 - line 74, column 9: "+[g.constructor.name])}(),needClickInfos:p,isGlobalView:a},v)(),function(){return f.setPerspectiveLabel$_$_$(e,s)(),i.enable(i.BLEND.value)(),l.coneDrawControls2$_$_$(e,s,n)(),i.disable(i.BLEND.value)()}(),r.toArray(n)()}};e.drawEverything$_$_$=I,e.drawIcon$_$_$=A,e.drawLabel$_$_$=x}(PS["ConeCanvas.Frontend.DrawWebGL"]=PS["ConeCanvas.Frontend.DrawWebGL"]||{}),function(e){"use strict";var n=(PS.Prelude,PS["Data.Int"]),t=PS["Data.Maybe"],r=PS.Math,o=PS.Extensions,a=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),i=PS["ConeCanvas.Frontend.DrawTypes3d"],u=(PS["Control.Monad.Eff"],function(e,n){return r.max$_$_$(n.leftTopFront.y,n.leftTopBack.y)<=e.y}),c=function(e){var n=function(e){return function(n){var t=r.abs(e-n),o=function(){var r=n>e;if(r)return e-t/2;if(!r)return e+t/2;throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 49, column 34 - line 50, column 29: "+[r.constructor.name])}(),a=function(){var r=n>e;if(r)return n+t/2;if(!r)return n-t/2;throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 50, column 34 - line 51, column 25: "+[r.constructor.name])}();return{l:o,r:a}}},t=n(e.leftTopBack.x)(e.rightBottomBack.x),o=n(e.leftTopFront.x)(e.rightBottomFront.x),a=n(e.leftTopBack.y)(e.rightBottomBack.y),i=n(e.leftTopFront.y)(e.rightBottomFront.y),u=n(e.leftTopFront.z)(e.leftTopBack.z),c=n(e.rightBottomFront.z)(e.rightBottomBack.z);return{leftTopFront:{x:o.l,y:i.l,z:u.l},rightBottomFront:{x:o.r,y:i.r,z:c.l},leftTopBack:{x:t.l,y:a.l,z:u.r},rightBottomBack:{x:t.r,y:a.r,z:c.r}}},l=function(e){return function(){var r=a.getConeFront(e.frontend).deviceToUser(e)({x:0,y:n.toNumber(e.windowSize.y),z:0})(),i=a.getConeFront(e.frontend).deviceToUser(e)({x:n.toNumber(e.windowSize.x),y:0,z:0})(),u=a.getConeFront(e.frontend).deviceToUser(e)({x:0,y:n.toNumber(e.windowSize.y),z:1})(),l=a.getConeFront(e.frontend).deviceToUser(e)({x:n.toNumber(e.windowSize.x),y:0,z:1})(),s=[r,i,u,l];if(4===s.length&&s[0]instanceof t.Just&&s[1]instanceof t.Just&&s[2]instanceof t.Just&&s[3]instanceof t.Just){var f={leftTopFront:s[0].value0,rightBottomFront:s[1].value0,leftTopBack:s[2].value0,rightBottomBack:s[3].value0},d=c(f),v={drawFrustum:f,calculatedFrustum:d};return v}return o.fail("ConeView3D>>calcFrustum: Frustum calculation failed!")()}},s=function(e,n,t,o,a){var i=t>=e&&o>=n;if(i)return r.min$_$_$(e,n)<=a&&a<=r.max$_$_$(t,o);if(!i){var u=e>=t&&n>=o;if(u)return r.min$_$_$(t,o)<=a&&a<=r.max$_$_$(e,n);if(!u){var c=t>=e&&n>=o;if(c)return r.min$_$_$(e,o)<=a&&a<=r.max$_$_$(t,n);if(!c)return r.min$_$_$(t,n)<=a&&a<=r.max$_$_$(e,o);throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 85, column 18 - line 91, column 1: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 83, column 14 - line 91, column 1: "+[u.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 81, column 5 - line 91, column 1: "+[i.constructor.name])},f=function(e,n){return s(n.leftTopFront.x,n.leftTopBack.x,n.rightBottomFront.x,n.rightBottomBack.x,e.x)&&s(n.leftTopFront.y,n.leftTopBack.y,n.rightBottomFront.y,n.rightBottomBack.y,e.y)&&s(n.leftTopFront.z,n.rightBottomFront.z,n.leftTopBack.z,n.rightBottomBack.z,e.z)},d=function(e,n,t,r){var o=function(){var o=f(n,r)||f(function(){var r={};for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);return r.y=n.y-e*t,r}(),r)||f(function(){var r={};for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);return r.y=n.y-e*t,r.x=n.x+i.coneRadius*t,r}(),r)||f(function(){var r={};for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);return r.y=n.y-e*t,r.x=n.x-i.coneRadius*t,r}(),r);if(o)return i.InsideFrustum.value;if(!o){var a=u(n,r);if(a)return i.InsideFrustum.value;if(!a)return i.OutsideFrustum.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 139, column 22 - line 142, column 5: "+[a.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 134, column 15 - line 142, column 5: "+[o.constructor.name])}();return o},v=function(e,n,t){var r=n>e;if(r)return t>=e&&n>=t;if(!r)return t>=n&&e>=t;throw new Error("Failed pattern match at ConeCanvas.Frontend.Frustum line 75, column 5 - line 79, column 1: "+[r.constructor.name])},m=function(e,n){var t=v(n.leftTopFront.x,n.rightBottomFront.x,e.leftTopFront.x)&&v(n.leftTopFront.x,n.rightBottomFront.x,e.rightBottomFront.x)&&v(n.leftTopBack.x,n.rightBottomBack.x,e.leftTopBack.x)&&v(n.leftTopBack.x,n.rightBottomBack.x,e.rightBottomBack.x)&&v(n.leftTopFront.y,n.rightBottomFront.y,e.leftTopFront.y)&&v(n.leftTopFront.y,n.rightBottomFront.y,e.rightBottomFront.y)&&v(n.leftTopBack.y,n.rightBottomBack.y,e.leftTopBack.y)&&v(n.leftTopBack.y,n.rightBottomBack.y,e.rightBottomBack.y)&&v(n.leftTopFront.z,n.leftTopBack.z,e.leftTopFront.z)&&v(n.leftTopFront.z,n.leftTopBack.z,e.leftTopBack.z)&&v(n.rightBottomFront.z,n.rightBottomBack.z,e.rightBottomFront.z)&&v(n.rightBottomFront.z,n.rightBottomBack.z,e.rightBottomBack.z);return t};e.frustumInside$_$_$=m,e.calcFrustumVerdict$_$_$=d,e.calcFrustums=l}(PS["ConeCanvas.Frontend.Frustum"]=PS["ConeCanvas.Frontend.Frustum"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Int"],r=PS["Data.Maybe"],o=PS["Data.Maybe.Unsafe"],a=PS["Control.Monad.ST"],i=PS.Math,u=PS["Data.List"],c=PS["Data.Foldable"],l=PS["Data.Array"],s=PS["Debug.Trace"],f=PS["Data.ST.Matrix4"],d=PS["Data.Vector3"],v=PS.Extensions,m=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),h=PS["ConeCanvas.Frontend.DrawTypes3d"],p=PS["ConeCanvas.Frontend.DrawWebGL"],g=PS["ConeCanvas.Frontend.Matrix"],w=PS["Data.STSequence"],_=PS["ConeCanvas.Frontend.Frustum"],$=PS["ConeCanvas.ConeTransforms"],C=PS["ConeCanvas.ConeModel"],S=PS["ConeCanvas.ConeZipper"],y=PS["Control.Monad.Eff"],P=PS["ConeCanvas.ConeControl"],T=function(e,t){if(u["null"](t))return t;if(n.otherwise)return u.take(u.length(t)-1)(t);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 484, column 1 - line 489, column 1: "+[t.constructor.name])},b=function(e,n){return n instanceof m.CommandingTrans?!0:n instanceof m.CommandingClockwork?!0:!1},E=function(e,n){return n instanceof m.CommandingTrans?n.value0:$.emptyTransform(0)},x=function(e,o,a){if(e instanceof r.Nothing)return 0;if(e instanceof r.Just){var c=u.uncons(e.value0.path);if(c instanceof r.Nothing)return 0;if(c instanceof r.Just){var l=c.value0.head-o,s=t.round(t.toNumber(a)/2),f=function(){if(0===l)return 0;if(-l>s)return a+l|0;if(l>s)return l-a;if(n.otherwise)return l;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 473, column 25 - line 478, column 11: "+[l.constructor.name])}(),d=2*i.pi/t.toNumber(a);return 0===f?0:-(t.toNumber(f)*d)*(e.value0.progress/100)}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 467, column 3 - line 483, column 1: "+[c.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 465, column 1 - line 466, column 1: "+[e.constructor.name,o.constructor.name,a.constructor.name])},F=function(e,t){if(t instanceof C.TDClockwise){var r=v.modFloat$_$_$(e,2*i.pi),o=function(){var e=0>=r;if(e)return r;if(!e)return r-2*i.pi;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 564, column 15 - line 567, column 5: "+[e.constructor.name])}();return o}if(t instanceof C.TDAntiClockwise){var r=v.modFloat$_$_$(e,2*i.pi),o=function(){var e=r>=0;
if(e)return r;if(!e)return 2*i.pi-r;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 570, column 15 - line 573, column 5: "+[e.constructor.name])}();return o}if(t instanceof C.TDShortest){var r=v.modFloat$_$_$(e,2*i.pi),o=function(){if(0>r){var t=e>-i.pi;if(t)return r;if(!t)return i.pi-r;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 577, column 28 - line 578, column 11: "+[t.constructor.name])}if(r<i.pi)return r;if(n.otherwise)return r-i.pi;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 575, column 5 - line 588, column 1: "+[])}();return o}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 562, column 1 - line 568, column 1: "+[e.constructor.name,t.constructor.name])},A=function(e,n){if(e instanceof r.Nothing)return r.Nothing.value;if(e instanceof r.Just){var t=u.uncons(e.value0.path);if(t instanceof r.Nothing)return r.Nothing.value;if(t instanceof r.Just){var o=n===t.value0.head;if(o)return new r.Just({path:t.value0.tail,progress:e.value0.progress});if(!o)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 460, column 20 - line 464, column 1: "+[o.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 458, column 3 - line 464, column 1: "+[t.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 456, column 1 - line 457, column 1: "+[e.constructor.name,n.constructor.name])},N=function(e){var n=2*i.pi/i.max$_$_$(t.toNumber(2),t.toNumber(e));return 1.618/(i.sqrt(2-2*i.cos(n))/2)},D=function(e,n,t){for(var o=e,a=n,i=t;;){var u=S.coneUp(a);if(u instanceof r.Nothing)return i;{if(!(u instanceof r.Just))throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 768, column 5 - line 774, column 1: "+[u.constructor.name]);var c=S.coneNumLevel(u.value0),l=N(c),s=o,f=i*l;o=s,a=u.value0,i=f}}},M=function(e,n,t){var o=l.uncons(t);if(o instanceof r.Just){var a=N(e),i=N(o.value0.head.l);return i+(a-i)/100*function(){if(o.value0.head.r)return n;if(!o.value0.head.r)return 100-n;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 755, column 34 - line 757, column 58: "+[o.value0.head.r.constructor.name])}()}if(o instanceof r.Nothing)return N(e);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 750, column 5 - line 761, column 1: "+[o.constructor.name])},L=function(e,n,t,r){return{x:t.x+i.cos(n)*h.coneRadius/r,y:t.y+e/r,z:t.z+i.sin(n)*h.coneRadius/r}},O=function(e,o,a,c){if(c instanceof u.Nil)return n["return"](y.applicativeEff)(new r.Just(L(o,h.startAngleConst,h.coosTop,1)));var l=function(a){return function(c){return function(s){return function(f){if(c instanceof u.Nil)return n["return"](y.applicativeEff)(new r.Just(s));if(a instanceof r.Nothing)return n["return"](y.applicativeEff)(r.Nothing.value);if(a instanceof r.Just){var d=u.uncons(c);if(d instanceof r.Just){var v=S.coneSetPos$_$_$(a.value0,d.value0.head),m=S.coneGetPosition(a.value0);if(v instanceof r.Nothing)return n["return"](y.applicativeEff)(r.Nothing.value);if(v instanceof r.Just){var p=d.value0.head-m,g=S.coneNumLevel(a.value0),w=f*N(g),_=2*i.pi/t.toNumber(g),$=h.startAngleConst+t.toNumber(p)*_;return function(){var n=S.coneDown$_$_$(e,v.value0)();return l(n)(d.value0.tail)(L(o,$,s,f))(w)()}}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 789, column 17 - line 799, column 13: "+[v.constructor.name])}return n["return"](y.applicativeEff)(r.Nothing.value)}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 775, column 1 - line 776, column 1: "+[a.constructor.name,c.constructor.name,s.constructor.name,f.constructor.name])}}}};return function(){var n=S.coneDown$_$_$(e,S.coneRoot(a))();S.coneNumLevel(a);return l(n)(c)(L(o,h.startAngleConst,h.coosTop,1))(N(1))()}},I=function(e,n,o,a,u,c,s){var f=l.uncons(l.mapMaybe($.getTurn(o))(u.transforms));if(f instanceof r.Just&&f.value0.head instanceof m.TOTurn){var d=S.normalizePos$_$_$(f.value0.head.value1.index-(a+1|0),f.value0.head.value1.ngon),v=s+(t.toNumber(d)+1)*(2*i.pi/t.toNumber(f.value0.head.value1.ngon)),h=s+t.toNumber(n)*c,p=F(h-v,f.value0.head.value2);return v+p/100*function(){if(f.value0.head.value0)return u.progress;if(!f.value0.head.value0)return 100-u.progress;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 700, column 34 - line 702, column 69: "+[f.value0.head.value0.constructor.name])}()}return s+t.toNumber(n)*c},R=function(e,n,r,o){var a=E(e,o),u=(l.mapMaybe($.getSizeChange)(a.transforms),S.coneNumLevel(r)),c=S.coneGetPosition(r),s=S.normalizePos$_$_$(c,u),f=2*i.pi/t.toNumber(u),d=I(e,0,s,c,a,f,h.startAngleConst);return L(n,d,h.coosTop,1)},k=function(e,a,v,h,p){var w=-(i.pi/h.prefs.angleSelectFactor)*(h.controlState.angleSelect.x+h.prefs.angleSelectAddX),_=i.pi/h.prefs.angleSelectFactor*(h.controlState.angleSelect.y+h.prefs.angleSelectAddY);if(p instanceof m.CommandingUpDown){var C=E(e,p),P=R(e,h.prefs.coneHeight,v,p),T=l.mapMaybe($.getSizeChange)(C.transforms),b=S.coneNumLevel(v),x=M(b,C.progress,T),F=function(){if(p.value0>0)return 1-p.value0/100;if(p.value0<0)return 1+p.value0/100;if(n.otherwise)return 1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 88, column 13 - line 116, column 9: "+[])}(),A=1+-1*F,N=function(){if(c.elem$_$_$(c.foldableArray,n.eqNumber,p.value0)([0,100,-100]))return 1;if(p.value0>0)return 1-F;if(n.otherwise)return 1-A;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 88, column 13 - line 116, column 9: "+[])}(),L=d.vec3$_$_$(-P.x*N,-P.y*N,P.z*N),I=function(){if(c.elem$_$_$(c.foldableArray,n.eqNumber,p.value0)([0,100,-100]))return 1;if(p.value0>0)return 1+F*(x-1);if(n.otherwise)return 1+A*(x-1);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 88, column 13 - line 116, column 9: "+[])}();return function(){var n=g.setPerspective$_$_$(e,h,1)();return f.rotateSTX$_$_$(_,n)(),f.rotateSTY$_$_$(-w,n)(),f.translateST$_$_$(L,n)(),f.scaleST3$_$_$(I,I,I,n)(),f.translateST$_$_$(d.vec3$_$_$(P.x,P.y,-P.z),n)(),{commandingScale:I,upDown:p.value0}}}if(p instanceof m.CommandingTurn){var b=S.coneNumLevel(v),k=2*i.pi/t.toNumber(b),U=p.value0/-100*k+w;return function(){var n=g.setPerspective$_$_$(e,h,1)();return f.rotateSTX$_$_$(_,n)(),f.rotateSTY$_$_$(-U,n)(),{commandingScale:1,upDown:0}}}return p instanceof m.CommandingGlobal?function(){var t=n["<$>"](y.functorEff)(o.fromJust)(O(e,h.prefs.coneHeight,v,S.coneGetPath(a)))(),r=d.vec3$_$_$(t.x,t.y,-t.z),i=R(e,h.prefs.coneHeight,v,p),u=d.vec3$_$_$(-i.x,-i.y,i.z),c=D(e,a,1),l=1.71*c,s=function(){if(p.value1)return 100-p.value0;if(!p.value1)return p.value0;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 127, column 39 - line 128, column 17: "+[p.value1.constructor.name])}(),m=0+(l-0)/100*s,$=g.setPerspective$_$_$(e,h,m)();return f.rotateSTX$_$_$(_,$)(),f.rotateSTY$_$_$(-w,$)(),f.translateST$_$_$(u,$)(),f.scaleST3$_$_$(c,c,c,$)(),f.translateST$_$_$(r,$)(),{commandingScale:c,upDown:0}}:p instanceof m.CommandingClockwork?function(){var t=S.coneSetPath$_$_$(e,v,p.value0.ccFrom)(),i=S.coneSetPath$_$_$(e,v,p.value0.ccTo)(),l=S.coneSetPath$_$_$(e,v,p.value0.ccUpper)(),m=function(){if(l instanceof r.Nothing)return s.trace("ConeView3D>>calcMatrices: can't set upper path."+n.show(u.showList(n.showInt))(p.value0.ccUpper))(function(e){return 1});if(l instanceof r.Just)return D(e,l.value0,1);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 166, column 23 - line 169, column 17: "+[l.constructor.name])}(),$=(E(e,p),function(){if(i instanceof r.Nothing)return s.trace("ConeView3D>>calcMatrices: can't set to path."+n.show(u.showList(n.showInt))(p.value0.ccTo))(function(e){return 1});if(i instanceof r.Just)return D(e,i.value0,1);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 170, column 23 - line 173, column 17: "+[i.constructor.name])}()),C=p.value0.ccSecond>.1&&p.value0.ccSecond<99.9,P=p.value0.ccSecond<.1,T=function(){if(t instanceof r.Nothing)return s.trace("ConeView3D>>calcMatrices: can't set from path."+n.show(u.showList(n.showInt))(p.value0.ccFrom))(function(e){return 1});if(t instanceof r.Just)return D(e,t.value0,1);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 162, column 23 - line 165, column 17: "+[t.constructor.name])}(),b=function(){if(p.value0.ccFirst<99.9)return T+(m-T)/100*p.value0.ccFirst;if(p.value0.ccThird<.1)return m;if(n.otherwise)return m+($-m)/100*p.value0.ccThird;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 146, column 58 - line 202, column 9: "+[])}(),x=(S.coneGetPath(a),100-p.value0.ccTotal),F=function(){if(10>x)return 10*x;if(x>=90)return 100-10*(x-90);if(n.otherwise)return 100;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 146, column 58 - line 202, column 9: "+[])}(),A=n["<$>"](y.functorEff)(o.fromJust)(O(e,h.prefs.coneHeight,v,p.value0.ccFrom))(),N=n["<$>"](y.functorEff)(o.fromJust)(O(e,h.prefs.coneHeight,v,u.toList(c.foldableArray)([])))(),M=function(){if(i instanceof r.Nothing)return s.trace("ConeView3D>>calcMatrices: can't set to path.")(function(t){return n["<$>"](y.functorEff)(o.fromJust)(O(e,h.prefs.coneHeight,v,p.value0.ccTo))});if(i instanceof r.Just)return n["<$>"](y.functorEff)(o.fromJust)(O(e,h.prefs.coneHeight,i.value0,p.value0.ccTo));throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 180, column 23 - line 184, column 13: "+[i.constructor.name])}()(),L=d.vec3$_$_$(-N.x,-N.y,N.z),I=function(){if(P)return d.vec3$_$_$(A.x,A.y,-A.z);if(C)return d.vec3$_$_$(A.x+(M.x-A.x)/100*p.value0.ccSecond,A.y+(M.y-A.y)/100*p.value0.ccSecond,-(A.z+(M.z-A.z)/100*p.value0.ccSecond));if(n.otherwise)return d.vec3$_$_$(M.x,M.y,-M.z);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 146, column 58 - line 202, column 9: "+[])}(),R=1.71*$,k=0+(R-0)/100*F,U=g.setPerspective$_$_$(e,h,k)();return f.rotateSTX$_$_$(_,U)(),f.rotateSTY$_$_$(-w,U)(),f.translateST$_$_$(L,U)(),f.scaleST3$_$_$(b,b,b,U)(),f.translateST$_$_$(I,U)(),{commandingScale:b,upDown:0}}:function(){var n=g.setPerspective$_$_$(e,h,1)();return f.rotateSTX$_$_$(_,n)(),f.rotateSTY$_$_$(-w,n)(),{commandingScale:1,upDown:0}}},U=function(e,o,a,c,s,f,d,p,g,P,T,b,E,F,N,D,O){var R=D.prefs.coneHeight*(t.toNumber(D.windowSize.y)/D.prefs.coneHeight*2.5)*(E/d),k=S.coneGetPosition(c),J=S.zipGetEntry(c),z=n["++"](u.semigroupList)(F)(u.singleton(S.coneGetPosition(c)));return function(){var u=S.coneDown$_$_$(e,c)();if(u instanceof r.Nothing){var F=function(){var n=S.coneIsLeaf$_$_$(e,c);if(n)return h.DTLeaf.value;if(!n)return h.DTCone.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 367, column 31 - line 370, column 17: "+[n.constructor.name])}(),H=function(){var n=R>D.prefs.minIconSize;if(n)return C.stlName(e)(J);if(!n)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 371, column 31 - line 372, column 13: "+[n.constructor.name])}(),W=function(){var n=R>D.prefs.minIconSize;if(n)return C.iconName(e)(J);if(!n)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 370, column 31 - line 371, column 17: "+[n.constructor.name])}(),j=function(){var n=R>D.prefs.minLabelSize;if(n){var t=S.zipGetEntry(c);return new r.Just({label:C.label(e)(t),comment:C.comment(e)(t),targetUri:C.targetUri(e)(t)})}if(!n)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 363, column 33 - line 367, column 17: "+[n.constructor.name])}(),q=!(b||C.hidden(e)(J));if(q)return w.push$_$_$(o,{drawIndex:a,realIndex:k,conePath:z,level:g,coordinates:s,angle:f,scale:d,parentScale:p,fade:T,condIconName:W,condSTLName:H,condColor:C.color(e)(J),condLabel:j,drawTag:F})(),n.unit;if(!q)return n.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 373, column 17 - line 391, column 9: "+[q.constructor.name])}if(u instanceof r.Just){var H=function(){var n=R>D.prefs.minIconSize;if(n)return C.stlName(e)(J);if(!n)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 398, column 30 - line 399, column 17: "+[n.constructor.name])}(),V=l.mapMaybe($.getSizeChange)(P.transforms),Z=S.coneNumLevel(u.value0),X=d*M(Z,P.progress,V),W=function(){var n=R>D.prefs.minIconSize;if(n)return C.iconName(e)(J);if(!n)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 397, column 31 - line 398, column 17: "+[n.constructor.name])}(),K=_.calcFrustumVerdict$_$_$(D.prefs.coneHeight,{x:s.x,y:-s.y,z:s.z},d,O),j=function(){var n=R>D.prefs.minLabelSize;if(n){var t=S.zipGetEntry(c);return new r.Just({label:C.label(e)(t),comment:C.comment(e)(t),targetUri:C.targetUri(e)(t)})}if(!n)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 399, column 30 - line 403, column 17: "+[n.constructor.name])}(),Y=S.coneGetPosition(u.value0),Q=2*i.pi/t.toNumber(Z);!function(){var t=!(R<D.prefs.minChildSize||n["=="](h.eqFrustumVerdict)(K)(h.OutsideFrustum.value))&&T>0;if(t)return function(){return l.foldM$_$_$(y.monadEff,function(n){return function(t){var a=S.normalizePos$_$_$(Y+t|0,Z),i=$.filterTransform$_$_$(a,P),u=function(){var e=1>T;if(e)return T;if(!e){var n=l.uncons(l.mapMaybe($.getFade(a))(P.transforms));return n instanceof r.Just&&n.value0.head instanceof m.TOFade&&n.value0.head.value0 instanceof r.Just&&n.value0.head.value0.value0?P.progress/100:n instanceof r.Just&&n.value0.head instanceof m.TOFade&&n.value0.head.value0 instanceof r.Just&&!n.value0.head.value0.value0?(100-P.progress)/100:n instanceof r.Just&&n.value0.head instanceof m.TOFade&&n.value0.head.value0 instanceof r.Nothing?0:1}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 415, column 42 - line 421, column 29: "+[e.constructor.name])}(),v=x(N,S.coneGetFirstBelow(c),Z),h=I(e,t,a,Y,P,Q,f+v),p=function(){var e=0===t;if(e)return n;if(!e)return S.coneRight(n);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 409, column 45 - line 412, column 34: "+[e.constructor.name])}();return function(){return U(e,o,t,p,L(D.prefs.coneHeight,h,s,d),h,X,d,g+1|0,i,u,!1,E,z,A(N,a),D,O)(),p}}},u.value0)(l[".."](0)(Z-1))(),n.unit};if(!t)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 406, column 17 - line 429, column 17: "+[t.constructor.name])}()(),v.mapE$_$_$(B(e)(o)(s)(f)(d)(X)(g+1|0)(P.progress)(E)(z)(D)(O),l.mapMaybe($.getIntro)(P.transforms))(),v.mapE$_$_$(G(e)(o)(s)(f)(d)(X)(g+1|0)(P.progress)(E)(z)(D)(O),l.mapMaybe($.getLift)(P.transforms))();var ee=!(b||C.hidden(e)(J)||n["=="](h.eqFrustumVerdict)(K)(h.AboveFrustum.value));if(ee)return w.push$_$_$(o,{drawIndex:a,realIndex:k,conePath:z,level:g,coordinates:s,angle:f,parentScale:p,scale:d,fade:T,condIconName:W,condSTLName:H,condColor:C.color(e)(J),condLabel:j,drawTag:h.DTCone.value})(),n.unit;if(!ee)return n.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 435, column 17 - line 455, column 1: "+[ee.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 361, column 5 - line 455, column 1: "+[u.constructor.name])}},G=function(e){return function(n){return function(o){return function(a){return function(u){return function(c){return function(l){return function(s){return function(f){return function(d){return function(p){return function(g){return function(w){var _=$.getLiftBase(w);if(_ instanceof r.Just&&_.value0 instanceof m.TPLift){var C=a+t.toNumber(_.value0.value1.pos.index)*(2*i.pi/t.toNumber(_.value0.value1.pos.ngon)),y=function(){if(_.value0.value0)return 100-s;if(!_.value0.value0)return s;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 539, column 31 - line 540, column 17: "+[_.value0.value0.constructor.name])}(),P=c+(u-c)/100*y,T={x:o.x+i.cos(C)*h.coneRadius/u,y:o.y+p.prefs.coneHeight/u,z:o.z+i.sin(C)*h.coneRadius/u},b=function(){var e=$["getFade'"](w);return e instanceof r.Just&&e.value0 instanceof m.TOFade&&e.value0.value0 instanceof r.Just&&e.value0.value0.value0?s/100:e instanceof r.Just&&e.value0 instanceof m.TOFade&&e.value0.value0 instanceof r.Just&&!e.value0.value0.value0?(100-s)/100:1}(),E={x:T.x+(o.x-T.x)/100*y,y:T.y+(o.y/u-T.y)/100*y/P,z:T.z+(o.z-T.z)/100*y};return U(e,n,-1,S.makeZipper$_$_$(e,_.value0.value1.model),E,C,P,u,l,$.buildTransform$_$_$(s,_.value0.value1.transforms),b,!0,f,d,r.Nothing.value,p,g)}return v.fail("ConeView::drawLift>> cant extract lift")}}}}}}}}}}}}},B=function(e){return function(n){return function(o){return function(a){return function(u){return function(c){return function(l){return function(s){return function(f){return function(d){return function(p){return function(g){return function(w){var _=$.getIntroBase(w);if(_ instanceof r.Just&&_.value0 instanceof m.TPIntro){var C=a+t.toNumber(_.value0.value0.pos.index)*(2*i.pi/t.toNumber(_.value0.value0.pos.ngon)),y=function(){var e=$["getFade'"](w);return e instanceof r.Just&&e.value0 instanceof m.TOFade&&e.value0.value0 instanceof r.Just&&e.value0.value0.value0?s/100:e instanceof r.Just&&e.value0 instanceof m.TOFade&&e.value0.value0 instanceof r.Just&&!e.value0.value0.value0?(100-s)/100:1}(),P=function(e){return{x:o.x+i.cos(e)*h.coneRadius/u,y:o.y+p.prefs.coneHeight/u,z:o.z+i.sin(e)*h.coneRadius/u}},T=P(C);return U(e,n,-1,S.makeZipper$_$_$(e,_.value0.value0.model),T,C,c,u,l,$.buildTransform$_$_$(s,_.value0.value0.transforms),y,!1,f,d,r.Nothing.value,p,g)}return v.fail("ConeView::drawIntro>> can't extract intro")}}}}}}}}}}}}},J=function(e,o,c,s,f,d,v,p,g,E,x){var F=function(o){var a=function(){return p instanceof m.CommandingUpDown?p.value0:0}(),u=function(){return p instanceof m.CommandingTrans?p.value0:$.emptyTransform(0)}(),s=l.mapMaybe($.getSizeChange)(u.transforms),v=S.coneNumLevel(f),w=M(v,u.progress,s),_=S.coneIsRoot(f),C=S.coneGetPosition(f),b=T(n.showInt,S.coneGetPath(f)),x=function(){return p instanceof m.CommandingClockwork?new r.Just({path:p.value0.ccTo,progress:p.value0.ccSecond}):r.Nothing.value}(),F=2*i.pi/t.toNumber(v);return function(){P.getMillisecondsTime();!function(){var t=!(d&&0>=a);if(t)return function(){return l.foldM$_$_$(y.monadEff,function(n){return function(t){var a=S.normalizePos$_$_$(C+t|0,v),i=I(e,t,a,C,u,F,h.startAngleConst),s=$.filterTransform$_$_$(a,u),f=function(){var e=l.uncons(l.mapMaybe($.getFade(a))(u.transforms));return e instanceof r.Just&&e.value0.head instanceof m.TOFade&&e.value0.head.value0 instanceof r.Just&&e.value0.head.value0.value0?u.progress/100:e instanceof r.Just&&e.value0.head instanceof m.TOFade&&e.value0.head.value0 instanceof r.Just&&!e.value0.head.value0.value0?(100-u.progress)/100:e instanceof r.Just&&e.value0.head instanceof m.TOFade&&e.value0.head.value0 instanceof r.Nothing?0:1}(),d=function(){var e=0===t;if(e)return n;if(!e)return S.coneRight(n);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 288, column 38 - line 291, column 25: "+[e.constructor.name])}();return function(){return U(e,c,t,d,L(g.prefs.coneHeight,i,h.coosTop,1),i,w,1,function(){if(_)return 1;if(!_)return 2;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 300, column 54 - line 300, column 84: "+[_.constructor.name])}(),s,f,!1,E,b,x,g,o)(),d}}},f)(l[".."](0)(v-1))(),n.unit};if(!t)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 285, column 9 - line 306, column 9: "+[t.constructor.name])}()();P.getMillisecondsTime();return n.unit}},A=function(t){var r=function(e){return function(n){return.5*e>i.abs(e-n)}},o=n["=="](C.eqConeZip(C.eqConeNode(e["__superclass_Prelude.Eq_0"]())))(t.selectedZip)(f)&&n["=="](u.eqList(n.eqInt))(t.selectedPath)(S.coneGetPath(f))&&r(t.scale)(E)&&_.frustumInside$_$_$(x.drawFrustum,t.cachedFrustum);return o},N=b(e,p);if(N)return function(){a.writeSTRef$_$_$(g.bindings.drawStructsCache,r.Nothing.value)(),F(x.drawFrustum)();var e=P.getMillisecondsTime();return a.writeSTRef$_$_$(g.animatePaintRef,new r.Just(e))(),a.writeSTRef$_$_$(g.bindings.drawStructsCache,r.Nothing.value)(),n.unit};if(!N)return function(){var e=a.readSTRef(g.bindings.drawStructsCache)();if(e instanceof r.Nothing){F(x.calculatedFrustum)();var t=w.toArray(c)();a.writeSTRef$_$_$(g.bindings.drawStructsCache,new r.Just({selectedZip:f,selectedPath:S.coneGetPath(f),scale:E,cachedFrustum:x.calculatedFrustum,structs:t}))();var o=P.getMillisecondsTime();return a.writeSTRef$_$_$(g.animatePaintRef,new r.Just(o))(),n.unit}if(e instanceof r.Just){var i=A(e.value0);if(i)return w.pushAll$_$_$(c,e.value0.structs)(),n.unit;if(!i){F(x.calculatedFrustum)();var t=w.toArray(c)();a.writeSTRef$_$_$(g.bindings.drawStructsCache,new r.Just({selectedZip:f,selectedPath:S.coneGetPath(f),scale:E,cachedFrustum:x.calculatedFrustum,structs:t}))();var o=P.getMillisecondsTime();return a.writeSTRef$_$_$(g.animatePaintRef,new r.Just(o))(),n.unit}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 251, column 31 - line 268, column 3: "+[i.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 237, column 13 - line 268, column 3: "+[e.constructor.name])};throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 226, column 5 - line 268, column 3: "+[N.constructor.name])},z=function(e,o,a,u,c,s,f,d,p,g,_){var P=(function(){return d instanceof m.CommandingUpDown?d.value0:0}(),function(){return d instanceof m.CommandingTrans?d.value0:$.emptyTransform(0)}()),b=l.mapMaybe($.getSizeChange)(P.transforms),E=(-(i.pi/p.prefs.angleSelectFactor)*(p.controlState.angleSelect.x+p.prefs.angleSelectAddX),S.coneNumLevel(c)),x=M(E,P.progress,b),F=(i.pi/p.prefs.angleSelectFactor*(p.controlState.angleSelect.y+p.prefs.angleSelectAddY),S.coneIsRoot(c)),A=(S.coneGetPosition(c),T(n.showInt,S.coneGetPath(c))),N=function(){var n=function(){var e=F||s;if(e)return new r.Just(c);if(!e)return S.coneUp(c);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 661, column 15 - line 663, column 32: "+[e.constructor.name])}();if(n instanceof r.Nothing)return{icon:r.Nothing.value,stl:r.Nothing.value,label:r.Nothing.value,color:r.Nothing.value,index:0};if(n instanceof r.Just){var t=S.zipGetEntry(n.value0);return{icon:C.iconName(e)(t),stl:C.stlName(e)(t),label:new r.Just({label:C.label(e)(t),comment:C.comment(e)(t),targetUri:C.targetUri(e)(t)}),color:C.color(e)(t),index:S.coneGetPosition(n.value0)}}throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 661, column 9 - line 676, column 5: "+[n.constructor.name])}();2*i.pi/t.toNumber(E);return function(){v.mapE$_$_$(B(e)(a)(h.coosTop)(h.startAngleConst)(1)(x)(2)(P.progress)(g)(A)(p)(_),l.mapMaybe($.getIntro)(P.transforms))(),v.mapE$_$_$(G(e)(a)(h.coosTop)(h.startAngleConst)(1)(x)(2)(P.progress)(g)(A)(p)(_),l.mapMaybe($.getLift)(P.transforms))(),function(){var e=!f;if(e)return function(){return w.push$_$_$(a,{drawIndex:-1,realIndex:N.index,conePath:A,level:3,coordinates:h.coosTop,angle:h.startAngleConst,scale:1,parentScale:1,fade:1,condIconName:N.icon,condSTLName:N.stl,condLabel:N.label,condColor:N.color,drawTag:h.DTFloatLabel.value})(),n.unit};if(!e)return n["return"](y.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 609, column 5 - line 630, column 5: "+[e.constructor.name])}()();var t=!F;if(t)return w.push$_$_$(a,{drawIndex:0,realIndex:N.index,conePath:A,level:function(){if(F)return 0;if(!F)return 1;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 638, column 40 - line 638, column 70: "+[F.constructor.name])}(),coordinates:h.coosTop,angle:h.startAngleConst,scale:1,parentScale:1,fade:1,condIconName:N.icon,condSTLName:N.stl,condLabel:N.label,condColor:N.color,drawTag:h.DTCone.value})(),n.unit;if(!t)return n.unit;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 633, column 5 - line 652, column 3: "+[t.constructor.name])}},H=function(e,t,r,a,i){var u=function(){return a instanceof m.CommandingUpDown?a.value0:0}(),c=function(){return a instanceof m.CommandingGlobal?!0:a instanceof m.CommandingClockwork?!0:!1}(),l=function(){if(u>0&&!r)return o.fromJust(S.coneUp(t));if(c)return S.coneRoot(t);if(n.otherwise)return t;throw new Error("Failed pattern match at ConeCanvas.Frontend.DrawProcessing line 52, column 1 - line 75, column 1: "+[])}();return function(){var n=k(e,t,l,i,a)(),o=n.commandingScale*i.controlState.zoom,u=_.calcFrustums(i)(),s=w.empty();return J(e,e["__superclass_Prelude.Show_1"](),s,t,l,r,c,a,i,o,u)(),z(e,e["__superclass_Prelude.Show_1"](),s,t,l,r,c,a,i,o,u.drawFrustum)(),p.drawEverything$_$_$(e,e["__superclass_Prelude.Show_1"](),l,r,c,a,i,n,s)()}};e.coneDrawPos$_$_$=H}(PS["ConeCanvas.Frontend.DrawProcessing"]=PS["ConeCanvas.Frontend.DrawProcessing"]||{}),function(e){"use strict";e.addKeyEventListener$_$_$=function(e,n,t){return function(){var r=document.getElementById(t);r.setAttribute("tabindex","0"),r.focus(),r.addEventListener(e,function(e){n(e)()&&e.preventDefault()})}},e.addKeyEventListenerWindow$_$_$=function(e,n){return function(){window.addEventListener(e,function(e){n(e)()&&e.preventDefault()})}},e.eventGetKeyCode=function(e){return e.keyCode},e.isMetaPressed=function(e){return e.metaKey},e.isControlPressed=function(e){return e.ctrlKey},e.isShiftPressed=function(e){return e.shiftKey},e.isAltPressed=function(e){return e.altKey}}(PS["ConeCanvas.Frontend.Events.Keyboard"]=PS["ConeCanvas.Frontend.Events.Keyboard"]||{}),function(e){"use strict";var n=PS["ConeCanvas.Frontend.Events.Keyboard"],t=PS.Prelude,r=PS["Data.Maybe"],o=PS["Data.Set"],a=(PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.Eff"],PS["Data.Either"]),i=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),u=(PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.ConeControl"]),c=function(e,t,o,c,l,s){var f=n.eventGetKeyCode(l),d=function(){if(s)return new a.Left(f);if(!s)return new a.Right(f);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 73, column 14 - line 74, column 3: "+[s.constructor.name])}(),v=function(){if(d instanceof a.Left&&37===d.value0){var e=n.isControlPressed(l)||n.isMetaPressed(l);if(e)return new r.Just(i.KMoveLeft.value);if(!e)return new r.Just(i.KRight.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 76, column 33 - line 77, column 19: "+[e.constructor.name])}if(d instanceof a.Left&&39===d.value0){var t=n.isControlPressed(l)||n.isMetaPressed(l);if(t)return new r.Just(i.KMoveRight.value);if(!t)return new r.Just(i.KLeft.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 78, column 33 - line 79, column 19: "+[t.constructor.name])}if(d instanceof a.Left&&38===d.value0){var o=n.isControlPressed(l)||n.isMetaPressed(l);if(o)return new r.Just(i.KMoveUp.value);if(!o)return new r.Just(i.KDown.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 80, column 33 - line 81, column 19: "+[o.constructor.name])}if(d instanceof a.Left&&40===d.value0){var u=n.isControlPressed(l)||n.isMetaPressed(l);if(u)return new r.Just(i.KMoveDown.value);if(!u)return new r.Just(i.KUp.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 82, column 33 - line 83, column 19: "+[u.constructor.name])}if(d instanceof a.Left&&49===d.value0){var c=n.isShiftPressed(l);if(c){var s=n.isControlPressed(l)||n.isMetaPressed(l);if(s)return new r.Just(i.KSetFirst.value);if(!s)return new r.Just(i.KFirst.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 85, column 35 - line 88, column 35: "+[s.constructor.name])}if(!c)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 84, column 33 - line 89, column 19: "+[c.constructor.name])}if(d instanceof a.Left&&88===d.value0){var f=!n.isShiftPressed(l)&&(n.isControlPressed(l)||n.isMetaPressed(l));if(f)return new r.Just(i.KCut.value);if(!f)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 90, column 33 - line 92, column 19: "+[f.constructor.name])}if(d instanceof a.Left&&67===d.value0){var v=!n.isShiftPressed(l)&&(n.isControlPressed(l)||n.isMetaPressed(l));if(v)return new r.Just(i.KCopy.value);if(!v)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 93, column 33 - line 95, column 19: "+[v.constructor.name])}if(d instanceof a.Left&&86===d.value0){var m=!n.isShiftPressed(l)&&(n.isControlPressed(l)||n.isMetaPressed(l));if(m)return new r.Just(i.KPaste.value);if(!m)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 96, column 33 - line 98, column 19: "+[m.constructor.name])}if(d instanceof a.Left&&76===d.value0){var h=!n.isShiftPressed(l)&&!(n.isControlPressed(l)||n.isMetaPressed(l));if(h)return new r.Just(i.KLink.value);if(!h)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 99, column 33 - line 101, column 19: "+[h.constructor.name])}if(d instanceof a.Left&&70===d.value0){var p=!n.isShiftPressed(l)&&!(n.isControlPressed(l)||n.isMetaPressed(l));if(p)return new r.Just(i.KClockwork.value);if(!p)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 102, column 33 - line 104, column 19: "+[p.constructor.name])}if(d instanceof a.Left&&71===d.value0){var g=!n.isShiftPressed(l)&&!(n.isControlPressed(l)||n.isMetaPressed(l));if(g)return new r.Just(i.KGlobal.value);if(!g)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 105, column 33 - line 107, column 19: "+[g.constructor.name])}if(d instanceof a.Right&&71===d.value0){var w=!n.isShiftPressed(l)&&!(n.isControlPressed(l)||n.isMetaPressed(l));if(w)return new r.Just(i.KUnglobal.value);if(!w)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 108, column 33 - line 110, column 19: "+[w.constructor.name])}if(d instanceof a.Right&&90===d.value0){var _=n.isControlPressed(l)||n.isMetaPressed(l);if(_)return r.Nothing.value;if(!_){var $=!n.isShiftPressed(l);if($)return new r.Just(i.KZoomNormal.value);if(!$)return new r.Just(i.KZoomOut.value);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 112, column 42 - line 113, column 19: "+[$.constructor.name])}throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 111, column 33 - line 113, column 19: "+[_.constructor.name])}if(d instanceof a.Right&&66===d.value0){var C=(n.isControlPressed(l)||n.isMetaPressed(l))&&n.isShiftPressed(l);if(C)return new r.Just(i.KBench.value);if(!C)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 114, column 33 - line 117, column 19: "+[C.constructor.name])}if(d instanceof a.Right&&68===d.value0){var S=n.isControlPressed(l)||n.isMetaPressed(l);if(S)return new r.Just(i.KToggleDemo.value);if(!S)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 118, column 33 - line 122, column 19: "+[S.constructor.name])}if(d instanceof a.Right&&75===d.value0){var y=n.isAltPressed(l)||n.isMetaPressed(l);if(y)return new r.Just(i.KToggleControl.value);
if(!y)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 123, column 33 - line 126, column 19: "+[y.constructor.name])}if(d instanceof a.Right&&73===d.value0){var P=n.isAltPressed(l)||n.isMetaPressed(l);if(P)return new r.Just(i.KToggleIndex.value);if(!P)return r.Nothing.value;throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 127, column 33 - line 130, column 19: "+[P.constructor.name])}return d instanceof a.Left&&17===d.value0?new r.Just(i.KEditModeOn.value):d instanceof a.Right&&17===d.value0?new r.Just(i.KEditModeOff.value):r.Nothing.value}();if(v instanceof r.Nothing)return function(){var r=i.readPaintRef$_$_$(e,t)();if(s)return r.keyCallback(!0)(f)(n.isShiftPressed(l))(n.isControlPressed(l))(n.isAltPressed(l))();if(!s)return r.keyCallback(!1)(f)(n.isShiftPressed(l))(n.isControlPressed(l))(n.isAltPressed(l))();throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 138, column 9 - line 141, column 5: "+[s.constructor.name])};if(v instanceof r.Just)return function(){return u.keyAction$_$_$(e,v.value0,t,c)(),!0};throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 135, column 3 - line 145, column 1: "+[v.constructor.name])},l=function(e){return function(r){return function(a){return function(u){return function(l){var s=n.eventGetKeyCode(l);return function(){var n=i.readPaintRef$_$_$(e,r)(),f=!o.member$_$_$(t.ordInt,s,n.bindings.keysPressed);if(f)return!0;if(!f)return i.writePaintRef$_$_$(e,r,function(){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.bindings=function(){var e={};for(var r in n.bindings)n.bindings.hasOwnProperty(r)&&(e[r]=n.bindings[r]);return e.keysPressed=o["delete"](t.ordInt)(s)(n.bindings.keysPressed),e}(),e}())(),c(e,r,a,u,l,!1)();throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 60, column 3 - line 69, column 1: "+[f.constructor.name])}}}}}},s=function(e){return function(r){return function(a){return function(u){return function(l){var s=n.eventGetKeyCode(l);return function(){var n=i.readPaintRef$_$_$(e,r)(),f=o.member$_$_$(t.ordInt,s,n.bindings.keysPressed);if(f)return!0;if(!f)return i.writePaintRef$_$_$(e,r,function(){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e.bindings=function(){var e={};for(var r in n.bindings)n.bindings.hasOwnProperty(r)&&(e[r]=n.bindings[r]);return e.keysPressed=o.insert$_$_$(t.ordInt,s,n.bindings.keysPressed),e}(),e}())(),c(e,r,a,u,l,!0)();throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 48, column 3 - line 55, column 1: "+[f.constructor.name])}}}}}},f=function(e,t,r,o){return function(){var a=i.readPaintRef$_$_$(e,t)();if(a.prefs.keyEventsFromWindow)return n.addKeyEventListenerWindow$_$_$("keydown",s(e)(t)(r)(o))(),n.addKeyEventListenerWindow$_$_$("keyup",l(e)(t)(r)(o))();if(!a.prefs.keyEventsFromWindow)return n.addKeyEventListener$_$_$("keydown",s(e)(t)(r)(o),a.bindings.context.canvasName)(),n.addKeyEventListener$_$_$("keyup",l(e)(t)(r)(o),a.bindings.context.canvasName)();throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Keyboard line 33, column 5 - line 42, column 1: "+[a.prefs.keyEventsFromWindow.constructor.name])}};e.handleKeys$_$_$=c,e.handleKeyU=l,e.handleKeyD=s,e.addKeyboardEventListeners$_$_$=f}(PS["ConeCanvas.Frontend.Events.Keyboard"]=PS["ConeCanvas.Frontend.Events.Keyboard"]||{}),function(e){"use strict";e.addMouseEventListener$_$_$=function(e,n,t){return function(){var r=document.getElementById(t);r.addEventListener(e,function(e){n(e)()&&e.preventDefault()})}},e.eventGetButton=function(e){return e.button},e.eventGetIsUp=function(e){return e.deltaY>0},e.getMousePos$_$_$=function(e,n){return function(){var t=document.getElementById(n),r=t.getBoundingClientRect(),o=t.scrollWidth,a=t.width,i=a/o,u=t.scrollHeight,c=t.height,l=c/u;return{x:(e.clientX-r.left)*i,y:(e.clientY-r.top)*l}}}}(PS["ConeCanvas.Frontend.Events.Mouse"]=PS["ConeCanvas.Frontend.Events.Mouse"]||{}),function(e){"use strict";var n=PS["ConeCanvas.Frontend.Events.Mouse"],t=PS.Prelude,r=PS["Data.Maybe"],o=PS["Data.Int"],a=PS["Data.TypedArray"],i=(PS["Graphics.WebGLAll"],PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.Eff"]),u=PS["Data.Array"],c=PS["Debug.Trace"],l=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),s=(PS["ConeCanvas.Frontend.DrawTypes3d"],PS["ConeCanvas.Frontend.Pickbuffer"]),f=PS["ConeCanvas.ConeControl"],d=PS["Graphics.WebGLFramebuffer"],v=PS["Graphics.WebGL"],m=PS["Graphics.WebGLTexture"],h=PS["ConeCanvas.Color"],p=function(e){return{x:o.toNumber(e.x),y:o.toNumber(e.y)}},g=function(e){return function(t){return function(r){return function(r){return function(r){var o=n.eventGetIsUp(r);return function(){return f.scrollNotified$_$_$(e,t,o)(),!0}}}}}},w=function(e){return function(r){return function(o){return function(a){return function(a){var u=n.eventGetButton(a);return 0===u?function(){var t=l.readPaintRef$_$_$(e,r)(),i=n.getMousePos$_$_$(a,t.bindings.context.canvasName)();return f.releasedButton$_$_$(e,r,o,p(i))(),!0}:t["return"](i.applicativeEff)(!0)}}}}},_=function(e){return function(t){return function(r){return function(r){return function(r){return function(){var o=l.readPaintRef$_$_$(e,t)(),a=n.getMousePos$_$_$(r,o.bindings.context.canvasName)();return f.motionNotified$_$_$(e,t,p(a))(),!0}}}}}},$=function(e){return function(o){return function(g){return function(g){return function(w){var _=n.eventGetButton(w);return 0===_?function(){var _=l.readPaintRef$_$_$(e,o)(),$=a.asUint8Array([0,0,0,0]),C=n.getMousePos$_$_$(w,_.bindings.context.canvasName)();d.bindFramebuffer(_.bindings.pickBuffer.l)(),v.viewport(0)(0)(_.windowSize.x)(_.windowSize.y)(),d.framebufferTexture2D$_$_$(d.COLOR_ATTACHMENT0.value,m.TEXTURE_2D.value,_.bindings.pickBuffer.r)();var S=d.readPixels$_$_$(C.x,_.windowSize.y-C.y,1,1,$)();d.unbindFramebuffer(),v.viewport(0)(0)(_.windowSize.x)(_.windowSize.y)();var y=h.color4IfromArray(a.asArray(S)),P=s.pickColorToInt(y),T=function(){var e=u.uncons(u.filter$_$_$(function(e){return e.l===P},_.labelSelection));if(e instanceof r.Nothing)return r.Nothing.value;if(e instanceof r.Just)return new r.Just(e.value0.head.r);throw new Error("Failed pattern match at ConeCanvas.Frontend.Events.Mouse line 62, column 30 - line 65, column 9: "+[e.constructor.name])}();return c.traceA(i.applicativeEff)("handleMousedown x: "+(t.show(t.showInt)(C.x)+(" y: "+(t.show(t.showInt)(C.y)+(" color: "+(t.show(h.showColor4I)(y)+(" code: "+(t.show(t.showInt)(P)+(" hasClickIndex: "+t.show(t.showBoolean)(r.isJust(T)))))))))))(),f.pressedButton$_$_$(e,o,g,T,p(C))(),!1}:t["return"](i.applicativeEff)(!1)}}}}},C=function(e,t,r,o){return function(){var a=l.readPaintRef$_$_$(e,t)();return n.addMouseEventListener$_$_$("mousedown",$(e)(t)(r)(o),a.bindings.context.canvasName)(),n.addMouseEventListener$_$_$("mouseup",w(e)(t)(r)(o),a.bindings.context.canvasName)(),n.addMouseEventListener$_$_$("mousemove",_(e)(t)(r)(o),a.bindings.context.canvasName)(),n.addMouseEventListener$_$_$("wheel",g(e)(t)(r)(o),a.bindings.context.canvasName)()}};e.handleMousewheel=g,e.handleMousemove=_,e.handleMouseup=w,e.handleMousedown=$,e.addMouseEventListeners$_$_$=C}(PS["ConeCanvas.Frontend.Events.Mouse"]=PS["ConeCanvas.Frontend.Events.Mouse"]||{}),function(e){"use strict";e.initTouchPrim$_$_$=function(e,n,t,r,o){return function(){var a=document.getElementById(e),i=new Hammer(a);i.get("swipe").set({direction:Hammer.DIRECTION_ALL}),i.on("swipeleft",function(e){t()}),i.on("swiperight",function(e){n()}),i.on("swipeup",function(e){o()}),i.on("swipedown",function(e){r()})}}}(PS["ConeCanvas.Frontend.Events.Touch"]=PS["ConeCanvas.Frontend.Events.Touch"]||{}),function(e){"use strict";var n=PS["ConeCanvas.Frontend.Events.Touch"],t=PS.Prelude,r=PS["Control.Monad.Eff"],o=(PS["Control.Monad.Eff.WebGL"],PS["Debug.Trace"]),a=PS["ConeCanvas.ConeControlTypes"],i=(PS["ConeCanvas.Frontend.DrawTypes3d"],PS.ConeCanvas,PS["ConeCanvas.ConeModel"]),u=function(e,n){return function(){return a.modifyPaintRef$_$_$(e,n,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.commandQueue=t["<>"](t.semigroupArray)(e.commandQueue)([i.AnimMoveUp.value]),n})(),o.trace("touch up")(function(e){return t["return"](r.applicativeEff)(t.unit)})()}},c=function(e,n){return function(){return a.modifyPaintRef$_$_$(e,n,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.commandQueue=t["<>"](t.semigroupArray)(e.commandQueue)([new i.AnimMoveRight(1)]),n})(),o.trace("touch right")(function(e){return t["return"](r.applicativeEff)(t.unit)})()}},l=function(e,n){return function(){return a.modifyPaintRef$_$_$(e,n,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.commandQueue=t["<>"](t.semigroupArray)(e.commandQueue)([new i.AnimMoveLeft(1)]),n})(),o.trace("touch left")(function(e){return t["return"](r.applicativeEff)(t.unit)})()}},s=function(e,n){return function(){return a.modifyPaintRef$_$_$(e,n,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.commandQueue=t["<>"](t.semigroupArray)(e.commandQueue)([i.AnimMoveDown.value]),n})(),o.trace("touch down")(function(e){return t["return"](r.applicativeEff)(t.unit)})()}},f=function(e,t){return function(){var r=a.readPaintRef$_$_$(e,t)();return n.initTouchPrim$_$_$(r.bindings.context.canvasName,l(e,t),c(e,t),u(e,t),s(e,t))()}};e.down$_$_$=s,e.up$_$_$=u,e.right$_$_$=c,e.left$_$_$=l,e.initTouch$_$_$=f}(PS["ConeCanvas.Frontend.Events.Touch"]=PS["ConeCanvas.Frontend.Events.Touch"]||{}),function(e){"use strict";var n=(PS.Prelude,PS["Graphics.WebGLAll"],PS["Data.Vector"]),t=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"],PS["ConeCanvas.Frontend.DrawTypes3d"],PS["Control.Monad.Eff"],PS["Graphics.WebGL"]),r=PS["ConeCanvas.Color"],o=function(e,o){return function(){return t.setUniformFloats$_$_$(o.bindings.uLightDirection,n.toArray(o.prefs.lightDirection))(),t.setUniformFloats$_$_$(o.bindings.uLightAmbient,r.color4toArray(o.prefs.lightAmbient))(),t.setUniformFloats$_$_$(o.bindings.uLightDiffuse,r.color4toArray(o.prefs.lightDiffuse))(),t.setUniformFloats$_$_$(o.bindings.uLightSpecular,r.color4toArray(o.prefs.lightSpecular))(),t.setUniformFloats$_$_$(o.bindings.uMaterialAmbient,r.color4toArray(o.prefs.materialAmbient))(),t.setUniformFloats$_$_$(o.bindings.uMaterialDiffuse,r.color4toArray(o.prefs.materialDiffuse))(),t.setUniformFloats$_$_$(o.bindings.uMaterialSpecular,r.color4toArray(o.prefs.materialSpecular))(),t.setUniformFloats$_$_$(o.bindings.uShininess,[o.prefs.shininess])()}},a=function(e,n,o){return t.setUniformFloats$_$_$(n.bindings.uLightDiffuse,r.color4toArray(function(){if(o)return n.prefs.lightDiffuseEdit;if(!o)return n.prefs.lightDiffuse;throw new Error("Failed pattern match at ConeCanvas.Frontend.Lightning line 34, column 23 - line 36, column 59: "+[o.constructor.name])}()))};e.setLightning$_$_$=o,e.setEditLightning$_$_$=a}(PS["ConeCanvas.Frontend.Lightning"]=PS["ConeCanvas.Frontend.Lightning"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Maybe.Unsafe"],o=PS["Data.Int"],a=PS["Control.Monad.ST"],i=PS["Data.Array"],u=PS["Control.Monad.Eff.Random"],c=(PS["Graphics.Canvas"],PS["Graphics.WebGLAll"],PS["Data.ST.Matrix"]),l=PS["Data.Matrix4"],s=(PS["Data.Vector"],PS["Data.Set"]),f=PS["Data.StrMap.ST"],d=PS["Debug.Trace"],v=PS.Extensions,m=(PS.ConeCanvas,PS["ConeCanvas.ConeControlTypes"]),h=PS["ConeCanvas.Frontend.DrawTypes3d"],p=PS["ConeCanvas.Frontend.DrawProcessing"],g=PS["ConeCanvas.Frontend.Pickbuffer"],w=PS["ConeCanvas.Frontend.Cone"],_=PS["ConeCanvas.Frontend.Textures"],$=PS["ConeCanvas.Frontend.Lightning"],C=PS["ConeCanvas.Frontend.Matrix"],S=PS["ConeCanvas.Frontend.Shaders"],y=(PS["ConeCanvas.Preferences"],PS["ConeCanvas.Frontend.Events.Keyboard"]),P=PS["ConeCanvas.Frontend.Events.Mouse"],T=PS["ConeCanvas.Frontend.Events.Touch"],b=PS["Data.Generic"],E=PS["Control.Monad.Eff"],x=PS["Graphics.WebGL"],F=PS["Graphics.WebGLTexture"],A=PS["ConeCanvas.ConeControl"],N=PS["ConeCanvas.ConeModel"],D=PS["ConeCanvas.ConeZipper"],M=PS["ConeCanvas.Color"],L=PS["Graphics.WebGLFramebuffer"],O=PS["Data.TypeNat"],I=function(e,c,l){return function(){var s=m.readPaintRef$_$_$(e,c)();if(s.cycleCallback(),s.benchmark instanceof t.Nothing)return x.requestAnimationFrame(function(){F.activeTexture(0)();var t=A.getMillisecondsTime();A.animateFunc$_$_$(e,c,t,!1)();var a=A.getMillisecondsTime(),f=a-t;return function(){var e=f>A.stepTime;if(e)return d.traceA(E.applicativeEff)("Too slow: "+n.show(n.showNumber)(f));if(!e)return n["return"](E.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 143, column 17 - line 146, column 17: "+[e.constructor.name])}()(),_.constructTextures$_$_$(e,s,A.stepTime-f)(),function(){var t=i["null"](s.commandQueue)&&s.demoMode;if(t){if(s.state instanceof m.OSNormal){if(s.selectionModel instanceof N.OSParent)return n["return"](E.applicativeEff)(n.unit);if(s.selectionModel instanceof N.OSCurrent){var a=D.countLoadedNodes$_$_$(e,D.selGetPos$_$_$(e,s.selectionModel));return function(){var t=u.randomInt$_$_$(0,a-1)(),i=D.getZipFromIndex$_$_$(e,D.selGetPos$_$_$(e,s.selectionModel),t)(),l=D.coneGetPath(r.fromJust(i)),f=u.randomInt$_$_$(1e3,3e3)();return m.modifyPaintRef$_$_$(e,c,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.commandQueue=[new N.AnimClockwork(l),new N.AnimPause(o.toNumber(f))],n})(),n.unit}}throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 150, column 29 - line 162, column 25: "+[s.selectionModel.constructor.name])}return n["return"](E.applicativeEff)(n.unit)}if(!t)return n["return"](E.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 147, column 17 - line 164, column 17: "+[t.constructor.name])}()(),I(e,c,l)()})();if(s.benchmark instanceof t.Just)return x.requestAnimationFrame(function(){var r=A.getMillisecondsTime();A.animateFunc$_$_$(e,c,r,!1)();var u=A.getMillisecondsTime(),f=u-r;return function(){var e=f>A.stepTime;if(e)return d.traceA(E.applicativeEff)("Too slow bench: "+n.show(n.showNumber)(f));if(!e)return n["return"](E.applicativeEff)(n.unit);throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 170, column 17 - line 173, column 17: "+[e.constructor.name])}()(),_.constructTextures$_$_$(e,s,A.stepTime-f)(),function(){var r=i["null"](s.commandQueue);if(r)return function(){d.traceA(E.applicativeEff)("Benchmark finished cycles: "+(n.show(n.showInt)(s.benchmark.value0.cycles)+(" runtime per cycle:  "+n.show(n.showNumber)(s.benchmark.value0.runtime/o.toNumber(s.benchmark.value0.cycles)))))();var r=a.readSTRef(s.bindings.textureRef)();d.traceA(E.applicativeEff)("Benchmark finished textures: "+b.gShow$_$_$(h.genericTextureAdimin,r.textureAdmin))();var i=h.runTextureAdmin(r.textureAdmin);return d.traceA(E.applicativeEff)("IconText average load time: "+(n.show(n.showNumber)(i.iconLoadTimeSum/o.toNumber(i.iconLoadNum))+(" Text texture average load time: "+n.show(n.showNumber)(i.textTextureLoadTimeSum/o.toNumber(i.textTextureLoadNum)))))(),m.modifyPaintRef$_$_$(e,c,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.benchmark=t.Nothing.value,n})()};if(!r)return m.modifyPaintRef$_$_$(e,c,function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.benchmark=new t.Just({runtime:s.benchmark.value0.runtime+f,cycles:s.benchmark.value0.cycles+1|0}),n});throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 174, column 17 - line 188, column 17: "+[r.constructor.name])}()(),I(e,c,l)()})();throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 136, column 5 - line 190, column 1: "+[s.benchmark.constructor.name])}},R=function(e){return new m.ConeFront({startCanvas:function(n){return function(t){return d.trace("startCanvas")(function(r){return function(){var r=m.readPaintRef$_$_$(e,n)(),o=x.getCanvasWidth(r.bindings.context)(),a=x.getCanvasHeight(r.bindings.context)();x.viewport(0)(0)(o)(a)(),m.modifyPaintRef$_$_$(e,n,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.windowSize={x:o,y:a},n})();var i=m.readPaintRef$_$_$(e,n)();y.addKeyboardEventListeners$_$_$(e,n,R(e),t)(),P.addMouseEventListeners$_$_$(e,n,R(e),t)(),T.initTouch$_$_$(e,n)(),g.resetPickColor$_$_$(e,i)(),x.setUniformBoolean$_$_$(r.bindings.uUseTexture,!1)(),x.setUniformBoolean$_$_$(r.bindings.uUseTextureFrame,!1)(),x.setUniformFloats$_$_$(r.bindings.uTextureFrameColor,M.color4toArray(i.prefs.textureFrameColor))(),x.setUniformFloats$_$_$(r.bindings.uTexAmbiance,[1])(),x.enableVertexAttribArray(r.bindings.aVertexNormal)(),x.disableVertexAttribArray(r.bindings.aTextureCoord)(),x.disable(x.BLEND.value)(),x.blendFunc$_$_$(x.SRC_ALPHA.value,x.ONE_MINUS_SRC_ALPHA.value)(),x.enable(x.DEPTH_TEST.value)(),x.depthFunc(x.LESS.value)(),$.setLightning$_$_$(e,i)();var u=A.getMillisecondsTime();return A.animateFunc$_$_$(e,n,u,!0)(),I(e,n,R(e))()}})}},paintIt:function(t){return function(r){return function(){var o=m.readPaintRef$_$_$(e,t)();g.resetPickColor$_$_$(e,o)(),$.setEditLightning$_$_$(e,o,o.controlState.editMode)(),a.writeSTRef$_$_$(o.controlState.needRepaint,!1)(),L.bindFramebuffer(o.bindings.pickBuffer.l)(),F.activeTexture(0)(),x.viewport(0)(0)(o.windowSize.x)(o.windowSize.y)(),L.framebufferTexture2D$_$_$(L.COLOR_ATTACHMENT0.value,F.TEXTURE_2D.value,o.bindings.pickBuffer.r)(),x.clearColor(0)(0)(0)(0)(),x.clear([x.COLOR_BUFFER_BIT.value])(),L.unbindFramebuffer(),x.viewport(0)(0)(o.windowSize.x)(o.windowSize.y)(),x.clearDepth(100)(),x.clearColor(o.prefs.backColor.value0)(o.prefs.backColor.value1)(o.prefs.backColor.value2)(o.prefs.backColor.value3)(),x.clear([x.COLOR_BUFFER_BIT.value,x.DEPTH_BUFFER_BIT.value])(),C.setPerspective$_$_$(e,o,1)();var i=function(){if(o.selectionModel instanceof N.OSCurrent)return p.coneDrawPos$_$_$(e,o.selectionModel.value0,!1,r,o);if(o.selectionModel instanceof N.OSParent)return p.coneDrawPos$_$_$(e,o.selectionModel.value0,!0,r,o);throw new Error("Failed pattern match at ConeCanvas.Frontend.FrontendWebGL line 245, column 19 - line 248, column 9: "+[o.selectionModel.constructor.name])}()();return m.modifyPaintRef$_$_$(e,t,function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.labelSelection=i,n.counter=e.counter+1|0,n})(),n.unit}}},warningCancel:function(n){return function(t){return function(){var r=m.readPaintRef$_$_$(e,n)();return r.alertCallback(t)(),!0}}},warning:function(t){return function(r){return function(){var o=m.readPaintRef$_$_$(e,t)();return o.alertCallback(r)(),n.unit}}},quit:function(e){return n["return"](E.applicativeEff)(n.unit)},userToDevice:function(e){return function(r){return function(){var a=c.fromSTMat$_$_$(O.s4,e.bindings.mvMatrix)(),i=c.fromSTMat$_$_$(O.s4,e.bindings.pMatrix)(),u=l.project$_$_$([r.x,r.y,r.z],a,i,[0,0,o.toNumber(e.windowSize.x),o.toNumber(e.windowSize.y)]);return u instanceof t.Nothing?(d.traceA(E.applicativeEff)("userToDevice x: "+(n.show(n.showNumber)(r.x)+(" y: "+(n.show(n.showNumber)(r.y)+(" z: "+(n.show(n.showNumber)(r.z)+" returns Nothing"))))))(),t.Nothing.value):u instanceof t.Just&&3===u.value0.length?new t.Just({x:o.toNumber(e.windowSize.x)-u.value0[0],y:u.value0[1],z:u.value0[2]}):v.fail("FrontendWebGL>>userToDevice: Impossible!")()}}},deviceToUser:function(e){return function(n){return function(){var r=c.fromSTMat$_$_$(O.s4,e.bindings.mvMatrix)(),a=c.fromSTMat$_$_$(O.s4,e.bindings.pMatrix)(),i=l.unProject$_$_$([o.toNumber(e.windowSize.x)-n.x,n.y,n.z],r,a,[0,0,o.toNumber(e.windowSize.x),o.toNumber(e.windowSize.y)]);return i instanceof t.Nothing?t.Nothing.value:i instanceof t.Just&&3===i.value0.length?new t.Just({x:i.value0[0],y:i.value0[1],z:i.value0[2]}):v.fail("FrontendWebGL>>deviceToUser: Impossible!")()}}}})},k=function(e,r,o,i,u){return x.runWebGLAttr$_$_$(r,function(){var e={};for(var n in x.defContextAttributes)x.defContextAttributes.hasOwnProperty(n)&&(e[n]=x.defContextAttributes[n]);return e.preserveDrawingBuffer=!1,e}(),function(e){return o(e)},function(r){return function(){return d.traceA(E.applicativeEff)("WebGL started")(),x.withShaders$_$_$(S.shaders,function(e){return i(e)},function(o){return function(){x.bindAttribLocation$_$_$(o.webGLProgram,0,"aVertexPosition")(),d.traceA(E.applicativeEff)("shadersReady")();var i=c["identityST'"](O.s4)(),l=c["identityST'"](O.s4)(),v=h.emptyTextureCache(),m=a.newSTRef(v)(),p=f["new"](),$=a.newSTRef(0)(),C=a.newSTRef(t.Nothing.value)(),S=g.initPickbuffer(r)(),y=w.prepareConeXZ(e.coneHeight)(),P=_.prepareTexture();x.makeBufferFloatDyn([])(),x.makeBufferFloatDyn([])();return u({aVertexPosition:o.aVertexPosition,aVertexNormal:o.aVertexNormal,uPMatrix:o.uPMatrix,uMVMatrix:o.uMVMatrix,uNMatrix:o.uNMatrix,uShininess:o.uShininess,uLightDirection:o.uLightDirection,uLightAmbient:o.uLightAmbient,uLightDiffuse:o.uLightDiffuse,uLightSpecular:o.uLightSpecular,uMaterialAmbient:o.uMaterialAmbient,uMaterialDiffuse:o.uMaterialDiffuse,uMaterialSpecular:o.uMaterialSpecular,uScale:o.uScale,aTextureCoord:o.aTextureCoord,uSampler:o.uSampler,uUseTexture:o.uUseTexture,uSimple:o.uSimple,uUseTextureFrame:o.uUseTextureFrame,uTextureFrameColor:o.uTextureFrameColor,uTexAmbiance:o.uTexAmbiance,webGLProgram:o.webGLProgram,mvMatrix:i,pMatrix:l,keysPressed:s.empty,vBufferCone:y.vBuffer,nBufferCone:y.nBuffer,vBufferSTL:y.vBuffer,nBufferSTL:y.nBuffer,textureCoords:P.textureCoords,vertexIndices:P.vertexIndices,vertexCoos:P.vertexCoos,textureRef:m,stlCache:p,pickBuffer:S,lastPickColor:$,context:r,benchmark:t.Nothing.value,drawStructsCache:C})(),n.unit}})()}})};e.myFrontend=R,e.loop$_$_$=I,e.initGUI$_$_$=k}(PS["ConeCanvas.Frontend.FrontendWebGL"]=PS["ConeCanvas.Frontend.FrontendWebGL"]||{}),function(e){"use strict";e.navigateToUrlInt=function(e){return function(){globSetURL(e)}},e.handleSelectedPrim=function(e){return function(e){return function(){globSelectedPrim(e)}}},e.handleSelectedPrim$_$_$=function(e,n){return function(){globSelectedPrim(n)}},e.getServerHash=function(){return window.location.hash},e.getSearchString=function(e){return function(){var n=document.getElementById(e);return n.value}}}(PS.Main=PS.Main||{}),function(e){"use strict";var n=PS.Prelude,t=(PS["Data.Maybe"],PS["Data.Foreign.Class"]),r=(PS["Control.Monad.ST"],PS["Data.Map"],PS["Data.List"],PS.ConeCanvas,PS["ConeCanvas.ConeModel"]),o=PS["Data.Either"],a=PS["Data.Foreign.Index"],i=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),u=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),c=function(){function e(){}return e.value=new e,e}(),l=function(){function e(){}return e.value=new e,e}(),s=function(){function e(){}return e.value=new e,e}(),f=function(){function e(){}return e.value=new e,e}(),d=function(){function e(){}return e.value=new e,e}(),v=function(){function e(){}return e.value=new e,e}(),m=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),h=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),p=new n.Show(function(e){if(e instanceof c)return"CPENext";if(e instanceof l)return"CPEPrevious";if(e instanceof s)return"CPEStart";if(e instanceof f)return"CPEEnd";if(e instanceof d)return"CPEExposeCanvas";if(e instanceof v)return"CPEHideCanvas";throw new Error("Failed pattern match at OntoPanel.OntoPanelTypes line 49, column 5 - line 50, column 5: "+[e.constructor.name])}),g=function(e){return new t.IsForeign(function(i){return n.bind(o.bindEither)(t.readProp$_$_$(t.intIsForeign,a.indexString,"nodeId",i))(function(u){return n.bind(o.bindEither)(t.readProp$_$_$(t.arrayIsForeign(r.isForeignConeNode(e)),a.indexString,"nodeChilds",i))(function(e){return n["return"](o.applicativeEither)(new m({nodeId:u,nodeChilds:e}))})})})},w=function(e){return new t.IsForeign(function(i){return n.bind(o.bindEither)(t.readProp$_$_$(t.arrayIsForeign(r.isForeignConeNode(e)),a.indexString,"children",i))(function(r){return n.bind(o.bindEither)(t.readProp$_$_$(t.arrayIsForeign(g(e)),a.indexString,"cacheIt",i))(function(e){return n["return"](o.applicativeEither)(new h({children:r,cacheIt:e}))})})})};e.ChildLoad=h,e.ChildCached=m,e.CPENext=c,e.CPEPrevious=l,e.CPEStart=s,e.CPEEnd=f,e.CPEExposeCanvas=d,e.CPEHideCanvas=v,e.ConePresentationFrame=u,e.FrontendCache=i,e.showConePresentation=p,e.childCachedIsForeign=g,e.childLoadIsForeign=w}(PS["OntoPanel.OntoPanelTypes"]=PS["OntoPanel.OntoPanelTypes"]||{}),function(e){"use strict";e.ajaxGetInt$_$_$=function(e,n){return function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&n(t.responseText)()},t.open("GET",e),t.timeout=2e4,t.ontimeout=function(){console.log("ServerConnection>>ajaxGetInt: Timeout"),n("")()},t.setRequestHeader("Content-Type","application/json"),t.send()}},e.ajaxGetIntSync=function(e){return function(){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.setRequestHeader("Content-Type","application/json"),n.send(),200==n.status?n.responseText:""}},e.ajaxPostInt$_$_$=function(e,n,t){return function(){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(r.responseText)()},r.open("POST",e,!0),r.timeout=2e4,r.ontimeout=function(){console.log("ServerConnection>>ajaxPostInt: Timeout"),t("")()},r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send("data=".concat(n))}}}(PS["OntoPanel.ServerConnection"]=PS["OntoPanel.ServerConnection"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Either"],o=PS["Data.List"],a=PS["Data.Foreign"],i=PS["Data.Foreign.Class"],u=PS["Data.Foreign.NullOrUndefined"],c=(PS.ConeCanvas,PS["OntoPanel.OntoPanelTypes"]),l=PS.Extensions,s=PS["ConeCanvas.ConeModel"],f=PS["Control.Monad.Eff"],d=PS["ConeCanvas.ConeZipper"],v=PS["Data.Foreign.Index"],m=PS["Data.Foldable"],h=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),p=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),g=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),w=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),_=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),$=function(){function e(){}return e.value=new e,e}(),C=function(){function e(){}return e.value=new e,e}(),S=function(){function e(){}return e.value=new e,e}(),y=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),P=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),T=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),b=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),E=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),x=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),F=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),A=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),N=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),D=function(){function e(){}return e.value=new e,e}(),M=function(){function e(){}return e.value=new e,e}(),L=function(){function e(){}return e.value=new e,e}(),O=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),I=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),R=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),k=function(){function e(){}return e.value=new e,e}(),U=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),G=function(e,r){if(r.value1 instanceof t.Nothing)return n["return"](f.applicativeEff)(r.value0);if(r.value1 instanceof t.Just)return function(){var n=d.coneSetPath$_$_$(e,r.value0,r.value1.value0)();if(n instanceof t.Nothing)return r.value0;if(n instanceof t.Just)return n.value0;throw new Error("Failed pattern match at OntoPanel.Foreign line 38, column 5 - line 42, column 1: "+[n.constructor.name])};throw new Error("Failed pattern match at OntoPanel.Foreign line 35, column 1 - line 36, column 1: "+[r.constructor.name])},B=function(e,n){if(n instanceof p)return function(){var t=G(e,n.value0)();return new s.OSCurrent(t)};if(n instanceof g)return function(){var t=G(e,n.value0)();return new s.OSParent(t)};throw new Error("Failed pattern match at OntoPanel.Foreign line 71, column 1 - line 74, column 1: "+[n.constructor.name])},J=function(e){return function(r){if(r instanceof w)return n["return"](f.applicativeEff)(new s.AnimMoveLeft(r.value0));if(r instanceof _)return n["return"](f.applicativeEff)(new s.AnimMoveRight(r.value0));if(r instanceof $)return n["return"](f.applicativeEff)(s.AnimTurnToFirst.value);if(r instanceof C)return n["return"](f.applicativeEff)(s.AnimMoveUp.value);if(r instanceof S)return n["return"](f.applicativeEff)(s.AnimMoveDown.value);if(r instanceof y)return n["return"](f.applicativeEff)(new s.AnimClockwork(r.value0));if(r instanceof P&&r.value0 instanceof t.Nothing)return n["return"](f.applicativeEff)(new s.AnimTransformLeft(t.Nothing.value));if(r instanceof P&&r.value0 instanceof t.Just)return function(){var n=G(e,r.value0.value0)();return new s.AnimTransformLeft(new t.Just(n))};if(r instanceof T&&r.value0 instanceof t.Nothing)return n["return"](f.applicativeEff)(new s.AnimTransformRight(t.Nothing.value));if(r instanceof T&&r.value0 instanceof t.Just)return function(){var n=G(e,r.value0.value0)();return new s.AnimTransformRight(new t.Just(n))};if(r instanceof b&&r.value0 instanceof t.Nothing)return n["return"](f.applicativeEff)(new s.AnimTransformUp(t.Nothing.value));if(r instanceof b&&r.value0 instanceof t.Just)return function(){var n=G(e,r.value0.value0)();return new s.AnimTransformUp(new t.Just(n))};if(r instanceof E&&r.value0 instanceof t.Nothing)return n["return"](f.applicativeEff)(new s.AnimTransformDown(t.Nothing.value));if(r instanceof E&&r.value0 instanceof t.Just)return function(){var n=G(e,r.value0.value0)();return new s.AnimTransformDown(new t.Just(n))};if(r instanceof x&&r.value2 instanceof t.Nothing)return function(){var n=G(e,r.value1)();return new s.AnimTransformIntro(r.value0,n,t.Nothing.value)};if(r instanceof x&&r.value2 instanceof t.Just)return function(){var n=G(e,r.value1)(),o=G(e,r.value2.value0)();return new s.AnimTransformIntro(r.value0,n,new t.Just(o))};if(r instanceof F&&r.value1 instanceof t.Nothing)return n["return"](f.applicativeEff)(new s.AnimTransformExtro(r.value0,t.Nothing.value));if(r instanceof F&&r.value1 instanceof t.Just)return function(){var n=B(e,r.value1.value0)();return new s.AnimTransformExtro(r.value0,new t.Just(n))};if(r instanceof A&&r.value0 instanceof t.Nothing)return n["return"](f.applicativeEff)(new s.AnimTransformShiftToZero(t.Nothing.value));if(r instanceof A&&r.value0 instanceof t.Just)return function(){var n=G(e,r.value0.value0)();return new s.AnimTransformShiftToZero(new t.Just(n))};if(r instanceof N&&r.value1 instanceof t.Nothing)return function(){var n=G(e,r.value0)();return new s.AnimTransformReplace(n)};if(r instanceof N&&r.value1 instanceof t.Just)return function(){var n=G(e,r.value0)(),o=d.coneSetPath$_$_$(e,n,r.value1.value0)();if(o instanceof t.Nothing)return new s.AnimTransformReplace(n);if(o instanceof t.Just)return new s.AnimTransformReplace(o.value0);throw new Error("Failed pattern match at OntoPanel.Foreign line 235, column 5 - line 238, column 1: "+[o.constructor.name]);
};if(r instanceof D)return n["return"](f.applicativeEff)(s.AnimCut.value);if(r instanceof M)return n["return"](f.applicativeEff)(s.AnimCopy.value);if(r instanceof L)return n["return"](f.applicativeEff)(s.AnimPaste.value);if(r instanceof O)return n["return"](f.applicativeEff)(new s.AnimGlobalView(r.value0));if(r instanceof I)return n["return"](f.applicativeEff)(new s.AnimZoom(r.value0));if(r instanceof R)return n["return"](f.applicativeEff)(new s.AnimPause(r.value0));if(r instanceof k)return n["return"](f.applicativeEff)(s.AnimNull.value);throw new Error("Failed pattern match at OntoPanel.Foreign line 192, column 1 - line 193, column 1: "+[r.constructor.name])}},z=function(e,n){return function(){var t=l.mapM$_$_$(f.monadEff,J(e),n.value0.animations)();return new c.ConePresentationFrame({animations:t,url:n.value0.url})}},H=function(e){return new i.IsForeign(function(a){return n.bind(r.bindEither)(i.readProp$_$_$(s.isForeignConeNode(e),v.indexString,"node",a))(function(e){return n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.arrayIsForeign(i.intIsForeign)),v.indexString,"newConePath",a)))(function(a){return n["return"](r.applicativeEither)(new h({content:e,before:o.Nil.value,after:o.Nil.value,parents:o.Nil.value},function(){if(a instanceof t.Nothing)return t.Nothing.value;if(a instanceof t.Just)return new t.Just(o.toList(m.foldableArray)(a.value0));throw new Error("Failed pattern match at OntoPanel.Foreign line 51, column 19 - line 53, column 56: "+[a.constructor.name])}()))})})})},W=function(e){return new i.IsForeign(function(t){return n.bind(r.bindEither)(i.read(H(e))(t))(function(e){return n.bind(r.bindEither)(i.readProp$_$_$(i.stringIsForeign,v.indexString,"tag",t))(function(n){return"OSCurrent"===n?r.Right.create(new p(e)):"OSParent"===n?r.Right.create(new g(e)):r.Left.create(new a.JSONError("ConeModel>>isForeignConeZip: unknown tag: "+n))})})})},j=function(e){return new i.IsForeign(function(c){return n.bind(r.bindEither)(i.readProp$_$_$(i.stringIsForeign,v.indexString,"tag",c))(function(l){return n.bind(r.bindEither)(function(){return"AnimMoveLeft"===l?r.Right.create(n["<$>"](r.functorEither)(w.create)(i.readProp$_$_$(i.intIsForeign,v.indexString,"left",c))):"AnimMoveRight"===l?r.Right.create(n["<$>"](r.functorEither)(_.create)(i.readProp$_$_$(i.intIsForeign,v.indexString,"right",c))):"AnimTurnToFirst"===l?r.Right.create(n.pure(r.applicativeEither)($.value)):"AnimMoveUp"===l?r.Right.create(n.pure(r.applicativeEither)(C.value)):"AnimMoveDown"===l?r.Right.create(n.pure(r.applicativeEither)(S.value)):"AnimClockwork"===l?r.Right.create(n.bind(r.bindEither)(i.readProp$_$_$(i.arrayIsForeign(i.intIsForeign),v.indexString,"conePath",c))(function(e){return n["return"](r.applicativeEither)(new y(o.toList(m.foldableArray)(e)))})):"AnimTransformLeft"===l?r.Right.create(n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(e)),v.indexString,"model",c)))(function(e){return n["return"](r.applicativeEither)(new P(e))})):"AnimTransformRight"===l?r.Right.create(n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(e)),v.indexString,"model",c)))(function(e){return n["return"](r.applicativeEither)(new T(e))})):"AnimTransformIntro"===l?r.Right.create(n.bind(r.bindEither)(i.readProp$_$_$(i.booleanIsForeign,v.indexString,"leftOrRight",c))(function(t){return n.bind(r.bindEither)(i.readProp$_$_$(H(e),v.indexString,"introModel",c))(function(o){return n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(e)),v.indexString,"model",c)))(function(e){return n["return"](r.applicativeEither)(new x(t,o,e))})})})):"AnimTransformExtro"===l?r.Right.create(n.bind(r.bindEither)(i.readProp$_$_$(i.booleanIsForeign,v.indexString,"leftOrRight",c))(function(t){return n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(W(e)),v.indexString,"model",c)))(function(e){return n["return"](r.applicativeEither)(new F(t,e))})})):"AnimTransformDown"===l?r.Right.create(n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(e)),v.indexString,"model",c)))(function(e){return n["return"](r.applicativeEither)(new E(e))})):"AnimTransformUp"===l?r.Right.create(n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(e)),v.indexString,"model",c)))(function(e){return n["return"](r.applicativeEither)(new b(e))})):"AnimTransformShiftToZero"===l?r.Right.create(n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(H(e)),v.indexString,"model",c)))(function(e){return n["return"](r.applicativeEither)(new A(e))})):"AnimTransformReplace"===l?r.Right.create(n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.arrayIsForeign(i.intIsForeign)),v.indexString,"newConePath",c)))(function(a){return n.bind(r.bindEither)(i.readProp$_$_$(H(e),v.indexString,"newModel",c))(function(e){if(a instanceof t.Nothing)return n["return"](r.applicativeEither)(new N(e,t.Nothing.value));if(a instanceof t.Just)return n["return"](r.applicativeEither)(new N(e,new t.Just(o.toList(m.foldableArray)(a.value0))));throw new Error("Failed pattern match at OntoPanel.Foreign line 168, column 21 - line 171, column 17: "+[a.constructor.name])})})):"AnimGlobalView"===l?r.Right.create(n["<$>"](r.functorEither)(O.create)(i.readProp$_$_$(i.booleanIsForeign,v.indexString,"startOrFinish",c))):"AnimZoom"===l?r.Right.create(n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.numberIsForeign),v.indexString,"factor",c)))(function(e){return n["return"](r.applicativeEither)(new I(e))})):"AnimPause"===l?r.Right.create(n["<$>"](r.functorEither)(R.create)(i.readProp$_$_$(i.numberIsForeign,v.indexString,"time",c))):"AnimCut"===l?r.Right.create(n.pure(r.applicativeEither)(D.value)):"AnimCopy"===l?r.Right.create(n.pure(r.applicativeEither)(M.value)):"AnimPaste"===l?r.Right.create(n.pure(r.applicativeEither)(L.value)):"AnimNull"===l?r.Right.create(n.pure(r.applicativeEither)(k.value)):r.Left.create(new a.JSONError("ConeModel>>foreignAnimationFS: Unknown tag: ++ show tag"))}())(function(e){return e})})})},q=function(e){return new i.IsForeign(function(t){return n.bind(r.bindEither)(i.readProp$_$_$(i.arrayIsForeign(j(e)),v.indexString,"animations",t))(function(e){return n.bind(r.bindEither)(n["<$>"](r.functorEither)(u.runNullOrUndefined)(i.readProp$_$_$(i.nullOrUndefinedIsForeign(i.stringIsForeign),v.indexString,"urlExpl",t)))(function(t){return n["return"](r.applicativeEither)(new U({animations:e,url:t}))})})})};e.ConePresentationFrameF=U,e.AnimMoveLeftF=w,e.AnimMoveRightF=_,e.AnimTurnToFirstF=$,e.AnimMoveUpF=C,e.AnimMoveDownF=S,e.AnimClockworkF=y,e.AnimTransformLeftF=P,e.AnimTransformRightF=T,e.AnimTransformUpF=b,e.AnimTransformDownF=E,e.AnimTransformIntroF=x,e.AnimTransformExtroF=F,e.AnimTransformShiftToZeroF=A,e.AnimTransformReplaceF=N,e.AnimCutF=D,e.AnimCopyF=M,e.AnimPasteF=L,e.AnimGlobalViewF=O,e.AnimZoomF=I,e.AnimPauseF=R,e.AnimNullF=k,e.OSCurrentF=p,e.OSParentF=g,e.ConeZipF=h,e.runConePresentationFrameF$_$_$=z,e.runAnimationF=J,e.runConeSelectionF$_$_$=B,e.runConeZipF$_$_$=G,e.isForeignConeZipF=H,e.isForeignConeSelectionF=W,e.foreignAnimation=j,e.foreignConePresentationFrameF=q}(PS["OntoPanel.Foreign"]=PS["OntoPanel.Foreign"]||{}),function(e){"use strict";var n=PS["OntoPanel.ServerConnection"],t=PS.Prelude,r=PS["Data.Either"],o=PS["Data.Maybe"],a=PS["Data.Foreign.Class"],i=PS["Data.List"],u=PS["Control.Monad.Eff"],c=PS["Debug.Trace"],l=(PS.DOM,PS["ConeCanvas.ConeModel"],PS["OntoPanel.OntoPanelTypes"]),s=PS["OntoPanel.Foreign"],f=PS.Extensions,d=PS["Data.Foreign.Index"],v=PS["Data.Foreign"],m=PS["Data.Unfoldable"],h=PS["Data.Foldable"],p=function(){function e(){}return e.value=new e,e}(),g=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),w=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),_=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),$=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),C=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),S=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),y=new a.IsForeign(function(e){return t.bind(r.bindEither)(a.readProp$_$_$(a.stringIsForeign,d.indexString,"tag",e))(function(n){return t.bind(r.bindEither)(c.traceA(r.applicativeEither)("Tag: "+n))(function(){return"PathToRoot"===n?t["<$>"](r.functorEither)(C.create)(a.readProp$_$_$(a.arrayIsForeign(a.intIsForeign),d.indexString,"ids",e)):"IconList"===n?t["<$>"](r.functorEither)(_.create)(a.readProp$_$_$(a.arrayIsForeign(a.stringIsForeign),d.indexString,"icons",e)):"STLList"===n?t["<$>"](r.functorEither)($.create)(a.readProp$_$_$(a.arrayIsForeign(a.stringIsForeign),d.indexString,"stls",e)):"Base64IMG"===n?t["<*>"](r.applyEither)(t["<$>"](r.functorEither)(g.create)(a.readProp$_$_$(a.stringIsForeign,d.indexString,"name",e)))(a.readProp$_$_$(a.stringIsForeign,d.indexString,"base64",e)):"STLBinary"===n?t["<*>"](r.applyEither)(t["<$>"](r.functorEither)(w.create)(a.readProp$_$_$(a.stringIsForeign,d.indexString,"name",e)))(a.readProp$_$_$(a.stringIsForeign,d.indexString,"base64",e)):"Prefs"===n?t["<$>"](r.functorEither)(S.create)(a.readProp$_$_$(a.stringIsForeign,d.indexString,"string",e)):t["return"](r.applicativeEither)(p.value)})})}),P=function(e,i,l,s){if(i instanceof o.Just)return n.ajaxPostInt$_$_$(l,s,function(n){return c.trace("received: "+n)(function(o){return r.either$_$_$(function(e){return c.trace("Parse Error: "+t.show(v.showForeignError)(e))(function(e){return t["return"](u.applicativeEff)(t.unit)})},i.value0,a.readJSON$_$_$(e,n))})});if(i instanceof o.Nothing)return n.ajaxPostInt$_$_$(l,s,t["const"](t["return"](u.applicativeEff)(t.unit)));throw new Error("Failed pattern match at OntoPanel.ServerConnection line 126, column 5 - line 134, column 1: "+[i.constructor.name])},T=function(e,n,t){return c.trace("post: "+n)(function(r){return P(s.foreignConePresentationFrameF(e),new o.Just(t),"/present/event",n)})},b=function(e){return P(a.stringIsForeign,o.Nothing.value,"/model/event",t.show(t.showArray(t.showInt))(i.fromList(m.unfoldableArray)(e)))},E=function(e,t){return n.ajaxGetInt$_$_$("/model/full"+t,e)},x=function(e,o,i){return function(){var u=n.ajaxGetIntSync(o)();return r.either$_$_$(function(e){return c.trace("Parse Error: "+t.show(v.showForeignError)(e))(function(e){return i})},t.id(t.categoryFn),a.readJSON$_$_$(e,u))}},F=function(e,n){return x(l.childLoadIsForeign(e),"/cone/children?id="+t.show(t.showString)(n),new l.ChildLoad({children:[],cacheIt:[]}))},A=function(e,i,l){if(i instanceof o.Nothing)return n.ajaxGetInt$_$_$(l,t["const"](t["return"](u.applicativeEff)(t.unit)));if(i instanceof o.Just)return n.ajaxGetInt$_$_$(l,function(n){return r.either$_$_$(function(e){return c.trace("Parse Error: "+t.show(v.showForeignError)(e))(function(e){return t["return"](u.applicativeEff)(t.unit)})},i.value0,a.readJSON$_$_$(e,n))});throw new Error("Failed pattern match at OntoPanel.ServerConnection line 115, column 5 - line 119, column 1: "+[i.constructor.name])},N=function(e){var n=function(n){return n instanceof _?e(n.value0):f.fail("loadIconNames>>Load failure.")};return A(y,new o.Just(n),"/iconlist")},D=function(e,n){var t=function(t){return t instanceof C?n(i.toList(h.foldableArray)(t.value0)):f.fail("URL not found on server: "+e)};return A(y,new o.Just(t),"/cone/rootpath?targeturl="+e)},M=function(e){var n=function(n){return n instanceof S?e(n.value0):f.fail("loadPrefs>>Load failure.")};return A(y,new o.Just(n),"/prefs")},L=function(e){var n=function(n){return n instanceof $?e(n.value0):f.fail("loadSTLNames>>Load failure.")};return A(y,new o.Just(n),"/stllist")};e.CSRInvalid=p,e.CSRBase64IMG=g,e.CSRSTLBinary=w,e.CSRIconList=_,e.CSRSTLList=$,e.CSRPathToRoot=C,e.CSRJson=S,e.ajaxModel$_$_$=E,e.ajaxGet$_$_$=A,e.sendSelected=b,e.presentationPost$_$_$=T,e.loadGet$_$_$=F,e.loadPrefs=M,e.loadSTLNames=L,e.loadIconNames=N,e.loadPath$_$_$=D,e.coneSrvResponseIsForeign=y}(PS["OntoPanel.ServerConnection"]=PS["OntoPanel.ServerConnection"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Map"],o=PS["Control.Monad.ST"],a=PS["Data.List"],i=PS["Data.Either"],u=PS["Data.Foldable"],c=(PS.ConeCanvas,PS["OntoPanel.OntoPanelTypes"]),l=PS["OntoPanel.ServerConnection"],s=PS["Control.Monad.Eff"],f=PS["ConeCanvas.ConeModel"],d=PS["ConeCanvas.ConeZipper"],v=n["<$>"](s.functorEff)(c.FrontendCache.create)(o.newSTRef({cacheContent:r.empty,cacheHits:r.empty})),m=function(e){var o=function(e){if(e instanceof t.Nothing)return new t.Just(1);if(e instanceof t.Just)return new t.Just(e.value0+1|0);throw new Error("Failed pattern match at OntoPanel.FrontendCache line 85, column 5 - line 86, column 5: "+[e.constructor.name])};return r.alter(n.ordInt)(o)(e)},h=function(e){return function(e){return function(t){return r.insert(n.ordInt)(t.value0.nodeId)(a.toList(u.foldableArray)(t.value0.nodeChilds))(e)}}},p=function(e,t,o,a){return r.insert(n.ordInt)(o)(a)(t)},g=function(e){return function(i){return function(c){return function(){var s=o.readSTRef(i.value0)(),f=r.lookup$_$_$(n.ordInt,c,s.cacheContent);if(f instanceof t.Just)return o.writeSTRef$_$_$(i.value0,function(){var e={};for(var n in s)s.hasOwnProperty(n)&&(e[n]=s[n]);return e.cacheHits=m(c)(s.cacheHits),e}())(),a.toList(a.foldableList)(f.value0);if(f instanceof t.Nothing){var d=l.loadGet$_$_$(e,n.show(n.showInt)(c))(),v=p(e,s.cacheContent,c,a.toList(u.foldableArray)(d.value0.children)),g=u.foldl(u.foldableArray)(h(e))(v)(d.value0.cacheIt);return o.writeSTRef$_$_$(i.value0,function(){var e={};for(var n in s)s.hasOwnProperty(n)&&(e[n]=s[n]);return e.cacheContent=g,e}())(),a.toList(u.foldableArray)(d.value0.children)}throw new Error("Failed pattern match at OntoPanel.FrontendCache line 40, column 5 - line 54, column 1: "+[f.constructor.name])}}}},w=function(e){return function(t){return function(r){if(r.value0.children instanceof i.Left)return new f.ConeNode(function(){var n={};for(var o in r.value0)r.value0.hasOwnProperty(o)&&(n[o]=r.value0[o]);return n.children=new i.Left(g(e)(t)),n}());if(r.value0.children instanceof i.Right)return new f.ConeNode(function(){var o={};for(var u in r.value0)r.value0.hasOwnProperty(u)&&(o[u]=r.value0[u]);return o.children=new i.Right(n.map(a.functorList)(w(e)(t))(r.value0.children.value0)),o}());throw new Error("Failed pattern match at OntoPanel.FrontendCache line 56, column 5 - line 60, column 1: "+[r.value0.children.constructor.name])}}},_=function(e,t,r){if(r.value0.children instanceof i.Left)return new f.ConeNode(function(){var n={};for(var o in r.value0)r.value0.hasOwnProperty(o)&&(n[o]=r.value0[o]);return n.children=new i.Left(g(e)(t)),n}());if(r.value0.children instanceof i.Right)return new f.ConeNode(function(){var o={};for(var u in r.value0)r.value0.hasOwnProperty(u)&&(o[u]=r.value0[u]);return o.children=new i.Right(n.map(a.functorList)(w(e)(t))(r.value0.children.value0)),o}());throw new Error("Failed pattern match at OntoPanel.FrontendCache line 56, column 5 - line 60, column 1: "+[r.value0.children.constructor.name])},$=function(e,n,t){return d.makeZipper$_$_$(e,_(e,n,t.content))},C=function(e,n,t){if(t instanceof f.OSCurrent)return new f.OSCurrent($(e,n,t.value0));if(t instanceof f.OSParent)return new f.OSParent($(e,n,t.value0));throw new Error("Failed pattern match at OntoPanel.FrontendCache line 64, column 1 - line 65, column 1: "+[n.constructor.name,t.constructor.name])};e.setLoadFuncSel$_$_$=C,e.setLoadFuncZipper$_$_$=$,e.setLoadFuncNode=w,e.setLoadFuncNode$_$_$=_,e.newCache=v,e.loadFunc=g}(PS["OntoPanel.FrontendCache"]=PS["OntoPanel.FrontendCache"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Data.Maybe"],r=PS["Data.Foreign"],o=PS["Data.Foreign.Class"],a=PS["Data.Foreign.NullOrUndefined"],i=PS["Data.Either"],u=PS["Data.List"],c=PS["Debug.Trace"],l=(PS.ConeCanvas,PS["OntoPanel.OntoPanelTypes"],PS["OntoPanel.ServerConnection"]),s=PS["OntoPanel.FrontendCache"],f=PS["OntoPanel.Foreign"],d=PS["ConeCanvas.Color"],v=PS["ConeCanvas.ConeModel"],m=PS["Data.Foreign.Index"],h=PS["ConeCanvas.ConeZipper"],p=(PS["Control.Monad.Eff"],new n.Show(function(e){return'"'+(e.label+(" "+(n.show(t.showMaybe(n.showString))(e.condSTL)+'"')))})),g=new n.Eq(function(e){return function(n){return e.entryId===n.entryId}}),w={entryId:0,label:"",targetUri:t.Nothing.value,comment:t.Nothing.value,condIcon:t.Nothing.value,condSTL:t.Nothing.value,condColor:t.Just.create(d.color3fromArray([.5,.5,.5])),isLeaf:!0,isHidden:!0},_=new v.ConeNode({entry:w,nodeId:0,firstInd:0,children:new i.Right(u.Nil.value)}),$=new o.IsForeign(function(e){return n.bind(i.bindEither)(n["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.intIsForeign),m.indexString,"entryId",e)))(function(r){return n.bind(i.bindEither)(o.readProp$_$_$(o.stringIsForeign,m.indexString,"label",e))(function(u){return n.bind(i.bindEither)(n["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.stringIsForeign),m.indexString,"targetUri",e)))(function(c){return n.bind(i.bindEither)(n["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.stringIsForeign),m.indexString,"comment",e)))(function(l){return n.bind(i.bindEither)(n["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.stringIsForeign),m.indexString,"iconName",e)))(function(s){return n.bind(i.bindEither)(n["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.stringIsForeign),m.indexString,"stlName",e)))(function(f){return n.bind(i.bindEither)(n["<$>"](i.functorEither)(a.runNullOrUndefined)(o.readProp$_$_$(o.nullOrUndefinedIsForeign(o.arrayIsForeign(o.numberIsForeign)),m.indexString,"color",e)))(function(a){return n.bind(i.bindEither)(o.readProp$_$_$(o.booleanIsForeign,m.indexString,"isLeaf",e))(function(e){return n["return"](i.applicativeEither)({entryId:function(){if(r instanceof t.Nothing)return 0;if(r instanceof t.Just)return r.value0;throw new Error("Failed pattern match at OntoPanel.DynamicModel line 75, column 31 - line 78, column 13: "+[r.constructor.name])}(),label:u,targetUri:c,comment:l,condIcon:s,condSTL:f,condColor:n["<$>"](t.functorMaybe)(d.color3fromArray)(a),isLeaf:e,isHidden:!1})})})})})})})})})}),C=new v.ConeEntry(function(){return $},function(){return g},function(){return p},function(e){return[]},function(e){return e.condColor},function(e){return e.comment},function(e){return e.entryId},function(e){return e.isHidden},function(e){return e.condIcon},function(e){return e.isLeaf},function(e){return e.label},function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.isHidden=!0,n.isLeaf=!0,n},function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.isHidden=!0,n.isLeaf=!1,n},function(e){return[]},function(e){return t.Nothing.value},function(e){return e.condSTL},function(e){return e.targetUri}),S=function(e){return function(a){return function(u){return function(d){var v=t.maybe$_$_$("",function(e){return function(e){return"seed="+e}(n.show(n.showInt)(e))},a),m=t.maybe$_$_$("",function(e){return function(e){return"ratio="+e}(n.show(n.showInt)(e))},u),p=function(){if(""===v&&""===m)return"";if(""!==v&&""!==m)return"?"+(v+("&"+m));if(""===v)return"?"+m;if(n.otherwise)return"?"+v;throw new Error("Failed pattern match at OntoPanel.DynamicModel line 116, column 1 - line 140, column 28: "+[])}(),g=function(e){return function(a){var u=function(){if(""===a)return new i.Left(new r.JSONError("no server response"));if(n.otherwise)return o.readJSON$_$_$(f.isForeignConeZipF(C),a);throw new Error("Failed pattern match at OntoPanel.DynamicModel line 129, column 13 - line 132, column 13: "+[])}(),l=i.either$_$_$(function(e){return c.trace("Parse Error: "+n.show(r.showForeignError)(e))(function(e){return new f.ConeZipF(h.makeZipper$_$_$(C,_),t.Nothing.value)})},n.id(n.categoryFn),u);return function(){var n=f.runConeZipF$_$_$(C,l)(),r=s.setLoadFuncZipper$_$_$(C,e,n),o=h.coneDown$_$_$(C,r)();if(o instanceof t.Nothing)return d(r)();if(o instanceof t.Just)return d(o.value0)();throw new Error("Failed pattern match at OntoPanel.DynamicModel line 138, column 9 - line 140, column 28: "+[o.constructor.name])}}};return l.ajaxModel$_$_$(g(e),p)}}}};e.dynamicModel=S,e.emptyDynamicModel=_,e.emptyDynamicEntry=w,e.dynamicEntryIsForeign=$,e.dynamicConeEntry=C,e.eqDynamicEntry=g,e.showDynamicEntry=p}(PS["OntoPanel.DynamicModel"]=PS["OntoPanel.DynamicModel"]||{}),function(e){"use strict";e.imageDirect$_$_$=function(e,n,t){return function(){var r=new Image;n&&(r.crossOrigin="anonymous"),r.onload=t(r),r.src=e,r.complete===!0&&(r.onload=null,t(r))}}}(PS["OntoPanel.IconLoading"]=PS["OntoPanel.IconLoading"]||{}),function(e){"use strict";var n=PS["OntoPanel.IconLoading"],t=PS.Prelude,r=(PS["Data.Maybe"],PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.Eff"],PS["Data.String"]),o=(PS.DOM,PS["OntoPanel.ServerConnection"],PS["Graphics.Canvas"],function(e){return function(o){if(r.contains$_$_$("http://",e)||r.contains$_$_$("https://",e))return n.imageDirect$_$_$(e,!0,o);if(t.otherwise)return n.imageDirect$_$_$("/icons?name="+e,!1,o);throw new Error("Failed pattern match at OntoPanel.IconLoading line 30, column 1 - line 43, column 1: "+[e.constructor.name,o.constructor.name])}});e.imageAjax=o}(PS["OntoPanel.IconLoading"]=PS["OntoPanel.IconLoading"]||{}),function(e){"use strict";e.primHideCanvas=function(){globCanvasHide()},e.primExposeCanvas=function(){globCanvasExpose()},e.primSetURL=function(e){return function(){globSetURL(e)}}}(PS["OntoPanel.Presentation"]=PS["OntoPanel.Presentation"]||{}),function(e){"use strict";var n=PS["OntoPanel.Presentation"],t=PS.Prelude,r=PS["Control.Monad.Eff"],o=(PS.DOM,PS["Data.Maybe"]),a=(PS.ConeCanvas,PS["OntoPanel.ServerConnection"]),i=PS["OntoPanel.OntoPanelTypes"],u=PS["OntoPanel.FrontendCache"],c=PS["OntoPanel.Foreign"],l=PS["Debug.Trace"],s=PS["ConeCanvas.ConeModel"],f=function(e){return function(n){return function(t){return t instanceof s.AnimTransformLeft&&t.value0 instanceof o.Just?new s.AnimTransformLeft(new o.Just(u.setLoadFuncZipper$_$_$(e,n,t.value0.value0))):t instanceof s.AnimTransformRight&&t.value0 instanceof o.Just?new s.AnimTransformRight(new o.Just(u.setLoadFuncZipper$_$_$(e,n,t.value0.value0))):t instanceof s.AnimTransformIntro&&t.value2 instanceof o.Nothing?new s.AnimTransformIntro(t.value0,u.setLoadFuncZipper$_$_$(e,n,t.value1),o.Nothing.value):t instanceof s.AnimTransformIntro&&t.value2 instanceof o.Just?new s.AnimTransformIntro(t.value0,u.setLoadFuncZipper$_$_$(e,n,t.value1),new o.Just(u.setLoadFuncZipper$_$_$(e,n,t.value2.value0))):t instanceof s.AnimTransformExtro&&t.value1 instanceof o.Just?new s.AnimTransformExtro(t.value0,new o.Just(u.setLoadFuncSel$_$_$(e,n,t.value1.value0))):t instanceof s.AnimTransformDown&&t.value0 instanceof o.Just?new s.AnimTransformDown(new o.Just(u.setLoadFuncZipper$_$_$(e,n,t.value0.value0))):t instanceof s.AnimTransformUp&&t.value0 instanceof o.Just?new s.AnimTransformUp(new o.Just(u.setLoadFuncZipper$_$_$(e,n,t.value0.value0))):t instanceof s.AnimTransformShiftToZero&&t.value0 instanceof o.Just?new s.AnimTransformShiftToZero(new o.Just(u.setLoadFuncZipper$_$_$(e,n,t.value0.value0))):t}}},d=function(e){return'"'+(e+'"')},v=function(e,r,a){return function(){return r.animate(a.value0.animations)(),a.value0.url instanceof o.Just&&""!==a.value0.url.value0?n.primSetURL(a.value0.url.value0)():t.unit}},m=function(e,o,u,s){return s instanceof i.CPEExposeCanvas?function(){return a.presentationPost$_$_$(e,d(t.show(i.showConePresentation)(s)),function(e){return t["return"](r.applicativeEff)(t.unit)})(),n.primExposeCanvas()}:s instanceof i.CPEHideCanvas?function(){return a.presentationPost$_$_$(e,d(t.show(i.showConePresentation)(s)),function(e){return t["return"](r.applicativeEff)(t.unit)})(),n.primHideCanvas()}:a.presentationPost$_$_$(e,d(t.show(i.showConePresentation)(s)),function(n){return function(){var r=c.runConePresentationFrameF$_$_$(e,n)();return l.trace("recieved frame")(function(n){var a=t.map(t.functorArray)(f(e)(u))(r.value0.animations);return v(e,o,new i.ConePresentationFrame({animations:a,url:r.value0.url}))})()}})},h=function(e){return function(n){return function(o){return function(a){return function(u){return function(c){return function(l){return function(s){var f=s&&!l&&!c&&a;if(f)return 78===u?function(){return m(e,n,o,i.CPENext.value)(),!0}:80===u?function(){return m(e,n,o,i.CPEPrevious.value)(),!0}:83===u?function(){return m(e,n,o,i.CPEStart.value)(),!0}:69===u?function(){return m(e,n,o,i.CPEEnd.value)(),!0}:88===u?function(){return m(e,n,o,i.CPEExposeCanvas.value)(),!0}:72===u?function(){return m(e,n,o,i.CPEHideCanvas.value)(),!0}:t["return"](r.applicativeEff)(!1);if(!f)return t["return"](r.applicativeEff)(!1);throw new Error("Failed pattern match at OntoPanel.Presentation line 75, column 5 - line 99, column 1: "+[f.constructor.name])}}}}}}}};e.installPresentationCallback=h}(PS["OntoPanel.Presentation"]=PS["OntoPanel.Presentation"]||{}),function(e){"use strict";e.stlFromBase64=function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),o=0;t>o;o++)r[o]=n.charCodeAt(o);return r.buffer},e.getSTLSize=function(e){var n=e.slice(80,84),t=new Uint32Array(n);return t[0]}}(PS["OntoPanel.STLLoading"]=PS["OntoPanel.STLLoading"]||{}),function(e){"use strict";var n=PS["OntoPanel.STLLoading"],t=PS.Prelude,r=PS["Data.Maybe"],o=PS["Control.Monad.Eff"],a=(PS.DOM,PS["Data.ArrayBuffer.Types"],PS["Debug.Trace"]),i=(PS["Control.Monad.Eff.WebGL"],PS["OntoPanel.ServerConnection"]),u=function(e){return function(u){var c=function(e){if(e instanceof i.CSRSTLBinary){var r=n.stlFromBase64(e.value1),c=n.getSTLSize(r);return u(c)(r)}return a.trace("stlEff: wrong answer: ")(function(e){return t["return"](o.applicativeEff)(t.unit)})};return i.ajaxGet$_$_$(i.coneSrvResponseIsForeign,new r.Just(c),e)}},c=function(e){return u("/stl?name="+e)};e.stlAjax=c}(PS["OntoPanel.STLLoading"]=PS["OntoPanel.STLLoading"]||{}),function(e){"use strict";var n=PS.Prelude,t=PS["Control.Monad.ST"],r=PS["Data.String"],o=PS["Data.Maybe"],a=PS["Data.List"],i=(PS.ConeCanvas,PS["ConeCanvas.ConeFilter"]),u=(PS["OntoPanel.OntoPanelTypes"],PS["ConeCanvas.ConeModel"]),c=PS["Control.Monad.Eff"],l=PS["ConeCanvas.ConeZipper"],s=function(e,s,f,d){var v=function(t){return function(r){var i=a.uncons(r);if(i instanceof o.Nothing)return n["return"](c.applicativeEff)(n.unit);if(i instanceof o.Just&&i.value0.tail instanceof a.Nil)return function(){return t.setModel(new u.OSCurrent(l.makeZipper$_$_$(e,i.value0.head)))(),n.unit};if(i instanceof o.Just)return function(){return t.setModel(new u.OSCurrent(l.makeZipper$_$_$(e,i.value0.head)))(),n.unit};throw new Error("Failed pattern match at OntoPanel.Search line 58, column 9 - line 67, column 24: "+[i.constructor.name])}};return function(){var a=t.readSTRef(f)(),c=s.getModel(),l=r.trim(d);if(a instanceof o.Nothing){var m=""===l;if(m)return n.unit;if(!m){if(c instanceof u.OSCurrent){t.writeSTRef$_$_$(f,new o.Just({lastSearch:l,originalModel:c.value0}))();var h=i.filterContainsString(e)(l)(c.value0.content)();return v(s)(h)()}if(c instanceof u.OSParent)return n.unit;throw new Error("Failed pattern match at OntoPanel.Search line 39, column 21 - line 45, column 9: "+[c.constructor.name])}throw new Error("Failed pattern match at OntoPanel.Search line 36, column 13 - line 45, column 9: "+[m.constructor.name])}if(a instanceof o.Just){var p=l===a.value0.lastSearch;if(p)return n.unit;if(!p){var g=""===l;if(g)return t.writeSTRef$_$_$(f,o.Nothing.value)(),s.setModel(new u.OSCurrent(a.value0.originalModel))();if(!g){t.writeSTRef$_$_$(f,new o.Just({lastSearch:l,originalModel:a.value0.originalModel}))();var h=i.filterContainsString(e)(l)(u.runConeZip$_$_$(e,a.value0.originalModel).content)();return v(s)(h)()}throw new Error("Failed pattern match at OntoPanel.Search line 48, column 22 - line 56, column 3: "+[g.constructor.name])}throw new Error("Failed pattern match at OntoPanel.Search line 46, column 13 - line 56, column 3: "+[p.constructor.name])}throw new Error("Failed pattern match at OntoPanel.Search line 34, column 5 - line 56, column 3: "+[a.constructor.name])}};e.keyHandlerContains$_$_$=s}(PS["OntoPanel.Search"]=PS["OntoPanel.Search"]||{}),function(e){"use strict";var n=PS.Main,t=(PS.ConeCanvas,PS["Data.List"]),r=PS["Data.Either"],o=PS["ConeCanvas.Frontend.FrontendWebGL"],a=PS["ConeCanvas.Preferences"],i=PS["Control.Monad.Eff"],u=(PS["Control.Monad.Eff.Exception"],PS["Control.Monad.Eff.Random"],PS["Control.Monad.Eff.WebGL"],PS["Control.Monad.ST"]),c=(PS.DOM,PS["Data.Date"],PS["Data.Maybe"]),l=PS["Data.String"],s=PS["Debug.Trace"],f=PS.Extensions,d=(PS["Graphics.Canvas"],PS["OntoPanel.DynamicModel"]),v=PS["OntoPanel.FrontendCache"],m=PS["OntoPanel.IconLoading"],h=(PS["OntoPanel.OntoPanelTypes"],PS["OntoPanel.Presentation"]),p=PS["OntoPanel.STLLoading"],g=PS["OntoPanel.Search"],w=PS["OntoPanel.ServerConnection"],_=PS.Prelude,$=PS["ConeCanvas.ConeModel"],C=PS["ConeCanvas.ConeZipper"],S=PS["Data.Foreign"],y=PS["ConeCanvas.ConeControl"],P=function(e){return function(e){return s.trace("updateSearch request: "+e)(function(e){return _["return"](i.applicativeEff)(_.unit)})}},T=function(e){var t=C.selGetEntry(e);if(t.targetUri instanceof c.Just)return n.navigateToUrlInt(t.targetUri.value0);if(t.targetUri instanceof c.Nothing)return _["return"](i.applicativeEff)(_.unit);throw new Error("Failed pattern match at Main line 157, column 32 - line 161, column 1: "+[t.targetUri.constructor.name])},b=function(e){return function(n){return function(r){var o=function(e){return function(){return s.trace("navigateToCone response: "+_.show(t.showList(_.showInt))(e))(function(e){return _["return"](i.applicativeEff)(_.unit)})(),n.animate([new $.AnimClockwork(t.toList(t.foldableList)(e))])()}};return function(){var t=n.getModel(),a=$.targetUri(e)(C.selGetEntry(t));return a instanceof c.Just&&l.contains$_$_$(a.value0,r)?_.unit:s.trace("navigateToCone request: "+r)(function(e){return w.loadPath$_$_$(r,o)})()}}}},E=function(e){return function(){var t=(u.newSTRef(c.Nothing.value)(),n.getServerHash()),l=function(){return"#bench"===t?!0:!1}(),g=v.newCache();return w.loadIconNames(function(t){return w.loadSTLNames(function(u){return w.loadPrefs(function(v){var E=function(){var e=a.parsePrefs$_$_$(v,a.standardPrefs);if(e instanceof r.Left)return s.trace("PrefsError "+_.show(S.showForeignError)(e.value0))(function(e){return a.standardPrefs});if(e instanceof r.Right)return e.value0;throw new Error("Failed pattern match at Main line 89, column 29 - line 92, column 17: "+[e.constructor.name])}();return function(){if(l)return d.dynamicModel(g)(new c.Just(171))(c.Nothing.value);if(!l)return d.dynamicModel(g)(c.Nothing.value)(c.Nothing.value);throw new Error("Failed pattern match at Main line 92, column 18 - line 94, column 68: "+[l.constructor.name])}()(function(r){var a=C.countLoadedNodes$_$_$(d.dynamicConeEntry,r);return function(){return s.traceA(i.applicativeEff)("got model with loaded node size: "+_.show(_.showInt)(a))(),o.initGUI$_$_$(E,"glcanvas",f.alert,f.alert,function(a){return function(){var s=y.initConeCanvas$_$_$(d.dynamicConeEntry,C.selFromPos(r),$.Browser.value,new c.Just(E),t,u,a,o.myFrontend(d.dynamicConeEntry))();return s.loadIconCallback(m.imageAjax)(),s.loadSTLCallback(p.stlAjax)(),s.keyCallback(h.installPresentationCallback(d.dynamicConeEntry)(s)(g))(),
function(){var e=!l;if(e)return s.selectedChanged(function(e){return function(){return T(e)(),n.handleSelectedPrim$_$_$(d.dynamicConeEntry,C.selGetEntry(e))(),w.sendSelected(C.selGetPath(e))()}});if(!e)return _["return"](i.applicativeEff)(_.unit);throw new Error("Failed pattern match at Main line 107, column 35 - line 114, column 35: "+[e.constructor.name])}()(),s.alertCallback(f.alert)(),s.startup(s)(),s.animate([new $.AnimZoom(c.Nothing.value)])(),e({navigateToCone:b(d.dynamicConeEntry)(s),updateSearch:P(s)})()}})()}})})})})()}},x=function(e){return function(t){return function(r){return function(){var o=n.getSearchString("search")();return g.keyHandlerContains$_$_$(e,t,r,o)()}}}};e.updateSearchFull=P,e.navigateToConeFull=b,e.navigateToUrl=T,e.cycleHandler=x,e.main=E,e.getSearchString=n.getSearchString,e.getServerHash=n.getServerHash,e.handleSelectedPrim=n.handleSelectedPrim,e.navigateToUrlInt=n.navigateToUrlInt}(PS.Main=PS.Main||{});var gl,globDivCanvas,coneAPI,tutorial_counter=5;$(document).ready(function(){"use strict";$("#democontent").blur(),$("#glcanvas").focus();var e=function(e){return function(){$(".spinner").hide(),coneAPI=e}};PS.Main.main(e)()});var globCanvasHide=function(){"use strict";globDivCanvas.is(":hidden")||globDivCanvas.slideUp()},globCanvasExpose=function(){"use strict";globDivCanvas.is(":hidden")&&globDivCanvas.show("slow")};$(".subreddit_list li").click(function(){"use strict";"http://reddit.com/r/"+$(this).children("strong")[0].innerHTML});var globSelectedPrim=function(e){"use strict";var n,t,r,o,a;e.comment.hasOwnProperty("value0")&&(n=e.comment.value0,t=n[0],"n"===t?show_subreddit(e.label):(r=new XMLHttpRequest,r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(o=r.responseText,"p"===t?show_post(e.targetUri.value0,e.label,o):"c"===t?show_comment(e.label,o):alert("Data error. Please reload page"))},a="/content?id=".concat(n.slice(1)),console.log("content request: GET "+a),r.open("GET",a,!0),r.timeout=2e3,r.ontimeout=function(){console.log("timeout getting content")},r.send()))},globSetURL=function(e){"use strict";console.log("globSetURL: "+e)};if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var n=e.fn.jquery.split(" ")[0].split(".");if(n[0]<2&&n[1]<9||1==n[0]&&9==n[1]&&n[2]<1||n[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(e){"use strict";function n(){var e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(void 0!==e.style[t])return{end:n[t]};return!1}e.fn.emulateTransitionEnd=function(n){var t=!1,r=this;e(this).one("bsTransitionEnd",function(){t=!0});var o=function(){t||e(r).trigger(e.support.transition.end)};return setTimeout(o,n),this},e(function(){e.support.transition=n(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(n){return e(n.target).is(this)?n.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var t=e(this),o=t.data("bs.alert");o||t.data("bs.alert",o=new r(this)),"string"==typeof n&&o[n].call(t)})}var t='[data-dismiss="alert"]',r=function(n){e(n).on("click",t,this.close)};r.VERSION="3.3.6",r.TRANSITION_DURATION=150,r.prototype.close=function(n){function t(){i.detach().trigger("closed.bs.alert").remove()}var o=e(this),a=o.attr("data-target");a||(a=o.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var i=e(a);n&&n.preventDefault(),i.length||(i=o.closest(".alert")),i.trigger(n=e.Event("close.bs.alert")),n.isDefaultPrevented()||(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",t).emulateTransitionEnd(r.TRANSITION_DURATION):t())};var o=e.fn.alert;e.fn.alert=n,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=o,this},e(document).on("click.bs.alert.data-api",t,r.prototype.close)}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),o=r.data("bs.button"),a="object"==typeof n&&n;o||r.data("bs.button",o=new t(this,a)),"toggle"==n?o.toggle():n&&o.setState(n)})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};t.VERSION="3.3.6",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(n){var t="disabled",r=this.$element,o=r.is("input")?"val":"html",a=r.data();n+="Text",null==a.resetText&&r.data("resetText",r[o]()),setTimeout(e.proxy(function(){r[o](null==a[n]?this.options[n]:a[n]),"loadingText"==n?(this.isLoading=!0,r.addClass(t).attr(t,t)):this.isLoading&&(this.isLoading=!1,r.removeClass(t).removeAttr(t))},this),0)},t.prototype.toggle=function(){var e=!0,n=this.$element.closest('[data-toggle="buttons"]');if(n.length){var t=this.$element.find("input");"radio"==t.prop("type")?(t.prop("checked")&&(e=!1),n.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==t.prop("type")&&(t.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),t.prop("checked",this.$element.hasClass("active")),e&&t.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),n.call(r,"toggle"),e(t.target).is('input[type="radio"]')||e(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(n){e(n.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(n.type))})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),o=r.data("bs.carousel"),a=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n),i="string"==typeof n?n:a.slide;o||r.data("bs.carousel",o=new t(this,a)),"number"==typeof n?o.to(n):i?o[i]():a.interval&&o.pause().cycle()})}var t=function(n,t){this.$element=e(n),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.6",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},t.prototype.cycle=function(n){return n||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,n){var t=this.getItemIndex(n),r="prev"==e&&0===t||"next"==e&&t==this.$items.length-1;if(r&&!this.options.wrap)return n;var o="prev"==e?-1:1,a=(t+o)%this.$items.length;return this.$items.eq(a)},t.prototype.to=function(e){var n=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(e)}):t==e?this.pause().cycle():this.slide(e>t?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(n){return n||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(n,r){var o=this.$element.find(".item.active"),a=r||this.getItemForDirection(n,o),i=this.interval,u="next"==n?"left":"right",c=this;if(a.hasClass("active"))return this.sliding=!1;var l=a[0],s=e.Event("slide.bs.carousel",{relatedTarget:l,direction:u});if(this.$element.trigger(s),!s.isDefaultPrevented()){if(this.sliding=!0,i&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=e(this.$indicators.children()[this.getItemIndex(a)]);f&&f.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:l,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(n),a[0].offsetWidth,o.addClass(u),a.addClass(u),o.one("bsTransitionEnd",function(){a.removeClass([n,u].join(" ")).addClass("active"),o.removeClass(["active",u].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(d)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(o.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(d)),i&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var o=function(t){var r,o=e(this),a=e(o.attr("data-target")||(r=o.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var i=e.extend({},a.data(),o.data()),u=o.attr("data-slide-to");u&&(i.interval=!1),n.call(a,i),u&&a.data("bs.carousel").to(u),t.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function n(n){var t,r=n.attr("data-target")||(t=n.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function t(n){return this.each(function(){var t=e(this),o=t.data("bs.collapse"),a=e.extend({},r.DEFAULTS,t.data(),"object"==typeof n&&n);!o&&a.toggle&&/show|hide/.test(n)&&(a.toggle=!1),o||t.data("bs.collapse",o=new r(this,a)),"string"==typeof n&&o[n]()})}var r=function(n,t){this.$element=e(n),this.options=e.extend({},r.DEFAULTS,t),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.6",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(n=o.data("bs.collapse"),n&&n.transitioning))){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(t.call(o,"hide"),n||o.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var c=e.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[i](this.$element[0][c])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=e.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[t](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(r.TRANSITION_DURATION):o.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,r){var o=e(r);this.addAriaAndCollapsedClass(n(o),o)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,n){var t=e.hasClass("in");e.attr("aria-expanded",t),n.toggleClass("collapsed",!t).attr("aria-expanded",t)};var o=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var o=e(this);o.attr("data-target")||r.preventDefault();var a=n(o),i=a.data("bs.collapse"),u=i?"toggle":o.data();t.call(a,u)})}(jQuery),+function(e){"use strict";function n(n){var t=n.attr("data-target");t||(t=n.attr("href"),t=t&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));var r=t&&e(t);return r&&r.length?r:n.parent()}function t(t){t&&3===t.which||(e(o).remove(),e(a).each(function(){var r=e(this),o=n(r),a={relatedTarget:this};o.hasClass("open")&&(t&&"click"==t.type&&/input|textarea/i.test(t.target.tagName)&&e.contains(o[0],t.target)||(o.trigger(t=e.Event("hide.bs.dropdown",a)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),o.removeClass("open").trigger(e.Event("hidden.bs.dropdown",a)))))}))}function r(n){return this.each(function(){var t=e(this),r=t.data("bs.dropdown");r||t.data("bs.dropdown",r=new i(this)),"string"==typeof n&&r[n].call(t)})}var o=".dropdown-backdrop",a='[data-toggle="dropdown"]',i=function(n){e(n).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.6",i.prototype.toggle=function(r){var o=e(this);if(!o.is(".disabled, :disabled")){var a=n(o),i=a.hasClass("open");if(t(),!i){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(a.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(e.Event("shown.bs.dropdown",u))}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var o=n(r),i=o.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&o.find(a).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",c=o.find(".dropdown-menu"+u);if(c.length){var l=c.index(t.target);38==t.which&&l>0&&l--,40==t.which&&l<c.length-1&&l++,~l||(l=0),c.eq(l).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,i.prototype.toggle).on("keydown.bs.dropdown.data-api",a,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery),+function(e){"use strict";function n(n,r){return this.each(function(){var o=e(this),a=o.data("bs.modal"),i=e.extend({},t.DEFAULTS,o.data(),"object"==typeof n&&n);a||o.data("bs.modal",a=new t(this,i)),"string"==typeof n?a[n](r):i.show&&a.show(r)})}var t=function(n,t){this.options=t,this.$body=e(document.body),this.$element=e(n),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.VERSION="3.3.6",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,o=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(n){e(n.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),o&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:n});o?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(a)}))},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;a?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var i=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var n=document.documentElement.getBoundingClientRect();e=n.right-Math.abs(n.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var n=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),n};var r=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),o=r.attr("href"),a=e(r.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),i=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},a.data(),r.data());r.is("a")&&t.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(a,i,this)})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),o=r.data("bs.tooltip"),a="object"==typeof n&&n;(o||!/destroy|hide/.test(n))&&(o||r.data("bs.tooltip",o=new t(this,a)),"string"==typeof n&&o[n]())})}var t=function(e,n){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,n)};t.VERSION="3.3.6",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(n,t,r){if(this.enabled=!0,this.type=n,this.$element=e(t),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),a=o.length;a--;){var i=o[a];if("click"==i)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=i){var u="hover"==i?"mouseenter":"focusin",c="hover"==i?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(n){return n=e.extend({},this.getDefaults(),this.$element.data(),n),n.delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),n},t.prototype.getDelegateOptions=function(){var n={},t=this.getDefaults();return this._options&&e.each(this._options,function(e,r){t[e]!=r&&(n[e]=r)}),n},t.prototype.enter=function(n){var t=n instanceof this.constructor?n:e(n.currentTarget).data("bs."+this.type);return t||(t=new this.constructor(n.currentTarget,this.getDelegateOptions()),e(n.currentTarget).data("bs."+this.type,t)),n instanceof e.Event&&(t.inState["focusin"==n.type?"focus":"hover"]=!0),t.tip().hasClass("in")||"in"==t.hoverState?void(t.hoverState="in"):(clearTimeout(t.timeout),t.hoverState="in",t.options.delay&&t.options.delay.show?void(t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)):t.show())},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(n){var t=n instanceof this.constructor?n:e(n.currentTarget).data("bs."+this.type);return t||(t=new this.constructor(n.currentTarget,this.getDelegateOptions()),e(n.currentTarget).data("bs."+this.type,t)),n instanceof e.Event&&(t.inState["focusout"==n.type?"focus":"hover"]=!1),t.isInStateTrue()?void 0:(clearTimeout(t.timeout),t.hoverState="out",t.options.delay&&t.options.delay.hide?void(t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)):t.hide())},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var o=this,a=this.tip(),i=this.getUID(this.type);this.setContent(),a.attr("id",i),this.$element.attr("aria-describedby",i),this.options.animation&&a.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,l=c.test(u);l&&(u=u.replace(c,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var s=this.getPosition(),f=a[0].offsetWidth,d=a[0].offsetHeight;if(l){var v=u,m=this.getPosition(this.$viewport);u="bottom"==u&&s.bottom+d>m.bottom?"top":"top"==u&&s.top-d<m.top?"bottom":"right"==u&&s.right+f>m.width?"left":"left"==u&&s.left-f<m.left?"right":u,a.removeClass(v).addClass(u)}var h=this.getCalculatedOffset(u,s,f,d);this.applyPlacement(h,u);var p=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",p).emulateTransitionEnd(t.TRANSITION_DURATION):p()}},t.prototype.applyPlacement=function(n,t){var r=this.tip(),o=r[0].offsetWidth,a=r[0].offsetHeight,i=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(i)&&(i=0),isNaN(u)&&(u=0),n.top+=i,n.left+=u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},n),0),r.addClass("in");var c=r[0].offsetWidth,l=r[0].offsetHeight;"top"==t&&l!=a&&(n.top=n.top+a-l);var s=this.getViewportAdjustedDelta(t,n,c,l);s.left?n.left+=s.left:n.top+=s.top;var f=/top|bottom/.test(t),d=f?2*s.left-o+c:2*s.top-a+l,v=f?"offsetWidth":"offsetHeight";r.offset(n),this.replaceArrow(d,r[0][v],f)},t.prototype.replaceArrow=function(e,n,t){this.arrow().css(t?"left":"top",50*(1-e/n)+"%").css(t?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),n=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](n),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){function r(){"in"!=o.hoverState&&a.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),n&&n()}var o=this,a=e(this.$tip),i=e.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",r).emulateTransitionEnd(t.TRANSITION_DURATION):r(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(n){n=n||this.$element;var t=n[0],r="BODY"==t.tagName,o=t.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var a=r?{top:0,left:0}:n.offset(),i={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:n.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,i,u,a)},t.prototype.getCalculatedOffset=function(e,n,t,r){return"bottom"==e?{top:n.top+n.height,left:n.left+n.width/2-t/2}:"top"==e?{top:n.top-r,left:n.left+n.width/2-t/2}:"left"==e?{top:n.top+n.height/2-r/2,left:n.left-t}:{top:n.top+n.height/2-r/2,left:n.left+n.width}},t.prototype.getViewportAdjustedDelta=function(e,n,t,r){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,i=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=n.top-a-i.scroll,c=n.top+a-i.scroll+r;u<i.top?o.top=i.top-u:c>i.top+i.height&&(o.top=i.top+i.height-c)}else{var l=n.left-a,s=n.left+a+t;l<i.left?o.left=i.left-l:s>i.right&&(o.left=i.left+i.width-s)}return o},t.prototype.getTitle=function(){var e,n=this.$element,t=this.options;return e=n.attr("data-original-title")||("function"==typeof t.title?t.title.call(n[0]):t.title)},t.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(n){var t=this;n&&(t=e(n.currentTarget).data("bs."+this.type),t||(t=new this.constructor(n.currentTarget,this.getDelegateOptions()),e(n.currentTarget).data("bs."+this.type,t))),n?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(t):t.leave(t)):t.tip().hasClass("in")?t.leave(t):t.enter(t)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var r=e.fn.tooltip;e.fn.tooltip=n,e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),o=r.data("bs.popover"),a="object"==typeof n&&n;(o||!/destroy|hide/.test(n))&&(o||r.data("bs.popover",o=new t(this,a)),"string"==typeof n&&o[n]())})}var t=function(e,n){this.init("popover",e,n)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.6",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),n=this.getTitle(),t=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](n),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof t?"html":"append":"text"](t),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,n=this.options;return e.attr("data-content")||("function"==typeof n.content?n.content.call(e[0]):n.content)},t.prototype.arrow=function(){
return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=n,e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function n(t,r){this.$body=e(document.body),this.$scrollElement=e(e(t).is(document.body)?window:t),this.options=e.extend({},n.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function t(t){return this.each(function(){var r=e(this),o=r.data("bs.scrollspy"),a="object"==typeof t&&t;o||r.data("bs.scrollspy",o=new n(this,a)),"string"==typeof t&&o[t]()})}n.VERSION="3.3.6",n.DEFAULTS={offset:10},n.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},n.prototype.refresh=function(){var n=this,t="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(t="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var n=e(this),o=n.data("target")||n.attr("href"),a=/^#./.test(o)&&e(o);return a&&a.length&&a.is(":visible")&&[[a[t]().top+r,o]]||null}).sort(function(e,n){return e[0]-n[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},n.prototype.process=function(){var e,n=this.$scrollElement.scrollTop()+this.options.offset,t=this.getScrollHeight(),r=this.options.offset+t-this.$scrollElement.height(),o=this.offsets,a=this.targets,i=this.activeTarget;if(this.scrollHeight!=t&&this.refresh(),n>=r)return i!=(e=a[a.length-1])&&this.activate(e);if(i&&n<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)i!=a[e]&&n>=o[e]&&(void 0===o[e+1]||n<o[e+1])&&this.activate(a[e])},n.prototype.activate=function(n){this.activeTarget=n,this.clear();var t=this.selector+'[data-target="'+n+'"],'+this.selector+'[href="'+n+'"]',r=e(t).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},n.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=t,e.fn.scrollspy.Constructor=n,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),o=r.data("bs.tab");o||r.data("bs.tab",o=new t(this)),"string"==typeof n&&o[n]()})}var t=function(n){this.element=e(n)};t.VERSION="3.3.6",t.TRANSITION_DURATION=150,t.prototype.show=function(){var n=this.element,t=n.closest("ul:not(.dropdown-menu)"),r=n.data("target");if(r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!n.parent("li").hasClass("active")){var o=t.find(".active:last a"),a=e.Event("hide.bs.tab",{relatedTarget:n[0]}),i=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(a),n.trigger(i),!i.isDefaultPrevented()&&!a.isDefaultPrevented()){var u=e(r);this.activate(n.closest("li"),t),this.activate(u,u.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:n[0]}),n.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},t.prototype.activate=function(n,r,o){function a(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),u?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var i=r.find("> .active"),u=o&&e.support.transition&&(i.length&&i.hasClass("fade")||!!r.find("> .fade").length);i.length&&u?i.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a(),i.removeClass("in")};var r=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var o=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),o=r.data("bs.affix"),a="object"==typeof n&&n;o||r.data("bs.affix",o=new t(this,a)),"string"==typeof n&&o[n]()})}var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};t.VERSION="3.3.6",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,n,t,r){var o=this.$target.scrollTop(),a=this.$element.offset(),i=this.$target.height();if(null!=t&&"top"==this.affixed)return t>o?"top":!1;if("bottom"==this.affixed)return null!=t?o+this.unpin<=a.top?!1:"bottom":e-r>=o+i?!1:"bottom";var u=null==this.affixed,c=u?o:a.top,l=u?i:n;return null!=t&&t>=o?"top":null!=r&&c+l>=e-r?"bottom":!1},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),r=this.options.offset,o=r.top,a=r.bottom,i=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(a=o=r),"function"==typeof o&&(o=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var u=this.getState(i,n,o,a);if(this.affixed!=u){null!=this.unpin&&this.$element.css("top","");var c="affix"+(u?"-"+u:""),l=e.Event(c+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==u&&this.$element.offset({top:i-n-a})}};var r=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),r=t.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),n.call(t,r)})})}(jQuery),function(){var e,n,t,r,o,a,i;r=function(e,n){var t,r,o,a;o=[];for(r in n.prototype)try{a=n.prototype[r],null==e[r]&&"function"!=typeof a?o.push(e[r]=a):o.push(void 0)}catch(i){t=i}return o},e={},null==e.options&&(e.options={}),t={checks:{xhr:{url:function(){return"/favicon.ico?_="+Math.floor(1e9*Math.random())},timeout:5e3},image:{url:function(){return"/favicon.ico?_="+Math.floor(1e9*Math.random())}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0},o=function(e,n){var t,r,o,a,i,u;for(t=e,u=n.split("."),r=o=0,a=u.length;a>o&&(i=u[r],t=t[i],"object"==typeof t);r=++o);return r===u.length-1?t:void 0},e.getOption=function(n){var r,a;return a=null!=(r=o(e.options,n))?r:o(t,n),"function"==typeof a?a():a},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(e.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return e.confirmDown()},!1),e.state="up",e.markUp=function(){return e.trigger("confirmed-up"),"up"!==e.state?(e.state="up",e.trigger("up")):void 0},e.markDown=function(){return e.trigger("confirmed-down"),"down"!==e.state?(e.state="down",e.trigger("down")):void 0},a={},e.on=function(n,t,r){var o,i,u,c,l;if(i=n.split(" "),i.length>1){for(l=[],u=0,c=i.length;c>u;u++)o=i[u],l.push(e.on(o,t,r));return l}return null==a[n]&&(a[n]=[]),a[n].push([r,t])},e.off=function(e,n){var t,r,o,i,u;if(null!=a[e]){if(n){for(o=0,u=[];o<a[e].length;)i=a[e][o],r=i[0],t=i[1],t===n?u.push(a[e].splice(o,1)):u.push(o++);return u}return a[e]=[]}},e.trigger=function(e){var n,t,r,o,i,u,c;if(null!=a[e]){for(i=a[e],c=[],r=0,o=i.length;o>r;r++)u=i[r],n=u[0],t=u[1],c.push(t.call(n));return c}},n=function(e,n,t){var r,o,a,i,u;return u=function(){return e.status&&e.status<12e3?n():t()},null===e.onprogress?(r=e.onerror,e.onerror=function(){return t(),"function"==typeof r?r.apply(null,arguments):void 0},i=e.ontimeout,e.ontimeout=function(){return t(),"function"==typeof i?i.apply(null,arguments):void 0},o=e.onload,e.onload=function(){return u(),"function"==typeof o?o.apply(null,arguments):void 0}):(a=e.onreadystatechange,e.onreadystatechange=function(){return 4===e.readyState?u():0===e.readyState&&t(),"function"==typeof a?a.apply(null,arguments):void 0})},e.checks={},e.checks.xhr=function(){var t,r;r=new XMLHttpRequest,r.offline=!1,r.open("HEAD",e.getOption("checks.xhr.url"),!0),null!=r.timeout&&(r.timeout=e.getOption("checks.xhr.timeout")),n(r,e.markUp,e.markDown);try{r.send()}catch(o){t=o,e.markDown()}return r},e.checks.image=function(){var n;return n=document.createElement("img"),n.onerror=e.markDown,n.onload=e.markUp,void(n.src=e.getOption("checks.image.url"))},e.checks.down=e.markDown,e.checks.up=e.markUp,e.check=function(){return e.trigger("checking"),e.checks[e.getOption("checks.active")]()},e.confirmUp=e.confirmDown=e.check,e.onXHR=function(e){var n,t,o;return o=function(n,t){var r;return r=n.open,n.open=function(o,a,i,u,c){return e({type:o,url:a,async:i,flags:t,user:u,password:c,xhr:n}),r.apply(n,arguments)}},t=window.XMLHttpRequest,window.XMLHttpRequest=function(e){var n,r,a;return a=new t(e),o(a,e),r=a.setRequestHeader,a.headers={},a.setRequestHeader=function(e,n){return a.headers[e]=n,r.call(a,e,n)},n=a.overrideMimeType,a.overrideMimeType=function(e){return a.mimeType=e,n.call(a,e)},a},r(window.XMLHttpRequest,t),null!=window.XDomainRequest?(n=window.XDomainRequest,window.XDomainRequest=function(){var e;return e=new n,o(e),e},r(window.XDomainRequest,n)):void 0},i=function(){return e.getOption("interceptRequests")&&e.onXHR(function(t){var r;return r=t.xhr,r.offline!==!1?n(r,e.markUp,e.confirmDown):void 0}),e.getOption("checkOnLoad")?e.check():void 0},setTimeout(i,0),window.Offline=e}.call(this),function(){var e,n,t,r,o,a,i,u,c;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");r=Offline.reconnect={},a=null,o=function(){var e;return null!=r.state&&"inactive"!==r.state&&Offline.trigger("reconnect:stopped"),r.state="inactive",r.remaining=r.delay=null!=(e=Offline.getOption("reconnect.initialDelay"))?e:3},n=function(){var e,n;return e=null!=(n=Offline.getOption("reconnect.delay"))?n:Math.min(Math.ceil(1.5*r.delay),3600),r.remaining=r.delay=e},i=function(){return"connecting"!==r.state?(r.remaining-=1,Offline.trigger("reconnect:tick"),0===r.remaining?u():void 0):void 0},u=function(){return"waiting"===r.state?(Offline.trigger("reconnect:connecting"),r.state="connecting",Offline.check()):void 0},e=function(){return Offline.getOption("reconnect")?(o(),r.state="waiting",Offline.trigger("reconnect:started"),a=setInterval(i,1e3)):void 0},c=function(){return null!=a&&clearInterval(a),o()},t=function(){return Offline.getOption("reconnect")&&"connecting"===r.state?(Offline.trigger("reconnect:failure"),r.state="waiting",n()):void 0},r.tryNow=u,o(),Offline.on("down",e),Offline.on("confirmed-down",t),Offline.on("up",c)}.call(this),function(){var e,n,t,r,o,a;if(!window.Offline)throw new Error("Requests module brought in without offline.js");t=[],a=!1,r=function(e){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(a=!0),t.push(e)},o=function(e){var n,t,r,o,a,i,u,c,l;l=e.xhr,i=e.url,a=e.type,u=e.user,r=e.password,n=e.body,l.abort(),l.open(a,i,!0,u,r),o=l.headers;for(t in o)c=o[t],l.setRequestHeader(t,c);return l.mimeType&&l.overrideMimeType(l.mimeType),l.send(n)},e=function(){return t=[]},n=function(){var n,r,a,i,u,c;for(Offline.trigger("requests:flush"),u={},n=0,a=t.length;a>n;n++)i=t[n],c=i.url.replace(/(\?|&)_=[0-9]+/,function(e,n){return"?"===n?n:""}),u[i.type.toUpperCase()+" - "+c]=i;for(r in u)i=u[r],o(i);return e()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return a?(a=!1,e()):void 0}),Offline.on("up",n),Offline.on("down",function(){return a=!1}),Offline.onXHR(function(e){var n,t,o,a,i;return i=e.xhr,o=e.async,i.offline!==!1&&(a=function(){return r(e)},t=i.send,i.send=function(n){return e.body=n,t.apply(i,arguments)},o)?null===i.onprogress?(i.addEventListener("error",a,!1),i.addEventListener("timeout",a,!1)):(n=i.onreadystatechange,i.onreadystatechange=function(){return 0===i.readyState?a():4===i.readyState&&(0===i.status||i.status>=12e3)&&a(),"function"==typeof n?n.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:n,clear:e}):void 0},0)}.call(this),function(){var e,n,t,r,o;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(r=["up","down"],n=0,t=r.length;t>n;n++)o=r[n],(document.querySelector("script[data-simulate='"+o+"']")||localStorage.OFFLINE_SIMULATE===o)&&(null==Offline.options&&(Offline.options={}),null==(e=Offline.options).checks&&(e.checks={}),Offline.options.checks.active=o)}.call(this),function(){var e,n,t,r,o,a,i,u,c,l,s,f,d;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");n='<div class="offline-ui"><div class="offline-ui-content"></div></div>',e='<a href class="offline-ui-retry"></a>',a=function(e){var n;return n=document.createElement("div"),n.innerHTML=e,n.children[0]},i=o=null,r=function(e){return s(e),i.className+=" "+e},s=function(e){return i.className=i.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},c={},u=function(e,n){return r(e),null!=c[e]&&clearTimeout(c[e]),c[e]=setTimeout(function(){return s(e),delete c[e]},1e3*n)},d=function(e){var n,t,r,o;r={day:86400,hour:3600,minute:60,second:1};for(t in r)if(n=r[t],e>=n)return o=Math.floor(e/n),[o,t];return["now",""]},f=function(){var t,u;return i=a(n),document.body.appendChild(i),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(i.appendChild(a(e)),t=i.querySelector(".offline-ui-retry"),u=function(e){return e.preventDefault(),Offline.reconnect.tryNow()},null!=t.addEventListener?t.addEventListener("click",u,!1):t.attachEvent("click",u)),r("offline-ui-"+Offline.state),o=i.querySelector(".offline-ui-content")},l=function(){return f(),Offline.on("up",function(){return s("offline-ui-down"),r("offline-ui-up"),u("offline-ui-up-2s",2),u("offline-ui-up-5s",5)}),Offline.on("down",function(){return s("offline-ui-up"),r("offline-ui-down"),u("offline-ui-down-2s",2),u("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return r("offline-ui-connecting"),s("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var e,n,t;return r("offline-ui-waiting"),s("offline-ui-connecting"),e=d(Offline.reconnect.remaining),n=e[0],t=e[1],o.setAttribute("data-retry-in-value",n),o.setAttribute("data-retry-in-unit",t)}),Offline.on("reconnect:stopped",function(){return s("offline-ui-connecting offline-ui-waiting"),o.setAttribute("data-retry-in-value",null),o.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return u("offline-ui-reconnect-failed-2s",2),u("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return u("offline-ui-reconnect-succeeded-2s",2),u("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?l():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",l,!1):(t=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&l(),"function"==typeof t?t.apply(null,arguments):void 0})}.call(this),function(e,n,t,r){"use strict";function o(e,n,t){return setTimeout(l(e,t),n)}function a(e,n,t){return Array.isArray(e)?(i(e,t[n],t),!0):!1}function i(e,n,t){var o;if(e)if(e.forEach)e.forEach(n,t);else if(e.length!==r)for(o=0;o<e.length;)n.call(t,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&n.call(t,e[o],o,e)}function u(n,t,r){var o="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace"),r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=e.console&&(e.console.warn||e.console.log);return a&&a.call(e.console,o,r),n.apply(this,arguments)}}function c(e,n,t){var r,o=n.prototype;r=e.prototype=Object.create(o),r.constructor=e,r._super=o,t&&fe(r,t)}function l(e,n){return function(){return e.apply(n,arguments)}}function s(e,n){return typeof e==me?e.apply(n?n[0]||r:r,n):e}function f(e,n){return e===r?n:e}function d(e,n,t){i(p(n),function(n){e.addEventListener(n,t,!1)})}function v(e,n,t){i(p(n),function(n){e.removeEventListener(n,t,!1)})}function m(e,n){for(;e;){if(e==n)return!0;e=e.parentNode}return!1}function h(e,n){return e.indexOf(n)>-1}function p(e){return e.trim().split(/\s+/g)}function g(e,n,t){if(e.indexOf&&!t)return e.indexOf(n);for(var r=0;r<e.length;){if(t&&e[r][t]==n||!t&&e[r]===n)return r;r++}return-1}function w(e){return Array.prototype.slice.call(e,0)}function _(e,n,t){for(var r=[],o=[],a=0;a<e.length;){var i=n?e[a][n]:e[a];g(o,i)<0&&r.push(e[a]),o[a]=i,a++}return t&&(r=n?r.sort(function(e,t){return e[n]>t[n]}):r.sort()),r}function $(e,n){for(var t,o,a=n[0].toUpperCase()+n.slice(1),i=0;i<de.length;){if(t=de[i],o=t?t+a:n,o in e)return o;i++}return r}function C(){return $e++}function S(n){var t=n.ownerDocument||n;return t.defaultView||t.parentWindow||e}function y(e,n){var t=this;this.manager=e,this.callback=n,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(n){s(e.options.enable,[e])&&t.handler(n)},this.init()}function P(e){var n,t=e.options.inputClass;return new(n=t?t:ye?k:Pe?B:Se?z:R)(e,T)}function T(e,n,t){var r=t.pointers.length,o=t.changedPointers.length,a=n&Ae&&r-o===0,i=n&(De|Me)&&r-o===0;t.isFirst=!!a,t.isFinal=!!i,a&&(e.session={}),t.eventType=n,b(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function b(e,n){var t=e.session,r=n.pointers,o=r.length;t.firstInput||(t.firstInput=F(n)),o>1&&!t.firstMultiple?t.firstMultiple=F(n):1===o&&(t.firstMultiple=!1);var a=t.firstInput,i=t.firstMultiple,u=i?i.center:a.center,c=n.center=A(r);n.timeStamp=ge(),n.deltaTime=n.timeStamp-a.timeStamp,n.angle=L(u,c),n.distance=M(u,c),E(t,n),n.offsetDirection=D(n.deltaX,n.deltaY);var l=N(n.deltaTime,n.deltaX,n.deltaY);n.overallVelocityX=l.x,n.overallVelocityY=l.y,n.overallVelocity=pe(l.x)>pe(l.y)?l.x:l.y,n.scale=i?I(i.pointers,r):1,n.rotation=i?O(i.pointers,r):0,n.maxPointers=t.prevInput?n.pointers.length>t.prevInput.maxPointers?n.pointers.length:t.prevInput.maxPointers:n.pointers.length,x(t,n);var s=e.element;m(n.srcEvent.target,s)&&(s=n.srcEvent.target),n.target=s}function E(e,n){var t=n.center,r=e.offsetDelta||{},o=e.prevDelta||{},a=e.prevInput||{};(n.eventType===Ae||a.eventType===De)&&(o=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:t.x,y:t.y}),n.deltaX=o.x+(t.x-r.x),n.deltaY=o.y+(t.y-r.y)}function x(e,n){var t,o,a,i,u=e.lastInterval||n,c=n.timeStamp-u.timeStamp;if(n.eventType!=Me&&(c>Fe||u.velocity===r)){var l=n.deltaX-u.deltaX,s=n.deltaY-u.deltaY,f=N(c,l,s);o=f.x,a=f.y,t=pe(f.x)>pe(f.y)?f.x:f.y,i=D(l,s),e.lastInterval=n}else t=u.velocity,o=u.velocityX,a=u.velocityY,i=u.direction;n.velocity=t,n.velocityX=o,n.velocityY=a,n.direction=i}function F(e){for(var n=[],t=0;t<e.pointers.length;)n[t]={clientX:he(e.pointers[t].clientX),clientY:he(e.pointers[t].clientY)},t++;return{timeStamp:ge(),pointers:n,center:A(n),deltaX:e.deltaX,deltaY:e.deltaY}}function A(e){var n=e.length;if(1===n)return{x:he(e[0].clientX),y:he(e[0].clientY)};for(var t=0,r=0,o=0;n>o;)t+=e[o].clientX,r+=e[o].clientY,o++;return{x:he(t/n),y:he(r/n)}}function N(e,n,t){return{x:n/e||0,y:t/e||0}}function D(e,n){return e===n?Le:pe(e)>=pe(n)?0>e?Oe:Ie:0>n?Re:ke}function M(e,n,t){t||(t=Je);var r=n[t[0]]-e[t[0]],o=n[t[1]]-e[t[1]];return Math.sqrt(r*r+o*o)}function L(e,n,t){t||(t=Je);var r=n[t[0]]-e[t[0]],o=n[t[1]]-e[t[1]];return 180*Math.atan2(o,r)/Math.PI}function O(e,n){return L(n[1],n[0],ze)+L(e[1],e[0],ze)}function I(e,n){return M(n[0],n[1],ze)/M(e[0],e[1],ze)}function R(){this.evEl=We,this.evWin=je,this.pressed=!1,y.apply(this,arguments)}function k(){this.evEl=Ze,this.evWin=Xe,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Ye,this.evWin=Qe,this.started=!1,y.apply(this,arguments)}function G(e,n){var t=w(e.touches),r=w(e.changedTouches);return n&(De|Me)&&(t=_(t.concat(r),"identifier",!0)),[t,r]}function B(){this.evTarget=nn,this.targetIds={},y.apply(this,arguments)}function J(e,n){var t=w(e.touches),r=this.targetIds;if(n&(Ae|Ne)&&1===t.length)return r[t[0].identifier]=!0,[t,t];var o,a,i=w(e.changedTouches),u=[],c=this.target;if(a=t.filter(function(e){return m(e.target,c)}),n===Ae)for(o=0;o<a.length;)r[a[o].identifier]=!0,o++;for(o=0;o<i.length;)r[i[o].identifier]&&u.push(i[o]),n&(De|Me)&&delete r[i[o].identifier],o++;return u.length?[_(a.concat(u),"identifier",!0),u]:void 0}function z(){y.apply(this,arguments);var e=l(this.handler,this);this.touch=new B(this.manager,e),this.mouse=new R(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function H(e,n){e&Ae?(this.primaryTouch=n.changedPointers[0].identifier,W.call(this,n)):e&(De|Me)&&W.call(this,n)}function W(e){var n=e.changedPointers[0];if(n.identifier===this.primaryTouch){var t={x:n.clientX,y:n.clientY};this.lastTouches.push(t);var r=this.lastTouches,o=function(){var e=r.indexOf(t);e>-1&&r.splice(e,1)};setTimeout(o,tn)}}function j(e){for(var n=e.srcEvent.clientX,t=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],a=Math.abs(n-o.x),i=Math.abs(t-o.y);if(rn>=a&&rn>=i)return!0}return!1}function q(e,n){this.manager=e,this.set(n)}function V(e){if(h(e,sn))return sn;var n=h(e,fn),t=h(e,dn);return n&&t?sn:n||t?n?fn:dn:h(e,ln)?ln:cn}function Z(){if(!an)return!1;var n={},t=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){n[r]=t?e.CSS.supports("touch-action",r):!0}),n}function X(e){this.options=fe({},this.defaults,e||{}),this.id=C(),this.manager=null,this.options.enable=f(this.options.enable,!0),this.state=mn,this.simultaneous={},this.requireFail=[]}function K(e){return e&_n?"cancel":e&gn?"end":e&pn?"move":e&hn?"start":""}function Y(e){return e==ke?"down":e==Re?"up":e==Oe?"left":e==Ie?"right":""}function Q(e,n){var t=n.manager;return t?t.get(e):e}function ee(){X.apply(this,arguments)}function ne(){ee.apply(this,arguments),this.pX=null,this.pY=null}function te(){ee.apply(this,arguments)}function re(){X.apply(this,arguments),this._timer=null,this._input=null}function oe(){ee.apply(this,arguments)}function ae(){ee.apply(this,arguments)}function ie(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ue(e,n){return n=n||{},n.recognizers=f(n.recognizers,ue.defaults.preset),new ce(e,n)}function ce(e,n){this.options=fe({},ue.defaults,n||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=P(this),this.touchAction=new q(this,this.options.touchAction),le(this,!0),i(this.options.recognizers,function(e){var n=this.add(new e[0](e[1]));e[2]&&n.recognizeWith(e[2]),e[3]&&n.requireFailure(e[3])},this)}function le(e,n){var t=e.element;if(t.style){var r;i(e.options.cssProps,function(o,a){r=$(t.style,a),n?(e.oldCssProps[r]=t.style[r],t.style[r]=o):t.style[r]=e.oldCssProps[r]||""}),n||(e.oldCssProps={})}}function se(e,t){var r=n.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}var fe,de=["","webkit","Moz","MS","ms","o"],ve=n.createElement("div"),me="function",he=Math.round,pe=Math.abs,ge=Date.now;fe="function"!=typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1;t<arguments.length;t++){var o=arguments[t];if(o!==r&&null!==o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n}:Object.assign;var we=u(function(e,n,t){for(var o=Object.keys(n),a=0;a<o.length;)(!t||t&&e[o[a]]===r)&&(e[o[a]]=n[o[a]]),a++;return e},"extend","Use `assign`."),_e=u(function(e,n){return we(e,n,!0)},"merge","Use `assign`."),$e=1,Ce=/mobile|tablet|ip(ad|hone|od)|android/i,Se="ontouchstart"in e,ye=$(e,"PointerEvent")!==r,Pe=Se&&Ce.test(navigator.userAgent),Te="touch",be="pen",Ee="mouse",xe="kinect",Fe=25,Ae=1,Ne=2,De=4,Me=8,Le=1,Oe=2,Ie=4,Re=8,ke=16,Ue=Oe|Ie,Ge=Re|ke,Be=Ue|Ge,Je=["x","y"],ze=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(S(this.element),this.evWin,this.domHandler)}};var He={mousedown:Ae,mousemove:Ne,mouseup:De},We="mousedown",je="mousemove mouseup";c(R,y,{handler:function(e){var n=He[e.type];n&Ae&&0===e.button&&(this.pressed=!0),n&Ne&&1!==e.which&&(n=De),this.pressed&&(n&De&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[e],changedPointers:[e],pointerType:Ee,srcEvent:e}))}});var qe={pointerdown:Ae,pointermove:Ne,pointerup:De,pointercancel:Me,pointerout:Me},Ve={2:Te,3:be,4:Ee,5:xe},Ze="pointerdown",Xe="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ze="MSPointerDown",Xe="MSPointerMove MSPointerUp MSPointerCancel"),c(k,y,{handler:function(e){var n=this.store,t=!1,r=e.type.toLowerCase().replace("ms",""),o=qe[r],a=Ve[e.pointerType]||e.pointerType,i=a==Te,u=g(n,e.pointerId,"pointerId");o&Ae&&(0===e.button||i)?0>u&&(n.push(e),u=n.length-1):o&(De|Me)&&(t=!0),0>u||(n[u]=e,this.callback(this.manager,o,{pointers:n,changedPointers:[e],pointerType:a,srcEvent:e}),t&&n.splice(u,1))}});var Ke={touchstart:Ae,touchmove:Ne,touchend:De,touchcancel:Me},Ye="touchstart",Qe="touchstart touchmove touchend touchcancel";c(U,y,{handler:function(e){var n=Ke[e.type];if(n===Ae&&(this.started=!0),this.started){var t=G.call(this,e,n);n&(De|Me)&&t[0].length-t[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:t[0],changedPointers:t[1],pointerType:Te,srcEvent:e})}}});var en={touchstart:Ae,touchmove:Ne,touchend:De,touchcancel:Me},nn="touchstart touchmove touchend touchcancel";c(B,y,{handler:function(e){var n=en[e.type],t=J.call(this,e,n);t&&this.callback(this.manager,n,{pointers:t[0],changedPointers:t[1],pointerType:Te,srcEvent:e})}});var tn=2500,rn=25;c(z,y,{handler:function(e,n,t){var r=t.pointerType==Te,o=t.pointerType==Ee;if(!(o&&t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents)){if(r)H.call(this,n,t);else if(o&&j.call(this,t))return;this.callback(e,n,t)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var on=$(ve.style,"touchAction"),an=on!==r,un="compute",cn="auto",ln="manipulation",sn="none",fn="pan-x",dn="pan-y",vn=Z();q.prototype={set:function(e){e==un&&(e=this.compute()),an&&this.manager.element.style&&vn[e]&&(this.manager.element.style[on]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return i(this.manager.recognizers,function(n){s(n.options.enable,[n])&&(e=e.concat(n.getTouchAction()))}),V(e.join(" "))},preventDefaults:function(e){var n=e.srcEvent,t=e.offsetDirection;if(this.manager.session.prevented)return void n.preventDefault();var r=this.actions,o=h(r,sn)&&!vn[sn],a=h(r,dn)&&!vn[dn],i=h(r,fn)&&!vn[fn];if(o){var u=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(u&&c&&l)return}return i&&a?void 0:o||a&&t&Ue||i&&t&Ge?this.preventSrc(n):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var mn=1,hn=2,pn=4,gn=8,wn=gn,_n=16,$n=32;X.prototype={defaults:{},set:function(e){return fe(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(a(e,"recognizeWith",this))return this;var n=this.simultaneous;return e=Q(e,this),n[e.id]||(n[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return a(e,"dropRecognizeWith",this)?this:(e=Q(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(a(e,"requireFailure",this))return this;var n=this.requireFail;return e=Q(e,this),-1===g(n,e)&&(n.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(a(e,"dropRequireFailure",this))return this;e=Q(e,this);var n=g(this.requireFail,e);return n>-1&&this.requireFail.splice(n,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function n(n){t.manager.emit(n,e)}var t=this,r=this.state;gn>r&&n(t.options.event+K(r)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),r>=gn&&n(t.options.event+K(r))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=$n)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&($n|mn)))return!1;e++}return!0},recognize:function(e){var n=fe({},e);return s(this.options.enable,[this,n])?(this.state&(wn|_n|$n)&&(this.state=mn),this.state=this.process(n),void(this.state&(hn|pn|gn|_n)&&this.tryEmit(n))):(this.reset(),void(this.state=$n))},process:function(e){},getTouchAction:function(){},reset:function(){}},c(ee,X,{defaults:{pointers:1},attrTest:function(e){var n=this.options.pointers;return 0===n||e.pointers.length===n},process:function(e){var n=this.state,t=e.eventType,r=n&(hn|pn),o=this.attrTest(e);return r&&(t&Me||!o)?n|_n:r||o?t&De?n|gn:n&hn?n|pn:hn:$n}}),c(ne,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:Be},getTouchAction:function(){var e=this.options.direction,n=[];return e&Ue&&n.push(dn),e&Ge&&n.push(fn),n},directionTest:function(e){var n=this.options,t=!0,r=e.distance,o=e.direction,a=e.deltaX,i=e.deltaY;return o&n.direction||(n.direction&Ue?(o=0===a?Le:0>a?Oe:Ie,t=a!=this.pX,r=Math.abs(e.deltaX)):(o=0===i?Le:0>i?Re:ke,t=i!=this.pY,r=Math.abs(e.deltaY))),e.direction=o,t&&r>n.threshold&&o&n.direction},attrTest:function(e){return ee.prototype.attrTest.call(this,e)&&(this.state&hn||!(this.state&hn)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var n=Y(e.direction);n&&(e.additionalEvent=this.options.event+n),this._super.emit.call(this,e)}}),c(te,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[sn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&hn)},emit:function(e){if(1!==e.scale){var n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}this._super.emit.call(this,e)}}),c(re,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[cn]},process:function(e){var n=this.options,t=e.pointers.length===n.pointers,r=e.distance<n.threshold,a=e.deltaTime>n.time;if(this._input=e,!r||!t||e.eventType&(De|Me)&&!a)this.reset();else if(e.eventType&Ae)this.reset(),this._timer=o(function(){this.state=wn,this.tryEmit()},n.time,this);else if(e.eventType&De)return wn;return $n},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===wn&&(e&&e.eventType&De?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ge(),this.manager.emit(this.options.event,this._input)))}}),c(oe,ee,{defaults:{event:"rotate",threshold:0,
pointers:2},getTouchAction:function(){return[sn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&hn)}}),c(ae,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ue|Ge,pointers:1},getTouchAction:function(){return ne.prototype.getTouchAction.call(this)},attrTest:function(e){var n,t=this.options.direction;return t&(Ue|Ge)?n=e.overallVelocity:t&Ue?n=e.overallVelocityX:t&Ge&&(n=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&pe(n)>this.options.velocity&&e.eventType&De},emit:function(e){var n=Y(e.offsetDirection);n&&this.manager.emit(this.options.event+n,e),this.manager.emit(this.options.event,e)}}),c(ie,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ln]},process:function(e){var n=this.options,t=e.pointers.length===n.pointers,r=e.distance<n.threshold,a=e.deltaTime<n.time;if(this.reset(),e.eventType&Ae&&0===this.count)return this.failTimeout();if(r&&a&&t){if(e.eventType!=De)return this.failTimeout();var i=this.pTime?e.timeStamp-this.pTime<n.interval:!0,u=!this.pCenter||M(this.pCenter,e.center)<n.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,u&&i?this.count+=1:this.count=1,this._input=e;var c=this.count%n.taps;if(0===c)return this.hasRequireFailures()?(this._timer=o(function(){this.state=wn,this.tryEmit()},n.interval,this),hn):wn}return $n},failTimeout:function(){return this._timer=o(function(){this.state=$n},this.options.interval,this),$n},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==wn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ue.VERSION="2.0.7",ue.defaults={domEvents:!1,touchAction:un,enable:!0,inputTarget:null,inputClass:null,preset:[[oe,{enable:!1}],[te,{enable:!1},["rotate"]],[ae,{direction:Ue}],[ne,{direction:Ue},["swipe"]],[ie],[ie,{event:"doubletap",taps:2},["tap"]],[re]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Cn=1,Sn=2;ce.prototype={set:function(e){return fe(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?Sn:Cn},recognize:function(e){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(e);var t,r=this.recognizers,o=n.curRecognizer;(!o||o&&o.state&wn)&&(o=n.curRecognizer=null);for(var a=0;a<r.length;)t=r[a],n.stopped===Sn||o&&t!=o&&!t.canRecognizeWith(o)?t.reset():t.recognize(e),!o&&t.state&(hn|pn|gn)&&(o=n.curRecognizer=t),a++}},get:function(e){if(e instanceof X)return e;for(var n=this.recognizers,t=0;t<n.length;t++)if(n[t].options.event==e)return n[t];return null},add:function(e){if(a(e,"add",this))return this;var n=this.get(e.options.event);return n&&this.remove(n),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(a(e,"remove",this))return this;if(e=this.get(e)){var n=this.recognizers,t=g(n,e);-1!==t&&(n.splice(t,1),this.touchAction.update())}return this},on:function(e,n){if(e!==r&&n!==r){var t=this.handlers;return i(p(e),function(e){t[e]=t[e]||[],t[e].push(n)}),this}},off:function(e,n){if(e!==r){var t=this.handlers;return i(p(e),function(e){n?t[e]&&t[e].splice(g(t[e],n),1):delete t[e]}),this}},emit:function(e,n){this.options.domEvents&&se(e,n);var t=this.handlers[e]&&this.handlers[e].slice();if(t&&t.length){n.type=e,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var r=0;r<t.length;)t[r](n),r++}},destroy:function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},fe(ue,{INPUT_START:Ae,INPUT_MOVE:Ne,INPUT_END:De,INPUT_CANCEL:Me,STATE_POSSIBLE:mn,STATE_BEGAN:hn,STATE_CHANGED:pn,STATE_ENDED:gn,STATE_RECOGNIZED:wn,STATE_CANCELLED:_n,STATE_FAILED:$n,DIRECTION_NONE:Le,DIRECTION_LEFT:Oe,DIRECTION_RIGHT:Ie,DIRECTION_UP:Re,DIRECTION_DOWN:ke,DIRECTION_HORIZONTAL:Ue,DIRECTION_VERTICAL:Ge,DIRECTION_ALL:Be,Manager:ce,Input:y,TouchAction:q,TouchInput:B,MouseInput:R,PointerEventInput:k,TouchMouseInput:z,SingleTouchInput:U,Recognizer:X,AttrRecognizer:ee,Tap:ie,Pan:ne,Swipe:ae,Pinch:te,Rotate:oe,Press:re,on:d,off:v,each:i,merge:_e,extend:we,assign:fe,inherit:c,bindFn:l,prefixed:$});var yn="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};yn.Hammer=ue,"function"==typeof define&&define.amd?define(function(){return ue}):"undefined"!=typeof module&&module.exports?module.exports=ue:e[t]=ue}(window,document,"Hammer");